/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.17.1.
 * Original file: /npm/ag-grid-enterprise@29.3.5/dist/ag-grid-enterprise.auto.esm.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{PreConstruct,Bean,BeanStub,Autowired,RefSelector,PostConstruct,Component,ModuleNames,_,Events,ChangedPath,Optional,CsvExportModule,KeyCode,Column,ProvidedColumnGroup,AgMenuList,AgMenuItemComponent,AgCheckbox,CssClassApplier,DragSourceType,DragAndDropService,TouchListener,AutoScrollService,VirtualList,PreDestroy,NumberSequence,RowNode,ManagedFocusFeature,PositionableFeature,AgSelect,AgPromise,TabGuardComp,AgInputTextField,ModuleRegistry,ExcelFactoryMode,RowType,BaseGridSerializingSession,Downloader,BaseCreator,GridSerializer,CsvCreator,AgGroupComponent,CellRangeType,AgAbstractField,AgRadioButton,AgToggleButton,AgAbstractLabel,AgSlider,TabbedLayout,CHART_TOOLBAR_ALLOW_LIST,CHART_TOOL_PANEL_ALLOW_LIST,CHART_TOOL_PANEL_MENU_OPTIONS,AgPanel,AgDialog,CellCtrl,SelectionHandleType,AgPickerField,Grid,ProvidedFilter,PopupComponent,RowNodeBlock,ServerSideTransactionResultStatus,RowNodeBlockLoader,GROUP_AUTO_COLUMN_ID,AllCommunityModules,XmlFactory,ZipContainer,DEFAULT_CHART_GROUPS,EventService,TextFilter}from"/npm/ag-grid-community@29.3.5/+esm";export*from"/npm/ag-grid-community@29.3.5/+esm";
/**
          * @ag-grid-enterprise/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v29.3.5
          * @link https://www.ag-grid.com/
          * @license Commercial
          */var MD5=function(){function e(){this.ieCompatibility=false}e.prototype.init=function(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"};e.prototype.md5cycle=function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];r=this.ff(r,n,i,o,t[0],7,-680876936);o=this.ff(o,r,n,i,t[1],12,-389564586);i=this.ff(i,o,r,n,t[2],17,606105819);n=this.ff(n,i,o,r,t[3],22,-1044525330);r=this.ff(r,n,i,o,t[4],7,-176418897);o=this.ff(o,r,n,i,t[5],12,1200080426);i=this.ff(i,o,r,n,t[6],17,-1473231341);n=this.ff(n,i,o,r,t[7],22,-45705983);r=this.ff(r,n,i,o,t[8],7,1770035416);o=this.ff(o,r,n,i,t[9],12,-1958414417);i=this.ff(i,o,r,n,t[10],17,-42063);n=this.ff(n,i,o,r,t[11],22,-1990404162);r=this.ff(r,n,i,o,t[12],7,1804603682);o=this.ff(o,r,n,i,t[13],12,-40341101);i=this.ff(i,o,r,n,t[14],17,-1502002290);n=this.ff(n,i,o,r,t[15],22,1236535329);r=this.gg(r,n,i,o,t[1],5,-165796510);o=this.gg(o,r,n,i,t[6],9,-1069501632);i=this.gg(i,o,r,n,t[11],14,643717713);n=this.gg(n,i,o,r,t[0],20,-373897302);r=this.gg(r,n,i,o,t[5],5,-701558691);o=this.gg(o,r,n,i,t[10],9,38016083);i=this.gg(i,o,r,n,t[15],14,-660478335);n=this.gg(n,i,o,r,t[4],20,-405537848);r=this.gg(r,n,i,o,t[9],5,568446438);o=this.gg(o,r,n,i,t[14],9,-1019803690);i=this.gg(i,o,r,n,t[3],14,-187363961);n=this.gg(n,i,o,r,t[8],20,1163531501);r=this.gg(r,n,i,o,t[13],5,-1444681467);o=this.gg(o,r,n,i,t[2],9,-51403784);i=this.gg(i,o,r,n,t[7],14,1735328473);n=this.gg(n,i,o,r,t[12],20,-1926607734);r=this.hh(r,n,i,o,t[5],4,-378558);o=this.hh(o,r,n,i,t[8],11,-2022574463);i=this.hh(i,o,r,n,t[11],16,1839030562);n=this.hh(n,i,o,r,t[14],23,-35309556);r=this.hh(r,n,i,o,t[1],4,-1530992060);o=this.hh(o,r,n,i,t[4],11,1272893353);i=this.hh(i,o,r,n,t[7],16,-155497632);n=this.hh(n,i,o,r,t[10],23,-1094730640);r=this.hh(r,n,i,o,t[13],4,681279174);o=this.hh(o,r,n,i,t[0],11,-358537222);i=this.hh(i,o,r,n,t[3],16,-722521979);n=this.hh(n,i,o,r,t[6],23,76029189);r=this.hh(r,n,i,o,t[9],4,-640364487);o=this.hh(o,r,n,i,t[12],11,-421815835);i=this.hh(i,o,r,n,t[15],16,530742520);n=this.hh(n,i,o,r,t[2],23,-995338651);r=this.ii(r,n,i,o,t[0],6,-198630844);o=this.ii(o,r,n,i,t[7],10,1126891415);i=this.ii(i,o,r,n,t[14],15,-1416354905);n=this.ii(n,i,o,r,t[5],21,-57434055);r=this.ii(r,n,i,o,t[12],6,1700485571);o=this.ii(o,r,n,i,t[3],10,-1894986606);i=this.ii(i,o,r,n,t[10],15,-1051523);n=this.ii(n,i,o,r,t[1],21,-2054922799);r=this.ii(r,n,i,o,t[8],6,1873313359);o=this.ii(o,r,n,i,t[15],10,-30611744);i=this.ii(i,o,r,n,t[6],15,-1560198380);n=this.ii(n,i,o,r,t[13],21,1309151649);r=this.ii(r,n,i,o,t[4],6,-145523070);o=this.ii(o,r,n,i,t[11],10,-1120210379);i=this.ii(i,o,r,n,t[2],15,718787259);n=this.ii(n,i,o,r,t[9],21,-343485551);e[0]=this.add32(r,e[0]);e[1]=this.add32(n,e[1]);e[2]=this.add32(i,e[2]);e[3]=this.add32(o,e[3])};e.prototype.cmn=function(e,t,r,n,i,o){t=this.add32(this.add32(t,e),this.add32(n,o));return this.add32(t<<i|t>>>32-i,r)};e.prototype.ff=function(e,t,r,n,i,o,a){return this.cmn(t&r|~t&n,e,t,i,o,a)};e.prototype.gg=function(e,t,r,n,i,o,a){return this.cmn(t&n|r&~n,e,t,i,o,a)};e.prototype.hh=function(e,t,r,n,i,o,a){return this.cmn(t^r^n,e,t,i,o,a)};e.prototype.ii=function(e,t,r,n,i,o,a){return this.cmn(r^(t|~n),e,t,i,o,a)};e.prototype.md51=function(e){var t=e.length;var r=[1732584193,-271733879,-1732584194,271733878];var n;for(n=64;n<=e.length;n+=64){this.md5cycle(r,this.md5blk(e.substring(n-64,n)))}e=e.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++){i[n>>2]|=e.charCodeAt(n)<<(n%4<<3)}i[n>>2]|=128<<(n%4<<3);if(n>55){this.md5cycle(r,i);for(n=0;n<16;n++){i[n]=0}}i[14]=t*8;this.md5cycle(r,i);return r};e.prototype.md5blk=function(e){var t=[];for(var r=0;r<64;r+=4){t[r>>2]=e.charCodeAt(r)+(e.charCodeAt(r+1)<<8)+(e.charCodeAt(r+2)<<16)+(e.charCodeAt(r+3)<<24)}return t};e.prototype.rhex=function(e){var t="0123456789abcdef".split("");var r="",n=0;for(;n<4;n++){r+=t[e>>n*8+4&15]+t[e>>n*8&15]}return r};e.prototype.hex=function(e){for(var t=0;t<e.length;t++){e[t]=this.rhex(e[t])}return e.join("")};e.prototype.md5=function(e){return this.hex(this.md51(e))};e.prototype.add32=function(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)};e.prototype.add32Std=function(e,t){return e+t&4294967295};e.prototype.add32Compat=function(e,t){var r=(e&65535)+(t&65535),n=(e>>16)+(t>>16)+(r>>16);return n<<16|r&65535};return e}();var __read$1c=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};function missingOrEmpty(e){return e==null||e.length===0}function exists(e,t){if(t===void 0){t=false}return e!=null&&(e!==""||t)}var LicenseManager=function(){function e(e){this.watermarkMessage=undefined;this.document=e;this.md5=new MD5;this.md5.init()}e.prototype.validateLicense=function(){if(missingOrEmpty(e.licenseKey)){if(!this.isWebsiteUrl()){this.outputMissingLicenseKey()}}else if(e.licenseKey.length>32){if(e.licenseKey.indexOf("For_Trialing_ag-Grid_Only")!==-1){this.outputInvalidLicenseKey()}else{var t=e.extractLicenseComponents(e.licenseKey),r=t.md5,n=t.license,i=t.version,o=t.isTrial;if(r===this.md5.md5(n)){if(exists(i)&&i){this.validateLicenseKeyForVersion(i,!!o,n)}else{this.validateLegacyKey(n)}}else{this.outputInvalidLicenseKey()}}}else{this.outputInvalidLicenseKey()}};e.extractExpiry=function(t){var r=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(e.decode(r),10))};e.extractLicenseComponents=function(t){var r=t.replace(/[\u200B-\u200D\uFEFF]/g,"");r=r.replace(/\r?\n|\r/g,"");var n=r.length-32;var i=r.substring(n);var o=r.substring(0,n);var a=__read$1c(e.extractBracketedInformation(r),2),s=a[0],l=a[1];return{md5:i,license:o,version:s,isTrial:l}};e.prototype.getLicenseDetails=function(t){var r=e.extractLicenseComponents(t),n=r.md5,i=r.license,o=r.version,a=r.isTrial;var s=n===this.md5.md5(i)&&t.indexOf("For_Trialing_ag-Grid_Only")===-1;var l=null;var u=null;if(s){u=e.extractExpiry(i);s=!isNaN(u.getTime());if(a){var c=new Date;l=u<c}}return{licenseKey:t,valid:s,expiry:s?e.formatDate(u):null,version:o?o:"legacy",isTrial:a,trialExpired:l}};e.prototype.isDisplayWatermark=function(){return!this.isLocalhost()&&!this.isWebsiteUrl()&&!missingOrEmpty(this.watermarkMessage)};e.prototype.getWatermarkMessage=function(){return this.watermarkMessage||""};e.prototype.getHostname=function(){var e=this.document.defaultView||window;var t=e.location;var r=t.hostname,n=r===void 0?"":r;return n};e.prototype.isWebsiteUrl=function(){var e=this.getHostname();return e.match(/^((?:\w+\.)?ag-grid\.com)$/)!==null};e.prototype.isLocalhost=function(){var e=this.getHostname();return e.match(/^(?:127\.0\.0\.1|localhost)$/)!==null};e.formatDate=function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"];var r=e.getDate();var n=e.getMonth();var i=e.getFullYear();return r+" "+t[n]+" "+i};e.getGridReleaseDate=function(){return new Date(parseInt(e.decode(e.RELEASE_INFORMATION),10))};e.decode=function(t){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var n="";var i,o,a;var s,l,u,c;var d=0;var p=t.replace(/[^A-Za-z0-9+/=]/g,"");while(d<p.length){s=r.indexOf(p.charAt(d++));l=r.indexOf(p.charAt(d++));u=r.indexOf(p.charAt(d++));c=r.indexOf(p.charAt(d++));i=s<<2|l>>4;o=(l&15)<<4|u>>2;a=(u&3)<<6|c;n=n+String.fromCharCode(i);if(u!=64){n=n+String.fromCharCode(o)}if(c!=64){n=n+String.fromCharCode(a)}}n=e.utf8_decode(n);return n};e.utf8_decode=function(e){e=e.replace(/rn/g,"n");var t="";for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<128){t+=String.fromCharCode(n)}else if(n>127&&n<2048){t+=String.fromCharCode(n>>6|192);t+=String.fromCharCode(n&63|128)}else{t+=String.fromCharCode(n>>12|224);t+=String.fromCharCode(n>>6&63|128);t+=String.fromCharCode(n&63|128)}}return t};e.setLicenseKey=function(e){this.licenseKey=e};e.extractBracketedInformation=function(e){var t=e.split("[").filter((function(e){return e.indexOf("]")>-1})).map((function(e){return e.split("]")[0]}));if(!t||t.length===0){return[null,null]}var r=t.filter((function(e){return e==="TRIAL"})).length===1;var n=t.filter((function(e){return e.indexOf("v")===0})).map((function(e){return e.replace(/^v/,"")}))[0];return[n,r]};e.prototype.validateLicenseKeyForVersion=function(e,t,r){if(e!=="2"){return}if(t){this.validateForTrial(r)}else{this.validateLegacyKey(r)}};e.prototype.validateLegacyKey=function(t){var r=e.getGridReleaseDate();var n=e.extractExpiry(t);var i=false;var o=false;if(!isNaN(n.getTime())){i=true;o=r<n}if(!i){this.outputInvalidLicenseKey()}else if(!o){var a=e.formatDate(n);var s=e.formatDate(r);this.outputIncompatibleVersion(a,s)}};e.prototype.validateForTrial=function(t){var r=e.extractExpiry(t);var n=new Date;var i=false;var o=false;if(!isNaN(r.getTime())){i=true;o=r>n}if(!i){this.outputInvalidLicenseKey()}else if(!o){var a=e.formatDate(r);this.outputExpiredTrialKey(a)}};e.prototype.outputInvalidLicenseKey=function(){console.error("*****************************************************************************************************************");console.error("***************************************** AG Grid Enterprise License ********************************************");console.error("********************************************* Invalid License ***************************************************");console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *");console.error("*****************************************************************************************************************");console.error("*****************************************************************************************************************");this.watermarkMessage="Invalid License"};e.prototype.outputExpiredTrialKey=function(e){console.error("****************************************************************************************************************");console.error("***************************************** AG Grid Enterprise License *******************************************");console.error("*****************************************   Trial Period Expired.    *******************************************");console.error("* Your license for AG Grid Enterprise expired on "+e+".                                                *");console.error("* Please email info@ag-grid.com to purchase a license.                                                         *");console.error("****************************************************************************************************************");console.error("****************************************************************************************************************");this.watermarkMessage="Trial Period Expired"};e.prototype.outputMissingLicenseKey=function(){console.error("****************************************************************************************************************");console.error("***************************************** AG Grid Enterprise License *******************************************");console.error("****************************************** License Key Not Found ***********************************************");console.error("* All AG Grid Enterprise features are unlocked.                                                                *");console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *");console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *");console.error("****************************************************************************************************************");console.error("****************************************************************************************************************");this.watermarkMessage="For Trial Use Only"};e.prototype.outputIncompatibleVersion=function(e,t){console.error("****************************************************************************************************************************");console.error("****************************************************************************************************************************");console.error("*                                             AG Grid Enterprise License                                                   *");console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *");console.error("*                                                                                                                          *");console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *");console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *");console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *");console.error("* license end date. The license key that you have expires on "+e+", however the version of AG Grid you    *");console.error("* are trying to use was released on "+t+".                                                               *");console.error("*                                                                                                                          *");console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *");console.error("* version of AG Grid.                                                                                                      *");console.error("****************************************************************************************************************************");console.error("****************************************************************************************************************************");this.watermarkMessage="License Expired"};e.RELEASE_INFORMATION="MTY4Mzg5NTUzNDI5OA==";return e}();var __extends$3l=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2w=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var GridLicenseManager=function(e){__extends$3l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.validateLicense=function(){this.licenseManager=new LicenseManager(this.gridOptionsService.getDocument());this.licenseManager.validateLicense()};t.getLicenseDetails=function(e){return new LicenseManager(null).getLicenseDetails(e)};t.prototype.isDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()};t.prototype.getWatermarkMessage=function(){return this.licenseManager.getWatermarkMessage()};t.setLicenseKey=function(e){LicenseManager.setLicenseKey(e)};__decorate$2w([PreConstruct],t.prototype,"validateLicense",null);t=__decorate$2w([Bean("licenseManager")],t);return t}(BeanStub);var __extends$3k=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2v=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var WatermarkComp=function(e){__extends$3k(t,e);function t(){return e.call(this,'<div class="ag-watermark">\n                    <div ref="eLicenseTextRef" class="ag-watermark-text"></div>\n               </div>')||this}t.prototype.postConstruct=function(){var e=this;var t=this.shouldDisplayWatermark();this.setDisplayed(t);if(t){this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage();window.setTimeout((function(){return e.addCssClass("ag-opacity-zero")}),0);window.setTimeout((function(){return e.setDisplayed(false)}),5e3)}};t.prototype.shouldDisplayWatermark=function(){var e=this.gridOptionsService.getDocument();var t=e.defaultView||window;var r=t.location;var n=r.pathname;var i=this.licenseManager.isDisplayWatermark();var o=n?n.indexOf("forceWatermark")!==-1:false;return o||i};__decorate$2v([Autowired("licenseManager")],t.prototype,"licenseManager",void 0);__decorate$2v([RefSelector("eLicenseTextRef")],t.prototype,"eLicenseTextRef",void 0);__decorate$2v([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var VERSION$i="29.3.5";var EnterpriseCoreModule={version:VERSION$i,moduleName:ModuleNames.EnterpriseCoreModule,beans:[GridLicenseManager],agStackComponents:[{componentName:"AgWatermark",componentClass:WatermarkComp}]};var __extends$3j=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2u=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __values$D=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var SOURCE_PASTE="paste";var EXPORT_TYPE_DRAG_COPY="dragCopy";var EXPORT_TYPE_CLIPBOARD="clipboard";var CellClearType;(function(e){e[e["CellRange"]=0]="CellRange";e[e["SelectedRows"]=1]="SelectedRows";e[e["FocusedCell"]=2]="FocusedCell"})(CellClearType||(CellClearType={}));var ClipboardService=function(e){__extends$3j(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.lastPasteOperationTime=0;t.navigatorApiFailed=false;return t}r=t;t.prototype.init=function(){var e=this;this.logger=this.loggerFactory.create("ClipboardService");if(this.rowModel.getType()==="clientSide"){this.clientSideRowModel=this.rowModel}this.ctrlsService.whenReady((function(t){e.gridCtrl=t.gridCtrl}))};t.prototype.pasteFromClipboard=function(){var e=this;this.logger.log("pasteFromClipboard");var t=!this.gridOptionsService.is("suppressClipboardApi");if(t&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText){navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch((function(t){_.doOnce((function(){console.warn(t);console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.readText()). "+"The reason why it could not be used has been logged in the previous line. "+"For this reason the grid has defaulted to using a workaround which doesn't perform as well. "+"Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid "+"property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API")}),"clipboardApiError");e.navigatorApiFailed=true;e.pasteFromClipboardLegacy()}))}else{this.pasteFromClipboardLegacy()}};t.prototype.pasteFromClipboardLegacy=function(){var e=this;var t=false;var r=function(r){var n=(new Date).getTime();if(n-e.lastPasteOperationTime<50){t=true;r.preventDefault()}e.lastPasteOperationTime=n};this.executeOnTempElement((function(e){e.addEventListener("paste",r);e.focus({preventScroll:true})}),(function(n){var i=n.value;if(!t){e.processClipboardData(i)}else{e.refocusLastFocusedCell()}n.removeEventListener("paste",r)}))};t.prototype.refocusLastFocusedCell=function(){var e=this.focusService.getFocusedCell();if(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:true})}};t.prototype.getClipboardDelimiter=function(){var e=this.gridOptionsService.get("clipboardDelimiter");return _.exists(e)?e:"\t"};t.prototype.processClipboardData=function(e){var t=this;if(e==null){return}var n=r.stringToArray(e,this.getClipboardDelimiter());var i=this.gridOptionsService.getCallback("processDataFromClipboard");if(i){n=i({data:n})}if(n==null){return}if(this.gridOptionsService.is("suppressLastEmptyLineOnPaste")){this.removeLastLineIfBlank(n)}var o=function(e,r,i,o){var a=t.rangeService&&t.rangeService.isMoreThanOneCell();var s=a&&!t.hasOnlyOneValueToPaste(n);if(s){t.pasteIntoActiveRange(n,e,r,o)}else{t.pasteStartingFromFocusedCell(n,e,r,i,o)}};this.doPasteOperation(o)};t.stringToArray=function(e,t){if(t===void 0){t=","}var r=[];var n=function(e){return e==="\r"||e==="\n"};var i=false;if(e===""){return[[""]]}var o=function(o,u,c){var d=e[c-1];var p=e[c];var f=e[c+1];var h=function(){if(!r[o]){r[o]=[]}if(!r[o][u]){r[o][u]=""}};h();if(p==='"'){if(i){if(f==='"'){r[o][u]+='"';c++}else{i=false}return a=o,s=u,l=c,"continue"}else if(d===undefined||d===t||n(d)){i=true;return a=o,s=u,l=c,"continue"}}if(!i){if(p===t){u++;h();return a=o,s=u,l=c,"continue"}else if(n(p)){u=0;o++;h();if(p==="\r"&&f==="\n"){c++}return a=o,s=u,l=c,"continue"}}r[o][u]+=p;a=o;s=u;l=c};var a,s,l;for(var u=0,c=0,d=0;d<e.length;d++){o(u,c,d);u=a;c=s;d=l}return r};t.prototype.doPasteOperation=function(e){var t=this.gridOptionsService.api;var r=this.gridOptionsService.columnApi;var n="clipboard";this.eventService.dispatchEvent({type:Events.EVENT_PASTE_START,api:t,columnApi:r,source:n});var i;if(this.clientSideRowModel){var o=this.gridOptionsService.is("aggregateOnlyChangedColumns");i=new ChangedPath(o,this.clientSideRowModel.getRootNode())}var a={};var s=[];var l=this.focusService.getFocusedCell();e(a,s,l,i);if(i){this.clientSideRowModel.doAggregate(i)}this.rowRenderer.refreshCells();this.dispatchFlashCells(a);this.fireRowChanged(s);this.refocusLastFocusedCell();var u={type:Events.EVENT_PASTE_END,source:n};this.eventService.dispatchEvent(u)};t.prototype.pasteIntoActiveRange=function(e,t,r,n){var i=this;var o=this.getRangeSize()%e.length!=0;var a=0;var s=0;var l=function(l,u,c,d){var p=d-a>=e.length;if(p){if(o){return}a+=s;s=0}var f=e[d-a];r.push(u);var h=i.gridOptionsService.getCallback("processCellFromClipboard");c.forEach((function(e,r){if(!e.isCellEditable(u)||e.isSuppressPaste(u)){return}if(r>=f.length){r=r%f.length}var o=i.processCell(u,e,f[r],EXPORT_TYPE_DRAG_COPY,h);u.setDataValue(e,o,SOURCE_PASTE);if(n){n.addParentNode(u.parent,[e])}var a=l.rowIndex,s=l.rowPinned;var c=i.cellPositionUtils.createIdFromValues({rowIndex:a,column:e,rowPinned:s});t[c]=true}));s++};this.iterateActiveRanges(false,l)};t.prototype.pasteStartingFromFocusedCell=function(e,t,r,n,i){if(!n){return}var o={rowIndex:n.rowIndex,rowPinned:n.rowPinned};var a=this.columnModel.getDisplayedColumnsStartingAt(n.column);if(this.isPasteSingleValueIntoRange(e)){this.pasteSingleValueIntoRange(e,r,t,i)}else{this.pasteMultipleValues(e,o,r,a,t,EXPORT_TYPE_CLIPBOARD,i)}};t.prototype.isPasteSingleValueIntoRange=function(e){return this.hasOnlyOneValueToPaste(e)&&this.rangeService!=null&&!this.rangeService.isEmpty()};t.prototype.pasteSingleValueIntoRange=function(e,t,r,n){var i=this;var o=e[0][0];var a=function(e,a,s){t.push(a);s.forEach((function(e){return i.updateCellValue(a,e,o,r,EXPORT_TYPE_CLIPBOARD,n)}))};this.iterateActiveRanges(false,a)};t.prototype.hasOnlyOneValueToPaste=function(e){return e.length===1&&e[0].length===1};t.prototype.copyRangeDown=function(){var e=this;if(!this.rangeService||this.rangeService.isEmpty()){return}var t=[];var r=function(r,n,i,o){var a=e.gridOptionsService.getCallback("processCellForClipboard");var s=e.gridOptionsService.getCallback("processCellFromClipboard");var l=function(i,l,u){if(!t.length){u.forEach((function(r){var n=e.processCell(l,r,e.valueService.getValue(r,l),EXPORT_TYPE_DRAG_COPY,a);t.push(n)}))}else{n.push(l);u.forEach((function(n,a){if(!n.isCellEditable(l)||n.isSuppressPaste(l)){return}var u=e.processCell(l,n,t[a],EXPORT_TYPE_DRAG_COPY,s);l.setDataValue(n,u,SOURCE_PASTE);if(o){o.addParentNode(l.parent,[n])}var c=i.rowIndex,d=i.rowPinned;var p=e.cellPositionUtils.createIdFromValues({rowIndex:c,column:n,rowPinned:d});r[p]=true}))}};e.iterateActiveRanges(true,l)};this.doPasteOperation(r)};t.prototype.removeLastLineIfBlank=function(e){var t=_.last(e);var r=t&&t.length===1&&t[0]==="";if(r){if(e.length===1){return}_.removeFromArray(e,t)}};t.prototype.fireRowChanged=function(e){var t=this;if(this.gridOptionsService.get("editType")!=="fullRow"){return}e.forEach((function(e){var r={type:Events.EVENT_ROW_VALUE_CHANGED,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned};t.eventService.dispatchEvent(r)}))};t.prototype.pasteMultipleValues=function(e,t,r,n,i,o,a){var s=this;var l=t;var u=this.clientSideRowModel!=null&&!this.gridOptionsService.isTreeData();var c=function(){while(true){if(!l){return null}var e=s.rowPositionUtils.getRowNode(l);l=s.cellNavigationService.getRowBelow({rowPinned:l.rowPinned,rowIndex:l.rowIndex});if(e==null){return null}var t=e.detail||e.footer||u&&e.group;if(!t){return e}}};e.forEach((function(e){var t=c();if(!t){return}e.forEach((function(e,r){return s.updateCellValue(t,n[r],e,i,o,a)}));r.push(t)}))};t.prototype.updateCellValue=function(e,t,r,n,i,o){if(!e||!t||!t.isCellEditable(e)||t.isSuppressPaste(e)){return}var a=this.processCell(e,t,r,i,this.gridOptionsService.getCallback("processCellFromClipboard"));e.setDataValue(t,a,SOURCE_PASTE);var s=e.rowIndex,l=e.rowPinned;var u=this.cellPositionUtils.createIdFromValues({rowIndex:s,column:t,rowPinned:l});n[u]=true;if(o){o.addParentNode(e.parent,[t])}};t.prototype.copyToClipboard=function(e){if(e===void 0){e={}}this.copyOrCutToClipboard(e)};t.prototype.cutToClipboard=function(e){if(e===void 0){e={}}if(this.gridOptionsService.is("suppressCutToClipboard")){return}this.copyOrCutToClipboard(e,true)};t.prototype.copyOrCutToClipboard=function(e,t){var r=e.includeHeaders,n=e.includeGroupHeaders;this.logger.log("copyToClipboard: includeHeaders = "+r);if(r==null){r=this.gridOptionsService.is("copyHeadersToClipboard")}if(n==null){n=this.gridOptionsService.is("copyGroupHeadersToClipboard")}var i={includeHeaders:r,includeGroupHeaders:n};var o=!this.gridOptionsService.is("suppressCopyRowsToClipboard");var a=null;if(this.rangeService&&!this.rangeService.isEmpty()&&!this.shouldSkipSingleCellRange()){this.copySelectedRangeToClipboard(i);a=CellClearType.CellRange}else if(o&&!this.selectionService.isEmpty()){this.copySelectedRowsToClipboard(i);a=CellClearType.SelectedRows}else if(this.focusService.isAnyCellFocused()){this.copyFocusedCellToClipboard(i);a=CellClearType.FocusedCell}if(t&&a!==null){this.clearCellsAfterCopy(a)}};t.prototype.clearCellsAfterCopy=function(e){this.eventService.dispatchEvent({type:Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START});if(e===CellClearType.CellRange){this.rangeService.clearCellRangeCellValues(undefined,"clipboardService")}else if(e===CellClearType.SelectedRows){this.clearSelectedRows()}else{var t=this.focusService.getFocusedCell();if(t==null){return}var r=this.rowPositionUtils.getRowNode(t);if(r){this.clearCellValue(r,t.column)}}this.eventService.dispatchEvent({type:Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})};t.prototype.clearSelectedRows=function(){var e,t,r,n;var i=this.selectionService.getSelectedNodes();var o=this.columnModel.getAllDisplayedColumns();try{for(var a=__values$D(i),s=a.next();!s.done;s=a.next()){var l=s.value;try{for(var u=(r=void 0,__values$D(o)),c=u.next();!c.done;c=u.next()){var d=c.value;this.clearCellValue(l,d)}}catch(e){r={error:e}}finally{try{if(c&&!c.done&&(n=u.return))n.call(u)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{if(s&&!s.done&&(t=a.return))t.call(a)}finally{if(e)throw e.error}}};t.prototype.clearCellValue=function(e,t){if(!t.isCellEditable(e)){return}e.setDataValue(t,null,"clipboardService")};t.prototype.shouldSkipSingleCellRange=function(){return this.gridOptionsService.is("suppressCopySingleCellRanges")&&!this.rangeService.isMoreThanOneCell()};t.prototype.iterateActiveRanges=function(e,t,r){var n=this;if(!this.rangeService||this.rangeService.isEmpty()){return}var i=this.rangeService.getCellRanges();if(e){this.iterateActiveRange(i[0],t,r,true)}else{i.forEach((function(e,o){return n.iterateActiveRange(e,t,r,o===i.length-1)}))}};t.prototype.iterateActiveRange=function(e,t,r,n){if(!this.rangeService){return}var i=this.rangeService.getRangeStartRow(e);var o=this.rangeService.getRangeEndRow(e);if(r&&e.columns){r(e.columns)}var a=0;var s=false;while(!s&&i!=null){var l=this.rowPositionUtils.getRowNode(i);s=this.rowPositionUtils.sameRow(i,o);t(i,l,e.columns,a++,s&&n);i=this.cellNavigationService.getRowBelow(i)}};t.prototype.copySelectedRangeToClipboard=function(e){if(e===void 0){e={}}if(!this.rangeService||this.rangeService.isEmpty()){return}var t=this.rangeService.areAllRangesAbleToMerge();var r=t?this.buildDataFromMergedRanges(e):this.buildDataFromRanges(e),n=r.data,i=r.cellsToFlash;this.copyDataToClipboard(n);this.dispatchFlashCells(i)};t.prototype.buildDataFromMergedRanges=function(e){var t=this;var r=new Set;var n=this.rangeService.getCellRanges();var i=new Map;var o=[];var a={};n.forEach((function(e){e.columns.forEach((function(e){return r.add(e)}));var n=t.getRangeRowPositionsAndCellsToFlash(e),s=n.rowPositions,l=n.cellsToFlash;s.forEach((function(e){var t=e.rowIndex+"-"+(e.rowPinned||"null");if(!i.get(t)){i.set(t,true);o.push(e)}}));Object.assign(a,l)}));var s=this.columnModel.getAllDisplayedColumns();var l=Array.from(r);l.sort((function(e,t){var r=s.indexOf(e);var n=s.indexOf(t);return r-n}));var u=this.buildExportParams({columns:l,rowPositions:o,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders});return{data:u,cellsToFlash:a}};t.prototype.buildDataFromRanges=function(e){var t=this;var r=this.rangeService.getCellRanges();var n=[];var i={};r.forEach((function(r){var o=t.getRangeRowPositionsAndCellsToFlash(r),a=o.rowPositions,s=o.cellsToFlash;Object.assign(i,s);n.push(t.buildExportParams({columns:r.columns,rowPositions:a,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders}))}));return{data:n.join("\n"),cellsToFlash:i}};t.prototype.getRangeRowPositionsAndCellsToFlash=function(e){var t=this;var r=[];var n={};var i=this.rangeService.getRangeStartRow(e);var o=this.rangeService.getRangeEndRow(e);var a=i;while(a){r.push(a);e.columns.forEach((function(e){var r=a,i=r.rowIndex,o=r.rowPinned;var s=t.cellPositionUtils.createIdFromValues({rowIndex:i,column:e,rowPinned:o});n[s]=true}));if(this.rowPositionUtils.sameRow(a,o)){break}a=this.cellNavigationService.getRowBelow(a)}return{rowPositions:r,cellsToFlash:n}};t.prototype.copyFocusedCellToClipboard=function(e){var t;if(e===void 0){e={}}var r=this.focusService.getFocusedCell();if(r==null){return}var n=this.cellPositionUtils.createId(r);var i={rowPinned:r.rowPinned,rowIndex:r.rowIndex};var o=r.column;var a=this.buildExportParams({columns:[o],rowPositions:[i],includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders});this.copyDataToClipboard(a);this.dispatchFlashCells((t={},t[n]=true,t))};t.prototype.copySelectedRowsToClipboard=function(e){if(e===void 0){e={}}var t=e.columnKeys,r=e.includeHeaders,n=e.includeGroupHeaders;var i=this.buildExportParams({columns:t,includeHeaders:r,includeGroupHeaders:n});this.copyDataToClipboard(i)};t.prototype.buildExportParams=function(e){var t=this;var r=e.columns,n=e.rowPositions,i=e.includeHeaders,o=i===void 0?false:i,a=e.includeGroupHeaders,s=a===void 0?false:a;var l={columnKeys:r,rowPositions:n,skipColumnHeaders:!o,skipColumnGroupHeaders:!s,suppressQuotes:true,columnSeparator:this.getClipboardDelimiter(),onlySelected:!n,processCellCallback:this.gridOptionsService.getCallback("processCellForClipboard"),processRowGroupCallback:function(e){return t.processRowGroupCallback(e)},processHeaderCallback:this.gridOptionsService.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:this.gridOptionsService.getCallback("processGroupHeaderForClipboard")};return this.csvCreator.getDataAsCsv(l,true)};t.prototype.processRowGroupCallback=function(e){var t=e.node;var r=t.key;var n=r!=null?r:"";if(e.node.footer){var i="";if(r&&r.length){i=" "+r}n="Total"+i}var o=this.gridOptionsService.getCallback("processCellForClipboard");if(o){var a=t.rowGroupColumn;if(!a&&t.footer&&t.level===-1){a=this.columnModel.getRowGroupColumns()[0]}return o({value:n,node:t,column:a,type:"clipboard"})}return n};t.prototype.dispatchFlashCells=function(e){var t=this;window.setTimeout((function(){var r={type:Events.EVENT_FLASH_CELLS,cells:e};t.eventService.dispatchEvent(r)}),0)};t.prototype.processCell=function(e,t,r,n,i){if(i){var o={column:t,node:e,value:r,type:n};return i(o)}return r};t.prototype.copyDataToClipboard=function(e){var t=this;var r=this.gridOptionsService.getCallback("sendToClipboard");if(r){r({data:e});return}var n=!this.gridOptionsService.is("suppressClipboardApi");if(n&&navigator.clipboard){navigator.clipboard.writeText(e).catch((function(r){_.doOnce((function(){console.warn(r);console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.writeText()). "+"The reason why it could not be used has been logged in the previous line. "+"For this reason the grid has defaulted to using a workaround which doesn't perform as well. "+"Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid "+"property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.")}),"clipboardApiError");t.copyDataToClipboardLegacy(e)}));return}this.copyDataToClipboardLegacy(e)};t.prototype.copyDataToClipboardLegacy=function(e){var t=this;this.executeOnTempElement((function(r){var n=t.gridOptionsService.getDocument();var i=n.activeElement;r.value=e||" ";r.select();r.focus({preventScroll:true});var o=n.execCommand("copy");if(!o){console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure "+"api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise "+"the browser will prevent it for security reasons.")}if(i!=null&&i.focus!=null){i.focus({preventScroll:true})}}))};t.prototype.executeOnTempElement=function(e,t){var r=this.gridOptionsService.getDocument();var n=r.createElement("textarea");n.style.width="1px";n.style.height="1px";n.style.top=r.documentElement.scrollTop+"px";n.style.left=r.documentElement.scrollLeft+"px";n.style.position="absolute";n.style.opacity="0";var i=this.gridCtrl.getGui();i.appendChild(n);try{e(n)}catch(e){console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}if(t){window.setTimeout((function(){t(n);i.removeChild(n)}),100)}else{i.removeChild(n)}};t.prototype.getRangeSize=function(){var e=this.rangeService.getCellRanges();var t=0;var r=0;if(e.length>0){t=this.rangeService.getRangeStartRow(e[0]).rowIndex;r=this.rangeService.getRangeEndRow(e[0]).rowIndex}return t-r+1};var r;__decorate$2u([Autowired("csvCreator")],t.prototype,"csvCreator",void 0);__decorate$2u([Autowired("loggerFactory")],t.prototype,"loggerFactory",void 0);__decorate$2u([Autowired("selectionService")],t.prototype,"selectionService",void 0);__decorate$2u([Optional("rangeService")],t.prototype,"rangeService",void 0);__decorate$2u([Autowired("rowModel")],t.prototype,"rowModel",void 0);__decorate$2u([Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0);__decorate$2u([Autowired("valueService")],t.prototype,"valueService",void 0);__decorate$2u([Autowired("focusService")],t.prototype,"focusService",void 0);__decorate$2u([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0);__decorate$2u([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2u([Autowired("cellNavigationService")],t.prototype,"cellNavigationService",void 0);__decorate$2u([Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0);__decorate$2u([Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0);__decorate$2u([PostConstruct],t.prototype,"init",null);t=r=__decorate$2u([Bean("clipboardService")],t);return t}(BeanStub);var VERSION$h="29.3.5";var ClipboardModule={version:VERSION$h,moduleName:ModuleNames.ClipboardModule,beans:[ClipboardService],dependantModules:[EnterpriseCoreModule,CsvExportModule]};var __extends$3i=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2t=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ExpandState;(function(e){e[e["EXPANDED"]=0]="EXPANDED";e[e["COLLAPSED"]=1]="COLLAPSED";e[e["INDETERMINATE"]=2]="INDETERMINATE"})(ExpandState||(ExpandState={}));var PrimaryColsHeaderPanel=function(e){__extends$3i(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.postConstruct=function(){var e=this;this.createExpandIcons();this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this));this.addManagedListener(this.eExpand,"keydown",(function(t){if(t.key===KeyCode.SPACE){t.preventDefault();e.onExpandClicked()}}));this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this));this.eFilterTextField.onValueChange((function(){return e.onFilterTextChanged()}));this.addManagedListener(this.eFilterTextField.getInputElement(),"keypress",this.onMiniFilterKeyPress.bind(this));this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var t=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(t("ariaColumnSelectAll","Toggle Select All Columns"));this.eFilterTextField.setInputAriaLabel(t("ariaFilterColumnsInput","Filter Columns Input"))};t.prototype.init=function(e){this.params=e;if(this.columnModel.isReady()){this.showOrHideOptions()}};t.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=_.createIconNoSpan("columnSelectOpen",this.gridOptionsService));this.eExpand.appendChild(this.eExpandUnchecked=_.createIconNoSpan("columnSelectClosed",this.gridOptionsService));this.eExpand.appendChild(this.eExpandIndeterminate=_.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService));this.setExpandState(ExpandState.EXPANDED)};t.prototype.showOrHideOptions=function(){var e=!this.params.suppressColumnFilter;var t=!this.params.suppressColumnSelectAll;var r=!this.params.suppressColumnExpandAll;var n=this.columnModel.isPrimaryColumnGroupsPresent();var i=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(i("searchOoo","Search..."));_.setDisplayed(this.eFilterTextField.getGui(),e);_.setDisplayed(this.eSelect.getGui(),t);_.setDisplayed(this.eExpand,r&&n)};t.prototype.onFilterTextChanged=function(){var e=this;if(!this.onFilterTextChangedDebounced){this.onFilterTextChangedDebounced=_.debounce((function(){var t=e.eFilterTextField.getValue();e.dispatchEvent({type:"filterChanged",filterText:t})}),t.DEBOUNCE_DELAY)}this.onFilterTextChangedDebounced()};t.prototype.onMiniFilterKeyPress=function(e){var r=this;if(e.key===KeyCode.ENTER){setTimeout((function(){return r.onSelectClicked()}),t.DEBOUNCE_DELAY)}};t.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})};t.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===ExpandState.EXPANDED?"collapseAll":"expandAll"})};t.prototype.setExpandState=function(e){this.expandState=e;_.setDisplayed(this.eExpandChecked,this.expandState===ExpandState.EXPANDED);_.setDisplayed(this.eExpandUnchecked,this.expandState===ExpandState.COLLAPSED);_.setDisplayed(this.eExpandIndeterminate,this.expandState===ExpandState.INDETERMINATE)};t.prototype.setSelectionState=function(e){this.selectState=e;this.eSelect.setValue(this.selectState)};t.DEBOUNCE_DELAY=300;t.TEMPLATE='<div class="ag-column-select-header" role="presentation">\n            <div ref="eExpand" class="ag-column-select-header-icon" tabindex="0"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>';__decorate$2t([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2t([RefSelector("eExpand")],t.prototype,"eExpand",void 0);__decorate$2t([RefSelector("eSelect")],t.prototype,"eSelect",void 0);__decorate$2t([RefSelector("eFilterTextField")],t.prototype,"eFilterTextField",void 0);__decorate$2t([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var ColumnModelItem=function(){function e(e,t,r,n,i){if(n===void 0){n=false}this.eventService=new EventService;this.displayName=e;this.dept=r;this.group=n;if(n){this.columnGroup=t;this.expanded=i;this.children=[]}else{this.column=t}}e.prototype.isGroup=function(){return this.group};e.prototype.getDisplayName=function(){return this.displayName};e.prototype.getColumnGroup=function(){return this.columnGroup};e.prototype.getColumn=function(){return this.column};e.prototype.getDept=function(){return this.dept};e.prototype.isExpanded=function(){return!!this.expanded};e.prototype.getChildren=function(){return this.children};e.prototype.isPassesFilter=function(){return this.passesFilter};e.prototype.setExpanded=function(t){if(t===this.expanded){return}this.expanded=t;this.eventService.dispatchEvent({type:e.EVENT_EXPANDED_CHANGED})};e.prototype.setPassesFilter=function(e){this.passesFilter=e};e.prototype.addEventListener=function(e,t){this.eventService.addEventListener(e,t)};e.prototype.removeEventListener=function(e,t){this.eventService.removeEventListener(e,t)};e.EVENT_EXPANDED_CHANGED="expandedChanged";return e}();var __extends$3h=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2s=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$1b=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$J=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$1b(arguments[t]));return e};var __values$C=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var ToolPanelContextMenu=function(e){__extends$3h(t,e);function t(t,r,n){var i=e.call(this,'<div class="ag-menu"></div>')||this;i.column=t;i.mouseEvent=r;i.parentEl=n;i.displayName=null;return i}t.prototype.postConstruct=function(){this.initializeProperties(this.column);this.buildMenuItemMap();if(this.column instanceof Column){this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel")}else{this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel")}if(this.isActive()){this.mouseEvent.preventDefault();this.displayContextMenu()}};t.prototype.initializeProperties=function(e){if(e instanceof ProvidedColumnGroup){this.columns=e.getLeafColumns()}else{this.columns=[e]}this.allowGrouping=this.columns.some((function(e){return e.isPrimary()&&e.isAllowRowGroup()}));this.allowValues=this.columns.some((function(e){return e.isPrimary()&&e.isAllowValue()}));this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some((function(e){return e.isPrimary()&&e.isAllowPivot()}))};t.prototype.buildMenuItemMap=function(){var e=this;var t=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map;this.menuItemMap.set("rowGroup",{allowedFunction:function(e){return e.isPrimary()&&e.isAllowRowGroup()},activeFunction:function(e){return e.isRowGroupActive()},activateLabel:function(){return t("groupBy","Group by")+" "+e.displayName},deactivateLabel:function(){return t("ungroupBy","Un-Group by")+" "+e.displayName},activateFunction:function(){var t=e.columnModel.getRowGroupColumns();e.columnModel.setRowGroupColumns(e.addColumnsToList(t),"toolPanelUi")},deActivateFunction:function(){var t=e.columnModel.getRowGroupColumns();e.columnModel.setRowGroupColumns(e.removeColumnsFromList(t),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"});this.menuItemMap.set("value",{allowedFunction:function(e){return e.isPrimary()&&e.isAllowValue()},activeFunction:function(e){return e.isValueActive()},activateLabel:function(){return t("addToValues","Add "+e.displayName+" to values",[e.displayName])},deactivateLabel:function(){return t("removeFromValues","Remove "+e.displayName+" from values",[e.displayName])},activateFunction:function(){var t=e.columnModel.getValueColumns();e.columnModel.setValueColumns(e.addColumnsToList(t),"toolPanelUi")},deActivateFunction:function(){var t=e.columnModel.getValueColumns();e.columnModel.setValueColumns(e.removeColumnsFromList(t),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"});this.menuItemMap.set("pivot",{allowedFunction:function(t){return e.columnModel.isPivotMode()&&t.isPrimary()&&t.isAllowPivot()},activeFunction:function(e){return e.isPivotActive()},activateLabel:function(){return t("addToLabels","Add "+e.displayName+" to labels",[e.displayName])},deactivateLabel:function(){return t("removeFromLabels","Remove "+e.displayName+" from labels",[e.displayName])},activateFunction:function(){var t=e.columnModel.getPivotColumns();e.columnModel.setPivotColumns(e.addColumnsToList(t),"toolPanelUi")},deActivateFunction:function(){var t=e.columnModel.getPivotColumns();e.columnModel.setPivotColumns(e.removeColumnsFromList(t),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})};t.prototype.addColumnsToList=function(e){return __spread$J(e).concat(this.columns.filter((function(t){return e.indexOf(t)===-1})))};t.prototype.removeColumnsFromList=function(e){var t=this;return e.filter((function(e){return t.columns.indexOf(e)===-1}))};t.prototype.displayContextMenu=function(){var e=this;var t=this.getGui();var r=this.createBean(new AgMenuList);var n=this.getMappedMenuItems();var i=this.localeService.getLocaleTextFunc();var o=function(){};t.appendChild(r.getGui());r.addMenuItems(n);r.addManagedListener(r,AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,(function(){e.parentEl.focus();o()}));var a=this.popupService.addPopup({modal:true,eChild:t,closeOnEsc:true,afterGuiAttached:function(){return e.focusService.focusInto(r.getGui())},ariaLabel:i("ariaLabelContextMenu","Context Menu"),closedCallback:function(t){if(t instanceof KeyboardEvent){e.parentEl.focus()}e.destroyBean(r)}});if(a){o=a.hideFunc}this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:t})};t.prototype.isActive=function(){return this.allowGrouping||this.allowValues||this.allowPivoting};t.prototype.getMappedMenuItems=function(){var e,t;var r=[];var n=function(e){var t=i.columns.some((function(t){return e.allowedFunction(t)&&!e.activeFunction(t)}));var n=i.columns.some((function(t){return e.allowedFunction(t)&&e.activeFunction(t)}));if(t){r.push({name:e.activateLabel(i.displayName),icon:_.createIconNoSpan(e.addIcon,i.gridOptionsService,null),action:function(){return e.activateFunction()}})}if(n){r.push({name:e.deactivateLabel(i.displayName),icon:_.createIconNoSpan(e.removeIcon,i.gridOptionsService,null),action:function(){return e.deActivateFunction()}})}};var i=this;try{for(var o=__values$C(this.menuItemMap.values()),a=o.next();!a.done;a=o.next()){var s=a.value;n(s)}}catch(t){e={error:t}}finally{try{if(a&&!a.done&&(t=o.return))t.call(o)}finally{if(e)throw e.error}}return r};__decorate$2s([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2s([Autowired("popupService")],t.prototype,"popupService",void 0);__decorate$2s([Autowired("focusService")],t.prototype,"focusService",void 0);__decorate$2s([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var __extends$3g=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2r=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ToolPanelColumnGroupComp=function(e){__extends$3g(t,e);function t(t,r,n,i){var o=e.call(this)||this;o.modelItem=t;o.allowDragging=r;o.eventType=n;o.focusWrapper=i;o.processingColumnStateChange=false;o.modelItem=t;o.columnGroup=t.getColumnGroup();o.columnDept=t.getDept();o.allowDragging=r;return o}t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE);this.eDragHandle=_.createIconNoSpan("columnDrag",this.gridOptionsService);this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");var r=this.cbSelect.getGui();var n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle);n.setAttribute("tabindex","-1");this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.columnGroup,this.eventType);if(_.missing(this.displayName)){this.displayName=">>"}this.eLabel.innerHTML=this.displayName?this.displayName:"";this.setupExpandContract();this.addCssClass("ag-column-select-indent-"+this.columnDept);this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this));this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this));this.addManagedListener(this.cbSelect,AgCheckbox.EVENT_CHANGED,this.onCheckboxChanged.bind(this));this.addManagedListener(this.modelItem,ColumnModelItem.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this));this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this));this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this));this.setOpenClosedIcons();this.setupDragging();this.onColumnStateChanged();this.addVisibilityListenersToAllChildren();this.refreshAriaExpanded();this.refreshAriaLabel();this.setupTooltip();var i=CssClassApplier.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsService,null,this.columnGroup);i.forEach((function(t){return e.addOrRemoveCssClass(t,true)}))};t.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()};t.prototype.setupTooltip=function(){var e=this;var t=this.columnGroup.getColGroupDef();if(!t){return}var r=function(){var r=t.headerTooltip;e.setTooltip(r)};r();this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,r)};t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);t.location="columnToolPanelColumnGroup";return t};t.prototype.handleKeyDown=function(e){switch(e.key){case KeyCode.LEFT:e.preventDefault();this.modelItem.setExpanded(false);break;case KeyCode.RIGHT:e.preventDefault();this.modelItem.setExpanded(true);break;case KeyCode.SPACE:e.preventDefault();if(this.isSelectable()){this.onSelectAllChanged(!this.isSelected())}break}};t.prototype.onContextMenu=function(e){var t=this;var r=this,n=r.columnGroup,i=r.gridOptionsService;if(i.is("functionsReadOnly")){return}var o=this.createBean(new ToolPanelContextMenu(n,e,this.focusWrapper));this.addDestroyFunc((function(){if(o.isAlive()){t.destroyBean(o)}}))};t.prototype.addVisibilityListenersToAllChildren=function(){var e=this;this.columnGroup.getLeafColumns().forEach((function(t){e.addManagedListener(t,Column.EVENT_VISIBLE_CHANGED,e.onColumnStateChanged.bind(e));e.addManagedListener(t,Column.EVENT_VALUE_CHANGED,e.onColumnStateChanged.bind(e));e.addManagedListener(t,Column.EVENT_PIVOT_CHANGED,e.onColumnStateChanged.bind(e));e.addManagedListener(t,Column.EVENT_ROW_GROUP_CHANGED,e.onColumnStateChanged.bind(e))}))};t.prototype.setupDragging=function(){var e=this;if(!this.allowDragging){_.setDisplayed(this.eDragHandle,false);return}var t=!this.gridOptionsService.is("suppressDragLeaveHidesColumns");var r={type:DragSourceType.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,defaultIconName:t?DragAndDropService.ICON_HIDE:DragAndDropService.ICON_NOT_ALLOWED,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){var t={type:Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.columnGroup};e.eventService.dispatchEvent(t)},onDragStopped:function(){var t={type:Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END};e.eventService.dispatchEvent(t)},onGridEnter:function(){if(t){e.onChangeCommon(true)}},onGridExit:function(){if(t){e.onChangeCommon(false)}}};this.dragAndDropService.addDragSource(r,true);this.addDestroyFunc((function(){return e.dragAndDropService.removeDragSource(r)}))};t.prototype.createDragItem=function(){var e={};this.columnGroup.getLeafColumns().forEach((function(t){e[t.getId()]=t.isVisible()}));return{columns:this.columnGroup.getLeafColumns(),visibleState:e}};t.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(_.createIcon("columnSelectClosed",this.gridOptionsService,null));this.eGroupOpenedIcon.appendChild(_.createIcon("columnSelectOpen",this.gridOptionsService,null));this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this));this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var e=new TouchListener(this.eColumnGroupIcons,true);this.addManagedListener(e,TouchListener.EVENT_TAP,this.onExpandOrContractClicked.bind(this));this.addDestroyFunc(e.destroy.bind(e))};t.prototype.onLabelClicked=function(){var e=!this.cbSelect.getValue();this.onChangeCommon(e)};t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)};t.prototype.getVisibleLeafColumns=function(){var e=[];var t=function(r){r.forEach((function(r){if(!r.isPassesFilter()){return}if(r.isGroup()){t(r.getChildren())}else{e.push(r.getColumn())}}))};t(this.modelItem.getChildren());return e};t.prototype.onChangeCommon=function(e){this.refreshAriaLabel();if(this.processingColumnStateChange){return}this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)};t.prototype.refreshAriaLabel=function(){var e=this.localeService.getLocaleTextFunc();var t=e("ariaColumnGroup","Column Group");var r=this.cbSelect.getValue();var n=r===undefined?e("ariaIndeterminate","indeterminate"):r?e("ariaVisible","visible"):e("ariaHidden","hidden");var i=e("ariaToggleVisibility","Press SPACE to toggle visibility");_.setAriaLabel(this.focusWrapper,this.displayName+" "+t);this.cbSelect.setInputAriaLabel(i+" ("+n+")");_.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)};t.prototype.onColumnStateChanged=function(){var e=this.workOutSelectedValue();var t=this.workOutReadOnlyValue();this.processingColumnStateChange=true;this.cbSelect.setValue(e);this.cbSelect.setReadOnly(t);this.addOrRemoveCssClass("ag-column-select-column-group-readonly",t);this.processingColumnStateChange=false};t.prototype.workOutSelectedValue=function(){var e=this;var t=this.columnModel.isPivotMode();var r=this.getVisibleLeafColumns();var n=0;var i=0;r.forEach((function(r){if(!t&&r.getColDef().lockVisible){return}if(e.isColumnChecked(r,t)){n++}else{i++}}));if(n>0&&i>0){return undefined}return n>0};t.prototype.workOutReadOnlyValue=function(){var e=this.columnModel.isPivotMode();var t=0;this.columnGroup.getLeafColumns().forEach((function(r){if(e){if(r.isAnyFunctionAllowed()){t++}}else{if(!r.getColDef().lockVisible){t++}}}));return t===0};t.prototype.isColumnChecked=function(e,t){if(t){var r=e.isPivotActive();var n=e.isRowGroupActive();var i=e.isValueActive();return r||n||i}return e.isVisible()};t.prototype.onExpandOrContractClicked=function(){var e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)};t.prototype.onExpandChanged=function(){this.setOpenClosedIcons();this.refreshAriaExpanded()};t.prototype.setOpenClosedIcons=function(){var e=this.modelItem.isExpanded();_.setDisplayed(this.eGroupClosedIcon,!e);_.setDisplayed(this.eGroupOpenedIcon,e)};t.prototype.refreshAriaExpanded=function(){_.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())};t.prototype.getDisplayName=function(){return this.displayName};t.prototype.onSelectAllChanged=function(e){var t=this.cbSelect.getValue();var r=this.cbSelect.isReadOnly();if(!r&&(e&&!t||!e&&t)){this.cbSelect.toggle()}};t.prototype.isSelected=function(){return this.cbSelect.getValue()};t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()};t.prototype.setSelected=function(e){this.cbSelect.setValue(e,true)};t.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>';__decorate$2r([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2r([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0);__decorate$2r([Autowired("modelItemUtils")],t.prototype,"modelItemUtils",void 0);__decorate$2r([RefSelector("cbSelect")],t.prototype,"cbSelect",void 0);__decorate$2r([RefSelector("eLabel")],t.prototype,"eLabel",void 0);__decorate$2r([RefSelector("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0);__decorate$2r([RefSelector("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0);__decorate$2r([RefSelector("eColumnGroupIcons")],t.prototype,"eColumnGroupIcons",void 0);__decorate$2r([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$3f=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2q=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var PRIMARY_COLS_LIST_ITEM_HOVERED="ag-list-item-hovered";var PrimaryColsListPanelItemDragFeature=function(e){__extends$3f(t,e);function t(t,r){var n=e.call(this)||this;n.comp=t;n.virtualList=r;n.currentDragColumn=null;n.lastHoveredColumnItem=null;return n}t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,this.columnPanelItemDragStart.bind(this));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END,this.columnPanelItemDragEnd.bind(this));this.createDropTarget();this.createAutoScrollService()};t.prototype.columnPanelItemDragStart=function(e){var t=e.column;this.currentDragColumn=t;var r=this.getCurrentColumns();var n=r.find((function(e){var t=e.getColDef();return!!t.suppressMovable||!!t.lockPosition}));if(n){this.moveBlocked=true}};t.prototype.columnPanelItemDragEnd=function(){var e=this;window.setTimeout((function(){e.currentDragColumn=null;e.moveBlocked=false}),10)};t.prototype.createDropTarget=function(){var e=this;var t={isInterestedIn:function(e){return e===DragSourceType.ToolPanel},getIconName:function(){return DragAndDropService[e.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return e.comp.getGui()},onDragging:function(t){return e.onDragging(t)},onDragStop:function(){return e.onDragStop()},onDragLeave:function(){return e.onDragLeave()}};this.dragAndDropService.addDropTarget(t)};t.prototype.createAutoScrollService=function(){var e=this.virtualList.getGui();this.autoScrollService=new AutoScrollService({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(t){return e.scrollTop=t}})};t.prototype.onDragging=function(e){if(!this.currentDragColumn||this.moveBlocked){return}var t=this.getDragColumnItem(e);var r=this.virtualList.getComponentAt(t.rowIndex);if(!r){return}var n=r.getGui().parentElement;if(this.lastHoveredColumnItem&&this.lastHoveredColumnItem.rowIndex===t.rowIndex&&this.lastHoveredColumnItem.position===t.position){return}this.autoScrollService.check(e.event);this.clearHoveredItems();this.lastHoveredColumnItem=t;_.radioCssClass(n,""+PRIMARY_COLS_LIST_ITEM_HOVERED);_.radioCssClass(n,"ag-item-highlight-"+t.position)};t.prototype.getDragColumnItem=function(e){var t=this.virtualList.getGui();var r=parseFloat(window.getComputedStyle(t).paddingTop);var n=this.virtualList.getRowHeight();var i=this.virtualList.getScrollTop();var o=Math.max(0,(e.y-r+i)/n);var a=this.comp.getDisplayedColsList().length-1;var s=Math.min(a,o)|0;return{rowIndex:s,position:Math.round(o)>o||o>a?"bottom":"top",component:this.virtualList.getComponentAt(s)}};t.prototype.onDragStop=function(){if(this.moveBlocked){return}var e=this.getTargetIndex();var t=this.getCurrentColumns();if(e!=null){this.columnModel.moveColumns(t,e,"toolPanelUi")}this.clearHoveredItems();this.autoScrollService.ensureCleared()};t.prototype.getMoveDiff=function(e){var t=this.columnModel.getAllGridColumns();var r=this.getCurrentColumns();var n=r[0];var i=r.length;var o=t.indexOf(n);if(o<e){return i}return 0};t.prototype.getCurrentColumns=function(){if(this.currentDragColumn instanceof ProvidedColumnGroup){return this.currentDragColumn.getLeafColumns()}return[this.currentDragColumn]};t.prototype.getTargetIndex=function(){if(!this.lastHoveredColumnItem){return null}var e=this.lastHoveredColumnItem.component;var t=this.lastHoveredColumnItem.position==="top";var r;if(e instanceof ToolPanelColumnGroupComp){var n=e.getColumns();r=n[0];t=true}else{r=e.getColumn()}var i=this.columnModel.getAllGridColumns().indexOf(r);var o=t?i:i+1;var a=this.getMoveDiff(o);return o-a};t.prototype.onDragLeave=function(){this.clearHoveredItems();this.autoScrollService.ensureCleared()};t.prototype.clearHoveredItems=function(){var e=this.virtualList.getGui();e.querySelectorAll("."+PRIMARY_COLS_LIST_ITEM_HOVERED).forEach((function(e){[PRIMARY_COLS_LIST_ITEM_HOVERED,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach((function(t){e.classList.remove(t)}))}));this.lastHoveredColumnItem=null};__decorate$2q([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2q([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0);__decorate$2q([PostConstruct],t.prototype,"postConstruct",null);return t}(BeanStub);var __extends$3e=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2p=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ToolPanelColumnComp=function(e){__extends$3e(t,e);function t(t,r,n,i,o){var a=e.call(this)||this;a.column=t;a.columnDept=r;a.allowDragging=n;a.groupsExist=i;a.focusWrapper=o;a.processingColumnStateChange=false;return a}t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE);this.eDragHandle=_.createIconNoSpan("columnDrag",this.gridOptionsService);this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");var r=this.cbSelect.getGui();var n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle);n.setAttribute("tabindex","-1");this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel");var i=_.escapeString(this.displayName);this.eLabel.innerHTML=i;var o=this.columnDept;if(this.groupsExist){this.addCssClass("ag-column-select-add-group-indent")}this.addCssClass("ag-column-select-indent-"+o);this.setupDragging();this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this));this.addManagedListener(this.column,Column.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this));this.addManagedListener(this.column,Column.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this));this.addManagedListener(this.column,Column.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this));this.addManagedListener(this.column,Column.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this));this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this));this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this));this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this));this.addManagedListener(this.cbSelect,AgCheckbox.EVENT_CHANGED,this.onCheckboxChanged.bind(this));this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this));this.onColumnStateChanged();this.refreshAriaLabel();this.setupTooltip();var a=CssClassApplier.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsService,this.column,null);a.forEach((function(t){return e.addOrRemoveCssClass(t,true)}))};t.prototype.getColumn=function(){return this.column};t.prototype.setupTooltip=function(){var e=this;var t=function(){var t=e.column.getColDef().headerTooltip;e.setTooltip(t)};t();this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,t)};t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);t.location="columnToolPanelColumn";t.colDef=this.column.getColDef();return t};t.prototype.onContextMenu=function(e){var t=this;var r=this,n=r.column,i=r.gridOptionsService;if(i.is("functionsReadOnly")){return}var o=this.createBean(new ToolPanelContextMenu(n,e,this.focusWrapper));this.addDestroyFunc((function(){if(o.isAlive()){t.destroyBean(o)}}))};t.prototype.handleKeyDown=function(e){if(e.key===KeyCode.SPACE){e.preventDefault();if(this.isSelectable()){this.onSelectAllChanged(!this.isSelected())}}};t.prototype.onLabelClicked=function(){if(this.gridOptionsService.is("functionsReadOnly")){return}var e=!this.cbSelect.getValue();this.onChangeCommon(e)};t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)};t.prototype.onChangeCommon=function(e){if(this.cbSelect.isReadOnly()){return}this.refreshAriaLabel();if(this.processingColumnStateChange){return}this.modelItemUtils.setColumn(this.column,e,"toolPanelUi")};t.prototype.refreshAriaLabel=function(){var e=this.localeService.getLocaleTextFunc();var t=e("ariaColumn","Column");var r=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden");var n=e("ariaToggleVisibility","Press SPACE to toggle visibility");_.setAriaLabel(this.focusWrapper,this.displayName+" "+t);this.cbSelect.setInputAriaLabel(n+" ("+r+")");_.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)};t.prototype.setupDragging=function(){var e=this;if(!this.allowDragging){_.setDisplayed(this.eDragHandle,false);return}var t=!this.gridOptionsService.is("suppressDragLeaveHidesColumns");var r={type:DragSourceType.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,defaultIconName:t?DragAndDropService.ICON_HIDE:DragAndDropService.ICON_NOT_ALLOWED,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){var t={type:Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.column};e.eventService.dispatchEvent(t)},onDragStopped:function(){var t={type:Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END};e.eventService.dispatchEvent(t)},onGridEnter:function(){if(t){e.onChangeCommon(true)}},onGridExit:function(){if(t){e.onChangeCommon(false)}}};this.dragAndDropService.addDragSource(r,true);this.addDestroyFunc((function(){return e.dragAndDropService.removeDragSource(r)}))};t.prototype.createDragItem=function(){var e={};e[this.column.getId()]=this.column.isVisible();return{columns:[this.column],visibleState:e}};t.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=true;var e=this.columnModel.isPivotMode();if(e){var t=this.column.isAnyFunctionActive();this.cbSelect.setValue(t)}else{this.cbSelect.setValue(this.column.isVisible())}var r=true;var n=true;if(e){var i=this.gridOptionsService.is("functionsReadOnly");var o=!this.column.isAnyFunctionAllowed();r=!i&&!o;n=r}else{var a=this.column.getColDef(),s=a.enableRowGroup,l=a.enableValue,u=a.lockPosition,c=a.suppressMovable,d=a.lockVisible;var p=!!s||!!l;var f=!!u||!!c;r=!d;n=p||!f}this.cbSelect.setReadOnly(!r);this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!n);this.addOrRemoveCssClass("ag-column-select-column-readonly",!n&&!r);var h=e&&this.gridOptionsService.is("functionsPassive");this.cbSelect.setPassive(h);this.processingColumnStateChange=false};t.prototype.getDisplayName=function(){return this.displayName};t.prototype.onSelectAllChanged=function(e){if(e!==this.cbSelect.getValue()){if(!this.cbSelect.isReadOnly()){this.cbSelect.toggle()}}};t.prototype.isSelected=function(){return this.cbSelect.getValue()};t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()};t.prototype.isExpandable=function(){return false};t.prototype.setExpanded=function(e){console.warn("AG Grid: can not expand a column item that does not represent a column group header")};t.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>';__decorate$2p([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2p([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0);__decorate$2p([Autowired("modelItemUtils")],t.prototype,"modelItemUtils",void 0);__decorate$2p([RefSelector("eLabel")],t.prototype,"eLabel",void 0);__decorate$2p([RefSelector("cbSelect")],t.prototype,"cbSelect",void 0);__decorate$2p([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$3d=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2o=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var UIColumnModel=function(){function e(e){this.items=e}e.prototype.getRowCount=function(){return this.items.length};e.prototype.getRow=function(e){return this.items[e]};return e}();var PRIMARY_COLS_LIST_PANEL_CLASS="ag-column-select-list";var PrimaryColsListPanel=function(e){__extends$3d(t,e);function t(){var r=e.call(this,t.TEMPLATE)||this;r.destroyColumnItemFuncs=[];return r}t.prototype.destroyColumnTree=function(){this.allColsTree=[];this.destroyColumnItemFuncs.forEach((function(e){return e()}));this.destroyColumnItemFuncs=[]};t.prototype.init=function(e,t,r){var n=this;this.params=e;this.allowDragging=t;this.eventType=r;if(!this.params.suppressSyncLayoutWithGrid){this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this))}this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this));var i=[Events.EVENT_COLUMN_PIVOT_CHANGED,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,Events.EVENT_COLUMN_VALUE_CHANGED,Events.EVENT_COLUMN_VISIBLE,Events.EVENT_NEW_COLUMNS_LOADED];i.forEach((function(e){n.addManagedListener(n.eventService,e,n.fireSelectionChangedEvent.bind(n))}));this.expandGroupsByDefault=!this.params.contractColumnSelection;var o=this.localeService.getLocaleTextFunc();var a=o("ariaColumnList","Column List");this.virtualList=this.createManagedBean(new VirtualList("column-select","tree",a));this.appendChild(this.virtualList.getGui());this.virtualList.setComponentCreator((function(e,t){_.setAriaLevel(t,e.getDept()+1);return n.createComponentFromItem(e,t)}));if(this.columnModel.isReady()){this.onColumnsChanged()}if(!e.suppressColumnMove&&!this.gridOptionsService.is("suppressMovableColumns")){this.createManagedBean(new PrimaryColsListPanelItemDragFeature(this,this.virtualList))}};t.prototype.createComponentFromItem=function(e,t){if(e.isGroup()){var r=new ToolPanelColumnGroupComp(e,this.allowDragging,this.eventType,t);this.getContext().createBean(r);return r}var n=new ToolPanelColumnComp(e.getColumn(),e.getDept(),this.allowDragging,this.groupsExist,t);this.getContext().createBean(n);return n};t.prototype.onColumnsChanged=function(){var e=this.getExpandedStates();var t=this.columnModel.isPivotMode();var r=!this.params.suppressSyncLayoutWithGrid&&!t;if(r){this.buildTreeFromWhatGridIsDisplaying()}else{this.buildTreeFromProvidedColumnDefs()}this.setExpandedStates(e);this.markFilteredColumns();this.flattenAndFilterModel()};t.prototype.getDisplayedColsList=function(){return this.displayedColsList};t.prototype.getExpandedStates=function(){if(!this.allColsTree){return{}}var e={};this.forEachItem((function(t){if(!t.isGroup()){return}var r=t.getColumnGroup();if(r){e[r.getId()]=t.isExpanded()}}));return e};t.prototype.setExpandedStates=function(e){if(!this.allColsTree){return}this.forEachItem((function(t){if(!t.isGroup()){return}var r=t.getColumnGroup();if(r){var n=e[r.getId()];var i=n!=null;if(i){t.setExpanded(n)}}}))};t.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))};t.prototype.setColumnLayout=function(e){var t=this.colDefService.createColumnTree(e);this.buildListModel(t);this.groupsExist=e.some((function(e){return e&&typeof e.children!=="undefined"}));this.markFilteredColumns();this.flattenAndFilterModel()};t.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree());this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()};t.prototype.buildListModel=function(e){var t=this;var r=this.onColumnExpanded.bind(this);var n=function(e){e.addEventListener(ColumnModelItem.EVENT_EXPANDED_CHANGED,r);var n=e.removeEventListener.bind(e,ColumnModelItem.EVENT_EXPANDED_CHANGED,r);t.destroyColumnItemFuncs.push(n)};var i=function(e,t,r){e.forEach((function(e){if(e instanceof ProvidedColumnGroup){o(e,t,r)}else{a(e,t,r)}}))};var o=function(e,r,o){var a=e.getColGroupDef();var s=a&&a.suppressColumnsToolPanel;if(s){return}if(e.isPadding()){i(e.getChildren(),r,o);return}var l=t.columnModel.getDisplayNameForProvidedColumnGroup(null,e,t.eventType);var u=new ColumnModelItem(l,e,r,true,t.expandGroupsByDefault);o.push(u);n(u);i(e.getChildren(),r+1,u.getChildren())};var a=function(e,r,n){var i=e.getColDef()&&e.getColDef().suppressColumnsToolPanel;if(i){return}var o=t.columnModel.getDisplayNameForColumn(e,"columnToolPanel");n.push(new ColumnModelItem(o,e,r))};this.destroyColumnTree();i(e,0,this.allColsTree)};t.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()};t.prototype.flattenAndFilterModel=function(){var e=this;this.displayedColsList=[];var t=function(r){if(!r.isPassesFilter()){return}e.displayedColsList.push(r);if(r.isGroup()&&r.isExpanded()){r.getChildren().forEach(t)}};this.allColsTree.forEach(t);this.virtualList.setModel(new UIColumnModel(this.displayedColsList));var r=this.virtualList.getLastFocusedRow();this.virtualList.refresh();if(r!=null){this.focusRowIfAlive(r)}this.notifyListeners()};t.prototype.focusRowIfAlive=function(e){var t=this;window.setTimeout((function(){if(t.isAlive()){t.virtualList.focusRow(e)}}),0)};t.prototype.forEachItem=function(e){var t=function(r){r.forEach((function(r){e(r);if(r.isGroup()){t(r.getChildren())}}))};t(this.allColsTree)};t.prototype.doSetExpandedAll=function(e){this.forEachItem((function(t){if(t.isGroup()){t.setExpanded(e)}}))};t.prototype.setGroupsExpanded=function(e,t){if(!t){this.doSetExpandedAll(e);return}var r=[];this.forEachItem((function(n){if(!n.isGroup()){return}var i=n.getColumnGroup().getId();if(t.indexOf(i)>=0){n.setExpanded(e);r.push(i)}}));var n=t.filter((function(e){return!_.includes(r,e)}));if(n.length>0){console.warn("AG Grid: unable to find group(s) for supplied groupIds:",n)}};t.prototype.getExpandState=function(){var e=0;var t=0;this.forEachItem((function(r){if(!r.isGroup()){return}if(r.isExpanded()){e++}else{t++}}));if(e>0&&t>0){return ExpandState.INDETERMINATE}if(t>0){return ExpandState.COLLAPSED}return ExpandState.EXPANDED};t.prototype.doSetSelectedAll=function(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)};t.prototype.getSelectionState=function(){var e=0;var t=0;var r=this.columnModel.isPivotMode();this.forEachItem((function(n){if(n.isGroup()){return}if(!n.isPassesFilter()){return}var i=n.getColumn();var o=i.getColDef();var a;if(r){var s=!i.isAllowPivot()&&!i.isAllowRowGroup()&&!i.isAllowValue();if(s){return}a=i.isValueActive()||i.isPivotActive()||i.isRowGroupActive()}else{if(o.lockVisible){return}a=i.isVisible()}a?e++:t++}));if(e>0&&t>0){return undefined}return!(e===0||t>0)};t.prototype.setFilterText=function(e){this.filterText=_.exists(e)?e.toLowerCase():null;this.markFilteredColumns();this.flattenAndFilterModel()};t.prototype.markFilteredColumns=function(){var e=this;var t=function(t){if(!_.exists(e.filterText)){return true}var r=t.getDisplayName();return r==null||r.toLowerCase().indexOf(e.filterText)!==-1};var r=function(e,n){var i=false;if(e.isGroup()){var o=t(e);e.getChildren().forEach((function(e){var t=r(e,o||n);if(t){i=t}}))}var a=n||i?true:t(e);e.setPassesFilter(a);return a};this.allColsTree.forEach((function(e){return r(e,false)}))};t.prototype.notifyListeners=function(){this.fireGroupExpandedEvent();this.fireSelectionChangedEvent()};t.prototype.fireGroupExpandedEvent=function(){var e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})};t.prototype.fireSelectionChangedEvent=function(){var e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})};t.TEMPLATE='<div class="'+PRIMARY_COLS_LIST_PANEL_CLASS+'" role="presentation"></div>';__decorate$2o([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2o([Autowired("toolPanelColDefService")],t.prototype,"colDefService",void 0);__decorate$2o([Autowired("modelItemUtils")],t.prototype,"modelItemUtils",void 0);__decorate$2o([PreDestroy],t.prototype,"destroyColumnTree",null);return t}(Component);var __extends$3c=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2n=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var PivotModePanel=function(e){__extends$3c(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.createTemplate=function(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'};t.prototype.init=function(){this.setTemplate(this.createTemplate());this.cbPivotMode.setValue(this.columnModel.isPivotMode());var e=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(e("pivotMode","Pivot Mode"));this.addManagedListener(this.cbPivotMode,AgCheckbox.EVENT_CHANGED,this.onBtPivotMode.bind(this));this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))};t.prototype.onBtPivotMode=function(){var e=!!this.cbPivotMode.getValue();if(e!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(e,"toolPanelUi");var t=this.gridOptionsService.api;if(t){t.refreshHeader()}}};t.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.cbPivotMode.setValue(e)};__decorate$2n([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2n([RefSelector("cbPivotMode")],t.prototype,"cbPivotMode",void 0);__decorate$2n([PreConstruct],t.prototype,"init",null);return t}(Component);var __extends$3b=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2m=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var AggregationStage=function(e){__extends$3b(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.execute=function(e){var t=_.missingOrEmpty(this.columnModel.getValueColumns());var r=!this.getGroupRowAggFunc();var n=e.changedPath&&e.changedPath.isActive();if(t&&r&&n){return}var i=this.createAggDetails(e);this.recursivelyCreateAggData(i)};t.prototype.getGroupRowAggFunc=function(){var e=this.gridOptionsService.getCallback("getGroupRowAgg");if(e){return e}var t=this.gridOptionsService.get("groupRowAggNodes");if(t){return function(e){return t(e.nodes)}}};t.prototype.createAggDetails=function(e){var t=this.columnModel.isPivotActive();var r=this.columnModel.getValueColumns();var n=t?this.columnModel.getPivotColumns():[];var i={changedPath:e.changedPath,valueColumns:r,pivotColumns:n};return i};t.prototype.isSuppressAggFilteredOnly=function(){var e=this.gridOptionsService.getGroupAggFiltering()!==undefined;return e||this.gridOptionsService.is("suppressAggFilteredOnly")};t.prototype.recursivelyCreateAggData=function(e){var t=this;this.filteredOnly=!this.isSuppressAggFilteredOnly();var r=function(r){var n=!r.hasChildren();if(n){if(r.aggData){r.setAggData(null)}return}var i=r.level===-1;if(i){var o=!t.columnModel.isPivotMode();var a=t.gridOptionsService.is("suppressAggAtRootLevel");if(a&&o){return}}t.aggregateRowNode(r,e)};e.changedPath.forEachChangedNodeDepthFirst(r,true)};t.prototype.aggregateRowNode=function(e,t){var r=t.valueColumns.length===0;var n=t.pivotColumns.length===0;var i=this.getGroupRowAggFunc();var o;if(i){var a={nodes:e.childrenAfterFilter};o=i(a)}else if(r){o=null}else if(n){o=this.aggregateRowNodeUsingValuesOnly(e,t)}else{o=this.aggregateRowNodeUsingValuesAndPivot(e)}e.setAggData(o);if(e.sibling){e.sibling.setAggData(o)}};t.prototype.aggregateRowNodeUsingValuesAndPivot=function(e){var t=this;var r;var n={};var i=(r=this.columnModel.getSecondaryColumns())!==null&&r!==void 0?r:[];i.forEach((function(r){var i=r.getColDef(),o=i.pivotValueColumn,a=i.pivotTotalColumnIds,s=i.colId,l=i.pivotKeys;if(_.exists(a)){return}var u=l!==null&&l!==void 0?l:[];var c;if(e.leafGroup){c=t.getValuesFromMappedSet(e.childrenMapped,u,o)}else{c=t.getValuesPivotNonLeaf(e,s)}n[s]=t.aggregateValues(c,o.getAggFunc(),o,e,r)}));i.forEach((function(r){var i=r.getColDef(),o=i.pivotValueColumn,a=i.pivotTotalColumnIds,s=i.colId;if(!_.exists(a)){return}var l=[];if(!a||!a.length){return}a.forEach((function(e){l.push(n[e])}));n[s]=t.aggregateValues(l,o.getAggFunc(),o,e,r)}));return n};t.prototype.aggregateRowNodeUsingValuesOnly=function(e,t){var r=this;var n={};var i=t.changedPath.isActive()?t.changedPath.getValueColumnsForNode(e,t.valueColumns):t.valueColumns;var o=t.changedPath.isActive()?t.changedPath.getNotValueColumnsForNode(e,t.valueColumns):null;var a=this.getValuesNormal(e,i);var s=e.aggData;i.forEach((function(t,i){n[t.getId()]=r.aggregateValues(a[i],t.getAggFunc(),t,e)}));if(o&&s){o.forEach((function(e){n[e.getId()]=s[e.getId()]}))}return n};t.prototype.getValuesPivotNonLeaf=function(e,t){var r=[];e.childrenAfterFilter.forEach((function(e){var n=e.aggData[t];r.push(n)}));return r};t.prototype.getValuesFromMappedSet=function(e,t,r){var n=this;var i=e;t.forEach((function(e){return i=i?i[e]:null}));if(!i){return[]}var o=[];i.forEach((function(e){var t=n.valueService.getValue(r,e);o.push(t)}));return o};t.prototype.getValuesNormal=function(e,t){var r=[];t.forEach((function(){return r.push([])}));var n=t.length;var i=this.filteredOnly?e.childrenAfterFilter:e.childrenAfterGroup;var o=i.length;for(var a=0;a<o;a++){var s=i[a];for(var l=0;l<n;l++){var u=t[l];var c=this.valueService.getValue(u,s);r[l].push(c)}}return r};t.prototype.aggregateValues=function(e,t,r,n,i){var o=typeof t==="string"?this.aggFuncService.getAggFunc(t):t;if(typeof o!=="function"){console.error("AG Grid: unrecognised aggregation function "+t);return null}var a=o;var s={values:e,column:r,colDef:r?r.getColDef():undefined,pivotResultColumn:i,rowNode:n,data:n?n.data:undefined,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};return a(s)};__decorate$2m([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2m([Autowired("valueService")],t.prototype,"valueService",void 0);__decorate$2m([Autowired("aggFuncService")],t.prototype,"aggFuncService",void 0);__decorate$2m([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$2m([Autowired("columnApi")],t.prototype,"columnApi",void 0);t=__decorate$2m([Bean("aggregationStage")],t);return t}(BeanStub);var BatchRemover=function(){function e(){this.allSets={};this.allParents=[]}e.prototype.removeFromChildrenAfterGroup=function(e,t){var r=this.getSet(e);r.removeFromChildrenAfterGroup[t.id]=true};e.prototype.isRemoveFromAllLeafChildren=function(e,t){var r=this.getSet(e);return!!r.removeFromAllLeafChildren[t.id]};e.prototype.preventRemoveFromAllLeafChildren=function(e,t){var r=this.getSet(e);delete r.removeFromAllLeafChildren[t.id]};e.prototype.removeFromAllLeafChildren=function(e,t){var r=this.getSet(e);r.removeFromAllLeafChildren[t.id]=true};e.prototype.getSet=function(e){if(!this.allSets[e.id]){this.allSets[e.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}};this.allParents.push(e)}return this.allSets[e.id]};e.prototype.getAllParents=function(){return this.allParents};e.prototype.flush=function(){var e=this;this.allParents.forEach((function(t){var r=e.allSets[t.id];t.childrenAfterGroup=t.childrenAfterGroup.filter((function(e){return!r.removeFromChildrenAfterGroup[e.id]}));t.allLeafChildren=t.allLeafChildren.filter((function(e){return!r.removeFromAllLeafChildren[e.id]}));t.updateHasChildren();if(t.sibling){t.sibling.childrenAfterGroup=t.childrenAfterGroup;t.sibling.allLeafChildren=t.allLeafChildren}}));this.allSets={};this.allParents.length=0};return e}();var __extends$3a=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2l=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$1a=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$I=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$1a(arguments[t]));return e};var GroupStage=function(e){__extends$3a(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.groupIdSequence=new NumberSequence;return t}t.prototype.postConstruct=function(){this.usingTreeData=this.gridOptionsService.isTreeData();if(this.usingTreeData){this.getDataPath=this.gridOptionsService.get("getDataPath")}};t.prototype.execute=function(e){var t=this.createGroupingDetails(e);if(t.transactions){this.handleTransaction(t)}else{var r=e.afterColumnsChanged===true;this.shotgunResetEverything(t,r)}this.positionLeafsAndGroups(e.changedPath);this.orderGroups(t.rootNode);this.selectableService.updateSelectableAfterGrouping(t.rootNode)};t.prototype.positionLeafsAndGroups=function(e){if(this.usingTreeData){return}e.forEachChangedNodeDepthFirst((function(e){if(e.childrenAfterGroup){var t=[];var r=[];var n;e.childrenAfterGroup.forEach((function(e){var i;if(!((i=e.childrenAfterGroup)===null||i===void 0?void 0:i.length)){t.push(e)}else{if(e.key===""&&!n){n=e}else{r.push(e)}}}));if(n){r.push(n)}e.childrenAfterGroup=__spread$I(t,r)}}),false)};t.prototype.createGroupingDetails=function(e){var t=e.rowNode,r=e.changedPath,n=e.rowNodeTransactions,i=e.rowNodeOrder;var o=this.usingTreeData?null:this.columnModel.getRowGroupColumns();var a={includeParents:!this.gridOptionsService.is("suppressParentsInRowNodes"),expandByDefault:this.gridOptionsService.getNum("groupDefaultExpanded"),groupedCols:o,rootNode:t,pivotMode:this.columnModel.isPivotMode(),groupedColCount:this.usingTreeData||!o?0:o.length,rowNodeOrder:i,transactions:n,changedPath:r};return a};t.prototype.handleTransaction=function(e){var t=this;e.transactions.forEach((function(r){var n=!t.usingTreeData?new BatchRemover:undefined;if(_.existsAndNotEmpty(r.remove)){t.removeNodes(r.remove,e,n)}if(_.existsAndNotEmpty(r.update)){t.moveNodesInWrongPath(r.update,e,n)}if(_.existsAndNotEmpty(r.add)){t.insertNodes(r.add,e,false)}if(n){var i=n.getAllParents().slice();n.flush();t.removeEmptyGroups(i,e)}}));if(e.rowNodeOrder){this.sortChildren(e)}};t.prototype.sortChildren=function(e){e.changedPath.forEachChangedNodeDepthFirst((function(t){if(!t.childrenAfterGroup){return}var r=_.sortRowNodesByOrder(t.childrenAfterGroup,e.rowNodeOrder);if(r){e.changedPath.addParentNode(t)}}),false,true)};t.prototype.orderGroups=function(e){if(this.usingTreeData){return}var t=this.getInitialGroupOrderComparator();if(_.exists(t)){r(e)}function r(e){var n=_.exists(e.childrenAfterGroup)&&!e.leafGroup;if(n){e.childrenAfterGroup.sort((function(e,r){return t({nodeA:e,nodeB:r})}));e.childrenAfterGroup.forEach((function(e){return r(e)}))}}};t.prototype.getInitialGroupOrderComparator=function(){var e=this.gridOptionsService.getCallback("initialGroupOrderComparator");if(e){return e}var t=this.gridOptionsService.get("defaultGroupOrderComparator");if(t){return function(e){return t(e.nodeA,e.nodeB)}}};t.prototype.getExistingPathForNode=function(e,t){var r=[];var n=this.usingTreeData?e:e.parent;while(n&&n!==t.rootNode){r.push({key:n.key,rowGroupColumn:n.rowGroupColumn,field:n.field});n=n.parent}r.reverse();return r};t.prototype.moveNodesInWrongPath=function(e,t,r){var n=this;e.forEach((function(e){if(t.changedPath.isActive()){t.changedPath.addParentNode(e.parent)}var i=function(e){return e.key};var o=n.getExistingPathForNode(e,t).map(i);var a=n.getGroupInfo(e,t).map(i);var s=_.areEqual(o,a);if(!s){n.moveNode(e,t,r)}}))};t.prototype.moveNode=function(e,t,r){this.removeNodesInStages([e],t,r);this.insertOneNode(e,t,true,r);e.setData(e.data);if(t.changedPath.isActive()){var n=e.parent;t.changedPath.addParentNode(n)}};t.prototype.removeNodes=function(e,t,r){this.removeNodesInStages(e,t,r);if(t.changedPath.isActive()){e.forEach((function(e){return t.changedPath.addParentNode(e.parent)}))}};t.prototype.removeNodesInStages=function(e,t,r){this.removeNodesFromParents(e,t,r);if(this.usingTreeData){this.postRemoveCreateFillerNodes(e,t);var n=e.map((function(e){return e.parent}));this.removeEmptyGroups(n,t)}};t.prototype.forEachParentGroup=function(e,t,r){var n=t;while(n&&n!==e.rootNode){r(n);n=n.parent}};t.prototype.removeNodesFromParents=function(e,t,r){var n=this;var i=r==null;var o=r?r:new BatchRemover;e.forEach((function(e){n.removeFromParent(e,o);n.forEachParentGroup(t,e.parent,(function(t){o.removeFromAllLeafChildren(t,e)}))}));if(i){o.flush()}};t.prototype.postRemoveCreateFillerNodes=function(e,t){var r=this;e.forEach((function(e){var n=e.hasChildren();if(n){var i=r.getExistingPathForNode(e,t);var o=r.findParentForNode(e,i,t);o.expanded=e.expanded;o.allLeafChildren=e.allLeafChildren;o.childrenAfterGroup=e.childrenAfterGroup;o.childrenMapped=e.childrenMapped;o.updateHasChildren();o.childrenAfterGroup.forEach((function(e){return e.parent=o}))}}))};t.prototype.removeEmptyGroups=function(e,t){var r=this;var n=true;var i=function(e){var t=r.getChildrenMappedKey(e.key,e.rowGroupColumn);var n=e.parent;var i=n&&n.childrenMapped?!n.childrenMapped[t]:true;if(i){return false}return!!e.isEmptyRowGroupNode()};var o=function(){n=false;var o=new BatchRemover;e.forEach((function(e){r.forEachParentGroup(t,e,(function(e){if(i(e)){n=true;r.removeFromParent(e,o);e.setSelectedParams({newValue:false,source:"rowGroupChanged"})}}))}));o.flush()};while(n){o()}};t.prototype.removeFromParent=function(e,t){if(e.parent){if(t){t.removeFromChildrenAfterGroup(e.parent,e)}else{_.removeFromArray(e.parent.childrenAfterGroup,e);e.parent.updateHasChildren()}}var r=this.getChildrenMappedKey(e.key,e.rowGroupColumn);if(e.parent&&e.parent.childrenMapped){e.parent.childrenMapped[r]=undefined}e.setRowTop(null);e.setRowIndex(null)};t.prototype.addToParent=function(e,t){var r=this.getChildrenMappedKey(e.key,e.rowGroupColumn);if(t){var n=t.childrenMapped!=null;if(n){t.childrenMapped[r]=e}t.childrenAfterGroup.push(e);t.updateHasChildren()}};t.prototype.areGroupColsEqual=function(e,t){if(e==null||t==null||e.pivotMode!==t.pivotMode){return false}return _.areEqual(e.groupedCols,t.groupedCols)};t.prototype.checkAllGroupDataAfterColsChanged=function(e){var t=this;var r=function(e){if(!e){return}e.forEach((function(e){var n=!t.usingTreeData&&!e.group;if(n){return}var i={field:e.field,key:e.key,rowGroupColumn:e.rowGroupColumn};t.setGroupData(e,i);r(e.childrenAfterGroup)}))};r(e.rootNode.childrenAfterGroup)};t.prototype.shotgunResetEverything=function(e,t){if(this.noChangeInGroupingColumns(e,t)){return}this.selectionService.filterFromSelection((function(e){return e&&!e.group}));var r=e.rootNode,n=e.groupedCols;r.leafGroup=this.usingTreeData?false:n.length===0;r.childrenAfterGroup=[];r.childrenMapped={};r.updateHasChildren();var i=r.sibling;if(i){i.childrenAfterGroup=r.childrenAfterGroup;i.childrenMapped=r.childrenMapped}this.insertNodes(r.allLeafChildren,e,false)};t.prototype.noChangeInGroupingColumns=function(e,t){var r=false;var n=this.columnModel.getGroupDisplayColumns();var i=n?n.map((function(e){return e.getId()})).join("-"):"";if(t){r=this.usingTreeData||this.areGroupColsEqual(e,this.oldGroupingDetails);if(this.oldGroupDisplayColIds!==i){this.checkAllGroupDataAfterColsChanged(e)}}this.oldGroupingDetails=e;this.oldGroupDisplayColIds=i;return r};t.prototype.insertNodes=function(e,t,r){var n=this;e.forEach((function(e){n.insertOneNode(e,t,r);if(t.changedPath.isActive()){t.changedPath.addParentNode(e.parent)}}))};t.prototype.insertOneNode=function(e,t,r,n){var i=this.getGroupInfo(e,t);var o=this.findParentForNode(e,i,t,n);if(!o.group){console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[o.data,e.data])}if(this.usingTreeData){this.swapGroupWithUserNode(o,e,r)}else{e.parent=o;e.level=i.length;o.childrenAfterGroup.push(e);o.updateHasChildren()}};t.prototype.findParentForNode=function(e,t,r,n){var i=this;var o=r.rootNode;t.forEach((function(t,a){o=i.getOrCreateNextNode(o,t,a,r);if(!(n===null||n===void 0?void 0:n.isRemoveFromAllLeafChildren(o,e))){o.allLeafChildren.push(e)}else{n===null||n===void 0?void 0:n.preventRemoveFromAllLeafChildren(o,e)}}));return o};t.prototype.swapGroupWithUserNode=function(e,t,r){t.parent=e.parent;t.key=e.key;t.field=e.field;t.groupData=e.groupData;t.level=e.level;if(!r){t.expanded=e.expanded}t.leafGroup=e.leafGroup;t.rowGroupIndex=e.rowGroupIndex;t.allLeafChildren=e.allLeafChildren;t.childrenAfterGroup=e.childrenAfterGroup;t.childrenMapped=e.childrenMapped;t.sibling=e.sibling;t.updateHasChildren();this.removeFromParent(e);t.childrenAfterGroup.forEach((function(e){return e.parent=t}));this.addToParent(t,e.parent)};t.prototype.getOrCreateNextNode=function(e,t,r,n){var i=this.getChildrenMappedKey(t.key,t.rowGroupColumn);var o=e.childrenMapped?e.childrenMapped[i]:undefined;if(!o){o=this.createGroup(t,e,r,n);this.addToParent(o,e)}return o};t.prototype.createGroup=function(e,t,r,n){var i=new RowNode(this.beans);i.group=true;i.field=e.field;i.rowGroupColumn=e.rowGroupColumn;this.setGroupData(i,e);i.id=RowNode.ID_PREFIX_ROW_GROUP+this.groupIdSequence.next();i.key=e.key;i.level=r;i.leafGroup=this.usingTreeData?false:r===n.groupedColCount-1;i.allLeafChildren=[];i.setAllChildrenCount(0);i.rowGroupIndex=this.usingTreeData?null:r;i.childrenAfterGroup=[];i.childrenMapped={};i.updateHasChildren();i.parent=n.includeParents?t:null;this.setExpandedInitialValue(n,i);if(this.gridOptionsService.is("groupIncludeFooter")){i.createFooter()}return i};t.prototype.setGroupData=function(e,t){var r=this;e.groupData={};var n=this.columnModel.getGroupDisplayColumns();n.forEach((function(n){var i=r.usingTreeData||(e.rowGroupColumn?n.isRowGroupDisplayed(e.rowGroupColumn.getId()):false);if(i){e.groupData[n.getColId()]=t.key}}))};t.prototype.getChildrenMappedKey=function(e,t){if(t){return t.getId()+"-"+e}return e};t.prototype.setExpandedInitialValue=function(e,t){if(e.pivotMode&&t.leafGroup){t.expanded=false;return}var r=this.gridOptionsService.getCallback("isGroupOpenByDefault");if(r){var n={rowNode:t,field:t.field,key:t.key,level:t.level,rowGroupColumn:t.rowGroupColumn};t.expanded=r(n)==true;return}var i=e.expandByDefault;if(e.expandByDefault===-1){t.expanded=true;return}t.expanded=t.level<i};t.prototype.getGroupInfo=function(e,t){if(this.usingTreeData){return this.getGroupInfoFromCallback(e)}return this.getGroupInfoFromGroupColumns(e,t)};t.prototype.getGroupInfoFromCallback=function(e){var t=this.getDataPath?this.getDataPath(e.data):null;if(t===null||t===undefined||t.length===0){_.doOnce((function(){return console.warn("AG Grid: getDataPath() should not return an empty path for data",e.data)}),"groupStage.getGroupInfoFromCallback")}var r=function(e){return{key:e,field:null,rowGroupColumn:null}};return t?t.map(r):[]};t.prototype.getGroupInfoFromGroupColumns=function(e,t){var r=this;var n=[];t.groupedCols.forEach((function(i){var o=r.valueService.getKeyForNode(i,e);var a=o!==null&&o!==undefined&&o!=="";var s=t.pivotMode||!r.gridOptionsService.is("groupAllowUnbalanced");if(s&&!a){o="";a=true}if(a){var l={key:o,field:i.getColDef().field,rowGroupColumn:i};n.push(l)}}));return n};__decorate$2l([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2l([Autowired("selectableService")],t.prototype,"selectableService",void 0);__decorate$2l([Autowired("valueService")],t.prototype,"valueService",void 0);__decorate$2l([Autowired("beans")],t.prototype,"beans",void 0);__decorate$2l([Autowired("selectionService")],t.prototype,"selectionService",void 0);__decorate$2l([PostConstruct],t.prototype,"postConstruct",null);t=__decorate$2l([Bean("groupStage")],t);return t}(BeanStub);var __extends$39=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$O=function(){__assign$O=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$O.apply(this,arguments)};var __decorate$2k=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$19=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$H=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$19(arguments[t]));return e};var PivotColDefService=function(e){__extends$39(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}r=t;t.prototype.createPivotColumnDefs=function(e){var t=this.columnModel.getPivotColumns();var r=this.columnModel.getValueColumns();var n=t.length;var i=this.recursiveBuildGroup(0,e,[],n,t);function o(e,t){if(t===void 0){t=[]}e.forEach((function(e){if(e.children!==undefined){o(e.children,t)}else{t.push(e)}}));return t}var a=o(i);this.addRowGroupTotals(i,a,r);this.addExpandablePivotGroups(i,a);this.addPivotTotalsToGroups(i,a);var s=a.map((function(e){return _.cloneObject(e)}));return{pivotColumnGroupDefs:i,pivotColumnDefs:s}};t.prototype.recursiveBuildGroup=function(e,t,r,n,i){var o=this;var a=this.columnModel.getValueColumns();if(e>=n){return this.buildMeasureCols(r)}var s=i[e].getColDef();var l=this.headerNameComparator.bind(this,s.pivotComparator);if(a.length===1&&this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&e===n-1){var u=[];_.iterateObject(t,(function(e){var t=__spread$H(r,[e]);u.push(__assign$O(__assign$O({},o.createColDef(a[0],e,t)),{columnGroupShow:"open"}))}));u.sort(l);return u}var c=[];_.iterateObject(t,(function(t,a){var s=__spread$H(r,[t]);c.push({children:o.recursiveBuildGroup(e+1,a,s,n,i),headerName:t,pivotKeys:s,columnGroupShow:"open",groupId:o.generateColumnGroupId(s)})}));c.sort(l);return c};t.prototype.buildMeasureCols=function(e){var t=this;var r=this.columnModel.getValueColumns();if(r.length===0){return[this.createColDef(null,"-",e)]}return r.map((function(r){var n=t.columnModel.getDisplayNameForColumn(r,"header");return __assign$O(__assign$O({},t.createColDef(r,n,e)),{columnGroupShow:"open"})}))};t.prototype.addExpandablePivotGroups=function(e,t){var r=this;if(this.gridOptionsService.is("suppressExpandablePivotGroups")||this.gridOptionsService.get("pivotColumnGroupTotals")){return}var n=function(e,t,i){var o=e;if(o.children){var a=new Map;o.children.forEach((function(e){n(e,t,a)}));var s=!o.children.some((function(e){return e.children}));r.columnModel.getValueColumns().forEach((function(n){var i=r.columnModel.getDisplayNameForColumn(n,"header");var o=r.createColDef(n,i,e.pivotKeys);o.pivotTotalColumnIds=a.get(n.getColId());o.columnGroupShow="closed";o.aggFunc=n.getAggFunc();if(!s){var l=e.children;l.push(o);t.push(o)}}));r.merge(i,a)}else{var l=e;if(!l.pivotValueColumn){return}var u=l.pivotValueColumn.getColId();var c=i.has(u)?i.get(u):[];c.push(l.colId);i.set(u,c)}};e.forEach((function(e){n(e,t,new Map)}))};t.prototype.addPivotTotalsToGroups=function(e,t){var r=this;if(!this.gridOptionsService.get("pivotColumnGroupTotals")){return}var n=this.gridOptionsService.get("pivotColumnGroupTotals")==="after";var i=this.columnModel.getValueColumns();var o=i.map((function(e){return e.getAggFunc()}));if(!o||o.length<1||!this.sameAggFuncs(o)){return}var a=i[0];e.forEach((function(e){r.recursivelyAddPivotTotal(e,t,a,n)}))};t.prototype.recursivelyAddPivotTotal=function(e,t,r,n){var i=this;var o=e;if(!o.children){var a=e;return a.colId?[a.colId]:null}var s=[];o.children.forEach((function(e){var o=i.recursivelyAddPivotTotal(e,t,r,n);if(o){s=s.concat(o)}}));if(o.children.length>1){var l=this.localeService.getLocaleTextFunc();var u=l("pivotColumnGroupTotals","Total");var c=this.createColDef(r,u,e.pivotKeys,true);c.pivotTotalColumnIds=s;c.aggFunc=r.getAggFunc();var d=e.children;n?d.push(c):d.unshift(c);t.push(c)}return s};t.prototype.addRowGroupTotals=function(e,t,r){var n=this;if(!this.gridOptionsService.get("pivotRowTotals")){return}var i=this.gridOptionsService.get("pivotRowTotals")==="after";var o=i?r.slice():r.slice().reverse();var a=function(r){var a=o[r];var l=[];e.forEach((function(e){l=l.concat(n.extractColIdsForValueColumn(e,a))}));var u=o.length>1||!s.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn");s.createRowGroupTotal(e,t,a,l,i,u)};var s=this;for(var l=0;l<o.length;l++){a(l)}};t.prototype.extractColIdsForValueColumn=function(e,t){var r=this;var n=e;if(!n.children){var i=n;return i.pivotValueColumn===t&&i.colId?[i.colId]:[]}var o=[];n.children.forEach((function(e){r.extractColIdsForValueColumn(e,t);var n=r.extractColIdsForValueColumn(e,t);o=o.concat(n)}));return o};t.prototype.createRowGroupTotal=function(e,t,n,i,o,a){var s=this.columnModel.getValueColumns();var l;if(s.length===0){l=this.createColDef(null,"-",[])}else{var u=this.columnModel.getDisplayNameForColumn(n,"header");l=this.createColDef(n,u,[]);l.pivotTotalColumnIds=i}l.colId=r.PIVOT_ROW_TOTAL_PREFIX+l.colId;t.push(l);var c=a?{children:[l],pivotKeys:[],groupId:r.PIVOT_ROW_TOTAL_PREFIX+"_pivotGroup_"+n.getColId()}:l;o?e.push(c):e.unshift(c)};t.prototype.createColDef=function(e,t,r,n){if(n===void 0){n=false}var i={};if(e){var o=e.getColDef();Object.assign(i,o);i.hide=false}i.headerName=t;i.colId=this.generateColumnId(r||[],e&&!n?e.getColId():"");i.field=i.colId;i.valueGetter=function(e){var t;return(t=e.data)===null||t===void 0?void 0:t[e.colDef.field]};i.pivotKeys=r;i.pivotValueColumn=e;if(i.filter===true){i.filter="agNumberColumnFilter"}return i};t.prototype.sameAggFuncs=function(e){if(e.length==1){return true}for(var t=1;t<e.length;t++){if(e[t]!==e[0]){return false}}return true};t.prototype.headerNameComparator=function(e,t,r){if(e){return e(t.headerName,r.headerName)}else{if(t.headerName&&!r.headerName){return 1}else if(!t.headerName&&r.headerName){return-1}if(!t.headerName||!r.headerName){return 0}if(t.headerName<r.headerName){return-1}if(t.headerName>r.headerName){return 1}return 0}};t.prototype.merge=function(e,t){t.forEach((function(t,r,n){var i=e.has(r)?e.get(r):[];var o=__spread$H(i,t);e.set(r,o)}))};t.prototype.generateColumnGroupId=function(e){var t=this.columnModel.getPivotColumns().map((function(e){return e.getColId()}));return"pivotGroup_"+t.join("-")+"_"+e.join("-")};t.prototype.generateColumnId=function(e,t){var r=this.columnModel.getPivotColumns().map((function(e){return e.getColId()}));return"pivot_"+r.join("-")+"_"+e.join("-")+"_"+t};var r;t.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_";__decorate$2k([Autowired("columnModel")],t.prototype,"columnModel",void 0);t=r=__decorate$2k([Bean("pivotColDefService")],t);return t}(BeanStub);var __extends$38=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2j=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var PivotStage=function(e){__extends$38(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.uniqueValues={};return t}t.prototype.execute=function(e){var t=e.changedPath;if(this.columnModel.isPivotActive()){this.executePivotOn(t)}else{this.executePivotOff(t)}};t.prototype.executePivotOff=function(e){this.aggregationColumnsHashLastTime=null;this.uniqueValues={};if(this.columnModel.isSecondaryColumnsPresent()){this.columnModel.setSecondaryColumns(null,"rowModelUpdated");if(e){e.setInactive()}}};t.prototype.executePivotOn=function(e){var t=this.bucketUpRowNodes(e);var r=this.setUniqueValues(t);var n=this.columnModel.getValueColumns();var i=n.map((function(e){return e.getId()+"-"+e.getColDef().headerName})).join("#");var o=n.map((function(e){return e.getAggFunc().toString()})).join("#");var a=this.aggregationColumnsHashLastTime!==i;var s=this.aggregationFuncsHashLastTime!==o;this.aggregationColumnsHashLastTime=i;this.aggregationFuncsHashLastTime=o;var l=this.columnModel.getRowGroupColumns().map((function(e){return e.getId()})).join("#");var u=l!==this.groupColumnsHashLastTime;this.groupColumnsHashLastTime=l;if(r||a||u||s){var c=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),d=c.pivotColumnGroupDefs,p=c.pivotColumnDefs;this.pivotColumnDefs=p;this.columnModel.setSecondaryColumns(d,"rowModelUpdated");if(e){e.setInactive()}}};t.prototype.setUniqueValues=function(e){var t=JSON.stringify(e);var r=JSON.stringify(this.uniqueValues);var n=t!==r;if(n){this.uniqueValues=e;return true}else{return false}};t.prototype.bucketUpRowNodes=function(e){var t=this;var r={};e.forEachChangedNodeDepthFirst((function(e){if(e.leafGroup){e.childrenMapped=null}}));var n=function(e){var i;if(e.leafGroup){t.bucketRowNode(e,r)}else{(i=e.childrenAfterFilter)===null||i===void 0?void 0:i.forEach(n)}};e.executeFromRootNode(n);return r};t.prototype.bucketRowNode=function(e,t){var r=this.columnModel.getPivotColumns();if(r.length===0){e.childrenMapped=null}else{e.childrenMapped=this.bucketChildren(e.childrenAfterFilter,r,0,t)}if(e.sibling){e.sibling.childrenMapped=e.childrenMapped}};t.prototype.bucketChildren=function(e,t,r,n){var i=this;var o={};var a=t[r];e.forEach((function(e){var t=i.valueService.getKeyForNode(a,e);if(_.missing(t)){t=""}if(!n[t]){n[t]={}}if(!o[t]){o[t]=[]}o[t].push(e)}));if(r===t.length-1){return o}else{var s={};_.iterateObject(o,(function(e,o){s[e]=i.bucketChildren(o,t,r+1,n[e])}));return s}};t.prototype.getPivotColumnDefs=function(){return this.pivotColumnDefs};__decorate$2j([Autowired("valueService")],t.prototype,"valueService",void 0);__decorate$2j([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2j([Autowired("pivotColDefService")],t.prototype,"pivotColDefService",void 0);t=__decorate$2j([Bean("pivotStage")],t);return t}(BeanStub);var __extends$37=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2i=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var AGBigInt=typeof BigInt==="undefined"?null:BigInt;var AggFuncService=function(e){__extends$37(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.aggFuncsMap={};t.initialised=false;return t}r=t;t.prototype.init=function(){if(this.initialised){return}this.initialiseWithDefaultAggregations();this.addAggFuncs(this.gridOptionsService.get("aggFuncs"))};t.prototype.initialiseWithDefaultAggregations=function(){this.aggFuncsMap[r.AGG_SUM]=aggSum;this.aggFuncsMap[r.AGG_FIRST]=aggFirst;this.aggFuncsMap[r.AGG_LAST]=aggLast;this.aggFuncsMap[r.AGG_MIN]=aggMin;this.aggFuncsMap[r.AGG_MAX]=aggMax;this.aggFuncsMap[r.AGG_COUNT]=aggCount;this.aggFuncsMap[r.AGG_AVG]=aggAvg;this.initialised=true};t.prototype.isAggFuncPossible=function(e,t){var r=this.getFuncNames(e);var n=_.includes(r,t);var i=_.exists(this.aggFuncsMap[t]);return n&&i};t.prototype.getDefaultAggFunc=function(e){var t=e.getColDef().defaultAggFunc;if(_.exists(t)&&this.isAggFuncPossible(e,t)){return t}if(this.isAggFuncPossible(e,r.AGG_SUM)){return r.AGG_SUM}var n=this.getFuncNames(e);return _.existsAndNotEmpty(n)?n[0]:null};t.prototype.addAggFuncs=function(e){_.iterateObject(e,this.addAggFunc.bind(this))};t.prototype.addAggFunc=function(e,t){this.init();this.aggFuncsMap[e]=t};t.prototype.getAggFunc=function(e){this.init();return this.aggFuncsMap[e]};t.prototype.getFuncNames=function(e){var t=e.getColDef().allowedAggFuncs;return t==null?Object.keys(this.aggFuncsMap).sort():t};t.prototype.clear=function(){this.aggFuncsMap={}};var r;t.AGG_SUM="sum";t.AGG_FIRST="first";t.AGG_LAST="last";t.AGG_MIN="min";t.AGG_MAX="max";t.AGG_COUNT="count";t.AGG_AVG="avg";__decorate$2i([PostConstruct],t.prototype,"init",null);t=r=__decorate$2i([Bean("aggFuncService")],t);return t}(BeanStub);function aggSum(e){var t=e.values;var r=null;for(var n=0;n<t.length;n++){var i=t[n];if(typeof i==="number"){if(r===null){r=i}else{if(AGBigInt){r+=typeof r==="number"?i:AGBigInt(i)}else{r+=i}}}else if(typeof i==="bigint"){if(r===null){r=i}else{r=(typeof r==="bigint"?r:AGBigInt(r))+i}}}return r}function aggFirst(e){return e.values.length>0?e.values[0]:null}function aggLast(e){return e.values.length>0?_.last(e.values):null}function aggMin(e){var t=e.values;var r=null;for(var n=0;n<t.length;n++){var i=t[n];if((typeof i==="number"||typeof i==="bigint")&&(r===null||r>i)){r=i}}return r}function aggMax(e){var t=e.values;var r=null;for(var n=0;n<t.length;n++){var i=t[n];if((typeof i==="number"||typeof i==="bigint")&&(r===null||r<i)){r=i}}return r}function aggCount(e){var t=e.values;var r=0;for(var n=0;n<t.length;n++){var i=t[n];r+=i!=null&&typeof i.value==="number"?i.value:1}return r}function aggAvg(e){var t,r,n;var i=e.values;var o=0;var a=0;for(var s=0;s<i.length;s++){var l=i[s];var u=null;if(typeof l==="number"||typeof l==="bigint"){u=l;a++}else if(l!=null&&(typeof l.value==="number"||typeof l.value==="bigint")&&typeof l.count==="number"){if(AGBigInt){u=l.value*(typeof l.value==="number"?l.count:AGBigInt(l.count))}else{u=l.value*l.count}a+=l.count}if(typeof u==="number"){if(AGBigInt){o+=typeof o==="number"?u:AGBigInt(u)}else{o+=u}}else if(typeof u==="bigint"){o=(typeof o==="bigint"?o:AGBigInt(o))+u}}var c=null;if(a>0){if(AGBigInt){c=o/(typeof o==="number"?a:AGBigInt(a))}else{c=o/a}}var d=(r=(t=e.rowNode)===null||t===void 0?void 0:t.aggData)===null||r===void 0?void 0:r[(n=e.column)===null||n===void 0?void 0:n.getColId()];if(d&&d.count===a&&d.value===c){return d}return{count:a,value:c,toString:function(){return typeof this.value==="number"||typeof this.value==="bigint"?this.value.toString():""},toNumber:function(){return this.value}}}var __extends$36=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2h=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var DropZoneColumnComp=function(e){__extends$36(t,e);function t(t,r,n,i,o){var a=e.call(this)||this;a.column=t;a.dragSourceDropTarget=r;a.ghost=n;a.dropZonePurpose=i;a.horizontal=o;a.popupShowing=false;return a}t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE);var r=this.getGui();var n=this.gridOptionsService.is("functionsReadOnly");this.addElementClasses(r);this.addElementClasses(this.eDragHandle,"drag-handle");this.addElementClasses(this.eText,"text");this.addElementClasses(this.eButton,"button");this.eDragHandle.appendChild(_.createIconNoSpan("columnDrag",this.gridOptionsService));this.eButton.appendChild(_.createIconNoSpan("cancel",this.gridOptionsService));this.setupSort();this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop");this.setupComponents();if(!this.ghost&&!n){this.addDragSource()}this.setupAria();this.addManagedListener(this.eventService,Column.EVENT_SORT_CHANGED,(function(){e.setupAria()}));this.setupTooltip()};t.prototype.setupAria=function(){var e=this.localeService.getLocaleTextFunc();var t=this.getColumnAndAggFuncName(),r=t.name,n=t.aggFuncName;var i=e("ariaDropZoneColumnComponentAggFuncSeperator"," of ");var o={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")};var a=this.column.getSort();var s=this.gridOptionsService.is("rowGroupPanelSuppressSort");var l=[[n&&""+n+i,r,this.isGroupingZone()&&!s&&a&&", "+o[a]].filter((function(e){return!!e})).join("")];var u=this.gridOptionsService.is("functionsReadOnly");if(this.isAggregationZone()&&!u){var c=e("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");l.push(c)}if(this.isGroupingZone()&&this.column.getColDef().sortable&&!s){var d=e("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");l.push(d)}var p=e("ariaDropZoneColumnComponentDescription","Press DELETE to remove");l.push(p);_.setAriaLabel(this.getGui(),l.join(". "))};t.prototype.setupTooltip=function(){var e=this;var t=function(){var t=e.column.getColDef().headerTooltip;e.setTooltip(t)};t();this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,t)};t.prototype.setupSort=function(){var e=this;var t=this.column.getColDef().sortable;var r=this.isGroupingZone();if(!t||!r){return}if(!this.gridOptionsService.is("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,true);var n=function(t){t.preventDefault();var r=e.gridOptionsService.get("multiSortKey")==="ctrl";var n=r?t.ctrlKey||t.metaKey:t.shiftKey;e.sortController.progressSort(e.column,n,"uiColumnSorted")};this.addGuiEventListener("click",n);this.addGuiEventListener("keydown",(function(t){var r=t.key===KeyCode.ENTER;if(r&&e.isGroupingZone()){n(t)}}))}};t.prototype.addDragSource=function(){var e=this;var t={type:DragSourceType.ToolPanel,eElement:this.eDragHandle,defaultIconName:DragAndDropService.ICON_HIDE,getDragItem:function(){return e.createDragItem()},dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(t,true);this.addDestroyFunc((function(){return e.dragAndDropService.removeDragSource(t)}))};t.prototype.createDragItem=function(){var e={};e[this.column.getId()]=this.column.isVisible();return{columns:[this.column],visibleState:e}};t.prototype.setupComponents=function(){this.setTextValue();this.setupRemove();if(this.ghost){this.addCssClass("ag-column-drop-cell-ghost")}if(this.isAggregationZone()&&!this.gridOptionsService.is("functionsReadOnly")){this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))}};t.prototype.setupRemove=function(){var e=this;_.setDisplayed(this.eButton,!this.gridOptionsService.is("functionsReadOnly"));var r={type:t.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",(function(t){var n=t.key===KeyCode.ENTER;var i=t.key===KeyCode.DELETE;if(i){t.preventDefault();e.dispatchEvent(r)}if(n&&e.isAggregationZone()&&!e.gridOptionsService.is("functionsReadOnly")){t.preventDefault();e.onShowAggFuncSelection()}}));this.addManagedListener(this.eButton,"click",(function(t){e.dispatchEvent(r);t.stopPropagation()}));var n=new TouchListener(this.eButton);this.addManagedListener(n,TouchListener.EVENT_TAP,(function(){e.dispatchEvent(r)}));this.addDestroyFunc(n.destroy.bind(n))};t.prototype.getColumnAndAggFuncName=function(){var e=this.displayName;var t="";if(this.isAggregationZone()){var r=this.column.getAggFunc();var n=typeof r==="string"?r:"agg";var i=this.localeService.getLocaleTextFunc();t=i(n,n)}return{name:e,aggFuncName:t}};t.prototype.setTextValue=function(){var e=this.getColumnAndAggFuncName(),t=e.name,r=e.aggFuncName;var n=this.isAggregationZone()?r+"("+t+")":t;var i=_.escapeString(n);this.eText.innerHTML=i};t.prototype.onShowAggFuncSelection=function(){var e=this;if(this.popupShowing){return}this.popupShowing=true;var t=new VirtualList("select-agg-func");var r=this.aggFuncService.getFuncNames(this.column);var n=this.getGui();var i=t.getGui();t.setModel({getRow:function(e){return r[e]},getRowCount:function(){return r.length}});this.getContext().createBean(t);var o=_.loadTemplate('<div class="ag-select-agg-func-popup"></div>');o.style.top="0px";o.style.left="0px";o.appendChild(i);o.style.width=n.clientWidth+"px";var a=function(){e.destroyBean(t);e.popupShowing=false;n.focus()};var s=this.localeService.getLocaleTextFunc();var l=this.popupService.addPopup({modal:true,eChild:o,closeOnEsc:true,closedCallback:a,ariaLabel:s("ariaLabelAggregationFunction","Aggregation Function")});if(l){t.setComponentCreator(this.createAggSelect.bind(this,l.hideFunc))}t.addGuiEventListener("keydown",(function(e){if(e.key===KeyCode.ENTER||e.key===KeyCode.SPACE){var r=t.getLastFocusedRow();if(r==null){return}var n=t.getComponentAt(r);if(n){n.selectItem()}}}));this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:n,ePopup:o,keepWithinBounds:true,column:this.column,position:"under"});t.refresh();var u=r.findIndex((function(t){return t===e.column.getAggFunc()}));if(u===-1){u=0}t.focusRow(u)};t.prototype.createAggSelect=function(e,t){var r=this;var n=function(){e();if(r.gridOptionsService.is("functionsPassive")){var n={type:Events.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[r.column],aggFunc:t};r.eventService.dispatchEvent(n)}else{r.columnModel.setColumnAggFunc(r.column,t,"toolPanelDragAndDrop")}};var i=this.localeService.getLocaleTextFunc();var o=t.toString();var a=i(o,o);var s=new AggItemComp(n,a);return s};t.prototype.addElementClasses=function(e,t){t=t?"-"+t:"";var r=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop-cell"+t,"ag-column-drop-"+r+"-cell"+t)};t.prototype.isAggregationZone=function(){return this.dropZonePurpose==="aggregation"};t.prototype.isGroupingZone=function(){return this.dropZonePurpose==="rowGroup"};t.EVENT_COLUMN_REMOVE="columnRemove";t.TEMPLATE='<span role="option" tabindex="0">\n          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n          <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n        </span>';__decorate$2h([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0);__decorate$2h([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2h([Autowired("popupService")],t.prototype,"popupService",void 0);__decorate$2h([Optional("aggFuncService")],t.prototype,"aggFuncService",void 0);__decorate$2h([Autowired("sortController")],t.prototype,"sortController",void 0);__decorate$2h([RefSelector("eText")],t.prototype,"eText",void 0);__decorate$2h([RefSelector("eDragHandle")],t.prototype,"eDragHandle",void 0);__decorate$2h([RefSelector("eButton")],t.prototype,"eButton",void 0);__decorate$2h([RefSelector("eSortIndicator")],t.prototype,"eSortIndicator",void 0);__decorate$2h([PostConstruct],t.prototype,"init",null);return t}(Component);var AggItemComp=function(e){__extends$36(t,e);function t(t,r){var n=e.call(this,'<div class="ag-select-agg-func-item"/>')||this;n.selectItem=t;n.getGui().innerText=r;n.addGuiEventListener("click",n.selectItem);return n}return t}(Component);var __extends$35=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2g=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$18=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$G=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$18(arguments[t]));return e};var BaseDropZonePanel=function(e){__extends$35(t,e);function t(r,n){var i=e.call(this,'<div class="ag-unselectable" role="presentation"></div>')||this;i.horizontal=r;i.dropZonePurpose=n;i.state=t.STATE_NOT_DRAGGING;i.guiDestroyFunctions=[];i.childColumnComponents=[];i.resizeEnabled=false;i.addElementClasses(i.getGui());i.eColumnDropList=document.createElement("div");i.addElementClasses(i.eColumnDropList,"list");_.setAriaRole(i.eColumnDropList,"listbox");return i}t.prototype.isHorizontal=function(){return this.horizontal};t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(e?{bottom:true}:false);this.resizeEnabled=e};t.prototype.setBeans=function(e){this.beans=e};t.prototype.destroy=function(){this.destroyGui();e.prototype.destroy.call(this)};t.prototype.destroyGui=function(){this.guiDestroyFunctions.forEach((function(e){return e()}));this.guiDestroyFunctions.length=0;this.childColumnComponents.length=0;_.clearElement(this.getGui());_.clearElement(this.eColumnDropList)};t.prototype.init=function(e){this.params=e;this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)}));this.addManagedListener(this.beans.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this));this.addManagedPropertyListener("functionsReadOnly",this.refreshGui.bind(this));this.setupDropTarget();this.positionableFeature=new PositionableFeature(this.getGui(),{minHeight:100});this.createManagedBean(this.positionableFeature);this.refreshGui();_.setAriaLabel(this.eColumnDropList,this.getAriaLabel())};t.prototype.handleKeyDown=function(e){var t=!this.horizontal;var r=e.key===KeyCode.DOWN;var n=e.key===KeyCode.UP;if(!t){var i=this.gridOptionsService.is("enableRtl");r=!i&&e.key===KeyCode.RIGHT||i&&e.key===KeyCode.LEFT;n=!i&&e.key===KeyCode.LEFT||i&&e.key===KeyCode.RIGHT}if(!r&&!n){return}var o=this.focusService.findNextFocusableElement(this.getFocusableElement(),false,n);if(o){e.preventDefault();o.focus()}};t.prototype.addElementClasses=function(e,t){t=t?"-"+t:"";var r=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop"+t,"ag-column-drop-"+r+t)};t.prototype.setupDropTarget=function(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)};this.beans.dragAndDropService.addDropTarget(this.dropTarget)};t.prototype.isInterestedIn=function(e){return e===DragSourceType.HeaderCell||e===DragSourceType.ToolPanel};t.prototype.checkInsertIndex=function(e){var t=this.getNewInsertIndex(e);if(t<0){return false}var r=t!==this.insertIndex;if(r){this.insertIndex=t}return r};t.prototype.getNewInsertIndex=function(e){var t=this;var r=e.event;var n=this.horizontal?r.clientX:r.clientY;var i=this.childColumnComponents.map((function(e){return e.getGui().getBoundingClientRect()}));var o=i.findIndex((function(e){return t.horizontal?e.right>n&&e.left<n:e.top<n&&e.bottom>n}));if(o===-1){var a=this.beans.gridOptionsService.is("enableRtl");var s=i.every((function(e){return n>(t.horizontal?e.right:e.bottom)}));if(s){return a&&this.horizontal?0:this.childColumnComponents.length}var l=i.every((function(e){return n<(t.horizontal?e.left:e.top)}));if(l){return a&&this.horizontal?this.childColumnComponents.length:0}return this.insertIndex}if(this.insertIndex<=o){return o+1}return o};t.prototype.checkDragStartedBySelf=function(e){if(this.state!==t.STATE_NOT_DRAGGING){return}this.state=t.STATE_REARRANGE_COLUMNS;this.potentialDndColumns=e.dragSource.getDragItem().columns||[];this.refreshGui();this.checkInsertIndex(e);this.refreshGui()};t.prototype.onDragging=function(e){this.checkDragStartedBySelf(e);if(this.checkInsertIndex(e)){this.refreshGui()}};t.prototype.onDragEnter=function(e){var r=e.dragSource.getDragItem().columns||[];this.state=t.STATE_NEW_COLUMNS_IN;var n=r.filter(this.isColumnDroppable.bind(this));if(n.length>0){var i=this.isRowGroupPanel()&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&!e.fromNudge;if(i){var o=e.dragSource.getDragItem();var a=o.columns;this.setColumnsVisible(a,false,"uiColumnDragged")}this.potentialDndColumns=n;this.checkInsertIndex(e);this.refreshGui()}};t.prototype.setColumnsVisible=function(e,t,r){if(r===void 0){r="api"}if(e){var n=e.filter((function(e){return!e.getColDef().lockVisible}));this.colModel.setColumnsVisible(n,t,r)}};t.prototype.isPotentialDndColumns=function(){return _.existsAndNotEmpty(this.potentialDndColumns)};t.prototype.isRowGroupPanel=function(){return this.dropZonePurpose==="rowGroup"};t.prototype.onDragLeave=function(e){if(this.state===t.STATE_REARRANGE_COLUMNS){var r=e.dragSource.getDragItem().columns||[];this.removeColumns(r)}if(this.isPotentialDndColumns()){var n=this.isRowGroupPanel()&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&!e.fromNudge;if(n){var i=e.dragSource.getDragItem();this.setColumnsVisible(i.columns,true,"uiColumnDragged")}this.potentialDndColumns=[];this.refreshGui()}this.state=t.STATE_NOT_DRAGGING};t.prototype.onDragStop=function(){if(this.isPotentialDndColumns()){var e=false;if(this.state===t.STATE_NEW_COLUMNS_IN){this.addColumns(this.potentialDndColumns);e=true}else{e=this.rearrangeColumns(this.potentialDndColumns)}this.potentialDndColumns=[];if(!this.beans.gridOptionsService.is("functionsPassive")||!e){this.refreshGui()}}this.state=t.STATE_NOT_DRAGGING};t.prototype.removeColumns=function(e){var t=this.getExistingColumns().filter((function(t){return!_.includes(e,t)}));this.updateColumns(t)};t.prototype.addColumns=function(e){if(!e){return}var t=this.getExistingColumns().slice();var r=e.filter((function(e){return t.indexOf(e)<0}));_.insertArrayIntoArray(t,r,this.insertIndex);this.updateColumns(t)};t.prototype.rearrangeColumns=function(e){var t=this.getNonGhostColumns().slice();_.insertArrayIntoArray(t,e,this.insertIndex);if(_.areEqual(t,this.getExistingColumns())){return false}this.updateColumns(t);return true};t.prototype.refreshGui=function(){var e=this.eColumnDropList.scrollTop;var t=this.resizeEnabled;var r=this.getFocusedItem();var n=this.focusService.findNextFocusableElement();if(!n){n=this.focusService.findNextFocusableElement(undefined,false,true)}this.toggleResizable(false);this.destroyGui();this.addIconAndTitleToGui();this.addEmptyMessageToGui();this.addColumnsToGui();if(!this.isHorizontal()){this.eColumnDropList.scrollTop=e}if(t){this.toggleResizable(t)}if(this.focusService.isKeyboardMode()){this.restoreFocus(r,n)}};t.prototype.getFocusedItem=function(){var e=this.getGui();var t=this.gridOptionsService.getDocument().activeElement;if(!e.contains(t)){return-1}var r=Array.from(e.querySelectorAll(".ag-column-drop-cell"));return r.indexOf(t)};t.prototype.restoreFocus=function(e,t){var r=this.getGui();var n=Array.from(r.querySelectorAll(".ag-column-drop-cell"));if(e===-1){return}if(n.length===0){t.focus()}var i=Math.min(n.length-1,e);var o=n[i];if(o){o.focus()}};t.prototype.getNonGhostColumns=function(){var e=this;var t=this.getExistingColumns();if(this.isPotentialDndColumns()){return t.filter((function(t){return!_.includes(e.potentialDndColumns,t)}))}return t};t.prototype.addColumnsToGui=function(){var e=this;var t=this.getNonGhostColumns();var r=t.map((function(t){return e.createColumnComponent(t,false)}));if(this.isPotentialDndColumns()){var n=this.potentialDndColumns.map((function(t){return e.createColumnComponent(t,true)}));if(this.insertIndex>=r.length){r.push.apply(r,__spread$G(n))}else{r.splice.apply(r,__spread$G([this.insertIndex,0],n))}}this.appendChild(this.eColumnDropList);r.forEach((function(t,r){if(r>0){e.addArrow(e.eColumnDropList)}e.eColumnDropList.appendChild(t.getGui())}));this.addAriaLabelsToComponents()};t.prototype.addAriaLabelsToComponents=function(){var e=this;this.childColumnComponents.forEach((function(t,r){var n=t.getGui();_.setAriaPosInSet(n,r+1);_.setAriaSetSize(n,e.childColumnComponents.length)}))};t.prototype.createColumnComponent=function(e,t){var r=this;var n=new DropZoneColumnComp(e,this.dropTarget,t,this.dropZonePurpose,this.horizontal);n.addEventListener(DropZoneColumnComp.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[e]));this.beans.context.createBean(n);this.guiDestroyFunctions.push((function(){return r.destroyBean(n)}));if(!t){this.childColumnComponents.push(n)}return n};t.prototype.addIconAndTitleToGui=function(){var e=this.params.icon;var t=document.createElement("div");_.setAriaHidden(t,true);this.addElementClasses(t,"title-bar");this.addElementClasses(e,"icon");this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty());t.appendChild(e);if(!this.horizontal){var r=document.createElement("span");this.addElementClasses(r,"title");r.innerHTML=this.params.title;t.appendChild(r)}this.appendChild(t)};t.prototype.isExistingColumnsEmpty=function(){return this.getExistingColumns().length===0};t.prototype.addEmptyMessageToGui=function(){if(!this.isExistingColumnsEmpty()||this.isPotentialDndColumns()){return}var e=document.createElement("span");e.innerHTML=this.params.emptyMessage;this.addElementClasses(e,"empty-message");this.eColumnDropList.appendChild(e)};t.prototype.addArrow=function(e){if(this.horizontal){var t=this.beans.gridOptionsService.is("enableRtl");var r=_.createIconNoSpan(t?"smallLeft":"smallRight",this.beans.gridOptionsService);this.addElementClasses(r,"cell-separator");e.appendChild(r)}};t.STATE_NOT_DRAGGING="notDragging";t.STATE_NEW_COLUMNS_IN="newColumnsIn";t.STATE_REARRANGE_COLUMNS="rearrangeColumns";__decorate$2g([Autowired("columnModel")],t.prototype,"colModel",void 0);__decorate$2g([Autowired("focusService")],t.prototype,"focusService",void 0);return t}(Component);var __extends$34=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2f=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var RowGroupDropZonePanel=function(e){__extends$34(t,e);function t(t){return e.call(this,t,"rowGroup")||this}t.prototype.passBeansUp=function(){e.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var t=this.localeService.getLocaleTextFunc();var r=t("rowGroupColumnsEmptyMessage","Drag here to set row groups");var n=t("groups","Row Groups");e.prototype.init.call(this,{dragAndDropIcon:DragAndDropService.ICON_GROUP,icon:_.createIconNoSpan("rowGroupPanel",this.gridOptionsService,null),emptyMessage:r,title:n});this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))};t.prototype.getAriaLabel=function(){var e=this.localeService.getLocaleTextFunc();var t=e("ariaRowGroupDropZonePanelLabel","Row Groups");return t};t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);t.location="rowGroupColumnsList";return t};t.prototype.isColumnDroppable=function(e){if(this.gridOptionsService.is("functionsReadOnly")||!e.isPrimary()){return false}return e.isAllowRowGroup()&&!e.isRowGroupActive()};t.prototype.updateColumns=function(e){if(this.gridOptionsService.is("functionsPassive")){var t={type:Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(t)}else{this.columnModel.setRowGroupColumns(e,"toolPanelUi")}};t.prototype.getIconName=function(){return this.isPotentialDndColumns()?DragAndDropService.ICON_GROUP:DragAndDropService.ICON_NOT_ALLOWED};t.prototype.getExistingColumns=function(){return this.columnModel.getRowGroupColumns()};__decorate$2f([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2f([Autowired("loggerFactory")],t.prototype,"loggerFactory",void 0);__decorate$2f([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0);__decorate$2f([PostConstruct],t.prototype,"passBeansUp",null);return t}(BaseDropZonePanel);var __extends$33=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2e=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var PivotDropZonePanel=function(e){__extends$33(t,e);function t(t){return e.call(this,t,"pivot")||this}t.prototype.passBeansUp=function(){e.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var t=this.localeService.getLocaleTextFunc();var r=t("pivotColumnsEmptyMessage","Drag here to set column labels");var n=t("pivots","Column Labels");e.prototype.init.call(this,{dragAndDropIcon:DragAndDropService.ICON_GROUP,icon:_.createIconNoSpan("pivotPanel",this.gridOptionsService,null),emptyMessage:r,title:n});this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this));this.refresh()};t.prototype.getAriaLabel=function(){var e=this.localeService.getLocaleTextFunc();var t=e("ariaPivotDropZonePanelLabel","Column Labels");return t};t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);t.location="pivotColumnsList";return t};t.prototype.refresh=function(){this.checkVisibility();this.refreshGui()};t.prototype.checkVisibility=function(){var e=this.columnModel.isPivotMode();if(this.isHorizontal()){switch(this.gridOptionsService.get("pivotPanelShow")){case"always":this.setDisplayed(e);break;case"onlyWhenPivoting":var t=this.columnModel.isPivotActive();this.setDisplayed(e&&t);break;default:this.setDisplayed(false);break}}else{this.setDisplayed(e)}};t.prototype.isColumnDroppable=function(e){if(this.gridOptionsService.is("functionsReadOnly")||!e.isPrimary()){return false}return e.isAllowPivot()&&!e.isPivotActive()};t.prototype.updateColumns=function(e){if(this.gridOptionsService.is("functionsPassive")){var t={type:Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(t)}else{this.columnModel.setPivotColumns(e,"toolPanelUi")}};t.prototype.getIconName=function(){return this.isPotentialDndColumns()?DragAndDropService.ICON_PIVOT:DragAndDropService.ICON_NOT_ALLOWED};t.prototype.getExistingColumns=function(){return this.columnModel.getPivotColumns()};__decorate$2e([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2e([Autowired("loggerFactory")],t.prototype,"loggerFactory",void 0);__decorate$2e([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0);__decorate$2e([PostConstruct],t.prototype,"passBeansUp",null);return t}(BaseDropZonePanel);var __extends$32=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2d=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var GridHeaderDropZones=function(e){__extends$32(t,e);function t(){return e.call(this)||this}t.prototype.postConstruct=function(){this.setGui(this.createNorthPanel());this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this));this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onRowGroupChanged.bind(this));this.addManagedPropertyListener("rowGroupPanelShow",this.onRowGroupChanged.bind(this));this.onRowGroupChanged()};t.prototype.createNorthPanel=function(){var e=document.createElement("div");var t=this.onDropPanelVisible.bind(this);e.classList.add("ag-column-drop-wrapper");_.setAriaRole(e,"presentation");this.rowGroupComp=new RowGroupDropZonePanel(true);this.createManagedBean(this.rowGroupComp);this.pivotComp=new PivotDropZonePanel(true);this.createManagedBean(this.pivotComp);e.appendChild(this.rowGroupComp.getGui());e.appendChild(this.pivotComp.getGui());this.addManagedListener(this.rowGroupComp,Component.EVENT_DISPLAYED_CHANGED,t);this.addManagedListener(this.pivotComp,Component.EVENT_DISPLAYED_CHANGED,t);this.onDropPanelVisible();return e};t.prototype.onDropPanelVisible=function(){var e=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e);this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e)};t.prototype.onRowGroupChanged=function(){if(!this.rowGroupComp){return}var e=this.gridOptionsService.get("rowGroupPanelShow");if(e==="always"){this.rowGroupComp.setDisplayed(true)}else if(e==="onlyWhenGrouping"){var t=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(t)}else{this.rowGroupComp.setDisplayed(false)}};__decorate$2d([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2d([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var __extends$31=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2c=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var FilterAggregatesStage=function(e){__extends$31(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.execute=function(e){var t=this;var r=this.columnModel.isPivotMode();var n=this.filterManager.isAggregateFilterPresent();var i=function(e){return!e.node.group};var o=function(e){return e.node.leafGroup};var a=this.gridOptionsService.getGroupAggFiltering()||(r?o:i);var s=e.changedPath;var l=function(e,r){if(r===void 0){r=false}if(e.childrenAfterFilter){e.childrenAfterAggFilter=e.childrenAfterFilter;if(r){e.childrenAfterAggFilter.forEach((function(e){return l(e,r)}))}t.setAllChildrenCount(e)}if(e.sibling){e.sibling.childrenAfterAggFilter=e.childrenAfterAggFilter}};var u=function(e){var r;e.childrenAfterAggFilter=((r=e.childrenAfterFilter)===null||r===void 0?void 0:r.filter((function(e){var r;var n=a({node:e});if(n){var i=t.filterManager.doesRowPassAggregateFilters({rowNode:e});if(i){l(e,true);return true}}var o=(r=e.childrenAfterAggFilter)===null||r===void 0?void 0:r.length;return o})))||null;t.setAllChildrenCount(e);if(e.sibling){e.sibling.childrenAfterAggFilter=e.childrenAfterAggFilter}};s.forEachChangedNodeDepthFirst(n?u:l,true)};t.prototype.setAllChildrenCountTreeData=function(e){var t=0;e.childrenAfterAggFilter.forEach((function(e){t++;t+=e.allChildrenCount}));e.setAllChildrenCount(t)};t.prototype.setAllChildrenCountGridGrouping=function(e){var t=0;e.childrenAfterAggFilter.forEach((function(e){if(e.group){t+=e.allChildrenCount}else{t++}}));e.setAllChildrenCount(t)};t.prototype.setAllChildrenCount=function(e){if(!e.hasChildren()){e.setAllChildrenCount(null);return}if(this.gridOptionsService.isTreeData()){this.setAllChildrenCountTreeData(e)}else{this.setAllChildrenCountGridGrouping(e)}};__decorate$2c([Autowired("filterManager")],t.prototype,"filterManager",void 0);__decorate$2c([Autowired("columnModel")],t.prototype,"columnModel",void 0);t=__decorate$2c([Bean("filterAggregatesStage")],t);return t}(BeanStub);var VERSION$g="29.3.5";var __extends$30=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2b=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var GroupFilter=function(e){__extends$30(t,e);function t(){return e.call(this,'\n            <div class="ag-group-filter">\n                <div ref="eGroupField"></div>\n                <div ref="eUnderlyingFilter"></div>\n            </div>\n        ')||this}t.prototype.postConstruct=function(){this.initialiseTabGuard({})};t.prototype.init=function(e){var t=this;this.params=e;this.validateParams();return this.updateGroups().then((function(){t.addManagedListener(t.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.onColumnRowGroupChanged()}))}))};t.prototype.validateParams=function(){var e=this.params.colDef;if(e.field){_.doOnce((function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "field". This property will be ignored.')}),"groupFilterFieldParam")}if(e.filterValueGetter){_.doOnce((function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.')}),"groupFilterFilterValueGetterParam")}if(e.filterParams){_.doOnce((function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.')}),"groupFilterFilterParams")}};t.prototype.updateGroups=function(){var e=this.updateGroupField();return this.getUnderlyingFilters(e)};t.prototype.getSourceColumns=function(){this.groupColumn=this.params.column;if(this.gridOptionsService.is("treeData")){_.doOnce((function(){return console.warn("AG Grid: Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.")}),"groupFilterTreeData");return[]}var e=this.columnModel.getSourceColumnsForGroupColumn(this.groupColumn);if(!e){_.doOnce((function(){return console.warn("AG Grid: Group Column Filter only works on group columns. Please use a different filter.")}),"groupFilterNotGroupColumn");return[]}return e};t.prototype.updateGroupField=function(){var e=this;_.clearElement(this.eGroupField);if(this.eGroupFieldSelect){this.destroyBean(this.eGroupFieldSelect)}var t=this.getSourceColumns();var r=t.filter((function(e){return e.isFilterAllowed()}));if(!r.length){this.selectedColumn=undefined;_.setDisplayed(this.eGroupField,false);return null}if(t.length===1){this.selectedColumn=r[0];_.setDisplayed(this.eGroupField,false)}else{if(!this.selectedColumn||!r.some((function(t){return t.getId()===e.selectedColumn.getId()}))){this.selectedColumn=r[0]}this.createGroupFieldSelectElement(r);this.eGroupField.appendChild(this.eGroupFieldSelect.getGui());this.eGroupField.appendChild(_.loadTemplate('<div class="ag-filter-separator"></div>'));_.setDisplayed(this.eGroupField,true)}return r};t.prototype.createGroupFieldSelectElement=function(e){var t=this;this.eGroupFieldSelect=this.createManagedBean(new AgSelect);var r=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(r("groupFilterSelect","Select field:"));this.eGroupFieldSelect.setLabelAlignment("top");this.eGroupFieldSelect.addOptions(e.map((function(e){var r;return{value:e.getId(),text:(r=t.columnModel.getDisplayNameForColumn(e,"groupFilter",false))!==null&&r!==void 0?r:undefined}})));this.eGroupFieldSelect.setValue(this.selectedColumn.getId());this.eGroupFieldSelect.onValueChange((function(e){return t.updateSelectedColumn(e)}));this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper");if(e.length===1){this.eGroupFieldSelect.setDisabled(true)}};t.prototype.getUnderlyingFilters=function(e){var t=this;if(!e){this.filterColumnPairs=undefined;this.selectedFilter=undefined;this.groupColumn.setFilterActive(false,"columnRowGroupChanged");return AgPromise.resolve()}var r=[];var n=[];e.forEach((function(e){var i=t.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU");if(i===null||i===void 0?void 0:i.filterPromise){r.push(i.filterPromise.then((function(r){if(r){n.push({filter:r,column:e})}if(e.getId()===t.selectedColumn.getId()){t.selectedFilter=r!==null&&r!==void 0?r:undefined}return r})))}}));return AgPromise.all(r).then((function(){t.filterColumnPairs=n;t.groupColumn.setFilterActive(t.isFilterActive(),"columnRowGroupChanged")}))};t.prototype.addUnderlyingFilterElement=function(){var e=this;_.clearElement(this.eUnderlyingFilter);if(!this.selectedColumn){return AgPromise.resolve()}var t=this.filterManager.getOrCreateFilterWrapper(this.selectedColumn,"COLUMN_MENU");if(!t){return AgPromise.resolve()}return t.guiPromise.then((function(r){var n;e.eUnderlyingFilter.appendChild(r);(n=t.filterPromise)===null||n===void 0?void 0:n.then((function(t){var r,n;(r=t===null||t===void 0?void 0:t.afterGuiAttached)===null||r===void 0?void 0:r.call(t,e.afterGuiAttachedParams);if(!((n=e.afterGuiAttachedParams)===null||n===void 0?void 0:n.suppressFocus)&&e.eGroupFieldSelect&&!e.eGroupFieldSelect.isDisabled()){e.eGroupFieldSelect.getFocusableElement().focus()}}))}))};t.prototype.updateSelectedColumn=function(e){var r,n;if(!e){return}(n=(r=this.selectedFilter)===null||r===void 0?void 0:r.afterGuiDetached)===null||n===void 0?void 0:n.call(r);var i=this.getFilterColumnPair(e);this.selectedColumn=i===null||i===void 0?void 0:i.column;this.selectedFilter=i===null||i===void 0?void 0:i.filter;this.dispatchEvent({type:t.EVENT_SELECTED_COLUMN_CHANGED});this.addUnderlyingFilterElement()};t.prototype.isFilterActive=function(){var e;return!!((e=this.filterColumnPairs)===null||e===void 0?void 0:e.some((function(e){var t=e.filter;return t.isFilterActive()})))};t.prototype.doesFilterPass=function(){return true};t.prototype.getModel=function(){return null};t.prototype.setModel=function(){return AgPromise.resolve()};t.prototype.afterGuiAttached=function(e){this.afterGuiAttachedParams=e;this.addUnderlyingFilterElement()};t.prototype.afterGuiDetached=function(){var e,t;_.clearElement(this.eUnderlyingFilter);(t=(e=this.selectedFilter)===null||e===void 0?void 0:e.afterGuiDetached)===null||t===void 0?void 0:t.call(e)};t.prototype.onColumnRowGroupChanged=function(){var e=this;this.updateGroups().then((function(){e.dispatchEvent({type:t.EVENT_COLUMN_ROW_GROUP_CHANGED});e.eventService.dispatchEvent({type:"filterAllowedUpdated"})}))};t.prototype.getFilterColumnPair=function(e){var t;if(!e){return undefined}return(t=this.filterColumnPairs)===null||t===void 0?void 0:t.find((function(t){var r=t.column;return r.getId()===e}))};t.prototype.getSelectedFilter=function(){return this.selectedFilter};t.prototype.getSelectedColumn=function(){return this.selectedColumn};t.prototype.isFilterAllowed=function(){return!!this.selectedColumn};t.prototype.destroy=function(){e.prototype.destroy.call(this)};t.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";t.EVENT_SELECTED_COLUMN_CHANGED="selectedColumnChanged";__decorate$2b([Autowired("filterManager")],t.prototype,"filterManager",void 0);__decorate$2b([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2b([RefSelector("eGroupField")],t.prototype,"eGroupField",void 0);__decorate$2b([RefSelector("eUnderlyingFilter")],t.prototype,"eUnderlyingFilter",void 0);__decorate$2b([PostConstruct],t.prototype,"postConstruct",null);return t}(TabGuardComp);var __extends$2$=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2a=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var GroupFloatingFilterComp=function(e){__extends$2$(t,e);function t(){return e.call(this,'\n            <div ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>\n        ')||this}t.prototype.init=function(e){var t=this;this.params=e;var r=this.gridOptionsService.get("groupDisplayType")==="multipleColumns";return new AgPromise((function(e){t.params.parentFilterInstance((function(n){t.parentFilterInstance=n;if(r){t.setupUnderlyingFloatingFilterElement().then((function(){return e()}))}else{t.setupReadOnlyFloatingFilterElement();e()}}))})).then((function(){t.addManagedListener(t.parentFilterInstance,GroupFilter.EVENT_SELECTED_COLUMN_CHANGED,(function(){return t.onSelectedColumnChanged()}));t.addManagedListener(t.parentFilterInstance,GroupFilter.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.onColumnRowGroupChanged()}))}))};t.prototype.setupReadOnlyFloatingFilterElement=function(){var e=this;if(!this.eFloatingFilterText){this.eFloatingFilterText=this.createManagedBean(new AgInputTextField);var t=this.columnModel.getDisplayNameForColumn(this.params.column,"header",true);var r=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(true).setInputAriaLabel(t+" "+r("ariaFilterInput","Filter Input")).addGuiEventListener("click",(function(){return e.params.showParentFilter()}))}this.updateDisplayedValue();this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())};t.prototype.setupUnderlyingFloatingFilterElement=function(){var e=this;this.showingUnderlyingFloatingFilter=false;this.underlyingFloatingFilter=undefined;_.clearElement(this.eFloatingFilter);var t=this.parentFilterInstance.getSelectedColumn();if(t&&!t.isVisible()){var r=this.filterManager.getFloatingFilterCompDetails(t,this.params.showParentFilter);if(r){if(!this.columnVisibleChangedListener){this.columnVisibleChangedListener=this.addManagedListener(t,Column.EVENT_VISIBLE_CHANGED,this.onColumnVisibleChanged.bind(this))}return r.newAgStackInstance().then((function(t){var r,n;e.underlyingFloatingFilter=t;(r=e.underlyingFloatingFilter)===null||r===void 0?void 0:r.onParentModelChanged((n=e.parentFilterInstance.getSelectedFilter())===null||n===void 0?void 0:n.getModel());e.appendChild(t.getGui());e.showingUnderlyingFloatingFilter=true}))}}this.setupReadOnlyFloatingFilterElement();return AgPromise.resolve()};t.prototype.onColumnVisibleChanged=function(){this.setupUnderlyingFloatingFilterElement()};t.prototype.onParentModelChanged=function(e,t){var r,n;if(this.showingUnderlyingFloatingFilter){(r=this.underlyingFloatingFilter)===null||r===void 0?void 0:r.onParentModelChanged((n=this.parentFilterInstance.getSelectedFilter())===null||n===void 0?void 0:n.getModel(),t)}else{this.updateDisplayedValue()}};t.prototype.updateDisplayedValue=function(){if(!this.parentFilterInstance||!this.eFloatingFilterText){return}var e=this.parentFilterInstance.getSelectedFilter();if(!e){this.eFloatingFilterText.setValue("");this.eFloatingFilterText.setDisplayed(false);return}this.eFloatingFilterText.setDisplayed(true);if(e.getModelAsString){var t=e.getModel();this.eFloatingFilterText.setValue(t==null?"":e.getModelAsString(t))}else{this.eFloatingFilterText.setValue("")}};t.prototype.onSelectedColumnChanged=function(){if(!this.showingUnderlyingFloatingFilter){this.updateDisplayedValue()}};t.prototype.onColumnRowGroupChanged=function(){if(!this.showingUnderlyingFloatingFilter){this.updateDisplayedValue()}};t.prototype.destroy=function(){e.prototype.destroy.call(this)};__decorate$2a([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$2a([Autowired("filterManager")],t.prototype,"filterManager",void 0);__decorate$2a([RefSelector("eFloatingFilter")],t.prototype,"eFloatingFilter",void 0);return t}(Component);var RowGroupingModule={version:VERSION$g,moduleName:ModuleNames.RowGroupingModule,beans:[AggregationStage,FilterAggregatesStage,GroupStage,PivotColDefService,PivotStage,AggFuncService],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:GridHeaderDropZones}],userComponents:[{componentName:"agGroupColumnFilter",componentClass:GroupFilter},{componentName:"agGroupColumnFloatingFilter",componentClass:GroupFloatingFilterComp}],dependantModules:[EnterpriseCoreModule]};var __extends$2_=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$29=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ValuesDropZonePanel=function(e){__extends$2_(t,e);function t(t){return e.call(this,t,"aggregation")||this}t.prototype.passBeansUp=function(){e.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var t=this.localeService.getLocaleTextFunc();var r=t("valueColumnsEmptyMessage","Drag here to aggregate");var n=t("values","Values");e.prototype.init.call(this,{dragAndDropIcon:DragAndDropService.ICON_AGGREGATE,icon:_.createIconNoSpan("valuePanel",this.gridOptionsService,null),emptyMessage:r,title:n});this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))};t.prototype.getAriaLabel=function(){var e=this.localeService.getLocaleTextFunc();var t=e("ariaValuesDropZonePanelLabel","Values");return t};t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);t.location="valueColumnsList";return t};t.prototype.getIconName=function(){return this.isPotentialDndColumns()?DragAndDropService.ICON_AGGREGATE:DragAndDropService.ICON_NOT_ALLOWED};t.prototype.isColumnDroppable=function(e){if(this.gridOptionsService.is("functionsReadOnly")||!e.isPrimary()){return false}return e.isAllowValue()&&!e.isValueActive()};t.prototype.updateColumns=function(e){if(this.gridOptionsService.is("functionsPassive")){var t={type:Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(t)}else{this.columnModel.setValueColumns(e,"toolPanelUi")}};t.prototype.getExistingColumns=function(){return this.columnModel.getValueColumns()};__decorate$29([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$29([Autowired("loggerFactory")],t.prototype,"loggerFactory",void 0);__decorate$29([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0);__decorate$29([PostConstruct],t.prototype,"passBeansUp",null);return t}(BaseDropZonePanel);var __extends$2Z=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$28=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var PrimaryColsPanel=function(e){__extends$2Z(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.init=function(e,t,r){this.allowDragging=e;this.params=t;this.eventType=r;this.primaryColsHeaderPanel.init(this.params);var n=this.params.suppressColumnFilter;var i=this.params.suppressColumnSelectAll;var o=this.params.suppressColumnExpandAll;if(o&&n&&i){this.primaryColsHeaderPanel.setDisplayed(false)}this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this));this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this));this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType);this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this));this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this));this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this));this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this));this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this));this.positionableFeature=new PositionableFeature(this.getGui(),{minHeight:100});this.createManagedBean(this.positionableFeature)};t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(e?{bottom:true}:false)};t.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(true)};t.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(false)};t.prototype.expandGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(true,e)};t.prototype.collapseGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(false,e)};t.prototype.setColumnLayout=function(e){this.primaryColsListPanel.setColumnLayout(e)};t.prototype.onFilterChanged=function(e){this.primaryColsListPanel.setFilterText(e.filterText)};t.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()};t.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(true)};t.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(false)};t.prototype.onGroupExpanded=function(e){this.primaryColsHeaderPanel.setExpandState(e.state)};t.prototype.onSelectionChange=function(e){this.primaryColsHeaderPanel.setSelectionState(e.state)};t.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>';__decorate$28([RefSelector("primaryColsHeaderPanel")],t.prototype,"primaryColsHeaderPanel",void 0);__decorate$28([RefSelector("primaryColsListPanel")],t.prototype,"primaryColsListPanel",void 0);return t}(Component);var __extends$2Y=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$N=function(){__assign$N=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$N.apply(this,arguments)};var __decorate$27=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ColumnToolPanel=function(e){__extends$2Y(t,e);function t(){var r=e.call(this,t.TEMPLATE)||this;r.initialised=false;r.childDestroyFuncs=[];return r}t.prototype.setVisible=function(t){e.prototype.setDisplayed.call(this,t);if(t&&!this.initialised){this.init(this.params)}};t.prototype.init=function(e){var t=this;var r={suppressColumnMove:false,suppressColumnSelectAll:false,suppressColumnFilter:false,suppressColumnExpandAll:false,contractColumnSelection:false,suppressPivotMode:false,suppressRowGroups:false,suppressValues:false,suppressPivots:false,suppressSyncLayoutWithGrid:false,api:this.gridApi,columnApi:this.columnApi};this.params=__assign$N(__assign$N(__assign$N({},r),e),{context:this.gridOptionsService.context});if(this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode){this.pivotModePanel=this.createBean(new PivotModePanel);this.childDestroyFuncs.push((function(){return t.destroyBean(t.pivotModePanel)}));this.appendChild(this.pivotModePanel)}this.primaryColsPanel=this.createBean(new PrimaryColsPanel);this.childDestroyFuncs.push((function(){return t.destroyBean(t.primaryColsPanel)}));this.primaryColsPanel.init(true,this.params,"toolPanelUi");this.primaryColsPanel.addCssClass("ag-column-panel-column-select");this.appendChild(this.primaryColsPanel);if(this.isRowGroupingModuleLoaded()){if(!this.params.suppressRowGroups){this.rowGroupDropZonePanel=this.createBean(new RowGroupDropZonePanel(false));this.childDestroyFuncs.push((function(){return t.destroyBean(t.rowGroupDropZonePanel)}));this.appendChild(this.rowGroupDropZonePanel)}if(!this.params.suppressValues){this.valuesDropZonePanel=this.createBean(new ValuesDropZonePanel(false));this.childDestroyFuncs.push((function(){return t.destroyBean(t.valuesDropZonePanel)}));this.appendChild(this.valuesDropZonePanel)}if(!this.params.suppressPivots){this.pivotDropZonePanel=this.createBean(new PivotDropZonePanel(false));this.childDestroyFuncs.push((function(){return t.destroyBean(t.pivotDropZonePanel)}));this.appendChild(this.pivotDropZonePanel)}this.setLastVisible();var n=this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){t.resetChildrenHeight();t.setLastVisible()}));this.childDestroyFuncs.push((function(){return n()}))}this.initialised=true};t.prototype.setPivotModeSectionVisible=function(e){var t=this;if(!this.isRowGroupingModuleLoaded()){return}if(this.pivotModePanel){this.pivotModePanel.setDisplayed(e)}else if(e){this.pivotModePanel=this.createBean(new PivotModePanel);this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild);this.childDestroyFuncs.push((function(){return t.destroyBean(t.pivotModePanel)}))}this.setLastVisible()};t.prototype.setRowGroupsSectionVisible=function(e){if(!this.isRowGroupingModuleLoaded()){return}if(this.rowGroupDropZonePanel){this.rowGroupDropZonePanel.setDisplayed(e)}else if(e){this.rowGroupDropZonePanel=this.createManagedBean(new RowGroupDropZonePanel(false));this.appendChild(this.rowGroupDropZonePanel)}this.setLastVisible()};t.prototype.setValuesSectionVisible=function(e){if(!this.isRowGroupingModuleLoaded()){return}if(this.valuesDropZonePanel){this.valuesDropZonePanel.setDisplayed(e)}else if(e){this.valuesDropZonePanel=this.createManagedBean(new ValuesDropZonePanel(false));this.appendChild(this.valuesDropZonePanel)}this.setLastVisible()};t.prototype.setPivotSectionVisible=function(e){if(!this.isRowGroupingModuleLoaded()){return}if(this.pivotDropZonePanel){this.pivotDropZonePanel.setDisplayed(e)}else if(e){this.pivotDropZonePanel=this.createManagedBean(new PivotDropZonePanel(false));this.appendChild(this.pivotDropZonePanel);this.pivotDropZonePanel.setDisplayed(e)}this.setLastVisible()};t.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach((function(e){if(!e){return}var t=e.getGui();e.toggleResizable(!t.classList.contains("ag-last-column-drop")&&!t.classList.contains("ag-hidden"))}))};t.prototype.setLastVisible=function(){var e=this.getGui();var t=Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop"));t.forEach((function(e){return e.classList.remove("ag-last-column-drop")}));var r=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)");var n=_.last(r);if(n){n.classList.add("ag-last-column-drop")}this.setResizers()};t.prototype.resetChildrenHeight=function(){var e=this.getGui();var t=e.children;for(var r=0;r<t.length;r++){var n=t[r];n.style.removeProperty("height");n.style.removeProperty("flex")}};t.prototype.isRowGroupingModuleLoaded=function(){return ModuleRegistry.assertRegistered(ModuleNames.RowGroupingModule,"Row Grouping")};t.prototype.expandColumnGroups=function(e){this.primaryColsPanel.expandGroups(e)};t.prototype.collapseColumnGroups=function(e){this.primaryColsPanel.collapseGroups(e)};t.prototype.setColumnLayout=function(e){this.primaryColsPanel.setColumnLayout(e)};t.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()};t.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach((function(e){return e()}));this.childDestroyFuncs.length=0;_.clearElement(this.getGui())};t.prototype.refresh=function(){this.destroyChildren();this.init(this.params)};t.prototype.destroy=function(){this.destroyChildren();e.prototype.destroy.call(this)};t.TEMPLATE='<div class="ag-column-panel"></div>';__decorate$27([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$27([Autowired("columnApi")],t.prototype,"columnApi",void 0);return t}(Component);var __extends$2X=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$26=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var HorizontalResizeComp=function(e){__extends$2X(t,e);function t(){var t=e.call(this,'<div class="ag-tool-panel-horizontal-resize"></div>')||this;t.minWidth=100;t.maxWidth=null;return t}t.prototype.setElementToResize=function(e){this.elementToResize=e};t.prototype.postConstruct=function(){var e=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(e);this.setInverted(this.gridOptionsService.is("enableRtl"))};t.prototype.dispatchResizeEvent=function(e,t,r){var n={type:Events.EVENT_TOOL_PANEL_SIZE_CHANGED,width:r,started:e,ended:t};this.eventService.dispatchEvent(n)};t.prototype.onResizeStart=function(){this.startingWidth=this.elementToResize.offsetWidth;this.dispatchResizeEvent(true,false,this.startingWidth)};t.prototype.onResizeEnd=function(e){return this.onResizing(e,true)};t.prototype.onResizing=function(e,t){if(t===void 0){t=false}var r=this.inverted?-1:1;var n=Math.max(this.minWidth,Math.floor(this.startingWidth-e*r));if(this.maxWidth!=null){n=Math.min(this.maxWidth,n)}this.elementToResize.style.width=n+"px";this.dispatchResizeEvent(false,t,n)};t.prototype.setInverted=function(e){this.inverted=e};t.prototype.setMaxWidth=function(e){this.maxWidth=e};t.prototype.setMinWidth=function(e){if(e!=null){this.minWidth=e}else{this.minWidth=100}};__decorate$26([Autowired("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0);__decorate$26([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var __extends$2W=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$25=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var SideBarButtonComp=function(e){__extends$2W(t,e);function t(t){var r=e.call(this)||this;r.toolPanelDef=t;return r}t.prototype.getToolPanelId=function(){return this.toolPanelDef.id};t.prototype.postConstruct=function(){var e=this.createTemplate();this.setTemplate(e);this.setLabel();this.setIcon();this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this))};t.prototype.createTemplate=function(){var e='<div class="ag-side-button" role="presentation">\n                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" class="ag-side-button-button">\n                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span ref ="eLabel" class="ag-side-button-label"></span>\n                </button>\n            </div>';return e};t.prototype.setLabel=function(){var e=this.localeService.getLocaleTextFunc();var t=this.toolPanelDef;var r=e(t.labelKey,t.labelDefault);this.eLabel.innerText=r};t.prototype.setIcon=function(){this.eIconWrapper.insertAdjacentElement("afterbegin",_.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsService))};t.prototype.onButtonPressed=function(){this.dispatchEvent({type:t.EVENT_TOGGLE_BUTTON_CLICKED})};t.prototype.setSelected=function(e){this.addOrRemoveCssClass("ag-selected",e)};t.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked";__decorate$25([RefSelector("eToggleButton")],t.prototype,"eToggleButton",void 0);__decorate$25([RefSelector("eIconWrapper")],t.prototype,"eIconWrapper",void 0);__decorate$25([RefSelector("eLabel")],t.prototype,"eLabel",void 0);__decorate$25([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var __extends$2V=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$24=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var SideBarButtonsComp=function(e){__extends$2V(t,e);function t(){var r=e.call(this,t.TEMPLATE)||this;r.buttonComps=[];return r}t.prototype.postConstruct=function(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))};t.prototype.handleKeyDown=function(e){if(e.key!==KeyCode.TAB||!e.shiftKey){return}var t=_.last(this.columnModel.getAllDisplayedColumns());if(this.focusService.focusGridView(t,true)){e.preventDefault()}};t.prototype.setToolPanelDefs=function(e){e.forEach(this.addButtonComp.bind(this))};t.prototype.setActiveButton=function(e){this.buttonComps.forEach((function(t){t.setSelected(e===t.getToolPanelId())}))};t.prototype.addButtonComp=function(e){var r=this;var n=this.createBean(new SideBarButtonComp(e));this.buttonComps.push(n);this.appendChild(n);n.addEventListener(SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED,(function(){r.dispatchEvent({type:t.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:e.id})}))};t.prototype.clearButtons=function(){this.buttonComps=this.destroyBeans(this.buttonComps);_.clearElement(this.getGui())};t.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked";t.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>';__decorate$24([Autowired("focusService")],t.prototype,"focusService",void 0);__decorate$24([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$24([PostConstruct],t.prototype,"postConstruct",null);__decorate$24([PreDestroy],t.prototype,"clearButtons",null);return t}(Component);var SideBarDefParser=function(){function e(){}e.parse=function(t){if(!t){return undefined}if(t===true){return{toolPanels:[e.DEFAULT_COLUMN_COMP,e.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"}}if(typeof t==="string"){return e.parse([t])}if(Array.isArray(t)){var r=[];t.forEach((function(t){var n=e.DEFAULT_BY_KEY[t];if(!n){console.warn("AG Grid: the key "+t+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(e.DEFAULT_BY_KEY).join(","));return}r.push(n)}));if(r.length===0){return undefined}return{toolPanels:r,defaultToolPanel:r[0].id}}var n={toolPanels:e.parseComponents(t.toolPanels),defaultToolPanel:t.defaultToolPanel,hiddenByDefault:t.hiddenByDefault,position:t.position};return n};e.parseComponents=function(t){var r=[];if(!t){return r}t.forEach((function(t){var n=null;if(typeof t==="string"){var i=e.DEFAULT_BY_KEY[t];if(!i){console.warn("AG Grid: the key "+t+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(e.DEFAULT_BY_KEY).join(","));return}n=i}else{n=t}r.push(n)}));return r};e.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"};e.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"};e.DEFAULT_BY_KEY={columns:e.DEFAULT_COLUMN_COMP,filters:e.DEFAULT_FILTER_COMP};return e}();var __extends$2U=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$23=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ToolPanelWrapper=function(e){__extends$2U(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.setupResize=function(){var e=this.getGui();var t=this.resizeBar=this.createManagedBean(new HorizontalResizeComp);t.setElementToResize(e);this.appendChild(t)};t.prototype.getToolPanelId=function(){return this.toolPanelId};t.prototype.setToolPanelDef=function(e){var t=e.id,r=e.minWidth,n=e.maxWidth,i=e.width;this.toolPanelId=t;this.width=i;var o={};var a=this.userComponentFactory.getToolPanelCompDetails(e,o);var s=a.newAgStackInstance();if(s==null){console.warn("AG Grid: error processing tool panel component "+t+". You need to specify either 'toolPanel' or 'toolPanelFramework'");return}s.then(this.setToolPanelComponent.bind(this));if(r!=null){this.resizeBar.setMinWidth(r)}if(n!=null){this.resizeBar.setMaxWidth(n)}};t.prototype.setToolPanelComponent=function(e){var t=this;this.toolPanelCompInstance=e;this.appendChild(e.getGui());this.addDestroyFunc((function(){t.destroyBean(e)}));if(this.width){this.getGui().style.width=this.width+"px"}};t.prototype.getToolPanelInstance=function(){return this.toolPanelCompInstance};t.prototype.setResizerSizerSide=function(e){var t=this.gridOptionsService.is("enableRtl");var r=e==="left";var n=t?r:!r;this.resizeBar.setInverted(n)};t.prototype.refresh=function(){this.toolPanelCompInstance.refresh()};t.TEMPLATE='<div class="ag-tool-panel-wrapper"/>';__decorate$23([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0);__decorate$23([PostConstruct],t.prototype,"setupResize",null);return t}(Component);var __extends$2T=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$22=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var SideBarComp=function(e){__extends$2T(t,e);function t(){var r=e.call(this,t.TEMPLATE)||this;r.toolPanelWrappers=[];return r}t.prototype.postConstruct=function(){var e=this;this.sideBarButtonsComp.addEventListener(SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this));this.setSideBarDef();this.addManagedPropertyListener("sideBar",(function(){e.clearDownUi();e.setSideBarDef()}));this.gridApi.registerSideBarComp(this);this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))};t.prototype.onTabKeyDown=function(e){if(e.defaultPrevented){return}var t=this,r=t.focusService,n=t.sideBarButtonsComp;var i=this.getGui();var o=n.getGui();var a=this.gridOptionsService.getDocument();var s=a.activeElement;var l=i.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)");var u=e.target;if(!l){return}if(o.contains(s)){if(r.focusInto(l,e.shiftKey)){e.preventDefault()}return}if(!e.shiftKey){return}var c=null;if(l.contains(s)){c=this.focusService.findNextFocusableElement(l,undefined,true)}else if(r.isTargetUnderManagedComponent(l,u)&&e.shiftKey){c=this.focusService.findFocusableElementBeforeTabGuard(l,u)}if(!c){c=o.querySelector(".ag-selected button")}if(c){e.preventDefault();c.focus()}};t.prototype.handleKeyDown=function(e){var t=this.gridOptionsService.getDocument();if(!this.sideBarButtonsComp.getGui().contains(t.activeElement)){return}var r=this.sideBarButtonsComp.getGui();var n=Array.prototype.slice.call(r.querySelectorAll(".ag-side-button"));var i=t.activeElement;var o=n.findIndex((function(e){return e.contains(i)}));var a=null;switch(e.key){case KeyCode.LEFT:case KeyCode.UP:a=Math.max(0,o-1);break;case KeyCode.RIGHT:case KeyCode.DOWN:a=Math.min(o+1,n.length-1);break}if(a===null){return}var s=n[a].querySelector("button");if(s){s.focus();e.preventDefault()}};t.prototype.onToolPanelButtonClicked=function(e){var t=e.toolPanelId;var r=this.openedItem();if(r===t){this.openToolPanel(undefined,"sideBarButtonClicked")}else{this.openToolPanel(t,"sideBarButtonClicked")}};t.prototype.clearDownUi=function(){this.sideBarButtonsComp.clearButtons();this.destroyToolPanelWrappers()};t.prototype.setSideBarDef=function(){this.setDisplayed(false);var e=this.gridOptionsService.get("sideBar");this.sideBar=SideBarDefParser.parse(e);if(!!this.sideBar&&!!this.sideBar.toolPanels){var t=!this.sideBar.hiddenByDefault;this.setDisplayed(t);var r=this.sideBar.toolPanels;this.sideBarButtonsComp.setToolPanelDefs(r);this.setupToolPanels(r);this.setSideBarPosition(this.sideBar.position);if(!this.sideBar.hiddenByDefault){this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}}};t.prototype.getDef=function(){return this.sideBar};t.prototype.setSideBarPosition=function(e){if(!e){e="right"}var t=e==="left";var r=t?"right":"left";this.addOrRemoveCssClass("ag-side-bar-left",t);this.addOrRemoveCssClass("ag-side-bar-right",!t);this.toolPanelWrappers.forEach((function(e){e.setResizerSizerSide(r)}));return this};t.prototype.setupToolPanels=function(e){var t=this;e.forEach((function(e){if(e.id==null){console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id");return}if(e.toolPanel==="agColumnsToolPanel"){var r=!ModuleRegistry.assertRegistered(ModuleNames.ColumnsToolPanelModule,"Column Tool Panel");if(r){return}}if(e.toolPanel==="agFiltersToolPanel"){var r=!ModuleRegistry.assertRegistered(ModuleNames.FiltersToolPanelModule,"Filters Tool Panel");if(r){return}}var n=new ToolPanelWrapper;t.getContext().createBean(n);n.setToolPanelDef(e);n.setDisplayed(false);t.getGui().appendChild(n.getGui());t.toolPanelWrappers.push(n)}))};t.prototype.refresh=function(){this.toolPanelWrappers.forEach((function(e){return e.refresh()}))};t.prototype.openToolPanel=function(e,t){if(t===void 0){t="api"}var r=this.openedItem();if(r===e){return}this.toolPanelWrappers.forEach((function(t){var r=e===t.getToolPanelId();t.setDisplayed(r)}));var n=this.openedItem();var i=r!==n;if(i){this.sideBarButtonsComp.setActiveButton(e);this.raiseToolPanelVisibleEvent(e,r!==null&&r!==void 0?r:undefined,t)}};t.prototype.getToolPanelInstance=function(e){var t=this.toolPanelWrappers.filter((function(t){return t.getToolPanelId()===e}))[0];if(!t){console.warn("AG Grid: unable to lookup Tool Panel as invalid key supplied: "+e);return}return t.getToolPanelInstance()};t.prototype.raiseToolPanelVisibleEvent=function(e,t,r){var n={type:Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:e};this.eventService.dispatchEvent(n);if(t){var i={type:Events.EVENT_INTERNAL_TOOL_PANEL_VISIBLE_CHANGED,source:r,key:t,visible:false};this.eventService.dispatchEvent(i)}if(e){var o={type:Events.EVENT_INTERNAL_TOOL_PANEL_VISIBLE_CHANGED,source:r,key:e,visible:true};this.eventService.dispatchEvent(o)}};t.prototype.close=function(e){if(e===void 0){e="api"}this.openToolPanel(undefined,e)};t.prototype.isToolPanelShowing=function(){return!!this.openedItem()};t.prototype.openedItem=function(){var e=null;this.toolPanelWrappers.forEach((function(t){if(t.isDisplayed()){e=t.getToolPanelId()}}));return e};t.prototype.destroyToolPanelWrappers=function(){var e=this;this.toolPanelWrappers.forEach((function(t){_.removeFromParent(t.getGui());e.destroyBean(t)}));this.toolPanelWrappers.length=0};t.prototype.destroy=function(){this.destroyToolPanelWrappers();e.prototype.destroy.call(this)};t.TEMPLATE='<div class="ag-side-bar ag-unselectable">\n            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>\n        </div>';__decorate$22([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$22([Autowired("focusService")],t.prototype,"focusService",void 0);__decorate$22([RefSelector("sideBarButtons")],t.prototype,"sideBarButtonsComp",void 0);__decorate$22([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var __extends$2S=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$21=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ToolPanelColDefService=function(e){__extends$2S(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.isColGroupDef=function(e){return e&&typeof e.children!=="undefined"};t.getId=function(e){return t.isColGroupDef(e)?e.groupId:e.colId};return t}t.prototype.createColumnTree=function(e){var t=this;var r=[];var n=function(e,i){if(t.isColGroupDef(e)){var o=e;var a=typeof o.groupId!=="undefined"?o.groupId:o.headerName;var s=new ProvidedColumnGroup(o,a,false,i);var l=[];o.children.forEach((function(e){var t=n(e,i+1);if(t){l.push(t)}}));s.setChildren(l);return s}else{var u=e;var c=u.colId?u.colId:u.field;var d=t.columnModel.getPrimaryColumn(c);if(!d){r.push(u)}return d}};var i=[];e.forEach((function(e){var t=n(e,0);if(t){i.push(t)}}));if(r.length>0){console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",r)}return i};t.prototype.syncLayoutWithGrid=function(e){var t=this.getLeafPathTrees();var r=this.mergeLeafPathTrees(t);e(r)};t.prototype.getLeafPathTrees=function(){var e=function(t,r){var n;if(t instanceof ProvidedColumnGroup){if(t.isPadding()){n=r}else{var i=Object.assign({},t.getColGroupDef());i.groupId=t.getGroupId();i.children=[r];n=i}}else{var o=Object.assign({},t.getColDef());o.colId=t.getColId();n=o}var a=t.getOriginalParent();if(a){return e(a,n)}else{return n}};var t=this.columnModel.getAllGridColumns();var r=t.filter((function(e){var t=e.getColDef();return e.isPrimary()&&!t.showRowGroup}));return r.map((function(t){return e(t,t.getColDef())}))};t.prototype.mergeLeafPathTrees=function(e){var t=this;var r=function(e,r){var n=t.isColGroupDef(e)&&t.isColGroupDef(r);return n&&t.getId(e)===t.getId(r)};var n=function(e,r){if(!t.isColGroupDef(r)){return e}var i=e;var o=r;if(o.children&&o.groupId){var a=t.addChildrenToGroup(i,o.groupId,o.children[0]);if(a){return i}}o.children.forEach((function(e){return n(i,e)}));return i};var i=[];for(var o=1;o<=e.length;o++){var a=e[o-1];var s=e[o];if(r(a,s)){e[o]=n(a,s)}else{i.push(a)}}return i};t.prototype.addChildrenToGroup=function(e,t,r){var n=this;var i=function(e,t){var r=e.children.map(n.getId);var i=_.includes(r,n.getId(t));var o=_.last(e.children);var a=o&&n.getId(o)!==n.getId(t);return i&&a};if(!this.isColGroupDef(e)){return true}var o=e;var a=r;if(i(o,a)){o.children.push(a);return true}if(o.groupId===t){var s=o.children.map(this.getId);var l=_.includes(s,this.getId(a));if(!l){o.children.push(a);return true}}o.children.forEach((function(e){return n.addChildrenToGroup(e,t,r)}));return false};__decorate$21([Autowired("columnModel")],t.prototype,"columnModel",void 0);t=__decorate$21([Bean("toolPanelColDefService")],t);return t}(BeanStub);var VERSION$f="29.3.5";var SideBarModule={version:VERSION$f,moduleName:ModuleNames.SideBarModule,beans:[ToolPanelColDefService],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:HorizontalResizeComp},{componentName:"AgSideBar",componentClass:SideBarComp},{componentName:"AgSideBarButtons",componentClass:SideBarButtonsComp}],dependantModules:[EnterpriseCoreModule]};var __decorate$20=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ModelItemUtils=function(){function e(){}e.prototype.selectAllChildren=function(e,t,r){var n=this.extractAllLeafColumns(e);this.setAllColumns(n,t,r)};e.prototype.setColumn=function(e,t,r){this.setAllColumns([e],t,r)};e.prototype.setAllColumns=function(e,t,r){if(this.columnModel.isPivotMode()){this.setAllPivot(e,t,r)}else{this.setAllVisible(e,t,r)}};e.prototype.extractAllLeafColumns=function(e){var t=[];var r=function(e){e.forEach((function(e){if(!e.isPassesFilter()){return}if(e.isGroup()){r(e.getChildren())}else{t.push(e.getColumn())}}))};r(e);return t};e.prototype.setAllVisible=function(e,t,r){var n=[];e.forEach((function(e){if(e.getColDef().lockVisible){return}if(e.isVisible()!=t){n.push({colId:e.getId(),hide:!t})}}));if(n.length>0){this.columnModel.applyColumnState({state:n},r)}};e.prototype.setAllPivot=function(e,t,r){if(this.gridOptionsService.is("functionsPassive")){this.setAllPivotPassive(e,t)}else{this.setAllPivotActive(e,t,r)}};e.prototype.setAllPivotPassive=function(e,t){var r=this.columnModel.getPivotColumns().slice();var n=this.columnModel.getValueColumns().slice();var i=this.columnModel.getRowGroupColumns().slice();var o=false;var a=false;var s=false;var l=function(e){if(e.isAnyFunctionActive()){return}if(e.isAllowValue()){n.push(e);a=true}else if(e.isAllowRowGroup()){i.push(e);o=true}else if(e.isAllowPivot()){r.push(e);s=true}};var u=function(e){if(!e.isAnyFunctionActive()){return}if(r.indexOf(e)>=0){_.removeFromArray(r,e);o=true}if(n.indexOf(e)>=0){_.removeFromArray(n,e);a=true}if(i.indexOf(e)>=0){_.removeFromArray(i,e);s=true}};var c=t?l:u;e.forEach(c);if(o){var d={type:Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:r};this.eventService.dispatchEvent(d)}if(s){var p={type:Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(p)}if(a){var f={type:Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(f)}};e.prototype.setAllPivotActive=function(e,t,r){var n=this;var i=[];var o=function(e){if(e.isAnyFunctionActive()){return}if(e.isAllowValue()){var t=typeof e.getAggFunc()==="string"?e.getAggFunc():n.aggFuncService.getDefaultAggFunc(e);i.push({colId:e.getId(),aggFunc:t})}else if(e.isAllowRowGroup()){i.push({colId:e.getId(),rowGroup:true})}else if(e.isAllowPivot()){i.push({colId:e.getId(),pivot:true})}};var a=function(e){var t=e.isPivotActive()||e.isRowGroupActive()||e.isValueActive();if(t){i.push({colId:e.getId(),pivot:false,rowGroup:false,aggFunc:null})}};var s=t?o:a;e.forEach(s);if(i.length>0){this.columnModel.applyColumnState({state:i},r)}};__decorate$20([Autowired("aggFuncService")],e.prototype,"aggFuncService",void 0);__decorate$20([Autowired("columnModel")],e.prototype,"columnModel",void 0);__decorate$20([Autowired("gridOptionsService")],e.prototype,"gridOptionsService",void 0);__decorate$20([Autowired("eventService")],e.prototype,"eventService",void 0);e=__decorate$20([Bean("modelItemUtils")],e);return e}();var VERSION$e="29.3.5";var ColumnsToolPanelModule={version:VERSION$e,moduleName:ModuleNames.ColumnsToolPanelModule,beans:[ModelItemUtils],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:PrimaryColsHeaderPanel},{componentName:"AgPrimaryColsList",componentClass:PrimaryColsListPanel},{componentName:"AgPrimaryCols",componentClass:PrimaryColsPanel}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:ColumnToolPanel}],dependantModules:[EnterpriseCoreModule,RowGroupingModule,SideBarModule]};var workbook={getTemplate:function(){return{name:"Workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",html:"http://www.w3.org/TR/REC-html40"}}],rawMap:{xmlns:"urn:schemas-microsoft-com:office:spreadsheet"}}}}};var excelWorkbook={getTemplate:function(){return{name:"ExcelWorkbook",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:excel"}},children:[{name:"WindowHeight",textNode:"8130"},{name:"WindowWidth",textNode:"15135"},{name:"WindowHeight",textNode:"8130"},{name:"WindowTopX",textNode:"120"},{name:"WindowTopY",textNode:"45"},{name:"ProtectStructure",textNode:"False"},{name:"ProtectWindow",textNode:"False"}]}}};var column={getTemplate:function(e){var t=e.width;return{name:"Column",properties:{prefixedAttributes:[{prefix:"ss:",map:{Width:t}}]}}}};var cell={getTemplate:function(e){var t=e.mergeAcross,r=e.styleId,n=e.data;var i={};if(t){i.MergeAcross=t}if(r){i.StyleID=r}return{name:"Cell",properties:{prefixedAttributes:[{prefix:"ss:",map:i}]},children:[{name:"Data",properties:{prefixedAttributes:[{prefix:"ss:",map:{Type:n===null||n===void 0?void 0:n.type}}]},textNode:n===null||n===void 0?void 0:n.value}]}}};var row={getTemplate:function(e){var t=e.cells;return{name:"Row",children:t.map((function(e){return cell.getTemplate(e)}))}}};var worksheet={getTemplate:function(e){var t=e.table,r=e.name;var n=t.columns,i=t.rows;var o=n.map((function(e){return column.getTemplate(e)}));var a=i.map((function(e){return row.getTemplate(e)}));return{name:"Worksheet",children:[{name:"Table",children:o.concat(a)}],properties:{prefixedAttributes:[{prefix:"ss:",map:{Name:r}}]}}}};var documentProperties={getTemplate:function(){return{name:"DocumentProperties",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:office"}},children:[{name:"Version",textNode:"12.00"}]}}};var alignment={getTemplate:function(e){var t=e.alignment,r=t.vertical,n=t.horizontal,i=t.indent,o=t.readingOrder,a=t.rotate,s=t.shrinkToFit,l=t.verticalText,u=t.wrapText;return{name:"Alignment",properties:{prefixedAttributes:[{prefix:"ss:",map:{Vertical:r,Horizontal:n,Indent:i,ReadingOrder:o,Rotate:a,ShrinkToFit:s,VerticalText:l,WrapText:u}}]}}}};var borders={getTemplate:function(e){var t=e.borders,r=t.borderBottom,n=t.borderLeft,i=t.borderRight,o=t.borderTop;return{name:"Borders",children:[r,n,i,o].map((function(e,t){var r=t==0?"Bottom":t==1?"Left":t==2?"Right":"Top";return{name:"Border",properties:{prefixedAttributes:[{prefix:"ss:",map:{Position:r,LineStyle:e.lineStyle,Weight:e.weight,Color:e.color}}]}}}))}}};var font={getTemplate:function(e){var t=e.font,r=t.bold,n=t.fontName,i=t.italic,o=t.color,a=t.outline,s=t.shadow,l=t.size,u=t.strikeThrough,c=t.underline,d=t.verticalAlign,p=t.charSet,f=t.family;return{name:"Font",properties:{prefixedAttributes:[{prefix:"ss:",map:{Bold:r,FontName:n,Italic:i,Color:o,Outline:a,Shadow:s,Size:l,StrikeThrough:u,Underline:c,VerticalAlign:d}},{prefix:"x:",map:{CharSet:p,Family:f}}]}}}};var interior={getTemplate:function(e){var t=e.interior,r=t.color,n=t.pattern,i=t.patternColor;return{name:"Interior",properties:{prefixedAttributes:[{prefix:"ss:",map:{Color:r,Pattern:n,PatternColor:i}}]}}}};var protection={getTemplate:function(e){return{name:"Protection",properties:{prefixedAttributes:[{prefix:"ss:",map:{Protected:e.protection.protected,HideFormula:e.protection.hideFormula}}]}}}};var numberFormat={getTemplate:function(e){var t=e.numberFormat.format;return{name:"NumberFormat",properties:{prefixedAttributes:[{prefix:"ss:",map:{Format:t}}]}}}};var style={getTemplate:function(e){var t=e.id,r=e.name;return{name:"Style",properties:{prefixedAttributes:[{prefix:"ss:",map:{ID:t,Name:r?r:t}}]}}}};var ExcelXmlFactory=function(){function e(){}e.createExcel=function(e,t){var r=this.excelXmlHeader();var n=documentProperties.getTemplate();var i=excelWorkbook.getTemplate();var o=this.workbook(n,i,e,t);return""+r+XmlFactory.createXml(o,(function(e){return e?"1":"0"}))};e.workbook=function(e,t,r,n){var i=[e,t,this.stylesXmlElement(r)].concat(worksheet.getTemplate(n));return Object.assign({},workbook.getTemplate(),{children:i})};e.excelXmlHeader=function(){return'<?xml version="1.0" ?>\n        <?mso-application progid="Excel.Sheet" ?>\n        '};e.stylesXmlElement=function(e){var t=this;return{name:"Styles",children:e?e.map((function(e){return t.styleXmlElement(e)})):[]}};e.styleXmlElement=function(e){var t=_.compose(this.addProperty("alignment",e),this.addProperty("borders",e),this.addProperty("font",e),this.addProperty("interior",e),this.addProperty("protection",e),this.addProperty("numberFormat",e))([]);return Object.assign({},style.getTemplate(e),{children:t})};e.addProperty=function(e,t){return function(r){if(!t[e]){return r}var n={alignment:alignment,borders:borders,font:font,interior:interior,numberFormat:numberFormat,protection:protection};return r.concat(n[e].getTemplate(t))}};e.factoryMode=ExcelFactoryMode.SINGLE_SHEET;return e}();var INCH_TO_EMU=9525;var numberFormatMap={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49};var pixelsToPoint=function(e){return Math.round(e*72/96)};var pointsToPixel=function(e){return Math.round(e*96/72)};var pixelsToEMU=function(e){return Math.ceil(e*INCH_TO_EMU)};var getFontFamilyId=function(e){if(e===undefined){return}var t=["Automatic","Roman","Swiss","Modern","Script","Decorative"];var r=t.indexOf(e||"Automatic");return Math.max(r,0)};var getHeightFromProperty=function(e,t){if(!t){return}var r;if(typeof t==="number"){r=t}else{var n=t;r=n({rowIndex:e})}return pixelsToPoint(r)};var setExcelImageTotalWidth=function(e,t){var r=e.position,n=r.colSpan,i=r.column;if(e.width){if(n){var o=t.slice(i-1,i+n-1);var a=0;for(var s=0;s<o.length;s++){var l=o[s].getActualWidth();if(e.width<a+l){e.position.colSpan=s+1;e.totalWidth=e.width;e.width=e.totalWidth-a;break}a+=l}}else{e.totalWidth=e.width}}};var setExcelImageTotalHeight=function(e,t){var r=e.position,n=r.rowSpan,i=r.row;if(e.height){if(n){var o=0;var a=0;for(var s=i;s<i+n;s++){var l=pointsToPixel(getHeightFromProperty(s,t)||20);if(e.height<o+l){e.position.rowSpan=a+1;e.totalHeight=e.height;e.height=e.totalHeight-o;break}o+=l;a++}}else{e.totalHeight=e.height}}};var createXmlPart=function(e){var t=XmlFactory.createHeader({encoding:"UTF-8",standalone:"yes"});var r=XmlFactory.createXml(e);return""+t+r};var getExcelColumnName=function(e){var t=65;var r=26;var n=String.fromCharCode;var i=Math.floor(e/r);var o=e%r;if(!i||e===r){return n(t+e-1)}if(!o){return getExcelColumnName(i-1)+"Z"}if(i<r){return n(t+i-1)+n(t+o-1)}return getExcelColumnName(i)+n(t+o-1)};var __extends$2R=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$M=function(){__assign$M=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$M.apply(this,arguments)};var __read$17=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$F=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$17(arguments[t]));return e};var BaseExcelSerializingSession=function(e){__extends$2R(t,e);function t(t){var r=e.call(this,t)||this;r.mixedStyles={};r.mixedStyleCounter=0;r.rows=[];r.config=Object.assign({},t);r.stylesByIds={};r.config.baseExcelStyles.forEach((function(e){r.stylesByIds[e.id]=e}));r.excelStyles=__spread$F(r.config.baseExcelStyles);return r}t.prototype.addCustomContent=function(e){var t=this;e.forEach((function(e){var r=t.rows.length+1;var n={height:getHeightFromProperty(r,e.height||t.config.rowHeight),cells:(e.cells||[]).map((function(e,n){var i,o,a;var s=t.addImage(r,t.columnsToExport[n],(i=e.data)===null||i===void 0?void 0:i.value);var l=null;if(e.styleId){l=typeof e.styleId==="string"?[e.styleId]:e.styleId}var u=t.getStyleId(l);if(s){return t.createCell(u,t.getDataTypeForValue(s.value),s.value==null?"":s.value)}var c=(a=(o=e.data)===null||o===void 0?void 0:o.value)!==null&&a!==void 0?a:"";var d=t.getDataTypeForValue(c);if(e.mergeAcross){return t.createMergedCell(u,d,c,e.mergeAcross)}return t.createCell(u,d,c)})),outlineLevel:e.outlineLevel||undefined};if(e.collapsed!=null){n.collapsed=e.collapsed}if(e.hidden!=null){n.hidden=e.hidden}t.rows.push(n)}))};t.prototype.onNewHeaderGroupingRow=function(){var e=this;var t=[];this.rows.push({cells:t,height:getHeightFromProperty(this.rows.length+1,this.config.headerRowHeight)});return{onColumn:function(r,n,i,o,a){var s=e.config.styleLinker({rowType:RowType.HEADER_GROUPING,rowIndex:1,value:"grouping-"+n,columnGroup:r});t.push(__assign$M(__assign$M({},e.createMergedCell(e.getStyleId(s),e.getDataTypeForValue("string"),n,o)),{collapsibleRanges:a}))}}};t.prototype.onNewHeaderRow=function(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)};t.prototype.onNewBodyRow=function(){return this.onNewRow(this.onNewBodyColumn,this.config.rowHeight)};t.prototype.prepare=function(t){var r=this;e.prototype.prepare.call(this,t);this.columnsToExport=__spread$F(t);this.cols=t.map((function(e,t){return r.convertColumnToExcel(e,t)}))};t.prototype.parse=function(){var e=this.rows.reduce((function(e,t){return Math.max(e,t.cells.length)}),0);while(this.cols.length<e){this.cols.push(this.convertColumnToExcel(null,this.cols.length+1))}var t={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(t)};t.prototype.isFormula=function(e){if(e==null){return false}return this.config.autoConvertFormulas&&e.toString().startsWith("=")};t.prototype.isNumerical=function(e){return isFinite(e)&&e!==""&&!isNaN(parseFloat(e))};t.prototype.getStyleById=function(e){if(e==null){return null}return this.stylesByIds[e]||null};t.prototype.convertColumnToExcel=function(e,t){var r=this.config.columnWidth;if(r){if(typeof r==="number"){return{width:r}}return{width:r({column:e,index:t})}}if(e){var n=75;return{width:Math.max(e.getActualWidth(),n)}}return{}};t.prototype.onNewHeaderColumn=function(e,t){var r=this;return function(n,i){var o=r.extractHeaderValue(n);var a=r.config.styleLinker({rowType:RowType.HEADER,rowIndex:e,value:o,column:n});t.push(r.createCell(r.getStyleId(a),r.getDataTypeForValue("string"),o))}};t.prototype.onNewRow=function(e,t){var r=[];this.rows.push({cells:r,height:getHeightFromProperty(this.rows.length+1,t)});return{onColumn:e.bind(this,this.rows.length,r)()}};t.prototype.onNewBodyColumn=function(e,t){var r=this;var n=0;return function(i,o,a){if(n>0){n-=1;return}if(!r.config.gridOptionsService.is("groupHideOpenParents")&&a.level!=null){var s=a.footer?1:0;_.last(r.rows).outlineLevel=a.level+s}var l=r.extractRowCellValue(i,o,e,"excel",a);var u=r.config.styleLinker({rowType:RowType.BODY,rowIndex:e,value:l,column:i,node:a});var c=r.getStyleId(u);var d=i.getColSpan(a);var p=r.addImage(e,i,l);if(p){t.push(r.createCell(c,r.getDataTypeForValue(p.value),p.value==null?"":p.value))}else if(d>1){n=d-1;t.push(r.createMergedCell(c,r.getDataTypeForValue(l),l,d-1))}else{t.push(r.createCell(c,r.getDataTypeForValue(l),l))}}};t.prototype.getStyleId=function(e){if(!e||!e.length){return null}if(e.length===1){return e[0]}var t=e.join("-");if(!this.mixedStyles[t]){this.addNewMixedStyle(e)}return this.mixedStyles[t].excelID};t.prototype.addNewMixedStyle=function(e){var t=this;this.mixedStyleCounter+=1;var r="mixedStyle"+this.mixedStyleCounter;var n={};e.forEach((function(e){t.excelStyles.forEach((function(t){if(t.id===e){_.mergeDeep(n,_.deepCloneObject(t))}}))}));n.id=r;n.name=r;var i=e.join("-");this.mixedStyles[i]={excelID:r,key:i,result:n};this.excelStyles.push(n);this.stylesByIds[r]=n};return t}(BaseGridSerializingSession);var __extends$2Q=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var ExcelXmlSerializingSession=function(e){__extends$2Q(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.createExcel=function(e){return ExcelXmlFactory.createExcel(this.excelStyles,e)};t.prototype.getDataTypeForValue=function(e){return this.isNumerical(e)?"Number":"String"};t.prototype.getType=function(e,t,r){if(this.isFormula(r)){return"Formula"}if(t&&t.dataType){switch(t.dataType.toLocaleLowerCase()){case"string":return"Formula";case"number":return"Number";case"datetime":return"DateTime";case"error":return"Error";case"boolean":return"Boolean";default:console.warn("AG Grid: Unrecognized data type for excel export ["+t.id+".dataType="+t.dataType+"]")}}return e};t.prototype.addImage=function(){return};t.prototype.createCell=function(e,t,r){var n=this.getStyleById(e);var i=this.getType(t,n,r)||t;return{styleId:!!n?e:undefined,data:{type:i,value:this.getValueTransformed(i,r)}}};t.prototype.getValueTransformed=function(e,t){var r=this;var n=function(e){if(r.config.suppressTextAsCDATA){return _.escapeString(e)}var t="<![CDATA[";var n="]]>";var i=new RegExp(n,"g");return t+String(e).replace(i,"]]"+n+t+">")+n};var i=function(e){if(!e||e==="0"||e==="false"){return"0"}return"1"};switch(e){case"String":return n(t);case"Number":return Number(t).valueOf()+"";case"Boolean":return i(t);default:return t}};t.prototype.createMergedCell=function(e,t,r,n){return{styleId:!!this.getStyleById(e)?e:undefined,data:{type:t,value:r},mergeAcross:n}};return t}(BaseExcelSerializingSession);var coreFactory={getTemplate:function(e){var t=new Date;var r=t.toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:e},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:r},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:r}]}}};var contentTypeFactory={getTemplate:function(e){var t=e.name,r=e.ContentType,n=e.Extension,i=e.PartName;return{name:t,properties:{rawMap:{Extension:n,PartName:i,ContentType:r}}}}};var __read$16=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$E=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$16(arguments[t]));return e};var contentTypesFactory={getTemplate:function(e){var t=new Array(e).fill(undefined).map((function(e,t){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet"+(t+1)+".xml"}}));var r=ExcelXlsxFactory.worksheetImages.size;var n={};ExcelXlsxFactory.workbookImageIds.forEach((function(e){n[e.type]=true}));var i=new Array(r).fill(undefined).map((function(e,t){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing"+(t+1)+".xml"}}));var o=Object.keys(n).map((function(e){return{name:"Default",ContentType:"image/"+e,Extension:e}}));var a=__spread$E(o,[{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"}],t,[{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"}],i,[{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}]).map((function(e){return contentTypeFactory.getTemplate(e)}));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:a}}};var getAnchor=function(e,t){return{name:"xdr:"+e,children:[{name:"xdr:col",textNode:t.col.toString()},{name:"xdr:colOff",textNode:t.offsetX.toString()},{name:"xdr:row",textNode:t.row.toString()},{name:"xdr:rowOff",textNode:t.offsetY.toString()}]}};var getExt=function(e){var t=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];var r=e.recolor&&e.recolor.toLowerCase();switch(r){case"grayscale":case"sepia":case"washout":t.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:t}};var getNvPicPr=function(e,t){return{name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:t,name:e.id,descr:e.altText!=null?e.altText:undefined}},children:[getExt(e)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}};var getColorDetails=function(e){if(!e.saturation&&!e.tint){return}var t=[];if(e.saturation){t.push({name:"a:satMod",properties:{rawMap:{val:e.saturation*1e3}}})}if(e.tint){t.push({name:"a:tint",properties:{rawMap:{val:e.tint*1e3}}})}return t};var getDuoTone=function(e,t){return{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:e.color}},children:getColorDetails(e)},{name:"a:srgbClr",properties:{rawMap:{val:t.color}},children:getColorDetails(t)}]}};var getBlipFill=function(e,t){var r;if(e.transparency){var n=Math.min(Math.max(e.transparency,0),100);r=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(n*1e3)}}}]}if(e.recolor){if(!r){r=[]}switch(e.recolor.toLocaleLowerCase()){case"grayscale":r.push({name:"a:grayscl"});break;case"sepia":r.push(getDuoTone({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":r.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}});break}}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId"+t,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:r},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}};var getSpPr=function(e,t){var r={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:t.width,cy:t.height}}}]};if(e.rotation){var n=e.rotation;r.properties={rawMap:{rot:Math.min(Math.max(n,0),360)*6e4}}}var i={name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]};var o={name:"xdr:spPr",children:[r,i]};return o};var getImageBoxSize=function(e){e.fitCell=!!e.fitCell||(!e.width||!e.height);var t=e.position,r=t===void 0?{}:t,n=e.fitCell,i=e.width,o=i===void 0?0:i,a=e.height,s=a===void 0?0:a,l=e.totalHeight,u=e.totalWidth;var c=r.offsetX,d=c===void 0?0:c,p=r.offsetY,f=p===void 0?0:p,h=r.row,v=h===void 0?1:h,g=r.rowSpan,y=g===void 0?1:g,m=r.column,_=m===void 0?1:m,S=r.colSpan,b=S===void 0?1:S;return{from:{row:v-1,col:_-1,offsetX:pixelsToEMU(d),offsetY:pixelsToEMU(f)},to:{row:v-1+(n?1:y-1),col:_-1+(n?1:b-1),offsetX:pixelsToEMU(o+d),offsetY:pixelsToEMU(s+f)},height:pixelsToEMU(l||s),width:pixelsToEMU(u||o)}};var getPicture=function(e,t,r,n){return{name:"xdr:pic",children:[getNvPicPr(e,t+1),getBlipFill(e,r+1),getSpPr(e,n)]}};var drawingFactory={getTemplate:function(e){var t=e.sheetIndex;var r=ExcelXlsxFactory.worksheetImages.get(t);var n=ExcelXlsxFactory.worksheetImageIds.get(t);var i=r.map((function(e,t){var r=getImageBoxSize(e);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[getAnchor("from",r.from),getAnchor("to",r.to),getPicture(e,t,n.get(e.id).index,r),{name:"xdr:clientData"}]}}));return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:i}}};var __read$15=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var getColorChildren=function(e){var t=__read$15(e,4),r=t[0],n=t[1],i=t[2],o=t[3];return{name:"a:"+r,children:[{name:"a:"+n,properties:{rawMap:{val:i,lastClr:o}}}]}};var colorScheme={getTemplate:function(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[getColorChildren(["dk1","sysClr","windowText","000000"]),getColorChildren(["lt1","sysClr","window","FFFFFF"]),getColorChildren(["dk2","srgbClr","44546A"]),getColorChildren(["lt2","srgbClr","E7E6E6"]),getColorChildren(["accent1","srgbClr","4472C4"]),getColorChildren(["accent2","srgbClr","ED7D31"]),getColorChildren(["accent3","srgbClr","A5A5A5"]),getColorChildren(["accent4","srgbClr","FFC000"]),getColorChildren(["accent5","srgbClr","5B9BD5"]),getColorChildren(["accent6","srgbClr","70AD47"]),getColorChildren(["hlink","srgbClr","0563C1"]),getColorChildren(["folHlink","srgbClr","954F72"])]}}};var __read$14=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var getFont$1=function(e){var t=__read$14(e,4),r=t[0],n=t[1],i=t[2],o=t[3];return{name:"a:"+r,properties:{rawMap:{script:i,typeface:n,panose:o}}}};var fontScheme={getTemplate:function(){var e=_.utf8_encode;return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[getFont$1(["latin","Calibri Light",undefined,"020F0302020204030204"]),getFont$1(["ea",""]),getFont$1(["cs",""]),getFont$1(["font",e(" Light"),"Jpan"]),getFont$1(["font",e(" "),"Hang"]),getFont$1(["font",e(" Light"),"Hans"]),getFont$1(["font",e(""),"Hant"]),getFont$1(["font","Times New Roman","Arab"]),getFont$1(["font","Times New Roman","Hebr"]),getFont$1(["font","Tahoma","Thai"]),getFont$1(["font","Nyala","Ethi"]),getFont$1(["font","Vrinda","Beng"]),getFont$1(["font","Shruti","Gujr"]),getFont$1(["font","MoolBoran","Khmr"]),getFont$1(["font","Tunga","Knda"]),getFont$1(["font","Raavi","Guru"]),getFont$1(["font","Euphemia","Cans"]),getFont$1(["font","Plantagenet Cherokee","Cher"]),getFont$1(["font","Microsoft Yi Baiti","Yiii"]),getFont$1(["font","Microsoft Himalaya","Tibt"]),getFont$1(["font","MV Boli","Thaa"]),getFont$1(["font","Mangal","Deva"]),getFont$1(["font","Gautami","Telu"]),getFont$1(["font","Latha","Taml"]),getFont$1(["font","Estrangelo Edessa","Syrc"]),getFont$1(["font","Kalinga","Orya"]),getFont$1(["font","Kartika","Mlym"]),getFont$1(["font","DokChampa","Laoo"]),getFont$1(["font","Iskoola Pota","Sinh"]),getFont$1(["font","Mongolian Baiti","Mong"]),getFont$1(["font","Times New Roman","Viet"]),getFont$1(["font","Microsoft Uighur","Uigh"]),getFont$1(["font","Sylfaen","Geor"]),getFont$1(["font","Arial","Armn"]),getFont$1(["font","Leelawadee UI","Bugi"]),getFont$1(["font","Microsoft JhengHei","Bopo"]),getFont$1(["font","Javanese Text","Java"]),getFont$1(["font","Segoe UI","Lisu"]),getFont$1(["font","Myanmar Text","Mymr"]),getFont$1(["font","Ebrima","Nkoo"]),getFont$1(["font","Nirmala UI","Olck"]),getFont$1(["font","Ebrima","Osma"]),getFont$1(["font","Phagspa","Phag"]),getFont$1(["font","Estrangelo Edessa","Syrn"]),getFont$1(["font","Estrangelo Edessa","Syrj"]),getFont$1(["font","Estrangelo Edessa","Syre"]),getFont$1(["font","Nirmala UI","Sora"]),getFont$1(["font","Microsoft Tai Le","Tale"]),getFont$1(["font","Microsoft New Tai Lue","Talu"]),getFont$1(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[getFont$1(["latin","Calibri",undefined,"020F0502020204030204"]),getFont$1(["ea",""]),getFont$1(["cs",""]),getFont$1(["font",e(""),"Jpan"]),getFont$1(["font",e(" "),"Hang"]),getFont$1(["font",e(""),"Hans"]),getFont$1(["font",e(""),"Hant"]),getFont$1(["font","Arial","Arab"]),getFont$1(["font","Arial","Hebr"]),getFont$1(["font","Tahoma","Thai"]),getFont$1(["font","Nyala","Ethi"]),getFont$1(["font","Vrinda","Beng"]),getFont$1(["font","Shruti","Gujr"]),getFont$1(["font","DaunPenh","Khmr"]),getFont$1(["font","Tunga","Knda"]),getFont$1(["font","Raavi","Guru"]),getFont$1(["font","Euphemia","Cans"]),getFont$1(["font","Plantagenet Cherokee","Cher"]),getFont$1(["font","Microsoft Yi Baiti","Yiii"]),getFont$1(["font","Microsoft Himalaya","Tibt"]),getFont$1(["font","MV Boli","Thaa"]),getFont$1(["font","Mangal","Deva"]),getFont$1(["font","Gautami","Telu"]),getFont$1(["font","Latha","Taml"]),getFont$1(["font","Estrangelo Edessa","Syrc"]),getFont$1(["font","Kalinga","Orya"]),getFont$1(["font","Kartika","Mlym"]),getFont$1(["font","DokChampa","Laoo"]),getFont$1(["font","Iskoola Pota","Sinh"]),getFont$1(["font","Mongolian Baiti","Mong"]),getFont$1(["font","Arial","Viet"]),getFont$1(["font","Microsoft Uighur","Uigh"]),getFont$1(["font","Sylfaen","Geor"]),getFont$1(["font","Arial","Armn"]),getFont$1(["font","Leelawadee UI","Bugi"]),getFont$1(["font","Microsoft JhengHei","Bopo"]),getFont$1(["font","Javanese Text","Java"]),getFont$1(["font","Segoe UI","Lisu"]),getFont$1(["font","Myanmar Text","Mymr"]),getFont$1(["font","Ebrima","Nkoo"]),getFont$1(["font","Nirmala UI","Olck"]),getFont$1(["font","Ebrima","Osma"]),getFont$1(["font","Phagspa","Phag"]),getFont$1(["font","Estrangelo Edessa","Syrn"]),getFont$1(["font","Estrangelo Edessa","Syrj"]),getFont$1(["font","Estrangelo Edessa","Syre"]),getFont$1(["font","Nirmala UI","Sora"]),getFont$1(["font","Microsoft Tai Le","Tale"]),getFont$1(["font","Microsoft New Tai Lue","Talu"]),getFont$1(["font","Ebrima","Tfng"])]}]}}};var __read$13=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var getPropertyVal=function(e,t,r){return{name:"a:"+e,properties:{rawMap:{val:t}},children:r}};var getGs=function(e){var t=__read$13(e,6),r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5];var l=[];l.push(getPropertyVal("satMod",i));if(o){l.push(getPropertyVal("lumMod",o))}if(a){l.push(getPropertyVal("tint",a))}if(s){l.push(getPropertyVal("shade",s))}return{name:"a:gs",properties:{rawMap:{pos:r}},children:[{name:"a:schemeClr",properties:{rawMap:{val:n}},children:l}]}};var getSolidFill=function(e,t){return{name:"a:solidFill",children:[getPropertyVal("schemeClr",e,t)]}};var getGradFill=function(e){var t=__read$13(e,5),r=t[0],n=t[1],i=t[2],o=t[3],a=t[4];var s=__read$13(a,2),l=s[0],u=s[1];return{name:"a:gradFill",properties:{rawMap:{rotWithShape:r}},children:[{name:"a:gsLst",children:[getGs(n),getGs(i),getGs(o)]},{name:"a:lin",properties:{rawMap:{ang:l,scaled:u}}}]}};var getLine=function(e){var t=__read$13(e,4),r=t[0],n=t[1],i=t[2],o=t[3];return{name:"a:ln",properties:{rawMap:{w:r,cap:n,cmpd:i,algn:o}},children:[getSolidFill("phClr"),getPropertyVal("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}};var getEffectStyle=function(e){var t=[];if(e){var r=__read$13(e,5),n=r[0],i=r[1],o=r[2],a=r[3],s=r[4];t.push({name:"a:outerShdw",properties:{rawMap:{blurRad:n,dist:i,dir:o,algn:a,rotWithShape:s}},children:[getPropertyVal("srgbClr","000000",[getPropertyVal("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},t.length?{children:t}:{})]}};var getFillStyleList=function(){return{name:"a:fillStyleLst",children:[getSolidFill("phClr"),getGradFill(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),getGradFill(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",undefined,"100000"],["100000","phClr","120000","99000",undefined,"78000"],["5400000","0"]])]}};var getLineStyleList=function(){return{name:"a:lnStyleLst",children:[getLine(["6350","flat","sng","ctr"]),getLine(["12700","flat","sng","ctr"]),getLine(["19050","flat","sng","ctr"])]}};var getEffectStyleList=function(){return{name:"a:effectStyleLst",children:[getEffectStyle(),getEffectStyle(),getEffectStyle(["57150","19050","5400000","ctr","0"])]}};var getBgFillStyleList=function(){return{name:"a:bgFillStyleLst",children:[getSolidFill("phClr"),getSolidFill("phClr",[getPropertyVal("tint","95000"),getPropertyVal("satMod","170000")]),getGradFill(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",undefined,undefined,"63000"],["5400000","0"]])]}};var formatScheme={getTemplate:function(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[getFillStyleList(),getLineStyleList(),getEffectStyleList(),getBgFillStyleList()]}}};var themeElements={getTemplate:function(){return{name:"a:themeElements",children:[colorScheme.getTemplate(),fontScheme.getTemplate(),formatScheme.getTemplate()]}}};var officeTheme={getTemplate:function(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[themeElements.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}}};var buildSharedString=function(e){var t=[];e.forEach((function(e,r){var n=r.toString();var i={name:"t",textNode:_.utf8_encode(_.escapeString(n))};var o=n.trim().length!==n.length;if(o){i.properties={rawMap:{"xml:space":"preserve"}}}t.push({name:"si",children:[i]})}));return t};var sharedStrings={getTemplate:function(e){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:e.size,uniqueCount:e.size}},children:buildSharedString(e)}}};var numberFormatFactory={getTemplate:function(e){var t=e.formatCode,r=e.numFmtId;return{name:"numFmt",properties:{rawMap:{formatCode:t,numFmtId:r}}}}};var numberFormatsFactory={getTemplate:function(e){return{name:"numFmts",properties:{rawMap:{count:e.length}},children:e.map((function(e){return numberFormatFactory.getTemplate(e)}))}}};var fontFactory={getTemplate:function(e){var t=e.size,r=e.colorTheme,n=e.color,i=n===void 0?"FF000000":n,o=e.fontName,a=o===void 0?"Calibri":o,s=e.family,l=e.scheme,u=e.italic,c=e.bold,d=e.strikeThrough,p=e.outline,f=e.shadow,h=e.underline,v=e.verticalAlign;var g=[{name:"sz",properties:{rawMap:{val:t}}},{name:"color",properties:{rawMap:{theme:r,rgb:i}}},{name:"name",properties:{rawMap:{val:a}}}];if(s){g.push({name:"family",properties:{rawMap:{val:s}}})}if(l){g.push({name:"scheme",properties:{rawMap:{val:l}}})}if(u){g.push({name:"i"})}if(c){g.push({name:"b"})}if(d){g.push({name:"strike"})}if(p){g.push({name:"outline"})}if(f){g.push({name:"shadow"})}if(h){g.push({name:"u",properties:{rawMap:{val:h}}})}if(v){g.push({name:"vertAlign",properties:{rawMap:{val:v}}})}return{name:"font",children:g}}};var fontsFactory={getTemplate:function(e){return{name:"fonts",properties:{rawMap:{count:e.length}},children:e.map((function(e){return fontFactory.getTemplate(e)}))}}};var fillFactory={getTemplate:function(e){var t=e.patternType,r=e.fgTheme,n=e.fgTint,i=e.fgRgb,o=e.bgRgb,a=e.bgIndexed;var s={name:"patternFill",properties:{rawMap:{patternType:t}}};if(r||n||i){s.children=[{name:"fgColor",properties:{rawMap:{theme:r,tint:n,rgb:i}}}]}if(a||o){if(!s.children){s.children=[]}s.children.push({name:"bgColor",properties:{rawMap:{indexed:a,rgb:o}}})}return{name:"fill",children:[s]}}};var fillsFactory={getTemplate:function(e){return{name:"fills",properties:{rawMap:{count:e.length}},children:e.map((function(e){return fillFactory.getTemplate(e)}))}}};var getWeightName=function(e){switch(e){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}};var mappedBorderNames={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"};var mediumBorders=["Dashed","DashDot","DashDotDot"];var colorMap={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"};var horizontalAlignmentMap={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"};var verticalAlignmentMap={Automatic:undefined,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"};var convertLegacyPattern=function(e){if(!e){return"none"}return colorMap[e]||e};var convertLegacyColor=function(e){if(e==undefined){return e}if(e.charAt(0)==="#"){e=e.substr(1)}return e.length===6?"FF"+e:e};var convertLegacyBorder=function(e,t){if(!e){return"thin"}var r=getWeightName(t);var n=mappedBorderNames[e];if(e==="Continuous"){return r}if(r==="medium"&&mediumBorders.indexOf(n)!==-1){return"medium"+n}return n.charAt(0).toLowerCase()+n.substr(1)};var convertLegacyHorizontalAlignment=function(e){return horizontalAlignmentMap[e]||"general"};var convertLegacyVerticalAlignment=function(e){return verticalAlignmentMap[e]||undefined};var getBorderColor=function(e){return{name:"color",properties:{rawMap:{rgb:convertLegacyColor(e||"#000000")}}}};var borderFactory$1={getTemplate:function(e){var t=e.left,r=e.right,n=e.top,i=e.bottom,o=e.diagonal;var a=t?[getBorderColor(t.color)]:undefined;var s=r?[getBorderColor(r.color)]:undefined;var l=n?[getBorderColor(n.color)]:undefined;var u=i?[getBorderColor(i.color)]:undefined;var c=o?[getBorderColor(o.color)]:undefined;return{name:"border",children:[{name:"left",properties:{rawMap:{style:t&&t.style}},children:a},{name:"right",properties:{rawMap:{style:r&&r.style}},children:s},{name:"top",properties:{rawMap:{style:n&&n.style}},children:l},{name:"bottom",properties:{rawMap:{style:i&&i.style}},children:u},{name:"diagonal",properties:{rawMap:{style:o&&o.style}},children:c}]}}};var bordersFactory={getTemplate:function(e){return{name:"borders",properties:{rawMap:{count:e.length}},children:e.map((function(e){return borderFactory$1.getTemplate(e)}))}}};var getReadingOrderId=function(e){var t=["Context","LeftToRight","RightToLeft"];var r=t.indexOf(e);return Math.max(r,0)};var alignmentFactory={getTemplate:function(e){var t=e.horizontal,r=e.indent,n=e.readingOrder,i=e.rotate,o=e.shrinkToFit,a=e.vertical,s=e.wrapText;return{name:"alignment",properties:{rawMap:{horizontal:t&&convertLegacyHorizontalAlignment(t),indent:r,readingOrder:n&&getReadingOrderId(n),textRotation:i,shrinkToFit:o,vertical:a&&convertLegacyVerticalAlignment(a),wrapText:s}}}}};var protectionFactory={getTemplate:function(e){var t=e.protected===false?0:1;var r=e.hideFormula===true?1:0;return{name:"protection",properties:{rawMap:{hidden:r,locked:t}}}}};var xfFactory={getTemplate:function(e){var t=e.alignment,r=e.borderId,n=e.fillId,i=e.fontId,o=e.numFmtId,a=e.protection,s=e.xfId;var l=[];if(t){l.push(alignmentFactory.getTemplate(t))}if(a){l.push(protectionFactory.getTemplate(a))}return{name:"xf",properties:{rawMap:{applyAlignment:t?1:undefined,applyProtection:a?1:undefined,applyBorder:r?1:undefined,applyFill:n?1:undefined,borderId:r,fillId:n,applyFont:i?1:undefined,fontId:i,applyNumberFormat:o?1:undefined,numFmtId:o,xfId:s}},children:l.length?l:undefined}}};var cellStylesXfsFactory={getTemplate:function(e){return{name:"cellStyleXfs",properties:{rawMap:{count:e.length}},children:e.map((function(e){return xfFactory.getTemplate(e)}))}}};var cellXfsFactory={getTemplate:function(e){return{name:"cellXfs",properties:{rawMap:{count:e.length}},children:e.map((function(e){return xfFactory.getTemplate(e)}))}}};var borderFactory={getTemplate:function(e){var t=e.builtinId,r=e.name,n=e.xfId;return{name:"cellStyle",properties:{rawMap:{builtinId:t,name:r,xfId:n}}}}};var cellStylesFactory={getTemplate:function(e){return{name:"cellStyles",properties:{rawMap:{count:e.length}},children:e.map((function(e){return borderFactory.getTemplate(e)}))}}};var __assign$L=function(){__assign$L=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$L.apply(this,arguments)};var stylesMap;var registeredNumberFmts;var registeredFonts;var registeredFills;var registeredBorders;var registeredCellStyleXfs;var registeredCellXfs;var registeredCellStyles;var currentSheet;var getStyleName=function(e,t){if(e.indexOf("mixedStyle")!==-1&&t>1){e+="_"+t}return e};var resetStylesheetValues=function(){stylesMap={base:0};registeredNumberFmts=[];registeredFonts=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}];registeredFills=[{patternType:"none"},{patternType:"gray125"}];registeredBorders=[{left:undefined,right:undefined,top:undefined,bottom:undefined,diagonal:undefined}];registeredCellStyleXfs=[{borderId:0,fillId:0,fontId:0,numFmtId:0}];registeredCellXfs=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}];registeredCellStyles=[{builtinId:0,name:"Normal",xfId:0}]};var registerFill=function(e){var t=convertLegacyPattern(e.pattern);var r=convertLegacyColor(e.color);var n=convertLegacyColor(e.patternColor);var i=registeredFills.findIndex((function(e){var i=e.patternType,o=e.fgRgb,a=e.bgRgb;if(i!=t||o!=r||a!=n){return false}return true}));if(i===-1){i=registeredFills.length;registeredFills.push({patternType:t,fgRgb:r,bgRgb:n})}return i};var registerNumberFmt=function(e){e=_.utf8_encode(e);if(numberFormatMap[e]){return numberFormatMap[e]}var t=registeredNumberFmts.findIndex((function(t){return t.formatCode===e}));if(t===-1){t=registeredNumberFmts.length+164;registeredNumberFmts.push({formatCode:e,numFmtId:t})}else{t=registeredNumberFmts[t].numFmtId}return t};var registerBorders=function(e){var t=e.borderBottom,r=e.borderTop,n=e.borderLeft,i=e.borderRight;var o;var a;var s;var l;var u;var c;var d;var p;if(n){s=convertLegacyBorder(n.lineStyle,n.weight);d=convertLegacyColor(n.color)}if(i){l=convertLegacyBorder(i.lineStyle,i.weight);p=convertLegacyColor(i.color)}if(t){o=convertLegacyBorder(t.lineStyle,t.weight);u=convertLegacyColor(t.color)}if(r){a=convertLegacyBorder(r.lineStyle,r.weight);c=convertLegacyColor(r.color)}var f=registeredBorders.findIndex((function(e){var t=e.left,r=e.right,n=e.top,i=e.bottom;if(!t&&(s||d)){return false}if(!r&&(l||p)){return false}if(!n&&(a||c)){return false}if(!i&&(o||u)){return false}var f=t||{},h=f.style,v=f.color;var g=r||{},y=g.style,m=g.color;var _=n||{},S=_.style,b=_.color;var C=i||{},x=C.style,w=C.color;if(h!=s||v!=d){return false}if(y!=l||m!=p){return false}if(S!=a||b!=c){return false}if(x!=o||w!=u){return false}return true}));if(f===-1){f=registeredBorders.length;registeredBorders.push({left:{style:s,color:d},right:{style:l,color:p},top:{style:a,color:c},bottom:{style:o,color:u},diagonal:{style:undefined,color:undefined}})}return f};var registerFont=function(e){var t=e.fontName,r=t===void 0?"Calibri":t,n=e.color,i=e.size,o=e.bold,a=e.italic,s=e.outline,l=e.shadow,u=e.strikeThrough,c=e.underline,d=e.family,p=e.verticalAlign;var f=r?_.utf8_encode(r):r;var h=convertLegacyColor(n);var v=getFontFamilyId(d);var g=c?c.toLocaleLowerCase():undefined;var y=p?p.toLocaleLowerCase():undefined;var m=registeredFonts.findIndex((function(e){if(e.fontName!=f||e.color!=h||e.size!=i||e.bold!=o||e.italic!=a||e.outline!=s||e.shadow!=l||e.strikeThrough!=u||e.underline!=g||e.verticalAlign!=y||e.family!=v){return false}return true}));if(m===-1){m=registeredFonts.length;registeredFonts.push({fontName:f,color:h,size:i,bold:o,italic:a,outline:s,shadow:l,strikeThrough:u,underline:g,verticalAlign:y,family:v!=null?v.toString():undefined})}return m};var registerStyle=function(e){var t=e.alignment,r=e.borders,n=e.font,i=e.interior,o=e.numberFormat,a=e.protection;var s=e.id;var l=0;var u=0;var c=0;var d=0;if(!s){return}s=getStyleName(s,currentSheet);if(stylesMap[s]!=undefined){return}if(i){l=registerFill(i)}if(r){u=registerBorders(r)}if(n){c=registerFont(n)}if(o){d=registerNumberFmt(o.format)}stylesMap[s]=registeredCellXfs.length;registeredCellXfs.push({alignment:t,borderId:u||0,fillId:l||0,fontId:c||0,numFmtId:d||0,protection:a,xfId:0})};var stylesheetFactory={getTemplate:function(e){var t=numberFormatsFactory.getTemplate(registeredNumberFmts);var r=fontsFactory.getTemplate(registeredFonts.map((function(t){return __assign$L(__assign$L({},t),{size:t.size!=null?t.size:e})})));var n=fillsFactory.getTemplate(registeredFills);var i=bordersFactory.getTemplate(registeredBorders);var o=cellStylesXfsFactory.getTemplate(registeredCellStyleXfs);var a=cellXfsFactory.getTemplate(registeredCellXfs);var s=cellStylesFactory.getTemplate(registeredCellStyles);resetStylesheetValues();return{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[t,r,n,i,o,a,s,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}};var getStyleId=function(e,t){return stylesMap[getStyleName(e,t)]||0};var registerStyles=function(e,t){currentSheet=t;if(currentSheet===1){resetStylesheetValues()}e.forEach(registerStyle)};var sheetFactory={getTemplate:function(e,t){var r=(t+1).toString();return{name:"sheet",properties:{rawMap:{name:e,sheetId:r,"r:id":"rId"+r}}}}};var sheetsFactory={getTemplate:function(e){return{name:"sheets",children:e.map((function(e,t){return sheetFactory.getTemplate(e,t)}))}}};var workbookFactory={getTemplate:function(e){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[sheetsFactory.getTemplate(e)]}}};var getExcelCellWidth=function(e){return Math.ceil((e-12)/7+1)};var columnFactory={getTemplate:function(e){var t=e.min,r=e.max,n=e.outlineLevel,i=e.s,o=e.width,a=e.hidden,s=e.bestFit;var l=1;var u="0";if(o>1){l=getExcelCellWidth(o);u="1"}return{name:"col",properties:{rawMap:{min:t,max:r,outlineLevel:n!=null?n:undefined,width:l,style:i,hidden:a?"1":"0",bestFit:s?"1":"0",customWidth:u}}}}};var convertLegacyType=function(e){var t=e.charAt(0).toLowerCase();return t==="s"?"inlineStr":t};var cellFactory={getTemplate:function(e,t,r){var n=e.ref,i=e.data,o=e.styleId;var a=i||{type:"empty",value:null},s=a.type,l=a.value;var u=s;if(s==="f"){u="str"}else if(s.charAt(0)===s.charAt(0).toUpperCase()){u=convertLegacyType(s)}var c={name:"c",properties:{rawMap:{r:n,t:u==="empty"?undefined:u,s:o?getStyleId(o,r):undefined}}};if(u==="empty"){return c}var d;if(u==="str"&&s==="f"){d=[{name:"f",textNode:_.escapeString(_.utf8_encode(l))}]}else if(u==="inlineStr"){d=[{name:"is",children:[{name:"t",textNode:_.escapeString(_.utf8_encode(l))}]}]}else{d=[{name:"v",textNode:l}]}return Object.assign({},c,{children:d})}};var __read$12=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$D=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$12(arguments[t]));return e};var addEmptyCells=function(e,t){var r=[];var n=0;for(var i=0;i<e.length;i++){var o=e[i];if(o.mergeAcross){r.push({pos:i,excelPos:n});n+=o.mergeAcross}n++}if(r.length){for(var i=r.length-1;i>=0;i--){var a=[];var o=e[r[i].pos];for(var s=1;s<=o.mergeAcross;s++){a.push({ref:""+getExcelColumnName(r[i].excelPos+1+s)+(t+1),styleId:o.styleId,data:{type:"empty",value:null}})}if(a.length){e.splice.apply(e,__spread$D([r[i].pos+1,0],a))}}}};var shouldDisplayCell=function(e){var t;return((t=e.data)===null||t===void 0?void 0:t.value)!==""||e.styleId!==undefined};var rowFactory={getTemplate:function(e,t,r){var n=e.collapsed,i=e.hidden,o=e.height,a=e.outlineLevel,s=e.cells,l=s===void 0?[]:s;addEmptyCells(l,t);var u=l.filter(shouldDisplayCell).map((function(e,t){return cellFactory.getTemplate(e,t,r)}));return{name:"row",properties:{rawMap:{r:t+1,collapsed:n,hidden:i?"1":"0",ht:o,customHeight:o!=null?"1":"0",spans:"1:1",outlineLevel:a||undefined}},children:u}}};var mergeCellFactory={getTemplate:function(e){return{name:"mergeCell",properties:{rawMap:{ref:e}}}}};var getMergedCellsAndAddColumnGroups=function(e,t){var r=[];var n=[];e.forEach((function(e,i){var o=e.cells;var a=0;var s;o.forEach((function(e,o){var l=o+a+1;var u=getExcelColumnName(l);var c=i+1;if(e.mergeAcross){a+=e.mergeAcross;var d=getExcelColumnName(o+a+1);r.push(""+u+c+":"+d+c)}if(!t[l-1]){t[l-1]={}}var p=e.collapsibleRanges;if(p){p.forEach((function(e){n.push([l+e[0],l+e[1]])}))}s=t[l-1];s.min=l;s.max=l;e.ref=""+u+c}))}));n.sort((function(e,t){if(e[0]!==t[0]){return e[0]-t[0]}return t[1]-e[1]}));var i=new Map;var o=new Map;n.filter((function(e){var t=e.toString();var r=i.get(t);if(r){return false}i.set(t,true);return true})).forEach((function(e){var r=t.find((function(t){return t.min==e[0]&&t.max==e[1]}));var n=o.get(e[0]);t.push({min:e[0],max:e[1],outlineLevel:n||1,width:(r||{width:100}).width});o.set(e[0],(n||0)+1)}));return r};var getPageOrientation=function(e){if(!e||e!=="Portrait"&&e!=="Landscape"){return"portrait"}return e.toLocaleLowerCase()};var getPageSize=function(e){if(e==null){return 1}var t=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"];var r=t.indexOf(e);return r===-1?1:r+1};var addColumns=function(e){return function(t){if(e.length){t.push({name:"cols",children:e.map((function(e){return columnFactory.getTemplate(e)}))})}return t}};var addSheetData=function(e,t){return function(r){if(e.length){r.push({name:"sheetData",children:e.map((function(e,r){return rowFactory.getTemplate(e,r,t)}))})}return r}};var addMergeCells=function(e){return function(t){if(e.length){t.push({name:"mergeCells",properties:{rawMap:{count:e.length}},children:e.map((function(e){return mergeCellFactory.getTemplate(e)}))})}return t}};var addPageMargins=function(e){return function(t){var r=e.top,n=r===void 0?.75:r,i=e.right,o=i===void 0?.7:i,a=e.bottom,s=a===void 0?.75:a,l=e.left,u=l===void 0?.7:l,c=e.header,d=c===void 0?.3:c,p=e.footer,f=p===void 0?.3:p;t.push({name:"pageMargins",properties:{rawMap:{bottom:s,footer:f,header:d,left:u,right:o,top:n}}});return t}};var addPageSetup=function(e){return function(t){if(e){t.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:getPageOrientation(e.orientation),paperSize:getPageSize(e.pageSize)}}})}return t}};var replaceHeaderFooterTokens=function(e){var t={"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F"};_.iterateObject(t,(function(t,r){e=e.replace(t,r)}));return e};var getHeaderPosition=function(e){if(e==="Center"){return"C"}if(e==="Right"){return"R"}return"L"};var applyHeaderFontStyle=function(e,t){if(!t){return e}e+="&amp;&quot;";e+=t.fontName||"Calibri";if(t.bold!==t.italic){e+=t.bold?",Bold":",Italic"}else if(t.bold){e+=",Bold Italic"}else{e+=",Regular"}e+="&quot;";if(t.size){e+="&amp;"+t.size}if(t.strikeThrough){e+="&amp;S"}if(t.underline){e+="&amp;"+(t.underline==="Double"?"E":"U")}if(t.color){e+="&amp;K"+t.color.replace("#","").toUpperCase()}return e};var processHeaderFooterContent=function(e){return e.reduce((function(e,t){var r=getHeaderPosition(t.position);var n=applyHeaderFontStyle(e+"&amp;"+r,t.font);return""+n+_.escapeString(replaceHeaderFooterTokens(t.value))}),"")};var buildHeaderFooter=function(e){var t=["all","first","even"];var r=[];t.forEach((function(t){var n=e[t];var i=t==="all"?"odd":t;if(!n||!n.header&&!n.footer){return}_.iterateObject(n,(function(e,t){var n=""+e.charAt(0).toUpperCase()+e.slice(1);if(t){r.push({name:""+i+n,properties:{rawMap:{"xml:space":"preserve"}},textNode:processHeaderFooterContent(t)})}}))}));return r};var addHeaderFooter=function(e){return function(t){if(!e){return t}var r=e.first!=null?1:0;var n=e.even!=null?1:0;t.push({name:"headerFooter",properties:{rawMap:{differentFirst:r,differentOddEven:n}},children:buildHeaderFooter(e)});return t}};var addDrawingRel=function(e){return function(t){if(ExcelXlsxFactory.worksheetImages.get(e)){t.push({name:"drawing",properties:{rawMap:{"r:id":"rId1"}}})}return t}};var addSheetPr=function(){return function(e){e.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]});return e}};var addSheetFormatPr=function(e){return function(t){var r=e.reduce((function(e,t){if(t.outlineLevel&&t.outlineLevel>e){return t.outlineLevel}return e}),0);t.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:r?r:undefined}}});return t}};var worksheetFactory={getTemplate:function(e){var t=e.worksheet,r=e.currentSheet,n=e.margins,i=n===void 0?{}:n,o=e.pageSetup,a=e.headerFooterConfig;var s=t.table;var l=s.rows,u=s.columns;var c=u&&u.length?getMergedCellsAndAddColumnGroups(l,u):[];var d=_.compose(addSheetPr(),addSheetFormatPr(l),addColumns(u),addSheetData(l,r+1),addMergeCells(c),addPageMargins(i),addPageSetup(o),addHeaderFooter(a),addDrawingRel(r));var p=d([]);return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:p}}};var relationshipFactory={getTemplate:function(e){var t=e.Id,r=e.Type,n=e.Target;return{name:"Relationship",properties:{rawMap:{Id:t,Type:r,Target:n}}}}};var relationshipsFactory={getTemplate:function(e){var t=e.map((function(e){return relationshipFactory.getTemplate(e)}));return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:t}}};var __read$11=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$C=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$11(arguments[t]));return e};var ExcelXlsxFactory=function(){function e(){}e.createExcel=function(e,t,r,n,i){this.addSheetName(t);registerStyles(e,this.sheetNames.length);return this.createWorksheet(t,r,n,i)};e.buildImageMap=function(e,t,r,n,i){var o=this.sheetNames.length;var a=this.images.get(e.id);if(!e.position||!e.position.row||!e.position.column){if(!e.position){e.position={}}e.position=Object.assign({},e.position,{row:t,column:n.indexOf(r)+1})}var s=e;setExcelImageTotalWidth(s,n);setExcelImageTotalHeight(s,i);if(a){var l=a.find((function(e){return e.sheetId===o}));if(l){l.image.push(s)}else{a.push({sheetId:o,image:[s]})}}else{this.images.set(s.id,[{sheetId:o,image:[s]}]);this.workbookImageIds.set(s.id,{type:s.imageType,index:this.workbookImageIds.size})}this.buildSheetImageMap(o,s)};e.buildSheetImageMap=function(e,t){var r=this.worksheetImageIds.get(e);if(!r){r=new Map;this.worksheetImageIds.set(e,r)}var n=this.worksheetImages.get(e);if(!n){this.worksheetImages.set(e,[t]);r.set(t.id,{index:0,type:t.imageType})}else{n.push(t);if(!r.get(t.id)){r.set(t.id,{index:r.size,type:t.imageType})}}};e.addSheetName=function(e){var t=_.escapeString(e.name)||"";var r="";while(this.sheetNames.indexOf(""+t+r)!==-1){if(r===""){r="_1"}else{var n=parseInt(r.slice(1),10);r="_"+(n+1)}}e.name=""+t+r;this.sheetNames.push(e.name)};e.getStringPosition=function(e){if(this.sharedStrings.has(e)){return this.sharedStrings.get(e)}this.sharedStrings.set(e,this.sharedStrings.size);return this.sharedStrings.size-1};e.resetFactory=function(){this.sharedStrings=new Map;this.images=new Map;this.worksheetImages=new Map;this.workbookImageIds=new Map;this.worksheetImageIds=new Map;this.sheetNames=[];this.factoryMode=ExcelFactoryMode.SINGLE_SHEET};e.createWorkbook=function(){return createXmlPart(workbookFactory.getTemplate(this.sheetNames))};e.createStylesheet=function(e){return createXmlPart(stylesheetFactory.getTemplate(e))};e.createSharedStrings=function(){return createXmlPart(sharedStrings.getTemplate(this.sharedStrings))};e.createCore=function(e){return createXmlPart(coreFactory.getTemplate(e))};e.createContentTypes=function(e){return createXmlPart(contentTypesFactory.getTemplate(e))};e.createRels=function(){var e=relationshipsFactory.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return createXmlPart(e)};e.createTheme=function(){return createXmlPart(officeTheme.getTemplate())};e.createWorkbookRels=function(e){var t=new Array(e).fill(undefined).map((function(e,t){return{Id:"rId"+(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet"+(t+1)+".xml"}}));var r=relationshipsFactory.getTemplate(__spread$C(t,[{Id:"rId"+(e+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId"+(e+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId"+(e+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]));return createXmlPart(r)};e.createDrawing=function(e){return createXmlPart(drawingFactory.getTemplate({sheetIndex:e}))};e.createDrawingRel=function(e){var t=this;var r=this.worksheetImageIds.get(e);var n=[];r.forEach((function(e,r){n.push({Id:"rId"+(e.index+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image"+(t.workbookImageIds.get(r).index+1)+"."+e.type})}));return createXmlPart(relationshipsFactory.getTemplate(n))};e.createWorksheetDrawingRel=function(e){var t=relationshipsFactory.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing"+(e+1)+".xml"}]);return createXmlPart(t)};e.createWorksheet=function(e,t,r,n){return createXmlPart(worksheetFactory.getTemplate({worksheet:e,currentSheet:this.sheetNames.length-1,margins:t,pageSetup:r,headerFooterConfig:n}))};e.sharedStrings=new Map;e.sheetNames=[];e.images=new Map;e.worksheetImages=new Map;e.workbookImageIds=new Map;e.worksheetImageIds=new Map;e.factoryMode=ExcelFactoryMode.SINGLE_SHEET;return e}();var __extends$2P=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var ExcelXlsxSerializingSession=function(e){__extends$2P(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.createExcel=function(e){var t=this,r=t.excelStyles,n=t.config;var i=n.margins,o=n.pageSetup,a=n.headerFooterConfig;return ExcelXlsxFactory.createExcel(r,e,i,o,a)};t.prototype.getDataTypeForValue=function(e){if(e===undefined){return"empty"}return this.isNumerical(e)?"n":"s"};t.prototype.getType=function(e,t,r){if(this.isFormula(r)){return"f"}if(t&&t.dataType){switch(t.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn("AG Grid: Unrecognized data type for excel export ["+t.id+".dataType="+t.dataType+"]")}}return e};t.prototype.addImage=function(e,t,r){if(!this.config.addImageToCell){return}var n=this.config.addImageToCell(e,t,r);if(!n){return}ExcelXlsxFactory.buildImageMap(n.image,e,t,this.columnsToExport,this.config.rowHeight);return n};t.prototype.createCell=function(e,t,r){var n=this.getStyleById(e);var i=this.getType(t,n,r)||t;return{styleId:n?e:undefined,data:{type:i,value:this.getCellValue(i,r)}}};t.prototype.createMergedCell=function(e,t,r,n){var i=r==null?"":r;return{styleId:!!this.getStyleById(e)?e:undefined,data:{type:t,value:t==="s"?ExcelXlsxFactory.getStringPosition(i).toString():r},mergeAcross:n}};t.prototype.getCellValue=function(e,t){if(t==null){return ExcelXlsxFactory.getStringPosition("").toString()}switch(e){case"s":return t===""?"":ExcelXlsxFactory.getStringPosition(t).toString();case"f":return t.slice(1);case"n":return Number(t).toString();default:return t}};return t}(BaseExcelSerializingSession);var __extends$2O=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$K=function(){__assign$K=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$K.apply(this,arguments)};var __decorate$1$=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var getMultipleSheetsAsExcel=function(e){var t=e.data,r=e.fontSize,n=r===void 0?11:r,i=e.author,o=i===void 0?"AG Grid":i;var a=ExcelXlsxFactory.images.size>0;ZipContainer.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]);if(a){ZipContainer.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);var s=0;ExcelXlsxFactory.images.forEach((function(e){var t=e[0].image[0];var r=t.imageType;ZipContainer.addFile("xl/media/image"+ ++s+"."+r,t.base64,true)}))}if(!t||t.length===0){console.warn("AG Grid: Invalid params supplied to getMultipleSheetsAsExcel() - `ExcelExportParams.data` is empty.");ExcelXlsxFactory.resetFactory();return}var l=t.length;var u=0;t.forEach((function(e,t){ZipContainer.addFile("xl/worksheets/sheet"+(t+1)+".xml",e);if(a&&ExcelXlsxFactory.worksheetImages.get(t)){createImageRelationsForSheet(t,u++)}}));ZipContainer.addFile("xl/workbook.xml",ExcelXlsxFactory.createWorkbook());ZipContainer.addFile("xl/styles.xml",ExcelXlsxFactory.createStylesheet(n));ZipContainer.addFile("xl/sharedStrings.xml",ExcelXlsxFactory.createSharedStrings());ZipContainer.addFile("xl/theme/theme1.xml",ExcelXlsxFactory.createTheme());ZipContainer.addFile("xl/_rels/workbook.xml.rels",ExcelXlsxFactory.createWorkbookRels(l));ZipContainer.addFile("docProps/core.xml",ExcelXlsxFactory.createCore(o));ZipContainer.addFile("[Content_Types].xml",ExcelXlsxFactory.createContentTypes(l));ZipContainer.addFile("_rels/.rels",ExcelXlsxFactory.createRels());ExcelXlsxFactory.resetFactory();var c=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return ZipContainer.getContent(c)};var exportMultipleSheetsAsExcel=function(e){var t=e.fileName,r=t===void 0?"export.xlsx":t;var n=getMultipleSheetsAsExcel(e);if(n){Downloader.download(r,n)}};var createImageRelationsForSheet=function(e,t){var r="xl/drawings";var n=r+"/drawing"+(t+1)+".xml";var i=r+"/_rels/drawing"+(t+1)+".xml.rels";var o="xl/worksheets/_rels/sheet"+(e+1)+".xml.rels";ZipContainer.addFile(i,ExcelXlsxFactory.createDrawingRel(e));ZipContainer.addFile(n,ExcelXlsxFactory.createDrawing(e));ZipContainer.addFile(o,ExcelXlsxFactory.createWorksheetDrawingRel(t))};var ExcelCreator=function(e){__extends$2O(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.exportMode="xlsx";return t}t.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})};t.prototype.getMergedParams=function(e){var t=this.gridOptionsService.get("defaultExcelExportParams");return Object.assign({},t,e)};t.prototype.getData=function(t){this.setExportMode(t.exportMode||"xlsx");return e.prototype.getData.call(this,t)};t.prototype.export=function(e){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return""}var t=this.getMergedParams(e);var r=this.getData(t);var n={data:[r],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};var i=this.packageFile(n);if(i){Downloader.download(this.getFileName(t.fileName),i)}return r};t.prototype.exportDataAsExcel=function(e){return this.export(e)};t.prototype.getDataAsExcel=function(e){var t=this.getMergedParams(e);var r=this.getData(t);if(e&&e.exportMode==="xml"){return r}var n={data:[r],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};return this.packageFile(n)};t.prototype.setFactoryMode=function(e,t){if(t===void 0){t="xlsx"}var r=t==="xlsx"?ExcelXlsxFactory:ExcelXmlFactory;r.factoryMode=e};t.prototype.getFactoryMode=function(e){var t=e==="xlsx"?ExcelXlsxFactory:ExcelXmlFactory;return t.factoryMode};t.prototype.getSheetDataForExcel=function(e){var t=this.getMergedParams(e);var r=this.getData(t);return r};t.prototype.getMultipleSheetsAsExcel=function(e){return getMultipleSheetsAsExcel(e)};t.prototype.exportMultipleSheetsAsExcel=function(e){return exportMultipleSheetsAsExcel(e)};t.prototype.getDefaultFileName=function(){return"export."+this.getExportMode()};t.prototype.getDefaultFileExtension=function(){return this.getExportMode()};t.prototype.createSerializingSession=function(e){var t=this,r=t.columnModel,n=t.valueService,i=t.gridOptionsService;var o=this.getExportMode()==="xlsx";var a="ag-grid";if(e.sheetName!=null){a=_.utf8_encode(e.sheetName.toString().substr(0,31))}var s=__assign$K(__assign$K({},e),{sheetName:a,columnModel:r,valueService:n,gridOptionsService:i,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:this.gridOptionsService.get("excelStyles")||[],styleLinker:this.styleLinker.bind(this)});return new(o?ExcelXlsxSerializingSession:ExcelXmlSerializingSession)(s)};t.prototype.styleLinker=function(e){var t=e.rowType,r=e.rowIndex,n=e.value,i=e.column,o=e.columnGroup,a=e.node;var s=t===RowType.HEADER;var l=t===RowType.HEADER_GROUPING;var u=s?i:o;var c=[];if(s||l){c.push("header");if(l){c.push("headerGroup")}if(u){c=c.concat(CssClassApplier.getHeaderClassesFromColDef(u.getDefinition(),this.gridOptionsService,i||null,o||null))}return c}var d=this.gridOptionsService.get("excelStyles");var p=["cell"];if(!d||!d.length){return p}var f=d.map((function(e){return e.id}));this.stylingService.processAllCellClasses(i.getDefinition(),{value:n,data:a.data,node:a,colDef:i.getDefinition(),column:i,rowIndex:r,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},(function(e){if(f.indexOf(e)>-1){p.push(e)}}));return p.sort((function(e,t){return f.indexOf(e)<f.indexOf(t)?-1:1}))};t.prototype.isExportSuppressed=function(){return this.gridOptionsService.is("suppressExcelExport")};t.prototype.setExportMode=function(e){this.exportMode=e};t.prototype.getExportMode=function(){return this.exportMode};t.prototype.packageFile=function(e){if(this.getExportMode()==="xml"){var t=e.mimeType||"application/vnd.ms-excel";return new Blob(["\ufeff",e.data[0]],{type:t})}return getMultipleSheetsAsExcel(e)};__decorate$1$([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$1$([Autowired("valueService")],t.prototype,"valueService",void 0);__decorate$1$([Autowired("stylingService")],t.prototype,"stylingService",void 0);__decorate$1$([Autowired("gridSerializer")],t.prototype,"gridSerializer",void 0);__decorate$1$([Autowired("gridOptionsService")],t.prototype,"gridOptionsService",void 0);__decorate$1$([PostConstruct],t.prototype,"postConstruct",null);t=__decorate$1$([Bean("excelCreator")],t);return t}(BaseCreator);var VERSION$d="29.3.5";var ExcelExportModule={version:VERSION$d,moduleName:ModuleNames.ExcelExportModule,beans:[ExcelCreator,GridSerializer,CsvCreator],dependantModules:[CsvExportModule,EnterpriseCoreModule]};var __extends$2N=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1_=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var EXPAND_STATE;(function(e){e[e["EXPANDED"]=0]="EXPANDED";e[e["COLLAPSED"]=1]="COLLAPSED";e[e["INDETERMINATE"]=2]="INDETERMINATE"})(EXPAND_STATE||(EXPAND_STATE={}));var FiltersToolPanelHeaderPanel=function(e){__extends$2N(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.preConstruct=function(){this.setTemplate('<div class="ag-filter-toolpanel-search" role="presentation">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>\n            </div>')};t.prototype.postConstruct=function(){var e=this.localeService.getLocaleTextFunc();this.eFilterTextField.onValueChange(this.onSearchTextChanged.bind(this));this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input"));this.createExpandIcons();this.setExpandState(EXPAND_STATE.EXPANDED);this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this));this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))};t.prototype.init=function(e){this.params=e;if(this.columnModel.isReady()){this.showOrHideOptions()}};t.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=_.createIconNoSpan("columnSelectOpen",this.gridOptionsService));this.eExpand.appendChild(this.eExpandUnchecked=_.createIconNoSpan("columnSelectClosed",this.gridOptionsService));this.eExpand.appendChild(this.eExpandIndeterminate=_.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService))};t.prototype.showOrHideOptions=function(){var e=!this.params.suppressFilterSearch;var t=!this.params.suppressExpandAll;var r=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(r("searchOoo","Search..."));var n=function(e){return e.getOriginalParent()&&e.isFilterAllowed()};var i=this.columnModel.getAllGridColumns().some(n);_.setDisplayed(this.eFilterTextField.getGui(),e);_.setDisplayed(this.eExpand,t&&i)};t.prototype.onSearchTextChanged=function(){var e=this;if(!this.onSearchTextChangedDebounced){this.onSearchTextChangedDebounced=_.debounce((function(){e.dispatchEvent({type:"searchChanged",searchText:e.eFilterTextField.getValue()})}),300)}this.onSearchTextChangedDebounced()};t.prototype.onExpandClicked=function(){var e=this.currentExpandState===EXPAND_STATE.EXPANDED?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(e)};t.prototype.setExpandState=function(e){this.currentExpandState=e;_.setDisplayed(this.eExpandChecked,this.currentExpandState===EXPAND_STATE.EXPANDED);_.setDisplayed(this.eExpandUnchecked,this.currentExpandState===EXPAND_STATE.COLLAPSED);_.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===EXPAND_STATE.INDETERMINATE)};__decorate$1_([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$1_([RefSelector("eExpand")],t.prototype,"eExpand",void 0);__decorate$1_([RefSelector("eFilterTextField")],t.prototype,"eFilterTextField",void 0);__decorate$1_([PreConstruct],t.prototype,"preConstruct",null);__decorate$1_([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var __extends$2M=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1Z=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ToolPanelFilterComp=function(e){__extends$2M(t,e);function t(r){if(r===void 0){r=false}var n=e.call(this,t.TEMPLATE)||this;n.expanded=false;n.hideHeader=r;return n}t.prototype.postConstruct=function(){this.eExpandChecked=_.createIconNoSpan("columnSelectOpen",this.gridOptionsService);this.eExpandUnchecked=_.createIconNoSpan("columnSelectClosed",this.gridOptionsService);this.eExpand.appendChild(this.eExpandChecked);this.eExpand.appendChild(this.eExpandUnchecked)};t.prototype.setColumn=function(e){var t=this;this.column=e;this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",false)||"";this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this));this.addManagedListener(this.eFilterToolPanelHeader,"keydown",(function(e){if(e.key===KeyCode.ENTER){t.toggleExpanded()}}));this.addManagedListener(this.eventService,Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this));this.addInIcon("filter",this.eFilterIcon,this.column);_.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:true});_.setDisplayed(this.eExpandChecked,false);if(this.hideHeader){_.setDisplayed(this.eFilterToolPanelHeader,false);this.eFilterToolPanelHeader.removeAttribute("tabindex")}else{this.eFilterToolPanelHeader.setAttribute("tabindex","0")}this.addManagedListener(this.column,Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this));this.addManagedListener(this.eventService,Events.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))};t.prototype.getColumn=function(){return this.column};t.prototype.getColumnFilterName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",false)};t.prototype.addCssClassToTitleBar=function(e){this.eFilterToolPanelHeader.classList.add(e)};t.prototype.addInIcon=function(e,t,r){if(t==null){return}var n=_.createIconNoSpan(e,this.gridOptionsService,r);t.appendChild(n)};t.prototype.isFilterActive=function(){return this.filterManager.isFilterActive(this.column)};t.prototype.onFilterChanged=function(){_.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:true});this.dispatchEvent({type:Column.EVENT_FILTER_CHANGED})};t.prototype.onFilterDestroyed=function(e){if(this.expanded&&e.source==="api"&&e.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)){this.removeFilterElement();this.addFilterElement()}};t.prototype.toggleExpanded=function(){this.expanded?this.collapse():this.expand()};t.prototype.expand=function(){if(this.expanded){return}this.expanded=true;_.setAriaExpanded(this.eFilterToolPanelHeader,true);_.setDisplayed(this.eExpandChecked,true);_.setDisplayed(this.eExpandUnchecked,false);this.addFilterElement()};t.prototype.addFilterElement=function(){var e=this;var t=_.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>');var r=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR");if(!r){return}var n=r.filterPromise,i=r.guiPromise;n===null||n===void 0?void 0:n.then((function(r){e.underlyingFilter=r;if(!r){return}i.then((function(n){if(n){t.appendChild(n)}e.agFilterToolPanelBody.appendChild(t);if(r.afterGuiAttached){r.afterGuiAttached({container:"toolPanel"})}}))}))};t.prototype.collapse=function(){var e,t;if(!this.expanded){return}this.expanded=false;_.setAriaExpanded(this.eFilterToolPanelHeader,false);this.removeFilterElement();_.setDisplayed(this.eExpandChecked,false);_.setDisplayed(this.eExpandUnchecked,true);(t=(e=this.underlyingFilter)===null||e===void 0?void 0:e.afterGuiDetached)===null||t===void 0?void 0:t.call(e)};t.prototype.removeFilterElement=function(){_.clearElement(this.agFilterToolPanelBody)};t.prototype.isExpanded=function(){return this.expanded};t.prototype.refreshFilter=function(e){var t;if(!this.expanded){return}var r=this.underlyingFilter;if(!r){return}if(e){if(typeof r.refreshVirtualList==="function"){r.refreshVirtualList()}}else{(t=r.afterGuiDetached)===null||t===void 0?void 0:t.call(r)}};t.prototype.onFilterOpened=function(e){if(e.source!=="COLUMN_MENU"){return}if(e.column!==this.column){return}if(!this.expanded){return}this.collapse()};t.TEMPLATE='\n        <div class="ag-filter-toolpanel-instance">\n            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <span ref="eFilterName" class="ag-header-cell-text"></span>\n                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>\n            </div>\n            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>\n        </div>';__decorate$1Z([RefSelector("eFilterToolPanelHeader")],t.prototype,"eFilterToolPanelHeader",void 0);__decorate$1Z([RefSelector("eFilterName")],t.prototype,"eFilterName",void 0);__decorate$1Z([RefSelector("agFilterToolPanelBody")],t.prototype,"agFilterToolPanelBody",void 0);__decorate$1Z([RefSelector("eFilterIcon")],t.prototype,"eFilterIcon",void 0);__decorate$1Z([RefSelector("eExpand")],t.prototype,"eExpand",void 0);__decorate$1Z([Autowired("filterManager")],t.prototype,"filterManager",void 0);__decorate$1Z([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$1Z([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var __extends$2L=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1Y=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ToolPanelFilterGroupComp=function(e){__extends$2L(t,e);function t(t,r,n,i,o){var a=e.call(this)||this;a.columnGroup=t;a.childFilterComps=r;a.depth=i;a.expandedCallback=n;a.showingColumn=o;return a}t.prototype.preConstruct=function(){var e={cssIdentifier:"filter-toolpanel",direction:"vertical"};this.setTemplate(t.TEMPLATE,{filterGroupComp:e})};t.prototype.init=function(){var e=this;this.setGroupTitle();this.filterGroupComp.setAlignItems("stretch");this.filterGroupComp.addCssClass("ag-filter-toolpanel-group-level-"+this.depth);this.filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+this.depth+"-header");this.childFilterComps.forEach((function(t){e.filterGroupComp.addItem(t);t.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+(e.depth+1)+"-header")}));this.refreshFilterClass();this.addExpandCollapseListeners();this.addFilterChangedListeners();this.setupTooltip()};t.prototype.setupTooltip=function(){var e=this;if(!this.showingColumn){return}var t=function(){var t=e.columnGroup.getColDef().headerTooltip;e.setTooltip(t)};t();this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,t)};t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);t.location="filterToolPanelColumnGroup";return t};t.prototype.addCssClassToTitleBar=function(e){this.filterGroupComp.addCssClassToTitleBar(e)};t.prototype.refreshFilters=function(e){this.childFilterComps.forEach((function(r){if(r instanceof t){r.refreshFilters(e)}else{r.refreshFilter(e)}}))};t.prototype.isColumnGroup=function(){return this.columnGroup instanceof ProvidedColumnGroup};t.prototype.isExpanded=function(){return this.filterGroupComp.isExpanded()};t.prototype.getChildren=function(){return this.childFilterComps};t.prototype.getFilterGroupName=function(){return this.filterGroupName?this.filterGroupName:""};t.prototype.getFilterGroupId=function(){return this.columnGroup.getId()};t.prototype.hideGroupItem=function(e,t){this.filterGroupComp.hideItem(e,t)};t.prototype.hideGroup=function(e){this.setDisplayed(!e)};t.prototype.forEachToolPanelFilterChild=function(e){this.childFilterComps.forEach((function(t){if(t instanceof ToolPanelFilterComp){e(t)}}))};t.prototype.addExpandCollapseListeners=function(){var e=this;var t=this.isColumnGroup()?function(){return e.expandedCallback()}:function(){return e.forEachToolPanelFilterChild((function(e){return e.expand()}))};var r=this.isColumnGroup()?function(){return e.expandedCallback()}:function(){return e.forEachToolPanelFilterChild((function(e){return e.collapse()}))};this.addManagedListener(this.filterGroupComp,AgGroupComponent.EVENT_EXPANDED,t);this.addManagedListener(this.filterGroupComp,AgGroupComponent.EVENT_COLLAPSED,r)};t.prototype.getColumns=function(){if(this.columnGroup instanceof ProvidedColumnGroup){return this.columnGroup.getLeafColumns()}return[this.columnGroup]};t.prototype.addFilterChangedListeners=function(){var e=this;this.getColumns().forEach((function(t){e.addManagedListener(t,Column.EVENT_FILTER_CHANGED,(function(){return e.refreshFilterClass()}))}));if(!(this.columnGroup instanceof ProvidedColumnGroup)){this.addManagedListener(this.eventService,Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))}};t.prototype.refreshFilterClass=function(){var e=this.getColumns();var t=function(){return e.some((function(e){return e.isFilterActive()}))};this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",t())};t.prototype.onFilterOpened=function(e){if(e.source!=="COLUMN_MENU"){return}if(e.column!==this.columnGroup){return}if(!this.isExpanded()){return}this.collapse()};t.prototype.expand=function(){this.filterGroupComp.toggleGroupExpand(true)};t.prototype.collapse=function(){this.filterGroupComp.toggleGroupExpand(false)};t.prototype.setGroupTitle=function(){this.filterGroupName=this.columnGroup instanceof ProvidedColumnGroup?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup);this.filterGroupComp.setTitle(this.filterGroupName||"")};t.prototype.getColumnGroupName=function(e){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")};t.prototype.getColumnName=function(e){return this.columnModel.getDisplayNameForColumn(e,"filterToolPanel",false)};t.prototype.destroyFilters=function(){this.childFilterComps=this.destroyBeans(this.childFilterComps);_.clearElement(this.getGui())};t.prototype.destroy=function(){this.destroyFilters();e.prototype.destroy.call(this)};t.TEMPLATE='<div class="ag-filter-toolpanel-group-wrapper">\n            <ag-group-component ref="filterGroupComp"></ag-group-component>\n        </div>';__decorate$1Y([RefSelector("filterGroupComp")],t.prototype,"filterGroupComp",void 0);__decorate$1Y([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$1Y([PreConstruct],t.prototype,"preConstruct",null);__decorate$1Y([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$2K=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1X=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var FiltersToolPanelListPanel=function(e){__extends$2K(t,e);function t(){var r=e.call(this,t.TEMPLATE)||this;r.initialised=false;r.filterGroupComps=[];return r}t.prototype.init=function(e){var t=this;this.initialised=true;var r={suppressExpandAll:false,suppressFilterSearch:false,suppressSyncLayoutWithGrid:false,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};_.mergeDeep(r,e);this.params=r;if(!this.params.suppressSyncLayoutWithGrid){this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,(function(){return t.onColumnsChanged()}))}this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,(function(){return t.onColumnsChanged()}));this.addManagedListener(this.eventService,Events.EVENT_INTERNAL_TOOL_PANEL_VISIBLE_CHANGED,(function(e){if(e.key==="filters"){t.refreshFilters(e.visible)}}));if(this.columnModel.isReady()){this.onColumnsChanged()}};t.prototype.onColumnsChanged=function(){var e=this.columnModel.isPivotMode();var t=!this.params.suppressSyncLayoutWithGrid&&!e;t?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs()};t.prototype.syncFilterLayout=function(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this))};t.prototype.buildTreeFromProvidedColumnDefs=function(){var e=this.columnModel.getPrimaryColumnTree();this.recreateFilters(e)};t.prototype.setFiltersLayout=function(e){var t=this.toolPanelColDefService.createColumnTree(e);this.recreateFilters(t)};t.prototype.recreateFilters=function(e){var t=this;var r=this.gridOptionsService.getDocument().activeElement;var n=this.getExpansionState();this.destroyFilters();this.filterGroupComps=this.recursivelyAddComps(e,0,n);var i=this.filterGroupComps.length;if(i){this.filterGroupComps.forEach((function(e){return t.appendChild(e)}));this.setFirstAndLastVisible(0,i-1)}if(_.exists(this.searchFilterText)){this.searchFilters(this.searchFilterText)}this.fireExpandedEvent();if(this.getGui().contains(r)){r.focus()}};t.prototype.recursivelyAddComps=function(e,t,r){var n=this;return _.flatten(e.map((function(e){if(e instanceof ProvidedColumnGroup){return _.flatten(n.recursivelyAddFilterGroupComps(e,t,r))}var i=e;if(!n.shouldDisplayFilter(i)){return[]}var o=t===0;var a=new ToolPanelFilterComp(o);n.createBean(a);a.setColumn(i);if(r.get(i.getId())){a.expand()}if(t>0){return a}var s=n.createBean(new ToolPanelFilterGroupComp(i,[a],n.onGroupExpanded.bind(n),t,true));s.addCssClassToTitleBar("ag-filter-toolpanel-header");if(!r.get(s.getFilterGroupId())){s.collapse()}return s})))};t.prototype.recursivelyAddFilterGroupComps=function(e,t,r){if(!this.filtersExistInChildren(e.getChildren())){return}var n=e.getColGroupDef();if(n&&n.suppressFiltersToolPanel){return[]}var i=e.isPadding()?t:t+1;var o=_.flatten(this.recursivelyAddComps(e.getChildren(),i,r));if(e.isPadding()){return o}var a=new ToolPanelFilterGroupComp(e,o,this.onGroupExpanded.bind(this),t,false);this.createBean(a);a.addCssClassToTitleBar("ag-filter-toolpanel-header");if(r.get(a.getFilterGroupId())===false){a.collapse()}return[a]};t.prototype.filtersExistInChildren=function(e){var t=this;return e.some((function(e){if(e instanceof ProvidedColumnGroup){return t.filtersExistInChildren(e.getChildren())}return t.shouldDisplayFilter(e)}))};t.prototype.shouldDisplayFilter=function(e){var t=e.getColDef()&&e.getColDef().suppressFiltersToolPanel;return e.isFilterAllowed()&&!t};t.prototype.getExpansionState=function(){var e=new Map;var t=function(r){e.set(r.getFilterGroupId(),r.isExpanded());r.getChildren().forEach((function(r){if(r instanceof ToolPanelFilterGroupComp){t(r)}else{e.set(r.getColumn().getId(),r.isExpanded())}}))};this.filterGroupComps.forEach(t);return e};t.prototype.refresh=function(){};t.prototype.setVisible=function(t){e.prototype.setDisplayed.call(this,t);if(t&&!this.initialised){this.init(this.params)}};t.prototype.expandFilterGroups=function(e,t){var r=[];var n=function(i){var o=i.getFilterGroupId();var a=!t||_.includes(t,o);if(a){if(e&&i.isColumnGroup()){i.expand()}else{i.collapse()}r.push(o)}i.getChildren().forEach((function(e){if(e instanceof ToolPanelFilterGroupComp){n(e)}}))};this.filterGroupComps.forEach(n);this.onGroupExpanded();if(t){var i=t.filter((function(e){return r.indexOf(e)<0}));if(i.length>0){console.warn("AG Grid: unable to find groups for these supplied groupIds:",i)}}};t.prototype.expandFilters=function(e,t){var r=[];var n=function(i){if(i instanceof ToolPanelFilterGroupComp){var o=false;i.getChildren().forEach((function(t){var r=n(t);if(r){if(e){i.expand();o=true}else if(!i.isColumnGroup()){i.collapse()}}}));return o}var a=i.getColumn().getColId();var s=!t||_.includes(t,a);if(s){e?i.expand():i.collapse();r.push(a)}return s};this.filterGroupComps.forEach(n);this.onGroupExpanded();if(t){var i=t.filter((function(e){return r.indexOf(e)<0}));if(i.length>0){console.warn("AG Grid: unable to find columns for these supplied colIds:",i)}}};t.prototype.onGroupExpanded=function(){this.fireExpandedEvent()};t.prototype.fireExpandedEvent=function(){var e=0;var t=0;var r=function(n){if(!n.isColumnGroup()){return}n.isExpanded()?e++:t++;n.getChildren().forEach((function(e){if(e instanceof ToolPanelFilterGroupComp){r(e)}}))};this.filterGroupComps.forEach(r);var n;if(e>0&&t>0){n=EXPAND_STATE.INDETERMINATE}else if(t>0){n=EXPAND_STATE.COLLAPSED}else{n=EXPAND_STATE.EXPANDED}this.dispatchEvent({type:"groupExpanded",state:n})};t.prototype.performFilterSearch=function(e){this.searchFilterText=_.exists(e)?e.toLowerCase():null;this.searchFilters(this.searchFilterText)};t.prototype.searchFilters=function(e){var t=function(t){return!_.exists(e)||t.toLowerCase().indexOf(e)!==-1};var r=function(e,n){if(!(e instanceof ToolPanelFilterGroupComp)){return t(e.getColumnFilterName()||"")}var i=e.getChildren();var o=t(e.getFilterGroupName());var a=n||o;if(a){e.hideGroup(false);for(var s=0;s<i.length;s++){r(i[s],a);e.hideGroupItem(false,s)}return true}var l=false;i.forEach((function(t,i){var o=r(t,n);e.hideGroupItem(!o,i);if(o){l=true}}));e.hideGroup(!l);return l};var n;var i;this.filterGroupComps.forEach((function(e,t){r(e,false);if(n===undefined){if(!e.containsCssClass("ag-hidden")){n=t;i=t}}else if(!e.containsCssClass("ag-hidden")&&i!==t){i=t}}));this.setFirstAndLastVisible(n,i)};t.prototype.setFirstAndLastVisible=function(e,t){this.filterGroupComps.forEach((function(r,n){r.removeCssClass("ag-first-group-visible");r.removeCssClass("ag-last-group-visible");if(n===e){r.addCssClass("ag-first-group-visible")}if(n===t){r.addCssClass("ag-last-group-visible")}}))};t.prototype.refreshFilters=function(e){this.filterGroupComps.forEach((function(t){return t.refreshFilters(e)}))};t.prototype.destroyFilters=function(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps);_.clearElement(this.getGui())};t.prototype.destroy=function(){this.destroyFilters();e.prototype.destroy.call(this)};t.TEMPLATE='<div class="ag-filter-list-panel"></div>';__decorate$1X([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$1X([Autowired("columnApi")],t.prototype,"columnApi",void 0);__decorate$1X([Autowired("toolPanelColDefService")],t.prototype,"toolPanelColDefService",void 0);__decorate$1X([Autowired("columnModel")],t.prototype,"columnModel",void 0);return t}(Component);var __extends$2J=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$J=function(){__assign$J=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$J.apply(this,arguments)};var __decorate$1W=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var FiltersToolPanel=function(e){__extends$2J(t,e);function t(){var r=e.call(this,t.TEMPLATE)||this;r.initialised=false;r.listenerDestroyFuncs=[];return r}t.prototype.init=function(e){if(this.initialised){this.listenerDestroyFuncs.forEach((function(e){return e()}));this.listenerDestroyFuncs=[]}this.initialised=true;var t={suppressExpandAll:false,suppressFilterSearch:false,suppressSyncLayoutWithGrid:false,api:this.gridApi,columnApi:this.columnApi};this.params=__assign$J(__assign$J(__assign$J({},t),e),{context:this.gridOptionsService.context});this.filtersToolPanelHeaderPanel.init(this.params);this.filtersToolPanelListPanel.init(this.params);var r=this.params.suppressExpandAll;var n=this.params.suppressFilterSearch;if(r&&n){this.filtersToolPanelHeaderPanel.setDisplayed(false)}this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))};t.prototype.setVisible=function(t){e.prototype.setDisplayed.call(this,t);if(t&&!this.initialised){this.init(this.params)}};t.prototype.onExpandAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(true)};t.prototype.onCollapseAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(false)};t.prototype.onSearchChanged=function(e){this.filtersToolPanelListPanel.performFilterSearch(e.searchText)};t.prototype.setFilterLayout=function(e){this.filtersToolPanelListPanel.setFiltersLayout(e)};t.prototype.onGroupExpanded=function(e){this.filtersToolPanelHeaderPanel.setExpandState(e.state)};t.prototype.expandFilterGroups=function(e){this.filtersToolPanelListPanel.expandFilterGroups(true,e)};t.prototype.collapseFilterGroups=function(e){this.filtersToolPanelListPanel.expandFilterGroups(false,e)};t.prototype.expandFilters=function(e){this.filtersToolPanelListPanel.expandFilters(true,e)};t.prototype.collapseFilters=function(e){this.filtersToolPanelListPanel.expandFilters(false,e)};t.prototype.syncLayoutWithGrid=function(){this.filtersToolPanelListPanel.syncFilterLayout()};t.prototype.refresh=function(){this.init(this.params)};t.prototype.destroy=function(){e.prototype.destroy.call(this)};t.TEMPLATE='<div class="ag-filter-toolpanel">\n            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>\n            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>\n         </div>';__decorate$1W([RefSelector("filtersToolPanelHeaderPanel")],t.prototype,"filtersToolPanelHeaderPanel",void 0);__decorate$1W([RefSelector("filtersToolPanelListPanel")],t.prototype,"filtersToolPanelListPanel",void 0);__decorate$1W([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$1W([Autowired("columnApi")],t.prototype,"columnApi",void 0);return t}(Component);var VERSION$c="29.3.5";var FiltersToolPanelModule={version:VERSION$c,moduleName:ModuleNames.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:FiltersToolPanelHeaderPanel},{componentName:"AgFiltersToolPanelList",componentClass:FiltersToolPanelListPanel}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:FiltersToolPanel}],dependantModules:[SideBarModule,EnterpriseCoreModule]};var __extends$2I=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var TimeInterval=function(){function e(e,t,r){this._encode=e;this._decode=t;this._rangeCallback=r}e.prototype.floor=function(e){var t=new Date(e);var r=this._encode(t);return this._decode(r)};e.prototype.ceil=function(e){var t=new Date(Number(e)-1);var r=this._encode(t);return this._decode(r+1)};e.prototype.range=function(e,t,r){var n;var i=(n=this._rangeCallback)===null||n===void 0?void 0:n.call(this,e,t);var o=this._encode(r?this.floor(e):this.ceil(e));var a=this._encode(r?this.ceil(t):this.floor(t));if(a<o){return[]}var s=[];for(var l=o;l<=a;l++){var u=this._decode(l);s.push(u)}i===null||i===void 0?void 0:i();return s};return e}();var CountableTimeInterval=function(e){__extends$2I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.getOffset=function(e,t){var r=typeof e==="number"||e instanceof Date?this._encode(new Date(e)):0;return Math.floor(r)%t};t.prototype.every=function(e,t){var r=this;var n=0;var i;var o=(t!==null&&t!==void 0?t:{}).snapTo,a=o===void 0?"start":o;if(typeof a==="string"){var s=n;i=function(t,i){var o=a==="start"?t:i;n=r.getOffset(o,e);return function(){return n=s}}}else if(typeof a==="number"){n=this.getOffset(new Date(a),e)}else if(a instanceof Date){n=this.getOffset(a,e)}var l=function(t){var i=r._encode(t);return Math.floor((i-n)/e)};var u=function(t){return r._decode(t*e+n)};var c=new TimeInterval(l,u,i);return c};return t}(TimeInterval);function encode$b(e){return e.getTime()}function decode$b(e){return new Date(e)}var millisecond=new CountableTimeInterval(encode$b,decode$b);new Date(0).getFullYear();var durationSecond=1e3;var durationMinute=durationSecond*60;var durationHour=durationMinute*60;var durationDay=durationHour*24;var durationWeek=durationDay*7;var durationMonth=durationDay*30;var durationYear=durationDay*365;var offset$2=(new Date).getTimezoneOffset()*durationMinute;function encode$a(e){return Math.floor((e.getTime()-offset$2)/durationSecond)}function decode$a(e){return new Date(offset$2+e*durationSecond)}var second=new CountableTimeInterval(encode$a,decode$a);var offset$1=(new Date).getTimezoneOffset()*durationMinute;function encode$9(e){return Math.floor((e.getTime()-offset$1)/durationMinute)}function decode$9(e){return new Date(offset$1+e*durationMinute)}var minute=new CountableTimeInterval(encode$9,decode$9);var offset=(new Date).getTimezoneOffset()*durationMinute;function encode$8(e){return Math.floor((e.getTime()-offset)/durationHour)}function decode$8(e){return new Date(offset+e*durationHour)}var hour=new CountableTimeInterval(encode$8,decode$8);function encode$7(e){var t=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor(t/durationDay)}function decode$7(e){var t=new Date(0);t.setDate(t.getDate()+e);t.setHours(0,0,0,0);return t}var day=new CountableTimeInterval(encode$7,decode$7);var baseSunday=new Date(2023,0,1);function weekday(e){var t=Date.UTC(baseSunday.getFullYear(),baseSunday.getMonth(),baseSunday.getDate())+e*durationDay;function r(e){var r=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((r-t)/durationWeek)}function n(e){var r=new Date(t);r.setDate(r.getDate()+e*7);return r}return new CountableTimeInterval(r,n)}var sunday=weekday(0);var monday=weekday(1);var tuesday=weekday(2);var wednesday=weekday(3);var thursday=weekday(4);var friday=weekday(5);var saturday=weekday(6);function encode$6(e){return e.getFullYear()*12+e.getMonth()}function decode$6(e){var t=Math.floor(e/12);var r=e-t*12;return new Date(t,r,1)}var month=new CountableTimeInterval(encode$6,decode$6);function encode$5(e){return e.getFullYear()}function decode$5(e){var t=new Date;t.setFullYear(e);t.setMonth(0,1);t.setHours(0,0,0,0);return t}var year=new CountableTimeInterval(encode$5,decode$5);function encode$4(e){return Math.floor(e.getTime()/durationMinute)}function decode$4(e){return new Date(e*durationMinute)}var utcMinute=new CountableTimeInterval(encode$4,decode$4);function encode$3(e){return Math.floor(e.getTime()/durationHour)}function decode$3(e){return new Date(e*durationHour)}var utcHour=new CountableTimeInterval(encode$3,decode$3);function encode$2(e){return Math.floor(e.getTime()/durationDay)}function decode$2(e){var t=new Date(0);t.setUTCDate(t.getUTCDate()+e);t.setUTCHours(0,0,0,0);return t}var utcDay=new CountableTimeInterval(encode$2,decode$2);function encode$1(e){return e.getUTCFullYear()*12+e.getUTCMonth()}function decode$1(e){var t=Math.floor(e/12);var r=e-t*12;return new Date(Date.UTC(t,r,1))}var utcMonth=new CountableTimeInterval(encode$1,decode$1);function encode(e){return e.getUTCFullYear()}function decode(e){var t=new Date;t.setUTCFullYear(e);t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0);return t}var utcYear=new CountableTimeInterval(encode,decode);var time=Object.freeze({__proto__:null,millisecond:millisecond,second:second,minute:minute,hour:hour,day:day,sunday:sunday,monday:monday,tuesday:tuesday,wednesday:wednesday,thursday:thursday,friday:friday,saturday:saturday,month:month,year:year,utcMinute:utcMinute,utcHour:utcHour,utcDay:utcDay,utcMonth:utcMonth,utcYear:utcYear});var MOBILE=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function isDesktop(){var e=navigator.userAgent;if(MOBILE.some((function(t){return t.test(e)}))){return false}return true}var HdpiCanvas=function(){function e(e){var t=e.document,r=t===void 0?window.document:t,n=e.width,i=n===void 0?600:n,o=e.height,a=o===void 0?300:o,s=e.domLayer,l=s===void 0?false:s,u=e.zIndex,c=u===void 0?0:u,d=e.name,p=d===void 0?undefined:d,f=e.overrideDevicePixelRatio,h=f===void 0?undefined:f;this._container=undefined;this._enabled=true;this._pixelRatio=NaN;this._width=0;this._height=0;this.document=r;this.element=r.createElement("canvas");this.element.width=i;this.element.height=a;this.context=this.element.getContext("2d");this.imageSource=this.context.canvas;var v=this.element.style;v.userSelect="none";v.display="block";if(l){v.position="absolute";v.zIndex=String(c);v.top="0";v.left="0";v.pointerEvents="none";v.opacity="1";if(p){this.element.id=p}}this.setPixelRatio(h);this.resize(i,a)}Object.defineProperty(e.prototype,"container",{get:function(){return this._container},set:function(e){if(this._container!==e){this.remove();if(e){e.appendChild(this.element)}this._container=e}},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this.element.style.display=e?"block":"none";this._enabled=!!e},enumerable:false,configurable:true});e.prototype.remove=function(){var e=this.element.parentNode;if(e!=null){e.removeChild(this.element)}};e.prototype.destroy=function(){this.element.remove();this.element.width=0;this.element.height=0;this.context.clearRect(0,0,0,0);Object.freeze(this)};e.prototype.snapshot=function(){};e.prototype.clear=function(){this.context.save();this.context.resetTransform();this.context.clearRect(0,0,this.width,this.height);this.context.restore()};e.prototype.toImage=function(){var e=this.document.createElement("img");e.src=this.getDataURL();return e};e.prototype.getDataURL=function(e){return this.element.toDataURL(e)};e.prototype.download=function(e,t){if(t===void 0){t="image/png"}e=(e||"").trim()||"image";var r=this.getDataURL(t);var n=this.document;var i=n.createElement("a");i.href=r;i.download=e;i.style.display="none";n.body.appendChild(i);i.click();n.body.removeChild(i)};Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:false,configurable:true});e.prototype.setPixelRatio=function(t){var r=t!==null&&t!==void 0?t:window.devicePixelRatio;if(!isDesktop()){r=1}e.overrideScale(this.context,r);this._pixelRatio=r};Object.defineProperty(e.prototype,"pixelated",{get:function(){return this.element.style.imageRendering==="pixelated"},set:function(e){this.element.style.imageRendering=e?"pixelated":"auto"},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:false,configurable:true});e.prototype.resize=function(e,t){if(!(e>0&&t>0)){return}var r=this,n=r.element,i=r.context,o=r.pixelRatio;n.width=Math.round(e*o);n.height=Math.round(t*o);n.style.width=e+"px";n.style.height=t+"px";i.resetTransform();this._width=e;this._height=t};Object.defineProperty(e,"textMeasuringContext",{get:function(){if(this._textMeasuringContext){return this._textMeasuringContext}var e=document.createElement("canvas");this._textMeasuringContext=e.getContext("2d");return this._textMeasuringContext},enumerable:false,configurable:true});Object.defineProperty(e,"svgText",{get:function(){if(this._svgText){return this._svgText}var e="http://www.w3.org/2000/svg";var t=document.createElementNS(e,"svg");t.setAttribute("width","100");t.setAttribute("height","100");if(t.classList){t.classList.add("text-measuring-svg")}else{t.setAttribute("class","text-measuring-svg")}t.style.position="absolute";t.style.top="-1000px";t.style.visibility="hidden";var r=document.createElementNS(e,"text");r.setAttribute("x","0");r.setAttribute("y","30");r.setAttribute("text","black");t.appendChild(r);document.body.appendChild(t);this._svgText=r;return r},enumerable:false,configurable:true});Object.defineProperty(e,"has",{get:function(){if(this._has){return this._has}var e=navigator.userAgent.indexOf("Chrome")>-1;var t=navigator.userAgent.indexOf("Firefox")>-1;var r=!e&&navigator.userAgent.indexOf("Safari")>-1;this._has=Object.freeze({textMetrics:this.textMeasuringContext.measureText("test").actualBoundingBoxDescent!==undefined&&!t&&!r,getTransform:this.textMeasuringContext.getTransform!==undefined});return this._has},enumerable:false,configurable:true});e.measureText=function(e,t,r,n){var i=this.textMeasuringContext;i.font=t;i.textBaseline=r;i.textAlign=n;return i.measureText(e)};e.getTextSize=function(e,t){if(this.has.textMetrics){var r=this.textMeasuringContext;r.font=t;var n=r.measureText(e);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}else{return this.measureSvgText(e,t)}};e.measureSvgText=function(e,t){var r=this.textSizeCache;var n=r[t];if(n){var i=n[e];if(i){return i}}else{r[t]={}}var o=this.svgText;o.style.font=t;o.textContent=e;var a=o.getBBox();var s={width:a.width,height:a.height};r[t][e]=s;return s};e.overrideScale=function(e,t){var r=0;var n={save:function(){this.$save();r++},restore:function(){if(r>0){this.$restore();r--}else{throw new Error("AG Charts - Unable to restore() past depth 0")}},setTransform:function(e,r,n,i,o,a){if(typeof e==="object"){this.$setTransform(e)}else{this.$setTransform(e*t,r*t,n*t,i*t,o*t,a*t)}},resetTransform:function(){this.$setTransform(t,0,0,t,0,0)},verifyDepthZero:function(){if(r!==0){throw new Error("AG Charts - Save/restore depth is non-zero: "+r)}}};for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i)){if(!e["$"+i]){e["$"+i]=e[i]}e[i]=n[i]}}};e.textSizeCache={};return e}();var __assign$I=function(){__assign$I=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$I.apply(this,arguments)};var __read$10=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var BBox=function(){function e(e,t,r,n){this.x=e;this.y=t;this.width=r;this.height=n}e.prototype.clone=function(){var t=this,r=t.x,n=t.y,i=t.width,o=t.height;return new e(r,n,i,o)};e.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height};e.prototype.containsPoint=function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height};e.prototype.collidesBBox=function(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y};e.prototype.isInfinite=function(){return Math.abs(this.x)===Infinity||Math.abs(this.y)===Infinity||Math.abs(this.width)===Infinity||Math.abs(this.height)===Infinity};e.prototype.shrink=function(e,t){var r=this;var n=function(e,t){switch(e){case"top":r.y+=t;case"bottom":r.height-=t;break;case"left":r.x+=t;case"right":r.width-=t;break;case"vertical":r.y+=t;r.height-=t*2;break;case"horizontal":r.x+=t;r.width-=t*2;break;default:r.x+=t;r.width-=t*2;r.y+=t;r.height-=t*2}};if(typeof e==="number"){n(t,e)}else{Object.entries(e).forEach((function(e){var t=__read$10(e,2),r=t[0],i=t[1];return n(r,i)}))}return this};e.prototype.grow=function(e,t){if(typeof e==="number"){this.shrink(-e,t)}else{var r=__assign$I({},e);for(var n in r){r[n]*=-1}this.shrink(r)}return this};e.merge=function(t){var r=Infinity;var n=Infinity;var i=-Infinity;var o=-Infinity;t.forEach((function(e){if(e.x<r){r=e.x}if(e.y<n){n=e.y}if(e.x+e.width>i){i=e.x+e.width}if(e.y+e.height>o){o=e.y+e.height}}));return new e(r,n,i-r,o-n)};return e}();var __read$$=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var Matrix=function(){function e(e){if(e===void 0){e=[1,0,0,1,0,0]}this.elements=e}e.prototype.setElements=function(e){var t=this.elements;t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];return this};Object.defineProperty(e.prototype,"identity",{get:function(){var e=this.elements;return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"a",{get:function(){return this.elements[0]},set:function(e){this.elements[0]=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"b",{get:function(){return this.elements[1]},set:function(e){this.elements[1]=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"c",{get:function(){return this.elements[2]},set:function(e){this.elements[2]=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"d",{get:function(){return this.elements[3]},set:function(e){this.elements[3]=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"e",{get:function(){return this.elements[4]},set:function(e){this.elements[4]=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"f",{get:function(){return this.elements[5]},set:function(e){this.elements[5]=e},enumerable:false,configurable:true});e.prototype.AxB=function(e,t,r){var n=e[0]*t[0]+e[2]*t[1],i=e[1]*t[0]+e[3]*t[1],o=e[0]*t[2]+e[2]*t[3],a=e[1]*t[2]+e[3]*t[3],s=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];r=r||e;r[0]=n;r[1]=i;r[2]=o;r[3]=a;r[4]=s;r[5]=l};e.prototype.multiplySelf=function(e){this.AxB(this.elements,e.elements);return this};e.prototype.multiply=function(t){var r=new Array(6);this.AxB(this.elements,t.elements,r);return new e(r)};e.prototype.preMultiplySelf=function(e){this.AxB(e.elements,this.elements,this.elements);return this};e.prototype.inverse=function(){var t=this.elements;var r=t[0],n=t[1],i=t[2],o=t[3];var a=t[4],s=t[5];var l=1/(r*o-n*i);r*=l;n*=l;i*=l;o*=l;return new e([o,-n,-i,r,i*s-o*a,n*a-r*s])};e.prototype.inverseTo=function(e){var t=this.elements;var r=t[0],n=t[1],i=t[2],o=t[3];var a=t[4],s=t[5];var l=1/(r*o-n*i);r*=l;n*=l;i*=l;o*=l;e.setElements([o,-n,-i,r,i*s-o*a,n*a-r*s]);return this};e.prototype.invertSelf=function(){var e=this.elements;var t=e[0],r=e[1],n=e[2],i=e[3];var o=e[4],a=e[5];var s=1/(t*i-r*n);t*=s;r*=s;n*=s;i*=s;e[0]=i;e[1]=-r;e[2]=-n;e[3]=t;e[4]=n*a-i*o;e[5]=r*o-t*a;return this};e.prototype.transformPoint=function(e,t){var r=this.elements;return{x:e*r[0]+t*r[2]+r[4],y:e*r[1]+t*r[3]+r[5]}};e.prototype.transformBBox=function(e,t){var r=this.elements;var n=r[0];var i=r[1];var o=r[2];var a=r[3];var s=e.width*.5;var l=e.height*.5;var u=e.x+s;var c=e.y+l;var d=Math.abs(s*n)+Math.abs(l*o);var p=Math.abs(s*i)+Math.abs(l*a);if(!t){t=new BBox(0,0,0,0)}t.x=u*n+c*o+r[4]-d;t.y=u*i+c*a+r[5]-p;t.width=d+d;t.height=p+p;return t};e.prototype.toContext=function(e){if(this.identity){return}var t=this.elements;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])};e.flyweight=function(t){return e.instance.setElements(t.elements)};e.updateTransformMatrix=function(e,t,r,n,i,o,a){var s=__read$$([0,0],2),l=s[0],u=s[1];var c=t;var d=r;var p;var f;if(c===1&&d===1){p=0;f=0}else{p=(a===null||a===void 0?void 0:a.scalingCenterX)==null?l:a===null||a===void 0?void 0:a.scalingCenterX;f=(a===null||a===void 0?void 0:a.scalingCenterY)==null?u:a===null||a===void 0?void 0:a.scalingCenterY}var h=n;var v=Math.cos(h);var g=Math.sin(h);var y;var m;if(h===0){y=0;m=0}else{y=(a===null||a===void 0?void 0:a.rotationCenterX)==null?l:a===null||a===void 0?void 0:a.rotationCenterX;m=(a===null||a===void 0?void 0:a.rotationCenterY)==null?u:a===null||a===void 0?void 0:a.rotationCenterY}var _=i;var S=o;var b=p*(1-c)-y;var C=f*(1-d)-m;e.setElements([v*c,g*c,-g*d,v*d,v*b-g*C+y+_,g*b+v*C+m+S]);return e};e.fromContext=function(t){var r=t.getTransform();return new e([r.a,r.b,r.c,r.d,r.e,r.f])};e.instance=new e;return e}();var ID_MAP={};function createId$1(e){var t;var r=e.constructor;var n=Object.prototype.hasOwnProperty.call(r,"className")?r.className:r.name;if(!n){throw new Error("The "+r+" is missing the 'className' property.")}var i=((t=ID_MAP[n])!==null&&t!==void 0?t:0)+1;ID_MAP[n]=i;return n+"-"+i}function windowValue(e){var t=typeof window!=="undefined"?window:undefined;return t===null||t===void 0?void 0:t[e]}var RedrawType;(function(e){e[e["NONE"]=0]="NONE";e[e["TRIVIAL"]=1]="TRIVIAL";e[e["MINOR"]=2]="MINOR";e[e["MAJOR"]=3]="MAJOR"})(RedrawType||(RedrawType={}));function evalAvailable(){try{eval("");return true}catch(e){return false}}var EVAL_USEABLE=evalAvailable();function SceneChangeDetection(opts){var _a=opts||{},_b=_a.redraw,redraw=_b===void 0?RedrawType.TRIVIAL:_b,_c=_a.type,type=_c===void 0?"normal":_c,changeCb=_a.changeCb,convertor=_a.convertor,_d=_a.checkDirtyOnAssignment,checkDirtyOnAssignment=_d===void 0?false:_d;var debug=windowValue("agChartsSceneChangeDetectionDebug")!=null;return function(target,key){var privateKey="__"+key;if(target[key]){return}if(EVAL_USEABLE){var setterJs="\n                "+(debug?"var setCount = 0;":"")+"\n                function set_"+key+"(value) {\n                    const oldValue = this."+privateKey+";\n                    "+(convertor?"value = convertor(value);":"")+"\n                    if (value !== oldValue) {\n                        this."+privateKey+" = value;\n                        "+(debug?"console.log({ t: this, property: '"+key+"', oldValue, value, stack: new Error().stack });":"")+"\n                        "+(type==="normal"?"this.markDirty(this, "+redraw+");":"")+"\n                        "+(type==="transform"?"this.markDirtyTransform("+redraw+");":"")+"\n                        "+(type==="path"?"if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, "+redraw+"); }":"")+"\n                        "+(type==="font"?"if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, "+redraw+"); }":"")+"\n                        "+(changeCb?"changeCb(this);":"")+"\n                    }\n                    "+(checkDirtyOnAssignment?"if (value != null && value._dirty > "+RedrawType.NONE+") { this.markDirty(value, value._dirty); }":"")+"\n                };\n                set_"+key+";\n            ";var getterJs="\n                function get_"+key+"() {\n                    return this."+privateKey+";\n                };\n                get_"+key+";\n            ";Object.defineProperty(target,key,{set:eval(setterJs),get:eval(getterJs),enumerable:true,configurable:true})}else{var setter=function(e){var t=this[privateKey];e=convertor?convertor(e):e;if(e!==t){this[privateKey]=e;if(type==="normal")this.markDirty(this,redraw);if(type==="transform")this.markDirtyTransform(redraw);if(type==="path"&&!this._dirtyPath){this._dirtyPath=true;this.markDirty(this,redraw)}if(type==="font"&&!this._dirtyFont){this._dirtyFont=true;this.markDirty(this,redraw)}if(changeCb)changeCb(this)}if(checkDirtyOnAssignment&&e!=null&&e._dirty>RedrawType.NONE)this.markDirty(e,e._dirty)};var getter=function(){return this[privateKey]};Object.defineProperty(target,key,{set:setter,get:getter,enumerable:true,configurable:true})}}}var ChangeDetectable=function(){function e(){this._dirty=RedrawType.MAJOR}e.prototype.markDirty=function(e,t){if(t===void 0){t=RedrawType.TRIVIAL}if(this._dirty>t){return}this._dirty=t};e.prototype.markClean=function(e){this._dirty=RedrawType.NONE};e.prototype.isDirty=function(){return this._dirty>RedrawType.NONE};return e}();var __extends$2H=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1V=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __values$B=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$_=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$B=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$_(arguments[t]));return e};var PointerEvents;(function(e){e[e["All"]=0]="All";e[e["None"]=1]="None"})(PointerEvents||(PointerEvents={}));var zIndexChangedCallback=function(e){if(e.parent){e.parent.dirtyZIndex=true}e.zIndexChanged()};var Node=function(e){__extends$2H(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;r.serialNumber=t._nextSerialNumber++;r.id=createId$1(r);r.tag=NaN;r.isContainerNode=false;r._children=[];r.childSet={};r.matrix=new Matrix;r.inverseMatrix=new Matrix;r._dirtyTransform=false;r.scalingX=1;r.scalingY=1;r.scalingCenterX=null;r.scalingCenterY=null;r.rotationCenterX=null;r.rotationCenterY=null;r.rotation=0;r.translationX=0;r.translationY=0;r.visible=true;r.dirtyZIndex=false;r.zIndex=0;r.zIndexSubOrder=undefined;r.pointerEvents=PointerEvents.All;return r}Object.defineProperty(t.prototype,"datum",{get:function(){var e;if(this._datum!==undefined){return this._datum}return(e=this._parent)===null||e===void 0?void 0:e.datum},set:function(e){this._datum=e},enumerable:false,configurable:true});t.prototype._setLayerManager=function(e){var t,r;this._layerManager=e;this._debug=e===null||e===void 0?void 0:e.debug;try{for(var n=__values$B(this.children),i=n.next();!i.done;i=n.next()){var o=i.value;o._setLayerManager(e)}}catch(e){t={error:e}}finally{try{if(i&&!i.done&&(r=n.return))r.call(n)}finally{if(t)throw t.error}}};Object.defineProperty(t.prototype,"layerManager",{get:function(){return this._layerManager},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:false,configurable:true});t.prototype.append=function(e){var t,r;if(!Array.isArray(e)){e=[e]}try{for(var n=__values$B(e),i=n.next();!i.done;i=n.next()){var o=i.value;if(o.parent){throw new Error(o+" already belongs to another parent: "+o.parent+".")}if(o.layerManager){throw new Error(o+" already belongs to a scene: "+o.layerManager+".")}if(this.childSet[o.id]){throw new Error("Duplicate "+o.constructor.name+" node: "+o)}this._children.push(o);this.childSet[o.id]=true;o._parent=this;o._setLayerManager(this.layerManager)}}catch(e){t={error:e}}finally{try{if(i&&!i.done&&(r=n.return))r.call(n)}finally{if(t)throw t.error}}this.dirtyZIndex=true;this.markDirty(this,RedrawType.MAJOR)};t.prototype.appendChild=function(e){this.append(e);return e};t.prototype.removeChild=function(e){if(e.parent===this){var t=this.children.indexOf(e);if(t>=0){this._children.splice(t,1);delete this.childSet[e.id];e._parent=undefined;e._setLayerManager();this.dirtyZIndex=true;this.markDirty(e,RedrawType.MAJOR);return e}}throw new Error("The node to be removed is not a child of this node.")};t.prototype.insertBefore=function(e,t){var r=e.parent;if(e.parent){e.parent.removeChild(e)}if(t&&t.parent===this){var n=this.children.indexOf(t);if(n>=0){this._children.splice(n,0,e);this.childSet[e.id]=true;e._parent=this;e._setLayerManager(this.layerManager)}else{throw new Error(t+" has "+r+" as the parent, "+"but is not in its list of children.")}this.dirtyZIndex=true;this.markDirty(e,RedrawType.MAJOR)}else{this.append(e)}return e};t.prototype.calculateCumulativeMatrix=function(){this.computeTransformMatrix();var e=Matrix.flyweight(this.matrix);var t=this.parent;while(t){t.computeTransformMatrix();e.preMultiplySelf(t.matrix);t=t.parent}return e};t.prototype.transformPoint=function(e,t){var r=this.calculateCumulativeMatrix();return r.invertSelf().transformPoint(e,t)};t.prototype.inverseTransformPoint=function(e,t){var r=this.calculateCumulativeMatrix();return r.transformPoint(e,t)};t.prototype.transformBBox=function(e){var t=this.calculateCumulativeMatrix();return t.invertSelf().transformBBox(e)};t.prototype.inverseTransformBBox=function(e){var t=this.calculateCumulativeMatrix();return t.transformBBox(e)};t.prototype.markDirtyTransform=function(){this._dirtyTransform=true;this.markDirty(this,RedrawType.MAJOR)};t.prototype.containsPoint=function(e,t){return false};t.prototype.pickNode=function(e,t){var r;if(!this.visible||this.pointerEvents===PointerEvents.None||!this.containsPoint(e,t)){return}var n=this.children;if(n.length>1e3){for(var i=n.length-1;i>=0;i--){var o=((r=n[i].computeBBox())===null||r===void 0?void 0:r.containsPoint(e,t))?n[i].pickNode(e,t):undefined;if(o){return o}}}else if(n.length){for(var i=n.length-1;i>=0;i--){var o=n[i].pickNode(e,t);if(o){return o}}}else if(!this.isContainerNode){return this}};t.prototype.findNodes=function(e){var t,r;var n=e(this)?[this]:[];try{for(var i=__values$B(this.children),o=i.next();!o.done;o=i.next()){var a=o.value;var s=a.findNodes(e);if(s){n.push.apply(n,__spread$B(s))}}}catch(e){t={error:e}}finally{try{if(o&&!o.done&&(r=i.return))r.call(i)}finally{if(t)throw t.error}}return n};t.prototype.computeBBox=function(){return};t.prototype.computeTransformedBBox=function(){var e=this.computeBBox();if(!e){return undefined}this.computeTransformMatrix();var t=Matrix.flyweight(this.matrix);var r=this.parent;while(r){r.computeTransformMatrix();t.preMultiplySelf(r.matrix);r=r.parent}t.transformBBox(e,e);return e};t.prototype.computeTransformMatrix=function(){if(!this._dirtyTransform){return}var e=this,t=e.matrix,r=e.scalingX,n=e.scalingY,i=e.rotation,o=e.translationX,a=e.translationY,s=e.scalingCenterX,l=e.scalingCenterY,u=e.rotationCenterX,c=e.rotationCenterY;Matrix.updateTransformMatrix(t,r,n,i,o,a,{scalingCenterX:s,scalingCenterY:l,rotationCenterX:u,rotationCenterY:c});t.inverseTo(this.inverseMatrix);this._dirtyTransform=false};t.prototype.render=function(e){var t=e.stats;this._dirty=RedrawType.NONE;if(t)t.nodesRendered++};t.prototype.clearBBox=function(e){var t=this.computeBBox();if(t==null){return}var r=t.x,n=t.y,i=t.width,o=t.height;var a=this.transformPoint(r,n);var s=this.transformPoint(r+i,n+o);e.clearRect(a.x,a.y,s.x-a.x,s.y-a.y)};t.prototype.markDirty=function(e,t,r){if(t===void 0){t=RedrawType.TRIVIAL}if(r===void 0){r=t}if(this._dirty>t){return}if(this._dirty===t&&t===r){return}this._dirty=t;if(this.parent){this.parent.markDirty(this,r)}else if(this.layerManager){this.layerManager.markDirty()}};Object.defineProperty(t.prototype,"dirty",{get:function(){return this._dirty},enumerable:false,configurable:true});t.prototype.markClean=function(e){var t,r;var n=e||{},i=n.force,o=i===void 0?false:i,a=n.recursive,s=a===void 0?true:a;if(this._dirty===RedrawType.NONE&&!o){return}this._dirty=RedrawType.NONE;if(s){try{for(var l=__values$B(this.children),u=l.next();!u.done;u=l.next()){var c=u.value;c.markClean()}}catch(e){t={error:e}}finally{try{if(u&&!u.done&&(r=l.return))r.call(l)}finally{if(t)throw t.error}}}};t.prototype.visibilityChanged=function(){};Object.defineProperty(t.prototype,"nodeCount",{get:function(){var e,t;var r=1;var n=this._dirty>=RedrawType.NONE||this._dirtyTransform?1:0;var i=this.visible?1:0;try{for(var o=__values$B(this._children),a=o.next();!a.done;a=o.next()){var s=a.value;var l=s.nodeCount,u=l.count,c=l.visibleCount,d=l.dirtyCount;r+=u;i+=c;n+=d}}catch(t){e={error:t}}finally{try{if(a&&!a.done&&(t=o.return))t.call(o)}finally{if(e)throw e.error}}return{count:r,visibleCount:i,dirtyCount:n}},enumerable:false,configurable:true});t.prototype.zIndexChanged=function(){};t._nextSerialNumber=0;__decorate$1V([SceneChangeDetection({type:"transform"})],t.prototype,"scalingX",void 0);__decorate$1V([SceneChangeDetection({type:"transform"})],t.prototype,"scalingY",void 0);__decorate$1V([SceneChangeDetection({type:"transform"})],t.prototype,"scalingCenterX",void 0);__decorate$1V([SceneChangeDetection({type:"transform"})],t.prototype,"scalingCenterY",void 0);__decorate$1V([SceneChangeDetection({type:"transform"})],t.prototype,"rotationCenterX",void 0);__decorate$1V([SceneChangeDetection({type:"transform"})],t.prototype,"rotationCenterY",void 0);__decorate$1V([SceneChangeDetection({type:"transform"})],t.prototype,"rotation",void 0);__decorate$1V([SceneChangeDetection({type:"transform"})],t.prototype,"translationX",void 0);__decorate$1V([SceneChangeDetection({type:"transform"})],t.prototype,"translationY",void 0);__decorate$1V([SceneChangeDetection({redraw:RedrawType.MAJOR,changeCb:function(e){return e.visibilityChanged()}})],t.prototype,"visible",void 0);__decorate$1V([SceneChangeDetection({redraw:RedrawType.TRIVIAL,changeCb:zIndexChangedCallback})],t.prototype,"zIndex",void 0);__decorate$1V([SceneChangeDetection({redraw:RedrawType.TRIVIAL,changeCb:zIndexChangedCallback})],t.prototype,"zIndexSubOrder",void 0);return t}(ChangeDetectable);function ascendingStringNumberUndefined(e,t){var r=0;if(typeof e==="number"&&typeof t==="number"){r=e-t}else if(typeof e==="string"&&typeof t==="string"){r=e.localeCompare(t)}else if(e==null&&t==null);else if(e==null){r=-1}else if(t==null){r=1}else{r=String(e).localeCompare(String(t))}return r}function compoundAscending(e,t,r){var n=function(e){if(typeof e==="function"){return e()}return e};for(var i in e){var o=r(n(e[i]),n(t[i]));if(o!==0){return o}}return 0}var doOnceFlags$1={};function doOnce$1(e,t){if(doOnceFlags$1[t]){return}e();doOnceFlags$1[t]=true}var __read$Z=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$A=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$Z(arguments[t]));return e};var Logger={debug:function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}console.log.apply(console,__spread$A(e))},warn:function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}console.warn.apply(console,__spread$A(["AG Charts - "+e],t))},error:function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}console.error.apply(console,__spread$A(["AG Charts - "+e],t))},warnOnce:function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}doOnce$1((function(){return Logger.warn.apply(Logger,__spread$A([e],t))}),"Logger.warn: "+e)},errorOnce:function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}doOnce$1((function(){return Logger.error.apply(Logger,__spread$A([e],t))}),"Logger.warn: "+e)}};var __extends$2G=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$H=function(){__assign$H=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$H.apply(this,arguments)};var __decorate$1U=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __values$A=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$Y=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$z=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$Y(arguments[t]));return e};var Group=function(e){__extends$2G(t,e);function t(t){var r;var n=e.call(this)||this;n.opts=t;n.opacity=1;n.lastBBox=undefined;var i=t||{},o=i.zIndex,a=i.zIndexSubOrder;n.isContainerNode=true;if(o!==undefined){n.zIndex=o}if(a!==undefined){n.zIndexSubOrder=a}n.name=(r=n.opts)===null||r===void 0?void 0:r.name;return n}t.prototype.zIndexChanged=function(){var e;if(this.layer){(e=this._layerManager)===null||e===void 0?void 0:e.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder)}};t.prototype.isLayer=function(){return this.layer!=null};t.prototype._setLayerManager=function(t){var r=this;var n;if(this._layerManager&&this.layer){this._layerManager.removeLayer(this.layer);this.layer=undefined}if(this.layer){throw new Error("AG Charts - unable to deregister scene rendering layer!")}e.prototype._setLayerManager.call(this,t);if(t&&((n=this.opts)===null||n===void 0?void 0:n.layer)){var i=this.opts||{},o=i.zIndex,a=i.zIndexSubOrder,s=i.name;var l=function(){return r.getComputedOpacity()};var u=function(){return r.getVisibility()};this.layer=t.addLayer({zIndex:o,zIndexSubOrder:a,name:s,getComputedOpacity:l,getVisibility:u})}};t.prototype.getComputedOpacity=function(){var e=1;var r=this;do{if(r instanceof t){e*=r.opacity}}while(r=r.parent);return e};t.prototype.getVisibility=function(){var e=this;var t=this.visible;while(e=e.parent){if(e.visible){continue}t=e.visible}return t};t.prototype.visibilityChanged=function(){if(this.layer){this.layer.enabled=this.visible}};t.prototype.markDirty=function(t,r){if(r===void 0){r=RedrawType.TRIVIAL}var n=r<=RedrawType.MINOR?RedrawType.TRIVIAL:r;e.prototype.markDirty.call(this,t,r,n)};t.prototype.containsPoint=function(e,t){return true};t.prototype.computeBBox=function(){this.computeTransformMatrix();return t.computeBBox(this.children)};t.prototype.computeTransformedBBox=function(){return this.computeBBox()};t.prototype.render=function(t){var r,n;var i,o;var a=this.opts,s=(a===void 0?{}:a).name,l=s===void 0?undefined:s;var u=this._debug,c=(u===void 0?{}:u).consoleLog,d=c===void 0?false:c;var p=this,f=p.dirty,h=p.dirtyZIndex,v=p.layer,g=p.children,y=p.clipRect;var m=t.ctx,_=t.forceRender,S=t.clipBBox;var b=t.resized,C=t.stats;var x=m.getTransform();var w=f>=RedrawType.MINOR||h||b;var O=w||g.some((function(e){return e.dirty>=RedrawType.TRIVIAL}));if(l&&d){Logger.debug({name:l,group:this,isDirty:w,isChildDirty:O,renderCtx:t,forceRender:_})}if(v){var T=this.computeBBox();if(this.lastBBox===undefined||!this.lastBBox.equals(T)){_=true;this.lastBBox=T}else if(!T.isInfinite()){_=false}}if(!w&&!O&&!_){if(l&&d&&C){var E=this.nodeCount;Logger.debug({name:l,result:"skipping",renderCtx:t,counts:E,group:this})}if(v&&C){C.layersSkipped++;C.nodesSkipped+=this.nodeCount.count}this.markClean({recursive:false});return}var P=this.visible;if(v){m=v.context;m.save();m.resetTransform();_=true;v.clear();if(S){var A=S.width,R=S.height,D=S.x,M=S.y;if(d){Logger.debug({name:l,clipBBox:S,ctxTransform:m.getTransform(),renderCtx:t,group:this})}this.clipCtx(m,D,M,A,R)}m.setTransform(x)}else{m.globalAlpha*=this.opacity}this.computeTransformMatrix();this.matrix.toContext(m);if(y){var D=y.x,M=y.y,A=y.width,R=y.height;m.save();if(d){Logger.debug({name:l,clipRect:y,ctxTransform:m.getTransform(),renderCtx:t,group:this})}this.clipCtx(m,D,M,A,R);S=this.matrix.inverse().transformBBox(y)}if(h){this.sortChildren();_=true}var N=_!==t.forceRender||S!==t.clipBBox||m!==t.ctx;var I=N?__assign$H(__assign$H({},t),{ctx:m,forceRender:_,clipBBox:S}):t;var L=0;try{for(var k=__values$A(g),F=k.next();!F.done;F=k.next()){var $=F.value;if(!$.visible||!P){$.markClean();if(C)L+=$.nodeCount.count;continue}if(!_&&$.dirty===RedrawType.NONE){if(C)L+=$.nodeCount.count;continue}m.save();$.render(I);m.restore()}}catch(e){r={error:e}}finally{try{if(F&&!F.done&&(n=k.return))n.call(k)}finally{if(r)throw r.error}}if(C)C.nodesSkipped+=L;e.prototype.render.call(this,t);if(y){m.restore()}if(v){if(C)C.layersRendered++;m.restore();v.snapshot();(o=(i=v.context).verifyDepthZero)===null||o===void 0?void 0:o.call(i)}if(l&&d&&C){var E=this.nodeCount;Logger.debug({name:l,result:"rendered",skipped:L,renderCtx:t,counts:E,group:this})}};t.prototype.sortChildren=function(){this.dirtyZIndex=false;this.children.sort((function(e,t){var r,n;return compoundAscending(__spread$z([e.zIndex],(r=e.zIndexSubOrder)!==null&&r!==void 0?r:[undefined,undefined],[e.serialNumber]),__spread$z([t.zIndex],(n=t.zIndexSubOrder)!==null&&n!==void 0?n:[undefined,undefined],[t.serialNumber]),ascendingStringNumberUndefined)}))};t.prototype.clipCtx=function(e,t,r,n,i){e.beginPath();e.moveTo(t,r);e.lineTo(t+n,r);e.lineTo(t+n,r+i);e.lineTo(t,r+i);e.closePath();e.clip()};t.computeBBox=function(e){var t=Infinity;var r=-Infinity;var n=Infinity;var i=-Infinity;e.forEach((function(e){if(!e.visible){return}var o=e.computeTransformedBBox();if(!o){return}var a=o.x;var s=o.y;if(a<t){t=a}if(s<n){n=s}if(a+o.width>r){r=a+o.width}if(s+o.height>i){i=s+o.height}}));return new BBox(t,n,r-t,i-n)};t.prototype.setClipRectInGroupCoordinateSpace=function(e){this.clipRect=e?this.transformBBox(e):undefined};t.className="Group";__decorate$1U([SceneChangeDetection({convertor:function(e){return Math.min(1,Math.max(0,e))}})],t.prototype,"opacity",void 0);return t}(Node);var HdpiOffscreenCanvas=function(){function e(e){var t=e.width,r=t===void 0?600:t,n=e.height,i=n===void 0?300:n,o=e.overrideDevicePixelRatio,a=o===void 0?undefined:o;this.enabled=true;this._pixelRatio=NaN;this._width=0;this._height=0;this.canvas=new OffscreenCanvas(r,i);this.context=this.canvas.getContext("2d");this.imageSource=this.canvas.transferToImageBitmap();this.setPixelRatio(a);this.resize(r,i)}e.isSupported=function(){return window["OffscreenCanvas"]!=null};e.prototype.snapshot=function(){this.imageSource.close();this.imageSource=this.canvas.transferToImageBitmap()};e.prototype.destroy=function(){this.imageSource.close();this.canvas.width=0;this.canvas.height=0;this.context.clearRect(0,0,0,0)};e.prototype.clear=function(){this.context.save();this.context.resetTransform();this.context.clearRect(0,0,this.width,this.height);this.context.restore()};Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:false,configurable:true});e.prototype.setPixelRatio=function(e){var t=e!==null&&e!==void 0?e:window.devicePixelRatio;if(!isDesktop()){t=1}HdpiCanvas.overrideScale(this.context,t);this._pixelRatio=t};Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:false,configurable:true});e.prototype.resize=function(e,t){if(!(e>0&&t>0)){return}var r=this,n=r.canvas,i=r.context,o=r.pixelRatio;n.width=Math.round(e*o);n.height=Math.round(t*o);i.resetTransform();this._width=e;this._height=t};return e}();var __assign$G=function(){__assign$G=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$G.apply(this,arguments)};var __awaiter$f=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$f=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __read$X=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$y=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$X(arguments[t]));return e};var __values$z=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function buildSceneNodeHighlight(){var e;var t=(e=windowValue("agChartsSceneDebug"))!==null&&e!==void 0?e:[];if(typeof t==="string"){t=[t]}var r=[];t.forEach((function(e){if(e==="layout"){r.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/)}else{r.push(e)}}));return r}var Scene=function(){function e(e){var t,r;this.id=createId$1(this);this.layers=[];this._nextZIndex=0;this._nextLayerId=0;this._dirty=false;this._root=null;this.debug={dirtyTree:false,stats:false,renderBoundingBoxes:false,consoleLog:false,sceneNodeHighlight:[]};var n=e.document,i=n===void 0?window.document:n,o=e.mode,a=o===void 0?windowValue("agChartsSceneRenderModel")||"adv-composite":o,s=e.width,l=e.height,u=e.overrideDevicePixelRatio,c=u===void 0?undefined:u;this.overrideDevicePixelRatio=c;this.opts={document:i,mode:a};this.debug.consoleLog=windowValue("agChartsDebug")===true;this.debug.stats=(t=windowValue("agChartsSceneStats"))!==null&&t!==void 0?t:false;this.debug.dirtyTree=(r=windowValue("agChartsSceneDirtyTree"))!==null&&r!==void 0?r:false;this.debug.sceneNodeHighlight=buildSceneNodeHighlight();this.canvas=new HdpiCanvas({document:i,width:s,height:l,overrideDevicePixelRatio:c})}Object.defineProperty(e.prototype,"container",{get:function(){return this.canvas.container},set:function(e){this.canvas.container=e},enumerable:false,configurable:true});e.prototype.download=function(e,t){this.canvas.download(e,t)};e.prototype.getDataURL=function(e){return this.canvas.getDataURL(e)};Object.defineProperty(e.prototype,"width",{get:function(){return this.pendingSize?this.pendingSize[0]:this.canvas.width},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this.pendingSize?this.pendingSize[1]:this.canvas.height},enumerable:false,configurable:true});e.prototype.resize=function(e,t){e=Math.round(e);t=Math.round(t);var r=e<=0||t<=0;var n=isNaN(e)||isNaN(t);var i=e===this.width&&t===this.height;if(i||n||r){return false}this.pendingSize=[e,t];this.markDirty();return true};e.prototype.addLayer=function(e){var t;var r=this.opts.mode;var n=["composite","dom-composite","adv-composite"];if(!n.includes(r)){return undefined}var i=e.zIndex,o=i===void 0?this._nextZIndex++:i,a=e.name,s=e.zIndexSubOrder,l=e.getComputedOpacity,u=e.getVisibility;var c=this,d=c.width,p=c.height,f=c.overrideDevicePixelRatio;var h=r==="dom-composite";var v=r==="adv-composite";var g=!v||!HdpiOffscreenCanvas.isSupported()?new HdpiCanvas({document:this.opts.document,width:d,height:p,domLayer:h,zIndex:o,name:a,overrideDevicePixelRatio:f}):new HdpiOffscreenCanvas({width:d,height:p,overrideDevicePixelRatio:f});var y={id:this._nextLayerId++,name:a,zIndex:o,zIndexSubOrder:s,canvas:g,getComputedOpacity:l,getVisibility:u};if(o>=this._nextZIndex){this._nextZIndex=o+1}this.layers.push(y);this.sortLayers();if(h){var m=this.layers.map((function(e){return e.canvas})).filter((function(e){return e instanceof HdpiCanvas}));var _=m.findIndex((function(e){return e===g}));var S=(t=m[_-1])!==null&&t!==void 0?t:this.canvas;S.element.insertAdjacentElement("afterend",g.element)}if(this.debug.consoleLog){Logger.debug({layers:this.layers})}return y.canvas};e.prototype.removeLayer=function(e){var t=this.layers.findIndex((function(t){return t.canvas===e}));if(t>=0){this.layers.splice(t,1);e.destroy();this.markDirty();if(this.debug.consoleLog){Logger.debug({layers:this.layers})}}};e.prototype.moveLayer=function(e,t,r){var n=this.layers.find((function(t){return t.canvas===e}));if(n){n.zIndex=t;n.zIndexSubOrder=r;this.sortLayers();this.markDirty();if(this.debug.consoleLog){Logger.debug({layers:this.layers})}}};e.prototype.sortLayers=function(){this.layers.sort((function(e,t){var r,n;return compoundAscending(__spread$y([e.zIndex],(r=e.zIndexSubOrder)!==null&&r!==void 0?r:[undefined,undefined],[e.id]),__spread$y([t.zIndex],(n=t.zIndexSubOrder)!==null&&n!==void 0?n:[undefined,undefined],[t.id]),ascendingStringNumberUndefined)}))};e.prototype.markDirty=function(){this._dirty=true};Object.defineProperty(e.prototype,"dirty",{get:function(){return this._dirty},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"root",{get:function(){return this._root},set:function(e){if(e===this._root){return}if(this._root){this._root._setLayerManager()}this._root=e;if(e){if(e.parent===null&&e.layerManager&&e.layerManager!==this){e.layerManager.root=null}e._setLayerManager(this)}this.markDirty()},enumerable:false,configurable:true});e.prototype.strip=function(){var e,t;var r=this.layers;try{for(var n=__values$z(r),i=n.next();!i.done;i=n.next()){var o=i.value;o.canvas.destroy();delete o["canvas"]}}catch(t){e={error:t}}finally{try{if(i&&!i.done&&(t=n.return))t.call(n)}finally{if(e)throw e.error}}r.splice(0,r.length);this.root=null;this._dirty=false;this.canvas.context.resetTransform()};e.prototype.destroy=function(){this.container=undefined;this.strip();this.canvas.destroy();Object.assign(this,{canvas:undefined,ctx:undefined})};e.prototype.render=function(e){var t;return __awaiter$f(this,void 0,void 0,(function(){var r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m;var _;return __generator$f(this,(function(S){r=e||{},n=r.debugSplitTimes,i=n===void 0?[performance.now()]:n,o=r.extraDebugStats,a=o===void 0?{}:o;s=this,l=s.canvas,u=s.canvas.context,c=s.root,d=s.layers,p=s.pendingSize,f=s.opts.mode;if(p){(_=this.canvas).resize.apply(_,__spread$y(p));this.layers.forEach((function(e){var t;return(t=e.canvas).resize.apply(t,__spread$y(p))}));this.pendingSize=undefined}if(c&&!c.visible){this._dirty=false;return[2]}if(c&&!this.dirty){if(this.debug.consoleLog){Logger.debug("no-op",{redrawType:RedrawType[c.dirty],tree:this.buildTree(c)})}this.debugStats(i,u,undefined,a);return[2]}h={ctx:u,forceRender:true,resized:!!p,debugNodes:{}};if(this.debug.stats==="detailed"){h.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0}}v=false;if(!c||c.dirty>=RedrawType.TRIVIAL){v=true;l.clear()}if(c&&this.debug.dirtyTree){g=this.buildDirtyTree(c),y=g.dirtyTree,m=g.paths;Logger.debug({dirtyTree:y,paths:m})}if(c&&v){if(this.debug.consoleLog){Logger.debug("before",{redrawType:RedrawType[c.dirty],canvasCleared:v,tree:this.buildTree(c)})}if(c.visible){u.save();c.render(h);u.restore()}}if(f!=="dom-composite"&&d.length>0&&v){this.sortLayers();u.save();u.setTransform(1/l.pixelRatio,0,0,1/l.pixelRatio,0,0);d.forEach((function(e){var t=e.canvas,r=t.imageSource,n=t.enabled,i=e.getComputedOpacity,o=e.getVisibility;if(!n||!o()){return}u.globalAlpha=i();u.drawImage(r,0,0)}));u.restore()}(t=u.verifyDepthZero)===null||t===void 0?void 0:t.call(u);this._dirty=false;this.debugStats(i,u,h.stats,a);this.debugSceneNodeHighlight(u,this.debug.sceneNodeHighlight,h.debugNodes);if(c&&this.debug.consoleLog){Logger.debug("after",{redrawType:RedrawType[c.dirty],canvasCleared:v,tree:this.buildTree(c)})}return[2]}))}))};e.prototype.debugStats=function(e,t,r,n){var i,o;if(n===void 0){n={}}var a=performance.now();if(this.debug.stats){var s=e[0];e.push(a);var l=function(e,t){var r=e+t;return e+" / "+r+" ("+Math.round(100*e/r)+"%)"};var u=function(e,t){return Math.round((t-e)*100)/100+"ms"};var c=r!==null&&r!==void 0?r:{},d=c.layersRendered,p=d===void 0?0:d,f=c.layersSkipped,h=f===void 0?0:f,v=c.nodesRendered,g=v===void 0?0:v,y=c.nodesSkipped,m=y===void 0?0:y;var _=e.map((function(t,r){return r>0?u(e[r-1],t):null})).filter((function(e){return e!=null})).join(" + ");var S=Object.entries(n).map((function(e){var t=__read$X(e,2),r=t[0],n=t[1];return r+": "+n})).join(" ; ");var b=[u(s,a)+" ("+_+")",""+S,this.debug.stats==="detailed"?"Layers: "+l(p,h):null,this.debug.stats==="detailed"?"Nodes: "+l(g,m):null].filter((function(e){return e!=null}));var C=15;t.save();t.fillStyle="white";t.fillRect(0,0,200,10+C*b.length);t.fillStyle="black";var x=0;try{for(var w=__values$z(b),O=w.next();!O.done;O=w.next()){var T=O.value;t.fillText(T,2,10+x++*C)}}catch(e){i={error:e}}finally{try{if(O&&!O.done&&(o=w.return))o.call(w)}finally{if(i)throw i.error}}t.restore()}};e.prototype.debugSceneNodeHighlight=function(e,t,r){var n,i,o,a,s,l;var u;var c=function(e){return function(t){if(e.test(t.id)){return true}return t instanceof Group&&t.name!=null&&e.test(t.name)}};var d=function(e){return function(t){if(e===t.id){return true}return t instanceof Group&&t.name!=null&&e===t.name}};try{for(var p=__values$z(t),f=p.next();!f.done;f=p.next()){var h=f.value;if(typeof h==="string"&&r[h]!=null)continue;var v=typeof h==="string"?d(h):c(h);var g=(u=this.root)===null||u===void 0?void 0:u.findNodes(v);if(!g||g.length===0){Logger.debug("no debugging node with id ["+h+"] in scene graph.");continue}try{for(var y=(o=void 0,__values$z(g)),m=y.next();!m.done;m=y.next()){var _=m.value;if(_ instanceof Group&&_.name){r[_.name]=_}else{r[_.id]=_}}}catch(e){o={error:e}}finally{try{if(m&&!m.done&&(a=y.return))a.call(y)}finally{if(o)throw o.error}}}}catch(e){n={error:e}}finally{try{if(f&&!f.done&&(i=p.return))i.call(p)}finally{if(n)throw n.error}}e.save();try{for(var S=__values$z(Object.entries(r)),b=S.next();!b.done;b=S.next()){var C=__read$X(b.value,2),x=C[0],_=C[1];var w=_.computeTransformedBBox();if(!w){Logger.debug("no bbox for debugged node ["+x+"].");continue}e.globalAlpha=.8;e.strokeStyle="red";e.lineWidth=1;e.strokeRect(w.x,w.y,w.width,w.height);e.fillStyle="red";e.strokeStyle="white";e.font="16px sans-serif";e.textBaseline="top";e.textAlign="left";e.lineWidth=2;e.strokeText(x,w.x,w.y,w.width);e.fillText(x,w.x,w.y,w.width)}}catch(e){s={error:e}}finally{try{if(b&&!b.done&&(l=S.return))l.call(S)}finally{if(s)throw s.error}}e.restore()};e.prototype.buildTree=function(e){var t=this;var r;var n=(r=e instanceof Group?e.name:null)!==null&&r!==void 0?r:e.id;return __assign$G({name:n,node:e,dirty:RedrawType[e.dirty]},e.children.map((function(e){return t.buildTree(e)})).reduce((function(e,t){var r=t.name;var n=t.node,i=n.visible,o=n.opacity,a=n.zIndex,s=n.zIndexSubOrder,l=t.node;if(!i||o<=0){r="("+r+")"}if(l instanceof Group&&l.isLayer()){r="*"+r+"*"}var u=[""+(r!==null&&r!==void 0?r:"<unknown>"),"z: "+a,s&&"zo: "+s.join(" / ")].filter((function(e){return!!e})).join(" ");e[u]=t;return e}),{}))};e.prototype.buildDirtyTree=function(e){var t=this;var r;if(e.dirty===RedrawType.NONE){return{dirtyTree:{},paths:[]}}var n=e.children.map((function(e){return t.buildDirtyTree(e)})).filter((function(e){return e.paths.length>0}));var i=(r=e instanceof Group?e.name:null)!==null&&r!==void 0?r:e.id;var o=n.length===0?[i]:n.map((function(e){return e.paths})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return i+"."+e}));return{dirtyTree:__assign$G({name:i,node:e,dirty:RedrawType[e.dirty]},n.map((function(e){return e.dirtyTree})).filter((function(e){return e.dirty!==undefined})).reduce((function(e,t){e[t.name||"<unknown>"]=t;return e}),{})),paths:o}};e.className="Scene";return e}();var Observable=function(){function e(){this.allEventListeners=new Map}e.prototype.addEventListener=function(e,t){if(typeof t!=="function"){throw new Error("AG Charts - listener must be a Function")}var r=this.allEventListeners;var n=r.get(e);if(!n){n=new Set;r.set(e,n)}if(!n.has(t)){n.add(t)}};e.prototype.removeEventListener=function(e,t){var r=this.allEventListeners;var n=r.get(e);if(!n){return}n.delete(t);if(n.size===0){r.delete(e)}};e.prototype.hasEventListener=function(e){return this.allEventListeners.has(e)};e.prototype.clearEventListeners=function(){this.allEventListeners.clear()};e.prototype.fireEvent=function(e){var t=this.allEventListeners.get(e.type);t===null||t===void 0?void 0:t.forEach((function(t){return t(e)}))};return e}();var isString$1=function(e){return typeof e==="string"};var isStringObject$1=function(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"toString")&&isString$1(e.toString())};var isDate$1=function(e){return e instanceof Date&&!isNaN(+e)};function isDiscrete(e){return isString$1(e)||isStringObject$1(e)}function isContinuous(e){var t=function(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"valueOf")&&isNumber$4(e.valueOf())};var r=function(e){return e instanceof Date&&!isNaN(+e)};return isNumber$4(e)||t(e)||r(e)}function checkDatum(e,t){if(t&&isContinuous(e)){return e}else if(!t){if(!isDiscrete(e)){return String(e)}return e}return undefined}var isNumber$4=function(e){return typeof e==="number"&&Number.isFinite(e)};var __values$y=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var BREAK_TRANSFORM_CHAIN=Symbol("BREAK");var CONFIG_KEY="__decorator_config";function initialiseConfig(e,t,r,n){if(Object.getOwnPropertyDescriptor(e,CONFIG_KEY)==null){Object.defineProperty(e,CONFIG_KEY,{value:{}})}var i=e[CONFIG_KEY];if(i[r]!=null){return i[r]}i[r]={setters:[],getters:[]};var o=Object.getOwnPropertyDescriptor(e,t);var a=o===null||o===void 0?void 0:o.set;var s=o===null||o===void 0?void 0:o.get;var l=function(){var e,o;var a,l;var u=s?s.call(this):this[n];try{for(var c=__values$y((l=(a=i[r])===null||a===void 0?void 0:a.getters)!==null&&l!==void 0?l:[]),d=c.next();!d.done;d=c.next()){var p=d.value;u=p(this,t,u);if(u===BREAK_TRANSFORM_CHAIN){return undefined}}}catch(t){e={error:t}}finally{try{if(d&&!d.done&&(o=c.return))o.call(c)}finally{if(e)throw e.error}}return u};var u=function(e){var o,l;var u,c;var d=(c=(u=i[r])===null||u===void 0?void 0:u.setters)!==null&&c!==void 0?c:[];var p;if(d.some((function(e){return e.length>2}))){p=s?s.call(this):this[n]}try{for(var f=__values$y(d),h=f.next();!h.done;h=f.next()){var v=h.value;e=v(this,t,e,p);if(e===BREAK_TRANSFORM_CHAIN){return}}}catch(e){o={error:e}}finally{try{if(h&&!h.done&&(l=f.return))l.call(f)}finally{if(o)throw o.error}}if(a){a.call(this,e)}else{this[n]=e}};Object.defineProperty(e,t,{set:u,get:l,enumerable:true,configurable:false});return i[r]}function addTransformToInstanceProperty(e,t){return function(r,n){var i=n.toString();var o="__"+i;var a=initialiseConfig(r,n,i,o),s=a.getters,l=a.setters;l.push(e);if(t){s.splice(0,0,t)}}}function createDeprecationWarning(){return function(e,t){var r=["Property ["+e+"] is deprecated.",t].filter((function(e){return e!=null})).join(" ");Logger.warnOnce(r)}}function Deprecated(e,t){var r=t===null||t===void 0?void 0:t.default;var n=createDeprecationWarning();return addTransformToInstanceProperty((function(t,i,o){if(o!==r){n(i.toString(),e)}return o}))}function DeprecatedAndRenamedTo(e,t){var r=createDeprecationWarning();return addTransformToInstanceProperty((function(n,i,o){if(o!==n[e]){r(i.toString(),"Use ["+e+"] instead.");n[e]=t?t(o):o}return BREAK_TRANSFORM_CHAIN}),(function(t,n){r(n.toString(),"Use ["+e+"] instead.");return t[e]}))}var __read$W=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var Color=function(){function e(e,t,r,n){if(n===void 0){n=1}this.r=Math.min(1,Math.max(0,e||0));this.g=Math.min(1,Math.max(0,t||0));this.b=Math.min(1,Math.max(0,r||0));this.a=Math.min(1,Math.max(0,n||0))}e.validColorString=function(t){if(t.indexOf("#")>=0){return!!e.parseHex(t)}if(t.indexOf("rgb")>=0){return!!e.stringToRgba(t)}return!!e.nameToHex[t.toLowerCase()]};e.fromString=function(t){if(t.indexOf("#")>=0){return e.fromHexString(t)}var r=e.nameToHex[t.toLowerCase()];if(r){return e.fromHexString(r)}if(t.indexOf("rgb")>=0){return e.fromRgbaString(t)}throw new Error("Invalid color string: '"+t+"'")};e.tryParseFromString=function(t){try{return e.fromString(t)}catch(r){Logger.warnOnce("invalid color string: '"+t+"'.");return e.fromArray([0,0,0])}};e.parseHex=function(e){e=e.replace(/ /g,"").slice(1);var t;switch(e.length){case 6:case 8:t=[];for(var r=0;r<e.length;r+=2){t.push(parseInt(""+e[r]+e[r+1],16))}break;case 3:case 4:t=e.split("").map((function(e){return parseInt(e,16)})).map((function(e){return e+e*16}));break}if((t===null||t===void 0?void 0:t.length)>=3){if(t.every((function(e){return e>=0}))){if(t.length===3){t.push(255)}return t}}};e.fromHexString=function(t){var r=e.parseHex(t);if(r){var n=__read$W(r,4),i=n[0],o=n[1],a=n[2],s=n[3];return new e(i/255,o/255,a/255,s/255)}throw new Error("Malformed hexadecimal color string: '"+t+"'")};e.stringToRgba=function(e){var t=__read$W([NaN,NaN],2),r=t[0],n=t[1];for(var i=0;i<e.length;i++){var o=e[i];if(!r&&o==="("){r=i}else if(o===")"){n=i;break}}var a=r&&n&&e.substring(r+1,n);if(!a){return}var s=a.split(",");var l=[];for(var i=0;i<s.length;i++){var u=s[i];var c=parseFloat(u);if(isNaN(c)){return}if(u.indexOf("%")>=0){c=Math.max(0,Math.min(100,c));c/=100}else{if(i===3){c=Math.max(0,Math.min(1,c))}else{c=Math.max(0,Math.min(255,c));c/=255}}l.push(c)}return l};e.fromRgbaString=function(t){var r=e.stringToRgba(t);if(r){if(r.length===3){return new e(r[0],r[1],r[2])}else if(r.length===4){return new e(r[0],r[1],r[2],r[3])}}throw new Error("Malformed rgb/rgba color string: '"+t+"'")};e.fromArray=function(t){if(t.length===4){return new e(t[0],t[1],t[2],t[3])}if(t.length===3){return new e(t[0],t[1],t[2])}throw new Error("The given array should contain 3 or 4 color components (numbers).")};e.fromHSB=function(t,r,n,i){if(i===void 0){i=1}var o=e.HSBtoRGB(t,r,n);return new e(o[0],o[1],o[2],i)};e.padHex=function(e){return e.length===1?"0"+e:e};e.prototype.toHexString=function(){var t="#"+e.padHex(Math.round(this.r*255).toString(16))+e.padHex(Math.round(this.g*255).toString(16))+e.padHex(Math.round(this.b*255).toString(16));if(this.a<1){t+=e.padHex(Math.round(this.a*255).toString(16))}return t};e.prototype.toRgbaString=function(e){if(e===void 0){e=3}var t=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)];var r=Math.pow(10,e);if(this.a!==1){t.push(Math.round(this.a*r)/r);return"rgba("+t.join(", ")+")"}return"rgb("+t.join(", ")+")"};e.prototype.toString=function(){if(this.a===1){return this.toHexString()}return this.toRgbaString()};e.prototype.toHSB=function(){return e.RGBtoHSB(this.r,this.g,this.b)};e.RGBtoHSB=function(e,t,r){var n=Math.min(e,t,r);var i=Math.max(e,t,r);var o=i!==0?(i-n)/i:0;var a=NaN;if(n!==i){var s=i-n;var l=(i-e)/s;var u=(i-t)/s;var c=(i-r)/s;if(e===i){a=c-u}else if(t===i){a=2+l-c}else{a=4+u-l}a/=6;if(a<0){a=a+1}}return[a*360,o,i]};e.HSBtoRGB=function(e,t,r){if(isNaN(e)){e=0}e=(e%360+360)%360/360;var n=0;var i=0;var o=0;if(t===0){n=i=o=r}else{var a=(e-Math.floor(e))*6;var s=a-Math.floor(a);var l=r*(1-t);var u=r*(1-t*s);var c=r*(1-t*(1-s));switch(a>>0){case 0:n=r;i=c;o=l;break;case 1:n=u;i=r;o=l;break;case 2:n=l;i=r;o=c;break;case 3:n=l;i=u;o=r;break;case 4:n=c;i=l;o=r;break;case 5:n=r;i=l;o=u;break}}return[n,i,o]};e.prototype.derive=function(t,r,n,i){var o=e.RGBtoHSB(this.r,this.g,this.b);var a=o[2];if(a==0&&n>1){a=.05}var s=((o[0]+t)%360+360)%360;var l=Math.max(Math.min(o[1]*r,1),0);a=Math.max(Math.min(a*n,1),0);var u=Math.max(Math.min(this.a*i,1),0);var c=e.HSBtoRGB(s,l,a);c.push(u);return e.fromArray(c)};e.prototype.brighter=function(){return this.derive(0,1,1/.7,1)};e.prototype.darker=function(){return this.derive(0,1,.7,1)};e.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});return e}();function Validate(e){return addTransformToInstanceProperty((function(t,r,n){var i,o,a;if(e(n,{target:t})){return n}var s=r.toString().replace(/^_*/,"");var l=(o=(i=t.constructor)===null||i===void 0?void 0:i.className)!==null&&o!==void 0?o:(a=t.constructor)===null||a===void 0?void 0:a.name;if((l===null||l===void 0?void 0:l.length)<3){l=null}var u=l?"of ["+l+"] ":"";if(e.message){Logger.warn("Property ["+s+"] "+u+"cannot be set to ["+JSON.stringify(n)+"]; "+e.message+", ignoring.")}else{Logger.warn("Property ["+s+"] "+u+"cannot be set to ["+JSON.stringify(n)+"], ignoring.")}return BREAK_TRANSFORM_CHAIN}))}function predicateWithMessage(e,t){e.message=t;return e}var OPTIONAL=function(e,t,r){return e===undefined||r(e,t)};var ARRAY=function(e,t){return predicateWithMessage((function(r,n){return Array.isArray(r)&&(e?r.length===e:true)&&(t?r.every((function(e){return t(e,n)})):true)}),"expecting an Array")};var OPT_ARRAY=function(e){return predicateWithMessage((function(t,r){return OPTIONAL(t,r,ARRAY(e))}),"expecting an optional Array")};var AND=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return predicateWithMessage((function(t,r){return e.every((function(e){return e(t,r)}))}),e.map((function(e){return e.message})).filter((function(e){return e!=null})).join(" AND "))};var OR=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return predicateWithMessage((function(t,r){return e.some((function(e){return e(t,r)}))}),e.map((function(e){return e.message})).filter((function(e){return e!=null})).join(" OR "))};var isComparable=function(e){return e!=null&&!isNaN(e)};var LESS_THAN=function(e){return predicateWithMessage((function(t,r){return!isComparable(t)||!isComparable(r.target[e])||t<r.target[e]}),"expected to be less than "+e)};var GREATER_THAN=function(e){return predicateWithMessage((function(t,r){return!isComparable(t)||!isComparable(r.target[e])||t>r.target[e]}),"expected to be greater than "+e)};var FUNCTION=predicateWithMessage((function(e){return typeof e==="function"}),"expecting a Function");var OPT_FUNCTION=predicateWithMessage((function(e,t){return OPTIONAL(e,t,FUNCTION)}),"expecting an optional Function");var BOOLEAN=predicateWithMessage((function(e){return e===true||e===false}),"expecting a Boolean");var OPT_BOOLEAN=predicateWithMessage((function(e,t){return OPTIONAL(e,t,BOOLEAN)}),"expecting an optional Boolean");var STRING=predicateWithMessage((function(e){return typeof e==="string"}),"expecting a String");var OPT_STRING=predicateWithMessage((function(e,t){return OPTIONAL(e,t,STRING)}),"expecting an optional String");var DATE=predicateWithMessage((function(e){return e instanceof Date&&!isNaN(+e)}),"expecting a Date object");var OPT_DATE=predicateWithMessage((function(e,t){return OPTIONAL(e,t,DATE)}),"expecting an optional Date");predicateWithMessage(ARRAY(undefined,DATE),"expecting an Array of Date objects");var DATETIME_MS=NUMBER(0);var OPT_DATETIME_MS=predicateWithMessage((function(e,t){return OPTIONAL(e,t,DATETIME_MS)}),"expecting an optional number");var OPT_DATE_OR_DATETIME_MS=OR(OPT_DATE,OPT_DATETIME_MS);var colorMessage="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc";var COLOR_STRING=predicateWithMessage((function(e){if(typeof e!=="string"){return false}return Color.validColorString(e)}),"expecting a color String. "+colorMessage);var OPT_COLOR_STRING=predicateWithMessage((function(e,t){return OPTIONAL(e,t,COLOR_STRING)}),"expecting an optional color String. "+colorMessage);var COLOR_STRING_ARRAY=predicateWithMessage(ARRAY(undefined,COLOR_STRING),"expecting an Array of color strings. "+colorMessage);var OPT_COLOR_STRING_ARRAY=predicateWithMessage((function(e,t){return OPTIONAL(e,t,COLOR_STRING_ARRAY)}),"expecting an optional Array of color strings. "+colorMessage);function NUMBER(e,t){var r="expecting a finite Number"+((e!==undefined?", more than or equal to "+e:"")+(t!==undefined?", less than or equal to "+t:""));return predicateWithMessage((function(r){return typeof r==="number"&&Number.isFinite(r)&&(e!==undefined?r>=e:true)&&(t!==undefined?r<=t:true)}),r)}function OPT_NUMBER(e,t){var r="expecting an optional finite Number"+((e!==undefined?", more than or equal to "+e:"")+(t!==undefined?", less than or equal to "+t:""));return predicateWithMessage((function(r,n){return OPTIONAL(r,n,NUMBER(e,t))}),r)}function NUMBER_OR_NAN(e,t){var r="expecting a finite Number"+((e!==undefined?", more than or equal to "+e:"")+(t!==undefined?", less than or equal to "+t:""));return predicateWithMessage((function(r){return typeof r==="number"&&(isNaN(r)||Number.isFinite(r)&&(e!==undefined?r>=e:true)&&(t!==undefined?r<=t:true))}),r)}var NUMBER_ARRAY=predicateWithMessage(ARRAY(undefined,NUMBER()),"expecting an Array of numbers");var OPT_NUMBER_ARRAY=predicateWithMessage((function(e,t){return OPTIONAL(e,t,NUMBER_ARRAY)}),"expecting an optional Array of numbers");var STRING_ARRAY=predicateWithMessage(ARRAY(undefined,STRING),"expecting an Array of strings");predicateWithMessage((function(e,t){return OPTIONAL(e,t,STRING_ARRAY)}),"expecting an optional Array of strings");function STRING_UNION(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r="expecting one of: "+e.join(", ");return predicateWithMessage((function(t){return typeof t==="string"&&e.indexOf(t)>=0}),r)}var BOOLEAN_ARRAY=predicateWithMessage(ARRAY(undefined,BOOLEAN),"expecting an Array of boolean values");predicateWithMessage((function(e,t){return OPTIONAL(e,t,BOOLEAN_ARRAY)}),"expecting an optional Array of boolean values");var FONT_WEIGHTS=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"];var FONT_STYLE=predicateWithMessage((function(e){return e==="normal"||e==="italic"||e==="oblique"}),"expecting a font style keyword such as 'normal', 'italic' or 'oblique'");var OPT_FONT_STYLE=predicateWithMessage((function(e,t){return OPTIONAL(e,t,FONT_STYLE)}),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'");var FONT_WEIGHT=predicateWithMessage((function(e){return FONT_WEIGHTS.includes(e)}),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600");var OPT_FONT_WEIGHT=predicateWithMessage((function(e,t){return OPTIONAL(e,t,FONT_WEIGHT)}),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600");var LINE_DASH=predicateWithMessage(ARRAY(undefined,NUMBER(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels.");var OPT_LINE_DASH=predicateWithMessage((function(e,t){return OPTIONAL(e,t,LINE_DASH)}),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels.");var LINE_CAPS=["butt","round","square"];var LINE_CAP=predicateWithMessage((function(e){return LINE_CAPS.includes(e)}),"expecting a line cap keyword such as 'butt', 'round' or 'square'");predicateWithMessage((function(e,t){return OPTIONAL(e,t,LINE_CAP)}),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");var LINE_JOINS=["round","bevel","miter"];var LINE_JOIN=predicateWithMessage((function(e){return LINE_JOINS.includes(e)}),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");predicateWithMessage((function(e,t){return OPTIONAL(e,t,LINE_JOIN)}),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");var POSITIONS=["top","right","bottom","left"];var POSITION=predicateWithMessage((function(e){return POSITIONS.includes(e)}),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left");var INTERACTION_RANGES=["exact","nearest"];var INTERACTION_RANGE=predicateWithMessage((function(e){return typeof e==="number"&&Number.isFinite(e)||INTERACTION_RANGES.includes(e)}),"expecting an interaction range of 'exact', 'nearest' or a number");var Layers;(function(e){e[e["SERIES_BACKGROUND_ZINDEX"]=-10]="SERIES_BACKGROUND_ZINDEX";e[e["AXIS_GRID_ZINDEX"]=0]="AXIS_GRID_ZINDEX";e[e["AXIS_ZINDEX"]=20]="AXIS_ZINDEX";e[e["SERIES_CROSSLINE_RANGE_ZINDEX"]=30]="SERIES_CROSSLINE_RANGE_ZINDEX";e[e["SERIES_LAYER_ZINDEX"]=500]="SERIES_LAYER_ZINDEX";e[e["SERIES_CROSSHAIR_ZINDEX"]=1e3]="SERIES_CROSSHAIR_ZINDEX";e[e["SERIES_LABEL_ZINDEX"]=1500]="SERIES_LABEL_ZINDEX";e[e["SERIES_CROSSLINE_LINE_ZINDEX"]=2500]="SERIES_CROSSLINE_LINE_ZINDEX";e[e["LEGEND_ZINDEX"]=3e3]="LEGEND_ZINDEX"})(Layers||(Layers={}));var ChartAxisDirection;(function(e){e["X"]="x";e["Y"]="y"})(ChartAxisDirection||(ChartAxisDirection={}));var __decorate$1T=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __values$x=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var DEFAULT_TOOLTIP_CLASS="ag-chart-tooltip";var defaultTooltipCss$1="\n."+DEFAULT_TOOLTIP_CLASS+" {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: black;\n    background: rgb(244, 244, 244);\n    border-radius: 5px;\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\n}\n\n."+DEFAULT_TOOLTIP_CLASS+"-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n."+DEFAULT_TOOLTIP_CLASS+"-no-animation {\n    transition: none !important;\n}\n\n."+DEFAULT_TOOLTIP_CLASS+"-hidden {\n    visibility: hidden;\n}\n\n."+DEFAULT_TOOLTIP_CLASS+"-title {\n    font-weight: bold;\n    padding: 7px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    color: white;\n    background-color: #888888;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n."+DEFAULT_TOOLTIP_CLASS+"-content {\n    padding: 7px;\n    line-height: 1.7em;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    overflow: hidden;\n}\n\n."+DEFAULT_TOOLTIP_CLASS+"-content:empty {\n    padding: 0;\n    height: 7px;\n}\n\n."+DEFAULT_TOOLTIP_CLASS+'-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 6px solid #989898;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: #989898;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.'+DEFAULT_TOOLTIP_CLASS+'-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid black;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: rgb(244, 244, 244);\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n';function toTooltipHtml$1(e,t){if(typeof e==="string"){return e}t=t||{};var r=e.content,n=r===void 0?t.content||"":r,i=e.title,o=i===void 0?t.title||undefined:i,a=e.color,s=a===void 0?t.color||"white":a,l=e.backgroundColor,u=l===void 0?t.backgroundColor||"#888":l;var c=o?'<div class="'+DEFAULT_TOOLTIP_CLASS+'-title"\n        style="color: '+s+"; background-color: "+u+'">'+o+"</div>":"";return c+'<div class="'+DEFAULT_TOOLTIP_CLASS+'-content">'+n+"</div>"}var POSITION_TYPES=["pointer","node"];var POSITION_TYPE=predicateWithMessage((function(e){return POSITION_TYPES.includes(e)}),"expecting a position type keyword such as 'pointer' or 'node'");var TooltipPosition=function(){function e(){this.type="pointer";this.xOffset=0;this.yOffset=0}__decorate$1T([Validate(POSITION_TYPE)],e.prototype,"type",void 0);__decorate$1T([Validate(NUMBER())],e.prototype,"xOffset",void 0);__decorate$1T([Validate(NUMBER())],e.prototype,"yOffset",void 0);return e}();var Tooltip=function(){function e(t,r,n){var i=this;this.enableInteraction=false;this.enabled=true;this.class=undefined;this.lastClass=undefined;this.delay=0;this.range="nearest";this.position=new TooltipPosition;this.showTimeout=0;this.showArrow=true;this.tooltipRoot=n;var o=r.createElement("div");this.element=this.tooltipRoot.appendChild(o);this.element.classList.add(DEFAULT_TOOLTIP_CLASS);this.canvasElement=t;if(window.IntersectionObserver){var a=new IntersectionObserver((function(e){var t,r;try{for(var n=__values$x(e),o=n.next();!o.done;o=n.next()){var a=o.value;if(a.target===i.canvasElement&&a.intersectionRatio===0){i.toggle(false)}}}catch(e){t={error:e}}finally{try{if(o&&!o.done&&(r=n.return))r.call(n)}finally{if(t)throw t.error}}}),{root:this.tooltipRoot});a.observe(this.canvasElement);this.observer=a}if(e.tooltipDocuments.indexOf(r)<0){var s=r.createElement("style");s.innerHTML=defaultTooltipCss$1;r.head.insertBefore(s,r.head.querySelector("style"));e.tooltipDocuments.push(r)}}e.prototype.destroy=function(){var e=this.element.parentNode;if(e){e.removeChild(this.element)}if(this.observer){this.observer.unobserve(this.canvasElement)}};e.prototype.isVisible=function(){var e=this.element;return!e.classList.contains(DEFAULT_TOOLTIP_CLASS+"-hidden")};e.prototype.updateClass=function(e,t){var r=this,n=r.element,i=r.class,o=r.lastClass,a=r.enableInteraction;var s=this.isVisible();var l=function(e,t){var r=DEFAULT_TOOLTIP_CLASS+"-"+e;if(t){n.classList.add(r)}else{n.classList.remove(r)}};l("no-animation",!s&&!!e);l("no-interaction",!a);l("hidden",!e);l("arrow",!!t);if(i!==o){if(o){n.classList.remove(o)}if(i){n.classList.add(i)}this.lastClass=i}};e.prototype.show=function(e,t,r){var n=this;var i,o,a,s,l;if(r===void 0){r=false}var u=this,c=u.element,d=u.canvasElement;if(t!==undefined){c.innerHTML=t}else if(!c.innerHTML){return}var p=function(e,t,r){return Math.max(Math.min(t,r),e)};var f=(o=(i=e.position)===null||i===void 0?void 0:i.xOffset)!==null&&o!==void 0?o:0;var h=(s=(a=e.position)===null||a===void 0?void 0:a.yOffset)!==null&&s!==void 0?s:0;var v=d.getBoundingClientRect();var g=v.left+e.offsetX-c.clientWidth/2+f;var y=v.top+e.offsetY-c.clientHeight-8+h;var m=this.getWindowBoundingBox();var _=m.x+m.width-c.clientWidth-1;var S=m.y+m.height-c.clientHeight;var b=p(m.x,g,_);var C=p(m.y,y,S);var x=f!==0||h!==0;var w=b!==g||C!==y;this.showArrow=!w&&!x;c.style.transform="translate("+Math.round(b)+"px, "+Math.round(C)+"px)";this.enableInteraction=(l=e.enableInteraction)!==null&&l!==void 0?l:false;if(this.delay>0&&!r){this.toggle(false);this.showTimeout=window.setTimeout((function(){n.toggle(true)}),this.delay);return}this.toggle(true)};e.prototype.getWindowBoundingBox=function(){return new BBox(0,0,window.innerWidth,window.innerHeight)};e.prototype.toggle=function(e){if(!e){window.clearTimeout(this.showTimeout)}this.updateClass(e,this.showArrow)};e.prototype.pointerLeftOntoTooltip=function(e){var t;if(!this.enableInteraction)return false;var r=(t=e.sourceEvent.relatedTarget)===null||t===void 0?void 0:t.classList;var n=["","-title","-content"];var i=Boolean(n.filter((function(e){return r===null||r===void 0?void 0:r.contains(""+DEFAULT_TOOLTIP_CLASS+e)})));return r!==undefined&&i};e.tooltipDocuments=[];__decorate$1T([Validate(BOOLEAN)],e.prototype,"enabled",void 0);__decorate$1T([Validate(OPT_STRING)],e.prototype,"class",void 0);__decorate$1T([Validate(NUMBER(0))],e.prototype,"delay",void 0);__decorate$1T([DeprecatedAndRenamedTo("range",(function(e){return e?"nearest":"exact"}))],e.prototype,"tracking",void 0);__decorate$1T([Validate(INTERACTION_RANGE)],e.prototype,"range",void 0);return e}();var __extends$2F=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$F=function(){__assign$F=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$F.apply(this,arguments)};var __decorate$1S=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __values$w=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$V=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$x=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$V(arguments[t]));return e};var SeriesNodePickMode;(function(e){e[e["EXACT_SHAPE_MATCH"]=0]="EXACT_SHAPE_MATCH";e[e["NEAREST_BY_MAIN_AXIS_FIRST"]=1]="NEAREST_BY_MAIN_AXIS_FIRST";e[e["NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST"]=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST";e[e["NEAREST_NODE"]=3]="NEAREST_NODE"})(SeriesNodePickMode||(SeriesNodePickMode={}));var warnDeprecated=createDeprecationWarning();var warnSeriesDeprecated=function(){return warnDeprecated("series","Use seriesId to get the series ID")};function keyProperty(e,t,r){if(r===void 0){r={}}var n=__assign$F(__assign$F({},r),{property:e,type:"key",valueType:t?"range":"category",validation:function(e){return checkDatum(e,t)!=null}});return n}function valueProperty(e,t,r){if(r===void 0){r={}}var n=__assign$F(__assign$F({},r),{property:e,type:"value",valueType:t?"range":"category",validation:function(e){return checkDatum(e,t)!=null}});return n}function sumProperties(e){var t={properties:e,type:"sum"};return t}var SeriesNodeBaseClickEvent=function(){function e(e,t,r){this.type="nodeClick";this.event=e;this.datum=t.datum;this.seriesId=r.id;this._series=r}Object.defineProperty(e.prototype,"series",{get:function(){warnSeriesDeprecated();return this._series},enumerable:false,configurable:true});return e}();var SeriesNodeClickEvent=function(e){__extends$2F(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(SeriesNodeBaseClickEvent);var SeriesNodeDoubleClickEvent=function(e){__extends$2F(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.type="nodeDoubleClick";return t}return t}(SeriesNodeBaseClickEvent);var SeriesItemHighlightStyle=function(){function e(){this.fill="yellow";this.fillOpacity=undefined;this.stroke=undefined;this.strokeWidth=undefined}__decorate$1S([Validate(OPT_COLOR_STRING)],e.prototype,"fill",void 0);__decorate$1S([Validate(OPT_NUMBER(0,1))],e.prototype,"fillOpacity",void 0);__decorate$1S([Validate(OPT_COLOR_STRING)],e.prototype,"stroke",void 0);__decorate$1S([Validate(OPT_NUMBER(0))],e.prototype,"strokeWidth",void 0);return e}();var SeriesHighlightStyle=function(){function e(){this.strokeWidth=undefined;this.dimOpacity=undefined;this.enabled=undefined}__decorate$1S([Validate(OPT_NUMBER(0))],e.prototype,"strokeWidth",void 0);__decorate$1S([Validate(OPT_NUMBER(0,1))],e.prototype,"dimOpacity",void 0);__decorate$1S([Validate(OPT_BOOLEAN)],e.prototype,"enabled",void 0);return e}();var TextHighlightStyle=function(){function e(){this.color="black"}__decorate$1S([Validate(OPT_COLOR_STRING)],e.prototype,"color",void 0);return e}();var HighlightStyle=function(){function e(){this.item=new SeriesItemHighlightStyle;this.series=new SeriesHighlightStyle;this.text=new TextHighlightStyle}return e}();var SeriesTooltip=function(){function e(){this.enabled=true;this.interaction=new SeriesTooltipInteraction;this.position=new TooltipPosition}__decorate$1S([Validate(BOOLEAN)],e.prototype,"enabled",void 0);return e}();var SeriesTooltipInteraction=function(){function e(){this.enabled=false}__decorate$1S([Validate(BOOLEAN)],e.prototype,"enabled",void 0);return e}();var Series=function(e){__extends$2F(t,e);function t(t){var r=t===void 0?{}:t,n=r.useSeriesGroupLayer,i=n===void 0?true:n,o=r.useLabelLayer,a=o===void 0?false:o,s=r.pickModes,l=s===void 0?[SeriesNodePickMode.NEAREST_BY_MAIN_AXIS_FIRST]:s,u=r.directionKeys,c=u===void 0?{}:u;var d=e.call(this)||this;d.id=createId$1(d);d.rootGroup=new Group({name:"seriesRoot"});d.directions=[ChartAxisDirection.X,ChartAxisDirection.Y];d.nodeDataRefresh=true;d._data=undefined;d._visible=true;d.showInLegend=true;d.cursor="default";d.nodeClickRange="exact";d._declarationOrder=-1;d.highlightStyle=new HighlightStyle;var p=d.rootGroup;d.directionKeys=c;d.contentGroup=p.appendChild(new Group({name:d.id+"-content",layer:i,zIndex:Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:[function(){return d._declarationOrder},0]}));d.highlightGroup=p.appendChild(new Group({name:d.id+"-highlight",layer:true,zIndex:Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:[function(){return d._declarationOrder},15e3]}));d.highlightNode=d.highlightGroup.appendChild(new Group({name:"highlightNode"}));d.highlightLabel=d.highlightGroup.appendChild(new Group({name:"highlightLabel"}));d.highlightNode.zIndex=0;d.highlightLabel.zIndex=10;d.pickModes=l;if(a){d.labelGroup=p.appendChild(new Group({name:d.id+"-series-labels",layer:true,zIndex:Layers.SERIES_LABEL_ZINDEX}))}return d}Object.defineProperty(t.prototype,"type",{get:function(){return this.constructor.type||""},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e;this.nodeDataRefresh=true},enumerable:false,configurable:true});t.prototype.hasData=function(){var e=this.data;return e&&(!Array.isArray(e)||e.length>0)};Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e;this.visibleChanged()},enumerable:false,configurable:true});t.prototype.getBandScalePadding=function(){return{inner:1,outer:0}};t.prototype.destroy=function(){};Object.defineProperty(t.prototype,"grouped",{set:function(e){if(e===true){throw new Error("AG Charts - grouped: true is unsupported for series of type: "+this.type)}},enumerable:false,configurable:true});t.prototype.getKeys=function(e){var t=this;var r=this.directionKeys;var n=this.resolveKeyDirection(e);var i=r&&r[n];var o=[];var a=function(){var e,t;var r=[];for(var n=0;n<arguments.length;n++){r[n]=arguments[n]}try{for(var i=__values$w(r),o=i.next();!o.done;o=i.next()){var a=o.value;s(a)}}catch(t){e={error:t}}finally{try{if(o&&!o.done&&(t=i.return))t.call(i)}finally{if(e)throw e.error}}};var s=function(e){if(Array.isArray(e)){a.apply(void 0,__spread$x(e))}else{o.push(e)}};if(!i)return o;i.forEach((function(e){var r=t[e];if(!r)return;s(r)}));return o};t.prototype.resolveKeyDirection=function(e){return e};t.prototype.markNodeDataDirty=function(){this.nodeDataRefresh=true};t.prototype.visibleChanged=function(){};t.prototype.getOpacity=function(e){var t=this.highlightStyle.series,r=t.dimOpacity,n=r===void 0?1:r,i=t.enabled,o=i===void 0?true:i;var a=1;if(o===false||n===a){return a}switch(this.isItemIdHighlighted(e)){case"no-highlight":case"highlighted":return a;case"peer-highlighted":case"other-highlighted":return n}};t.prototype.getStrokeWidth=function(e,t){var r=this.highlightStyle.series,n=r.strokeWidth,i=r.enabled,o=i===void 0?true:i;if(o===false||n===undefined){return e}switch(this.isItemIdHighlighted(t)){case"highlighted":return n;case"no-highlight":case"other-highlighted":case"peer-highlighted":return e}};t.prototype.isItemIdHighlighted=function(e){var t;var r=(t=this.highlightManager)===null||t===void 0?void 0:t.getActiveHighlight();var n=r!==null&&r!==void 0?r:{},i=n.series,o=n.itemId;var a=i!=null;if(!a){return"no-highlight"}if(i!==this){return"other-highlighted"}if(o===undefined){return"highlighted"}if(e&&r!==e&&o!==e.itemId){return"peer-highlighted"}return"highlighted"};t.prototype.pickNode=function(e,t){var r,n;var i=this,o=i.pickModes,a=i.visible,s=i.rootGroup;if(!a||!s.visible){return}try{for(var l=__values$w(o),u=l.next();!u.done;u=l.next()){var c=u.value;if(t&&!t.includes(c)){continue}var d=undefined;switch(c){case SeriesNodePickMode.EXACT_SHAPE_MATCH:d=this.pickNodeExactShape(e);break;case SeriesNodePickMode.NEAREST_BY_MAIN_AXIS_FIRST:case SeriesNodePickMode.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:d=this.pickNodeMainAxisFirst(e,c===SeriesNodePickMode.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case SeriesNodePickMode.NEAREST_NODE:d=this.pickNodeClosestDatum(e);break}if(d){return{pickMode:c,match:d.datum,distance:d.distance}}}}catch(e){r={error:e}}finally{try{if(u&&!u.done&&(n=l.return))n.call(l)}finally{if(r)throw r.error}}};t.prototype.pickNodeExactShape=function(e){var t=this.contentGroup.pickNode(e.x,e.y);if(t){return{datum:t.datum,distance:0}}};t.prototype.pickNodeClosestDatum=function(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")};t.prototype.pickNodeMainAxisFirst=function(e,t){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")};t.prototype.fireNodeClickEvent=function(e,t){var r=this.getNodeClickEvent(e,t);this.fireEvent(r)};t.prototype.fireNodeDoubleClickEvent=function(e,t){var r=this.getNodeDoubleClickEvent(e,t);this.fireEvent(r)};t.prototype.getNodeClickEvent=function(e,t){return new SeriesNodeClickEvent(e,t,this)};t.prototype.getNodeDoubleClickEvent=function(e,t){return new SeriesNodeDoubleClickEvent(e,t,this)};t.prototype.toggleSeriesItem=function(e,t){this.visible=t;this.nodeDataRefresh=true};t.prototype.toggleOtherSeriesItems=function(e,t,r,n){return};t.prototype.isEnabled=function(){return this.visible};t.prototype.fixNumericExtent=function(e,t){var r;if(e===undefined){return[]}var n=__read$V(e,2),i=n[0],o=n[1];i=+i;o=+o;if(i===0&&o===0){return[0,1]}if(i===Infinity&&o===-Infinity){return[]}if(i===Infinity){i=0}if(o===-Infinity){o=0}if(i===o){var a=(r=t===null||t===void 0?void 0:t.calculatePadding(i,o))!==null&&r!==void 0?r:1;i-=a;o+=a}if(!(isNumber$4(i)&&isNumber$4(o))){return[]}return[i,o]};t.highlightedZIndex=1e12;__decorate$1S([Validate(STRING)],t.prototype,"id",void 0);__decorate$1S([Validate(BOOLEAN)],t.prototype,"_visible",void 0);__decorate$1S([Validate(BOOLEAN)],t.prototype,"showInLegend",void 0);__decorate$1S([Validate(STRING)],t.prototype,"cursor",void 0);__decorate$1S([Validate(INTERACTION_RANGE)],t.prototype,"nodeClickRange",void 0);return t}(Observable);var __decorate$1R=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Padding$1=function(){function e(e,t,r,n){if(e===void 0){e=0}if(t===void 0){t=e}if(r===void 0){r=e}if(n===void 0){n=t}this.top=e;this.right=t;this.bottom=r;this.left=n}e.prototype.clear=function(){this.top=this.right=this.bottom=this.left=0};__decorate$1R([Validate(NUMBER(0))],e.prototype,"top",void 0);__decorate$1R([Validate(NUMBER(0))],e.prototype,"right",void 0);__decorate$1R([Validate(NUMBER(0))],e.prototype,"bottom",void 0);__decorate$1R([Validate(NUMBER(0))],e.prototype,"left",void 0);return e}();var Selection=function(){function e(e,t){this._nodes=[];this._data=[];this._parent=e;this._factory=Object.prototype.isPrototypeOf.call(Node,t)?function(){return new t}:t}e.select=function(t,r){return new e(t,r)};e.prototype.each=function(e){this._nodes.forEach((function(t,r){return e(t,t.datum,r)}));return this};e.prototype.update=function(e,t){var r=this;var n=this._data;var i=this._parent;var o=this._factory;if(e.length>n.length){e.slice(n.length).forEach((function(e){var n=o(e);n.datum=e;t&&t(n);i.appendChild(n);r._nodes.push(n)}))}else if(e.length<n.length){this._nodes.splice(e.length).forEach((function(e){i.removeChild(e)}))}this._data=e.slice(0);for(var a=0;a<e.length;a++){this._nodes[a].datum=this._data[a]}return this};e.prototype.clear=function(){this.update([]);return this};e.prototype.select=function(e){var t=[];var r=function(n){if(e(n)){t.push(n)}n.children.forEach(r)};r(this._parent);return t};e.prototype.selectByClass=function(e){return this.select((function(t){return t instanceof e}))};e.prototype.selectByTag=function(e){return this.select((function(t){return t.tag===e}))};e.prototype.nodes=function(){return this._nodes};return e}();var Gradient=function(){function e(){this.stops=[]}return e}();var twoPi=Math.PI*2;function normalizeAngle360(e){e%=twoPi;e+=twoPi;e%=twoPi;return e}function normalizeAngle360Inclusive(e){e%=twoPi;e+=twoPi;if(e!==twoPi){e%=twoPi}return e}function normalizeAngle180(e){e%=twoPi;if(e<-Math.PI){e+=twoPi}else if(e>=Math.PI){e-=twoPi}return e}function toRadians$1(e){return e/180*Math.PI}var __extends$2E=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var LinearGradient=function(e){__extends$2E(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.angle=0;return t}t.prototype.createGradient=function(e,t){var r=90;var n=this,i=n.stops,o=n.angle;var a=normalizeAngle360(toRadians$1(o+r));var s=Math.cos(a);var l=Math.sin(a);var u=t.width;var c=t.height;var d=t.x+u*.5;var p=t.y+c*.5;if(u>0&&c>0){var f=Math.sqrt(c*c+u*u)/2;var h=Math.atan2(c,u);var v=void 0;if(a<Math.PI/2){v=a}else if(a<Math.PI){v=Math.PI-a}else if(a<3*Math.PI/2){v=a-Math.PI}else{v=2*Math.PI-a}var g=f*Math.abs(Math.cos(v-h));var y=e.createLinearGradient(d+s*g,p+l*g,d-s*g,p-l*g);i.forEach((function(e){y.addColorStop(e.offset,e.color)}));return y}return"black"};return t}(Gradient);var __extends$2D=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1Q=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var LINEAR_GRADIENT_REGEXP=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;var Shape=function(e){__extends$2D(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;r.lastInstanceId=0;r.fillOpacity=1;r.strokeOpacity=1;r.fill=t.defaultStyles.fill;r.stroke=t.defaultStyles.stroke;r.strokeWidth=t.defaultStyles.strokeWidth;r.lineDash=t.defaultStyles.lineDash;r.lineDashOffset=t.defaultStyles.lineDashOffset;r.lineCap=t.defaultStyles.lineCap;r.lineJoin=t.defaultStyles.lineJoin;r.opacity=t.defaultStyles.opacity;r.fillShadow=t.defaultStyles.fillShadow;return r}t.createInstance=function(e){var t=Object.create(e);t._setParent(undefined);t.id=e.id+"-Instance-"+String(++e.lastInstanceId);return t};t.prototype.restoreOwnStyles=function(){var e=this.constructor.defaultStyles;var t=Object.getOwnPropertyNames(e);for(var r=0,n=t.length;r<n;r++){var i=t[r];this[i]=e[i]}};t.prototype.restoreAllStyles=function(){var e=this.constructor.defaultStyles;for(var t in e){this[t]=e[t]}};t.prototype.restoreOverriddenStyles=function(){var e=this.constructor.defaultStyles;var t=Object.getPrototypeOf(e);for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)&&Object.prototype.hasOwnProperty.call(t,r)){this[r]=e[r]}}};t.prototype.updateGradient=function(){var e=this.fill;var t;if((e===null||e===void 0?void 0:e.startsWith("linear-gradient"))&&(t=e.match(LINEAR_GRADIENT_REGEXP))){var r=parseFloat(t[1]);var n=[];var i=t[2];var o=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;var a=void 0;while(a=o.exec(i)){n.push(a[0])}this.gradient=new LinearGradient;this.gradient.angle=r;this.gradient.stops=n.map((function(e,t){var r=t/(n.length-1);return{offset:r,color:e}}))}else{this.gradient=undefined}};t.prototype.align=function(e,t){var r,n,i;var o=(i=(n=(r=this.layerManager)===null||r===void 0?void 0:r.canvas)===null||n===void 0?void 0:n.pixelRatio)!==null&&i!==void 0?i:1;var a=Math.round(e*o)/o;if(t==undefined){return a}if(t===0){return 0}if(t<1){return Math.ceil(t*o)/o}return Math.round((t+e)*o)/o-a};t.prototype.fillStroke=function(e){this.renderFill(e);this.renderStroke(e)};t.prototype.renderFill=function(e){if(this.fill){var t=e.globalAlpha;this.applyFill(e);this.applyFillAlpha(e);this.applyShadow(e);e.fill();e.globalAlpha=t}e.shadowColor="rgba(0, 0, 0, 0)"};t.prototype.applyFill=function(e){if(this.gradient){e.fillStyle=this.gradient.createGradient(e,this.computeBBox())}else{e.fillStyle=this.fill}};t.prototype.applyFillAlpha=function(e){var t=e.globalAlpha;e.globalAlpha=t*this.opacity*this.fillOpacity};t.prototype.applyShadow=function(e){var t,r;var n=(r=(t=this.layerManager)===null||t===void 0?void 0:t.canvas.pixelRatio)!==null&&r!==void 0?r:1;var i=this.fillShadow;if(i&&i.enabled){e.shadowColor=i.color;e.shadowOffsetX=i.xOffset*n;e.shadowOffsetY=i.yOffset*n;e.shadowBlur=i.blur*n}};t.prototype.renderStroke=function(e){if(this.stroke&&this.strokeWidth){var t=e.globalAlpha;e.strokeStyle=this.stroke;e.globalAlpha=t*this.opacity*this.strokeOpacity;e.lineWidth=this.strokeWidth;if(this.lineDash){e.setLineDash(this.lineDash)}if(this.lineDashOffset){e.lineDashOffset=this.lineDashOffset}if(this.lineCap){e.lineCap=this.lineCap}if(this.lineJoin){e.lineJoin=this.lineJoin}e.stroke();e.globalAlpha=t}};t.prototype.containsPoint=function(e,t){return this.isPointInPath(e,t)};t.defaultStyles=Object.assign({},{fill:"black",stroke:undefined,strokeWidth:0,lineDash:undefined,lineDashOffset:0,lineCap:undefined,lineJoin:undefined,opacity:1,fillShadow:undefined});__decorate$1Q([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"fillOpacity",void 0);__decorate$1Q([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"strokeOpacity",void 0);__decorate$1Q([SceneChangeDetection({redraw:RedrawType.MINOR,changeCb:function(e){return e.updateGradient()}})],t.prototype,"fill",void 0);__decorate$1Q([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"stroke",void 0);__decorate$1Q([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"strokeWidth",void 0);__decorate$1Q([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"lineDash",void 0);__decorate$1Q([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"lineDashOffset",void 0);__decorate$1Q([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"lineCap",void 0);__decorate$1Q([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"lineJoin",void 0);__decorate$1Q([SceneChangeDetection({redraw:RedrawType.MINOR,convertor:function(e){return Math.min(1,Math.max(0,e))}})],t.prototype,"opacity",void 0);__decorate$1Q([SceneChangeDetection({redraw:RedrawType.MINOR,checkDirtyOnAssignment:true})],t.prototype,"fillShadow",void 0);return t}(Node);var __extends$2C=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1P=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};function SceneFontChangeDetection(e){var t=e||{},r=t.redraw,n=r===void 0?RedrawType.MAJOR:r,i=t.changeCb;return SceneChangeDetection({redraw:n,type:"font",changeCb:i})}var Text=function(e){__extends$2C(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;r.x=0;r.y=0;r.lines=[];r.text="";r._dirtyFont=true;r.fontSize=10;r.fontFamily="sans-serif";r.textAlign=t.defaultStyles.textAlign;r.textBaseline=t.defaultStyles.textBaseline;r.lineHeight=undefined;return r}t.prototype._splitText=function(){this.lines=typeof this.text==="string"?this.text.split(/\r?\n/g):[]};Object.defineProperty(t.prototype,"font",{get:function(){if(this._dirtyFont){this._dirtyFont=false;this._font=getFont(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)}return this._font},enumerable:false,configurable:true});t.prototype.computeBBox=function(){return HdpiCanvas.has.textMetrics?this.getPreciseBBox():this.getApproximateBBox()};t.prototype.getPreciseBBox=function(){var e,t;var r=0;var n=0;var i=0;var o=0;var a=0;for(var s=0;s<this.lines.length;s++){var l=HdpiCanvas.measureText(this.lines[s],this.font,this.textBaseline,this.textAlign);r=Math.max(r,l.actualBoundingBoxLeft);i=Math.max(i,l.width);if(s==0){n+=l.actualBoundingBoxAscent;o+=l.actualBoundingBoxAscent}else{a+=(e=l.fontBoundingBoxAscent)!==null&&e!==void 0?e:l.emHeightAscent}if(s==this.lines.length-1){o+=l.actualBoundingBoxDescent}else{a+=(t=l.fontBoundingBoxDescent)!==null&&t!==void 0?t:l.emHeightDescent}}if(this.lineHeight!==undefined){a=(this.lines.length-1)*this.lineHeight}o+=a;n+=a*this.getVerticalOffset();return new BBox(this.x-r,this.y-n,i,o)};t.prototype.getVerticalOffset=function(){switch(this.textBaseline){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}};t.prototype.getApproximateBBox=function(){var e;var t=0;var r=0;var n=0;if(this.lines.length>0){var i=HdpiCanvas.getTextSize(this.lines[0],this.font);t=i.width;r=i.height}for(var o=1;o<this.lines.length;o++){var i=HdpiCanvas.getTextSize(this.lines[o],this.font);t=Math.max(t,i.width);n+=(e=this.lineHeight)!==null&&e!==void 0?e:i.height}var a=this,s=a.x,l=a.y;switch(this.textAlign){case"end":case"right":s-=t;break;case"center":s-=t/2}switch(this.textBaseline){case"alphabetic":l-=r*.7+n*.5;break;case"middle":l-=r*.45+n*.5;break;case"ideographic":l-=r+n;break;case"hanging":l-=r*.2+n*.5;break;case"bottom":l-=r+n;break}return new BBox(s,l,t,r+n)};t.prototype.getLineHeight=function(e){var t,r;if(this.lineHeight)return this.lineHeight;if(HdpiCanvas.has.textMetrics){var n=HdpiCanvas.measureText(e,this.font,this.textBaseline,this.textAlign);return((t=n.fontBoundingBoxAscent)!==null&&t!==void 0?t:n.emHeightAscent)+((r=n.fontBoundingBoxDescent)!==null&&r!==void 0?r:n.emHeightDescent)}return HdpiCanvas.getTextSize(e,this.font).height};t.prototype.isPointInPath=function(e,t){var r=this.transformPoint(e,t);var n=this.computeBBox();return n?n.containsPoint(r.x,r.y):false};t.prototype.render=function(t){var r=t.ctx,n=t.forceRender,i=t.stats;if(this.dirty===RedrawType.NONE&&!n){if(i)i.nodesSkipped+=this.nodeCount.count;return}if(!this.lines.length||!this.layerManager){if(i)i.nodesSkipped+=this.nodeCount.count;return}this.computeTransformMatrix();this.matrix.toContext(r);var o=this,a=o.fill,s=o.stroke,l=o.strokeWidth;r.font=this.font;r.textAlign=this.textAlign;r.textBaseline=this.textBaseline;var u=this.layerManager.canvas.pixelRatio||1;var c=r.globalAlpha;if(a){r.fillStyle=a;r.globalAlpha=c*this.opacity*this.fillOpacity;var d=this.fillShadow;if(d&&d.enabled){r.shadowColor=d.color;r.shadowOffsetX=d.xOffset*u;r.shadowOffsetY=d.yOffset*u;r.shadowBlur=d.blur*u}this.renderLines((function(e,t,n){return r.fillText(e,t,n)}))}if(s&&l){r.strokeStyle=s;r.lineWidth=l;r.globalAlpha=c*this.opacity*this.strokeOpacity;var p=this,f=p.lineDash,h=p.lineDashOffset,v=p.lineCap,g=p.lineJoin;if(f){r.setLineDash(f)}if(h){r.lineDashOffset=h}if(v){r.lineCap=v}if(g){r.lineJoin=g}this.renderLines((function(e,t,n){return r.strokeText(e,t,n)}))}e.prototype.render.call(this,t)};t.prototype.renderLines=function(e){var t=this;var r=this,n=r.lines,i=r.x,o=r.y;var a=this.lines.map((function(e){return t.getLineHeight(e)}));var s=a.reduce((function(e,t){return e+t}),0);var l=-(s-a[0])*this.getVerticalOffset();for(var u=0;u<n.length;u++){e(n[u],i,o+l);l+=a[u]}};t.className="Text";t.defaultStyles=Object.assign({},Shape.defaultStyles,{textAlign:"start",fontStyle:undefined,fontWeight:undefined,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"});__decorate$1P([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"x",void 0);__decorate$1P([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"y",void 0);__decorate$1P([SceneChangeDetection({redraw:RedrawType.MAJOR,changeCb:function(e){return e._splitText()}})],t.prototype,"text",void 0);__decorate$1P([SceneFontChangeDetection()],t.prototype,"fontStyle",void 0);__decorate$1P([SceneFontChangeDetection()],t.prototype,"fontWeight",void 0);__decorate$1P([SceneFontChangeDetection()],t.prototype,"fontSize",void 0);__decorate$1P([SceneFontChangeDetection()],t.prototype,"fontFamily",void 0);__decorate$1P([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"textAlign",void 0);__decorate$1P([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"textBaseline",void 0);__decorate$1P([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"lineHeight",void 0);return t}(Shape);function getFont(e,t,r,n){return[r||"",n||"",e+"px",t].join(" ").trim()}function linearRoot(e,t){var r=-t/e;return e!==0&&r>=0&&r<=1?[r]:[]}function quadraticRoots(e,t,r){if(e===0){return linearRoot(t,r)}var n=t*t-4*e*r;var i=[];if(n===0){var o=-t/(2*e);if(o>=0&&o<=1){i.push(o)}}else if(n>0){var a=Math.sqrt(n);var s=(-t-a)/(2*e);var l=(-t+a)/(2*e);if(s>=0&&s<=1){i.push(s)}if(l>=0&&l<=1){i.push(l)}}return i}function cubicRoots(e,t,r,n){if(e===0){return quadraticRoots(t,r,n)}var i=t/e;var o=r/e;var a=n/e;var s=(3*o-i*i)/9;var l=(9*i*o-27*a-2*i*i*i)/54;var u=s*s*s+l*l;var c=1/3;var d=[];if(u>=0){var p=Math.sqrt(u);var f=Math.sign(l+p)*Math.pow(Math.abs(l+p),c);var h=Math.sign(l-p)*Math.pow(Math.abs(l-p),c);var v=Math.abs(Math.sqrt(3)*(f-h)/2);var g=-c*i+(f+h);if(g>=0&&g<=1){d.push(g)}if(v===0){var y=-c*i-(f+h)/2;if(y>=0&&y<=1){d.push(y)}}}else{var m=Math.acos(l/Math.sqrt(-s*s*s));var _=c*i;var S=2*Math.sqrt(-s);var b=S*Math.cos(c*m)-_;var C=S*Math.cos(c*(m+2*Math.PI))-_;var x=S*Math.cos(c*(m+4*Math.PI))-_;if(b>=0&&b<=1){d.push(b)}if(C>=0&&C<=1){d.push(C)}if(x>=0&&x<=1){d.push(x)}}return d}var __values$v=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function segmentIntersection(e,t,r,n,i,o,a,s){var l=(r-e)*(s-o)-(n-t)*(a-i);if(l===0){return null}var u=((a-i)*(t-o)-(e-i)*(s-o))/l;var c=((r-e)*(t-o)-(n-t)*(e-i))/l;if(u>=0&&u<=1&&c>=0&&c<=1){return{x:e+u*(r-e),y:t+u*(n-t)}}return null}function cubicSegmentIntersections(e,t,r,n,i,o,a,s,l,u,c,d){var p,f;var h=[];var v=u-d;var g=c-l;var y=l*(d-u)-u*(c-l);var m=bezierCoefficients(e,r,i,a);var _=bezierCoefficients(t,n,o,s);var S=v*m[0]+g*_[0];var b=v*m[1]+g*_[1];var C=v*m[2]+g*_[2];var x=v*m[3]+g*_[3]+y;var w=cubicRoots(S,b,C,x);try{for(var O=__values$v(w),T=O.next();!T.done;T=O.next()){var E=T.value;var P=E*E;var A=E*P;var R=m[0]*A+m[1]*P+m[2]*E+m[3];var D=_[0]*A+_[1]*P+_[2]*E+_[3];var M=void 0;if(l!==c){M=(R-l)/(c-l)}else{M=(D-u)/(d-u)}if(M>=0&&M<=1){h.push({x:R,y:D})}}}catch(e){p={error:e}}finally{try{if(T&&!T.done&&(f=O.return))f.call(O)}finally{if(p)throw p.error}}return h}function bezierCoefficients(e,t,r,n){return[-e+3*t-3*r+n,3*e-6*t+3*r,-3*e+3*t,e]}function arcIntersections(e,t,r,n,i,o,a,s,l,u){var c=(u-s)/(l-a);var d=s-c*a;var p=Math.pow(c,2)+1;var f=2*(c*(d-t)-e);var h=Math.pow(e,2)+Math.pow(d-t,2)-Math.pow(r,2);var v=Math.pow(f,2)-4*p*h;if(v<0){return[]}var g=(-f+Math.sqrt(v))/2/p;var y=(-f-Math.sqrt(v))/2/p;var m=[];[g,y].forEach((function(e){var t=e>=Math.min(a,l)&&e<=Math.max(a,l);if(!t){return}var r=c*e;var s=normalizeAngle360(o?i:n);var u=normalizeAngle360(o?n:i);var d=normalizeAngle360(Math.atan2(r,e));if(u<=s){u+=2*Math.PI}if(d<s){d+=2*Math.PI}if(d>=s&&d<=u){m.push({x:e,y:r})}}));return m}var __values$u=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var Command;(function(e){e[e["Move"]=0]="Move";e[e["Line"]=1]="Line";e[e["Arc"]=2]="Arc";e[e["Curve"]=3]="Curve";e[e["ClosePath"]=4]="ClosePath"})(Command||(Command={}));var Path2D=function(){function e(){this.previousCommands=[];this.previousParams=[];this.previousClosedPath=false;this.commands=[];this.params=[];this._closedPath=false}e.prototype.isDirty=function(){if(this._closedPath!==this.previousClosedPath){return true}if(this.previousCommands.length!==this.commands.length){return true}if(this.previousParams.length!==this.params.length){return true}for(var e=0;e<this.commands.length;e++){if(this.commands[e]!==this.previousCommands[e]){return true}}for(var e=0;e<this.params.length;e++){if(this.params[e]!==this.previousParams[e]){return true}}return false};e.prototype.draw=function(e){var t,r;var n=this.commands;var i=this.params;var o=0;e.beginPath();try{for(var a=__values$u(n),s=a.next();!s.done;s=a.next()){var l=s.value;switch(l){case Command.Move:e.moveTo(i[o++],i[o++]);break;case Command.Line:e.lineTo(i[o++],i[o++]);break;case Command.Curve:e.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case Command.Arc:e.arc(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]===1);break;case Command.ClosePath:e.closePath();break}}}catch(e){t={error:e}}finally{try{if(s&&!s.done&&(r=a.return))r.call(a)}finally{if(t)throw t.error}}if(n.length===0){e.closePath()}};e.prototype.moveTo=function(e,t){if(this.xy){this.xy[0]=e;this.xy[1]=t}else{this.xy=[e,t]}this.commands.push(Command.Move);this.params.push(e,t)};e.prototype.lineTo=function(e,t){if(this.xy){this.commands.push(Command.Line);this.params.push(e,t);this.xy[0]=e;this.xy[1]=t}else{this.moveTo(e,t)}};e.prototype.rect=function(e,t,r,n){this.moveTo(e,t);this.lineTo(e+r,t);this.lineTo(e+r,t+n);this.lineTo(e,t+n);this.closePath()};e.prototype.arc=function(e,t,r,n,i,o){if(o===void 0){o=false}var a=e+r*Math.cos(i);var s=t+r*Math.sin(i);if(this.xy){this.xy[0]=a;this.xy[1]=s}else{this.xy=[a,s]}this.commands.push(Command.Arc);this.params.push(e,t,r,n,i,o?1:0)};e.prototype.cubicCurveTo=function(e,t,r,n,i,o){if(!this.xy){this.moveTo(e,t)}this.commands.push(Command.Curve);this.params.push(e,t,r,n,i,o);this.xy[0]=i;this.xy[1]=o};Object.defineProperty(e.prototype,"closedPath",{get:function(){return this._closedPath},enumerable:false,configurable:true});e.prototype.closePath=function(){if(this.xy){this.xy=undefined;this.commands.push(Command.ClosePath);this._closedPath=true}};e.prototype.clear=function(e){var t=(e===void 0?{trackChanges:false}:e).trackChanges;if(t){this.previousCommands=this.commands;this.previousParams=this.params;this.previousClosedPath=this._closedPath;this.commands=[];this.params=[]}else{this.commands.length=0;this.params.length=0}this.xy=undefined;this._closedPath=false};e.prototype.isPointInPath=function(e,t){var r=this.commands;var n=this.params;var i=r.length;var o=-1e4;var a=-1e4;var s=NaN;var l=NaN;var u=0;var c=0;var d=0;for(var p=0,f=0;p<i;p++){switch(r[p]){case Command.Move:if(!isNaN(s)){if(segmentIntersection(s,l,u,c,o,a,e,t)){d++}}u=n[f++];s=u;c=n[f++];l=c;break;case Command.Line:if(segmentIntersection(u,c,n[f++],n[f++],o,a,e,t)){d++}u=n[f-2];c=n[f-1];break;case Command.Curve:d+=cubicSegmentIntersections(u,c,n[f++],n[f++],n[f++],n[f++],n[f++],n[f++],o,a,e,t).length;u=n[f-2];c=n[f-1];break;case Command.Arc:d+=arcIntersections(n[f++],n[f++],n[f++],n[f++],n[f++],Boolean(n[f++]),o,a,e,t).length;u=n[f-2];c=n[f-1];break;case Command.ClosePath:if(!isNaN(s)){if(segmentIntersection(s,l,u,c,o,a,e,t)){d++}}break}}return d%2===1};return e}();var __extends$2B=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1O=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};function ScenePathChangeDetection(e){var t=e||{},r=t.redraw,n=r===void 0?RedrawType.MAJOR:r,i=t.changeCb,o=t.convertor;return SceneChangeDetection({redraw:n,type:"path",convertor:o,changeCb:i})}var Path=function(e){__extends$2B(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.path=new Path2D;t._dirtyPath=true;return t}Object.defineProperty(t.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(e){if(this._dirtyPath!==e){this._dirtyPath=e;if(e){this.markDirty(this,RedrawType.MAJOR)}}},enumerable:false,configurable:true});t.prototype.checkPathDirty=function(){var e,t;if(this._dirtyPath){return}this.dirtyPath=this.path.isDirty()||((t=(e=this.fillShadow)===null||e===void 0?void 0:e.isDirty())!==null&&t!==void 0?t:false)};t.prototype.isPointInPath=function(e,t){var r=this.transformPoint(e,t);return this.path.closedPath&&this.path.isPointInPath(r.x,r.y)};t.prototype.isDirtyPath=function(){return false};t.prototype.updatePath=function(){};t.prototype.render=function(t){var r,n;var i=t.ctx,o=t.forceRender,a=t.stats;if(this.dirty===RedrawType.NONE&&!o){if(a)a.nodesSkipped+=this.nodeCount.count;return}this.computeTransformMatrix();this.matrix.toContext(i);if(this.dirtyPath||this.isDirtyPath()){this.updatePath();this.dirtyPath=false}if(this.clipPath){i.save();if(this.clipMode==="normal"){this.clipPath.draw(i);i.clip()}this.path.draw(i);this.fillStroke(i);if(this.clipMode==="punch-out"){this.clipPath.draw(i);i.clip();var s=(r=this.computeBBox())!==null&&r!==void 0?r:{},l=s.x,u=l===void 0?-1e4:l,c=s.y,d=c===void 0?-1e4:c,p=s.width,f=p===void 0?2e4:p,h=s.height,v=h===void 0?2e4:h;i.clearRect(u,d,f,v)}i.restore()}else{this.path.draw(i);this.fillStroke(i)}(n=this.fillShadow)===null||n===void 0?void 0:n.markClean();e.prototype.render.call(this,t)};t.className="Path";__decorate$1O([ScenePathChangeDetection()],t.prototype,"clipPath",void 0);__decorate$1O([ScenePathChangeDetection()],t.prototype,"clipMode",void 0);return t}(Shape);var __extends$2A=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1N=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __values$t=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var Marker=function(e){__extends$2A(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.x=0;t.y=0;t.size=12;return t}t.prototype.computeBBox=function(){var e=this,t=e.x,r=e.y,n=e.size;var i=n/2;return new BBox(t-i,r-i,n,n)};t.prototype.applyPath=function(e,t){var r,n;var i=this.path;var o=this,a=o.x,s=o.y;i.clear();try{for(var l=__values$t(t),u=l.next();!u.done;u=l.next()){var c=u.value,d=c.x,p=c.y,f=c.t;a+=d*e;s+=p*e;if(f==="move"){i.moveTo(a,s)}else{i.lineTo(a,s)}}}catch(e){r={error:e}}finally{try{if(u&&!u.done&&(n=l.return))n.call(l)}finally{if(r)throw r.error}}i.closePath()};__decorate$1N([ScenePathChangeDetection()],t.prototype,"x",void 0);__decorate$1N([ScenePathChangeDetection()],t.prototype,"y",void 0);__decorate$1N([ScenePathChangeDetection({convertor:Math.abs})],t.prototype,"size",void 0);return t}(Path);var __extends$2z=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Square=function(e){__extends$2z(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.updatePath=function(){var e=this,t=e.path,r=e.x,n=e.y;var i=this.size/2;t.clear();t.moveTo(this.align(r-i),this.align(n-i));t.lineTo(this.align(r+i),this.align(n-i));t.lineTo(this.align(r+i),this.align(n+i));t.lineTo(this.align(r-i),this.align(n+i));t.closePath()};t.className="Square";return t}(Marker);function ProxyPropertyOnWrite(e,t){return addTransformToInstanceProperty((function(r,n,i){r[e][t!==null&&t!==void 0?t:n]=i;return i}))}function ActionOnSet(e){var t=e.newValue,r=e.oldValue,n=e.changeValue;return addTransformToInstanceProperty((function(e,i,o,a){if(o!==a){if(a!==undefined){r===null||r===void 0?void 0:r.call(e,a)}if(o!==undefined){t===null||t===void 0?void 0:t.call(e,o)}n===null||n===void 0?void 0:n.call(e,o,a)}return o}))}var __extends$2y=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1M=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var MarkerLabel=function(e){__extends$2y(t,e);function t(){var t=e.call(this,{name:"markerLabelGroup"})||this;t.label=new Text;t._marker=new Square;t._markerSize=15;t._spacing=8;var r=t.label;r.textBaseline="middle";r.fontSize=12;r.fontFamily="Verdana, sans-serif";r.fill="black";r.y=HdpiCanvas.has.textMetrics?1:0;t.append([t.marker,r]);t.update();return t}Object.defineProperty(t.prototype,"marker",{get:function(){return this._marker},set:function(e){if(this._marker!==e){this.removeChild(this._marker);this._marker=e;this.appendChild(e);this.update()}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"markerSize",{get:function(){return this._markerSize},set:function(e){if(this._markerSize!==e){this._markerSize=e;this.update()}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"spacing",{get:function(){return this._spacing},set:function(e){if(this._spacing!==e){this._spacing=e;this.update()}},enumerable:false,configurable:true});t.prototype.update=function(){var e=this.marker;var t=this.markerSize;e.size=t;this.label.x=t/2+this.spacing};t.prototype.render=function(t){this.marker.opacity=this.opacity;this.label.opacity=this.opacity;e.prototype.render.call(this,t)};t.className="MarkerLabel";__decorate$1M([ProxyPropertyOnWrite("label")],t.prototype,"text",void 0);__decorate$1M([ProxyPropertyOnWrite("label")],t.prototype,"fontStyle",void 0);__decorate$1M([ProxyPropertyOnWrite("label")],t.prototype,"fontWeight",void 0);__decorate$1M([ProxyPropertyOnWrite("label")],t.prototype,"fontSize",void 0);__decorate$1M([ProxyPropertyOnWrite("label")],t.prototype,"fontFamily",void 0);__decorate$1M([ProxyPropertyOnWrite("label","fill")],t.prototype,"color",void 0);__decorate$1M([ProxyPropertyOnWrite("marker","fill")],t.prototype,"markerFill",void 0);__decorate$1M([ProxyPropertyOnWrite("marker","stroke")],t.prototype,"markerStroke",void 0);__decorate$1M([ProxyPropertyOnWrite("marker","strokeWidth")],t.prototype,"markerStrokeWidth",void 0);__decorate$1M([ProxyPropertyOnWrite("marker","fillOpacity")],t.prototype,"markerFillOpacity",void 0);__decorate$1M([ProxyPropertyOnWrite("marker","strokeOpacity")],t.prototype,"markerStrokeOpacity",void 0);return t}(Group);var __extends$2x=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Circle=function(e){__extends$2x(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.updatePath=function(){var e=this,t=e.x,r=e.y,n=e.path,i=e.size;var o=i/2;n.clear();n.arc(t,r,o,0,Math.PI*2);n.closePath()};t.className="Circle";return t}(Marker);var __extends$2w=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Cross=function(e){__extends$2w(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.updatePath=function(){var r=this.size/4.2;e.prototype.applyPath.call(this,r,t.moves)};t.className="Cross";t.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:+1,y:-1},{x:+1,y:+1},{x:+1,y:-1},{x:+1,y:+1},{x:-1,y:+1},{x:+1,y:+1},{x:-1,y:+1},{x:-1,y:-1},{x:-1,y:+1},{x:-1,y:-1}];return t}(Marker);var __extends$2v=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Diamond=function(e){__extends$2v(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.updatePath=function(){var r=this.size/2;e.prototype.applyPath.call(this,r,t.moves)};t.className="Diamond";t.moves=[{x:0,y:-1,t:"move"},{x:+1,y:+1},{x:-1,y:+1},{x:-1,y:-1},{x:+1,y:-1}];return t}(Marker);var __extends$2u=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Heart=function(e){__extends$2u(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.rad=function(e){return e/180*Math.PI};t.prototype.updatePath=function(){var e=this,t=e.x,r=e.path,n=e.size,i=e.rad;var o=n/4;var a=this.y+o/2;r.clear();r.arc(t-o,a-o,o,i(130),i(330));r.arc(t+o,a-o,o,i(220),i(50));r.lineTo(t,a+o);r.closePath()};t.className="Heart";return t}(Marker);var __extends$2t=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Plus=function(e){__extends$2t(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.updatePath=function(){var r=this.size/3;e.prototype.applyPath.call(this,r,t.moves)};t.className="Plus";t.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:+1,y:0},{x:0,y:+1},{x:+1,y:0},{x:0,y:+1},{x:-1,y:0},{x:0,y:+1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];return t}(Marker);var __extends$2s=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Triangle=function(e){__extends$2s(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.updatePath=function(){var r=this.size*1.1;e.prototype.applyPath.call(this,r,t.moves)};t.className="Triangle";t.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];return t}(Marker);function getMarker$1(e){if(e===void 0){e=Square}if(typeof e==="string"){switch(e){case"circle":return Circle;case"cross":return Cross;case"diamond":return Diamond;case"heart":return Heart;case"plus":return Plus;case"triangle":return Triangle;default:return Square}}if(typeof e==="function"){return e}return Square}var ChartUpdateType;(function(e){e[e["FULL"]=0]="FULL";e[e["PROCESS_DATA"]=1]="PROCESS_DATA";e[e["PERFORM_LAYOUT"]=2]="PERFORM_LAYOUT";e[e["SERIES_UPDATE"]=3]="SERIES_UPDATE";e[e["TOOLTIP_RECALCULATION"]=4]="TOOLTIP_RECALCULATION";e[e["SCENE_RENDER"]=5]="SCENE_RENDER";e[e["NONE"]=6]="NONE"})(ChartUpdateType||(ChartUpdateType={}));var __values$s=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function gridLayout(e){var t=e.orientation,r=e.bboxes,n=e.maxHeight,i=e.maxWidth,o=e.itemPaddingY,a=o===void 0?0:o,s=e.itemPaddingX,l=s===void 0?0:s,u=e.forceResult,c=u===void 0?false:u;var d=t==="horizontal";var p={max:d?i:n,fn:d?function(e){return e.width}:function(e){return e.height},padding:d?l:a};var f={max:!d?i:n,fn:!d?function(e){return e.width}:function(e){return e.height},padding:!d?l:a};var h=0;var v=[];while(h<r.length){var g=r.slice(h);var y=processBBoxes(g,h,p,f,c);if(!y){return}h+=y.processedBBoxCount;v.push(y.pageIndices)}return buildPages(v,t,r,a,l)}function processBBoxes(e,t,r,n,i){var o=1;var a=estimateStartingGuess(e,r);if(a<o){if(!i){return undefined}a=o}for(var s=a;s>=o;s--){var l=calculatePage(e,t,s,r,n,i);if(l==null&&s<=o){return undefined}if(l==null){continue}if(typeof l==="number"){if(l<=o){return undefined}s=l<s&&l>o?l:s;continue}var u=l.length*l[0].length;return{processedBBoxCount:u,pageIndices:l}}}function calculatePage(e,t,r,n,i,o){var a;var s=[];var l=0;var u=0;var c=[];var d=[];for(var p=0;p<e.length;p++){var f=(p+r)%r;if(f===0){l+=u;u=0;if(c.length>0){s.push(c)}c=[]}var h=n.fn(e[p])+n.padding;d[f]=Math.max((a=d[f])!==null&&a!==void 0?a:0,h);u=Math.max(u,i.fn(e[p])+i.padding);var v=l+u;var g=!o||s.length>0;if(v>i.max&&g){c=[];break}var y=d.reduce((function(e,t){return e+t}),0);if(y>n.max&&!o){if(d.length<r){return d.length}return undefined}c.push(p+t)}if(c.length>0){s.push(c)}return s.length>0?s:undefined}function buildPages(e,t,r,n,i){var o=0;var a=0;var s=e.map((function(e){if(t==="horizontal"){e=transpose(e)}var s=0;var l=e.map((function(e){var t=e.map((function(e){s=Math.max(e,s);return r[e]}));var o=0;var a=0;t.forEach((function(e){o+=e.height+n;a=Math.max(a,e.width+i)}));return{indices:e,bboxes:t,columnHeight:o,columnWidth:a}}));var u=0;var c=0;l.forEach((function(e){u+=e.columnWidth;c=Math.max(c,e.columnHeight)}));o=Math.max(u,o);a=Math.max(c,a);return{columns:l,startIndex:e[0][0],endIndex:s,pageWidth:u,pageHeight:c}}));return{pages:s,maxPageWidth:o,maxPageHeight:a}}function transpose(e){var t,r;var n=[];try{for(var i=__values$s(e[0]),o=i.next();!o.done;o=i.next()){var a=o.value;n.push([])}}catch(e){t={error:e}}finally{try{if(o&&!o.done&&(r=i.return))r.call(i)}finally{if(t)throw t.error}}e.forEach((function(e,t){e.forEach((function(e,r){n[r][t]=e}))}));return n}function estimateStartingGuess(e,t){var r=e.length;var n=0;for(var i=0;i<r;i++){n+=t.fn(e[i])+t.padding;if(n>t.max){var o=r/i;if(o<2){return Math.ceil(r/2)}return i}}return r}var __decorate$1L=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var PaginationLabel=function(){function e(){this.color="black";this.fontStyle=undefined;this.fontWeight=undefined;this.fontSize=12;this.fontFamily="Verdana, sans-serif"}__decorate$1L([Validate(COLOR_STRING)],e.prototype,"color",void 0);__decorate$1L([Validate(OPT_FONT_STYLE)],e.prototype,"fontStyle",void 0);__decorate$1L([Validate(OPT_FONT_WEIGHT)],e.prototype,"fontWeight",void 0);__decorate$1L([Validate(NUMBER(0))],e.prototype,"fontSize",void 0);__decorate$1L([Validate(STRING)],e.prototype,"fontFamily",void 0);return e}();var PaginationMarkerStyle=function(){function e(){this.size=15;this.fill=undefined;this.fillOpacity=undefined;this.stroke=undefined;this.strokeWidth=1;this.strokeOpacity=1}__decorate$1L([Validate(NUMBER(0))],e.prototype,"size",void 0);__decorate$1L([Validate(OPT_COLOR_STRING)],e.prototype,"fill",void 0);__decorate$1L([Validate(OPT_NUMBER(0,1))],e.prototype,"fillOpacity",void 0);__decorate$1L([Validate(OPT_COLOR_STRING)],e.prototype,"stroke",void 0);__decorate$1L([Validate(NUMBER(0))],e.prototype,"strokeWidth",void 0);__decorate$1L([Validate(NUMBER(0,1))],e.prototype,"strokeOpacity",void 0);return e}();var PaginationMarker=function(){function e(){this.size=15;this._shape=Triangle;this.padding=8}Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},set:function(e){var t;this._shape=e;(t=this.parent)===null||t===void 0?void 0:t.onMarkerShapeChange()},enumerable:false,configurable:true});__decorate$1L([Validate(NUMBER(0))],e.prototype,"size",void 0);__decorate$1L([Validate(NUMBER(0))],e.prototype,"padding",void 0);return e}();var Pagination=function(){function e(e,t,r,n){var i=this;this.chartUpdateCallback=e;this.pageUpdateCallback=t;this.interactionManager=r;this.cursorManager=n;this.id=createId$1(this);this.group=new Group({name:"pagination"});this.labelNode=new Text;this.marker=new PaginationMarker;this.activeStyle=new PaginationMarkerStyle;this.inactiveStyle=new PaginationMarkerStyle;this.highlightStyle=new PaginationMarkerStyle;this.label=new PaginationLabel;this.totalPages=0;this.currentPage=0;this.nextButtonDisabled=false;this.previousButtonDisabled=false;this._visible=true;this._enabled=true;this._orientation="vertical";this._nextButton=new Triangle;this._previousButton=new Triangle;var o=this.labelNode;o.textBaseline="middle";o.fontSize=12;o.fontFamily="Verdana, sans-serif";o.fill="black";o.y=HdpiCanvas.has.textMetrics?1:0;this.group.append([this.nextButton,this.previousButton,o]);this.interactionManager.addListener("click",(function(e){return i.onPaginationClick(e)}));this.interactionManager.addListener("hover",(function(e){return i.onPaginationMouseMove(e)}));this.marker.parent=this;this.update();this.updateMarkers()}Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e;this.updateGroupVisibility()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e;this.updateGroupVisibility()},enumerable:false,configurable:true});e.prototype.updateGroupVisibility=function(){this.group.visible=this.enabled&&this.visible};Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation=e;switch(e){case"horizontal":{this.previousButton.rotation=-Math.PI/2;this.nextButton.rotation=Math.PI/2;break}case"vertical":default:{this.previousButton.rotation=0;this.nextButton.rotation=Math.PI}}},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"translationX",{get:function(){return this.group.translationX},set:function(e){this.group.translationX=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"translationY",{get:function(){return this.group.translationY},set:function(e){this.group.translationY=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"nextButton",{get:function(){return this._nextButton},set:function(e){if(this._nextButton!==e){this.group.removeChild(this._nextButton);this._nextButton=e;this.group.appendChild(e)}},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"previousButton",{get:function(){return this._previousButton},set:function(e){if(this._previousButton!==e){this.group.removeChild(this._previousButton);this._previousButton=e;this.group.appendChild(e)}},enumerable:false,configurable:true});e.prototype.update=function(){this.updateLabel();this.updatePositions();this.enableOrDisableButtons()};e.prototype.updatePositions=function(){this.updateLabelPosition();this.updateNextButtonPosition()};e.prototype.updateLabelPosition=function(){var e=this.marker,t=e.size,r=e.padding;this.nextButton.size=t;this.previousButton.size=t;this.labelNode.x=t/2+r};e.prototype.updateNextButtonPosition=function(){var e=this.labelNode.computeBBox();this.nextButton.translationX=e.x+e.width+this.marker.size/2+this.marker.padding};e.prototype.updateLabel=function(){var e=this,t=e.currentPage,r=e.totalPages,n=e.labelNode,i=e.label,o=i.color,a=i.fontStyle,s=i.fontWeight,l=i.fontSize,u=i.fontFamily;n.text=t+1+" / "+r;n.fill=o;n.fontStyle=a;n.fontWeight=s;n.fontSize=l;n.fontFamily=u};e.prototype.updateMarkers=function(){var e=this,t=e.nextButton,r=e.previousButton,n=e.nextButtonDisabled,i=e.previousButtonDisabled,o=e.activeStyle,a=e.inactiveStyle,s=e.highlightStyle,l=e.highlightActive;var u=function(e,t){if(t){return a}else if(e===l){return s}return o};this.updateMarker(t,u("next",n));this.updateMarker(r,u("previous",i))};e.prototype.updateMarker=function(e,t){var r;var n=this.marker.size;e.size=n;e.fill=t.fill;e.fillOpacity=(r=t.fillOpacity)!==null&&r!==void 0?r:1;e.stroke=t.stroke;e.strokeWidth=t.strokeWidth;e.strokeOpacity=t.strokeOpacity};e.prototype.enableOrDisableButtons=function(){var e=this,t=e.currentPage,r=e.totalPages;var n=r===0;var i=t===r-1;var o=t===0;this.nextButtonDisabled=i||n;this.previousButtonDisabled=o||n};e.prototype.nextButtonContainsPoint=function(e,t){return!this.nextButtonDisabled&&this.nextButton.containsPoint(e,t)};e.prototype.previousButtonContainsPoint=function(e,t){return!this.previousButtonDisabled&&this.previousButton.containsPoint(e,t)};e.prototype.onPaginationClick=function(e){var t=e.offsetX,r=e.offsetY;if(this.nextButtonContainsPoint(t,r)){this.incrementPage();this.onPaginationChanged();e.consume()}else if(this.previousButtonContainsPoint(t,r)){this.decrementPage();this.onPaginationChanged();e.consume()}};e.prototype.onPaginationMouseMove=function(e){var t=e.offsetX,r=e.offsetY;if(this.nextButtonContainsPoint(t,r)){this.cursorManager.updateCursor(this.id,"pointer");this.highlightActive="next"}else if(this.previousButtonContainsPoint(t,r)){this.cursorManager.updateCursor(this.id,"pointer");this.highlightActive="previous"}else{this.cursorManager.updateCursor(this.id);this.highlightActive=undefined}this.updateMarkers();this.chartUpdateCallback(ChartUpdateType.SCENE_RENDER)};e.prototype.onPaginationChanged=function(){this.pageUpdateCallback(this.currentPage)};e.prototype.incrementPage=function(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)};e.prototype.decrementPage=function(){this.currentPage=Math.max(this.currentPage-1,0)};e.prototype.onMarkerShapeChange=function(){var e=getMarker$1(this.marker.shape||Triangle);this.previousButton=new e;this.nextButton=new e;this.updatePositions();this.updateMarkers();this.chartUpdateCallback(ChartUpdateType.SCENE_RENDER)};e.prototype.attachPagination=function(e){e.append(this.group)};e.prototype.computeBBox=function(){return this.group.computeBBox()};e.className="Pagination";return e}();var __decorate$1K=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$U=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$w=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$U(arguments[t]));return e};var __values$r=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var ORIENTATIONS=["horizontal","vertical"];var OPT_ORIENTATION=predicateWithMessage((function(e,t){return OPTIONAL(e,t,(function(e){return ORIENTATIONS.includes(e)}))}),"expecting an orientation keyword such as 'horizontal' or 'vertical'");var LegendLabel=function(){function e(){this.maxLength=undefined;this.color="black";this.fontStyle=undefined;this.fontWeight=undefined;this.fontSize=12;this.fontFamily="Verdana, sans-serif";this.formatter=undefined}e.prototype.getFont=function(){return getFont(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)};__decorate$1K([Validate(OPT_NUMBER(0))],e.prototype,"maxLength",void 0);__decorate$1K([Validate(COLOR_STRING)],e.prototype,"color",void 0);__decorate$1K([Validate(OPT_FONT_STYLE)],e.prototype,"fontStyle",void 0);__decorate$1K([Validate(OPT_FONT_WEIGHT)],e.prototype,"fontWeight",void 0);__decorate$1K([Validate(NUMBER(0))],e.prototype,"fontSize",void 0);__decorate$1K([Validate(STRING)],e.prototype,"fontFamily",void 0);__decorate$1K([Validate(OPT_FUNCTION)],e.prototype,"formatter",void 0);return e}();var LegendMarker=function(){function e(){this.size=15;this._shape=undefined;this.padding=8;this.strokeWidth=1}Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},set:function(e){var t;this._shape=e;(t=this.parent)===null||t===void 0?void 0:t.onMarkerShapeChange()},enumerable:false,configurable:true});__decorate$1K([Validate(NUMBER(0))],e.prototype,"size",void 0);__decorate$1K([Validate(NUMBER(0))],e.prototype,"padding",void 0);__decorate$1K([Validate(NUMBER(0))],e.prototype,"strokeWidth",void 0);return e}();var LegendItem=function(){function e(){this.marker=new LegendMarker;this.label=new LegendLabel;this.maxWidth=undefined;this.paddingX=16;this.paddingY=8;this.toggleSeriesVisible=true}__decorate$1K([Validate(OPT_NUMBER(0))],e.prototype,"maxWidth",void 0);__decorate$1K([Validate(NUMBER(0))],e.prototype,"paddingX",void 0);__decorate$1K([Validate(NUMBER(0))],e.prototype,"paddingY",void 0);__decorate$1K([Validate(BOOLEAN)],e.prototype,"toggleSeriesVisible",void 0);return e}();var LegendListeners=function(){function e(){this.legendItemClick=undefined;this.legendItemDoubleClick=undefined}__decorate$1K([Validate(OPT_FUNCTION)],e.prototype,"legendItemClick",void 0);return e}();var Legend=function(){function e(e,t,r,n,i,o){var a;var s=this;this.chart=e;this.interactionManager=t;this.cursorManager=r;this.highlightManager=n;this.tooltipManager=i;this.layoutService=o;this.id=createId$1(this);this.group=new Group({name:"legend",layer:true,zIndex:Layers.LEGEND_ZINDEX});this.itemSelection=Selection.select(this.group,MarkerLabel);this.oldSize=[0,0];this.pages=[];this.maxPageSize=[0,0];this.paginationTrackingIndex=0;this.item=new LegendItem;this.listeners=new LegendListeners;this.truncatedItems=new Set;this._data=[];this._enabled=true;this.position="right";this.maxWidth=undefined;this.maxHeight=undefined;this.reverseOrder=undefined;this.destroyFns=[];this.spacing=20;this.characterWidths=new Map;this.size=[0,0];this._visible=true;this.item.marker.parent=this;this.pagination=new Pagination((function(e){return s.chart.update(e)}),(function(e){return s.updatePageNumber(e)}),this.interactionManager,this.cursorManager);this.pagination.attachPagination(this.group);this.item.marker.parent=this;var l=[this.interactionManager.addListener("click",(function(e){return s.checkLegendClick(e)})),this.interactionManager.addListener("dblclick",(function(e){return s.checkLegendDoubleClick(e)})),this.interactionManager.addListener("hover",(function(e){return s.handleLegendMouseMove(e)}))];var u=[this.layoutService.addListener("start-layout",(function(e){return s.positionLegend(e.shrinkRect)}))];(a=this.destroyFns).push.apply(a,__spread$w(l.map((function(e){return function(){return s.interactionManager.removeListener(e)}})),u.map((function(e){return function(){return s.layoutService.removeListener(e)}}))))}Object.defineProperty(e.prototype,"translationX",{get:function(){return this.group.translationX},set:function(e){this.group.translationX=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"translationY",{get:function(){return this.group.translationY},set:function(e){this.group.translationY=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e;this.updateGroupVisibility()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e;this.updateGroupVisibility()},enumerable:false,configurable:true});e.prototype.getOrientation=function(){if(this.orientation!==undefined){return this.orientation}switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}};e.prototype.destroy=function(){this.destroyFns.forEach((function(e){return e()}))};e.prototype.onMarkerShapeChange=function(){this.itemSelection.clear();this.group.markDirty(this.group,RedrawType.MINOR)};e.prototype.getCharacterWidths=function(e){var t=this.characterWidths;if(t.has(e)){return t.get(e)}var r={"...":HdpiCanvas.getTextSize("...",e).width};t.set(e,r);return r};Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e;this.updateGroupVisibility()},enumerable:false,configurable:true});e.prototype.updateGroupVisibility=function(){this.group.visible=this.enabled&&this.visible&&this.data.length>0};e.prototype.attachLegend=function(e){e.append(this.group)};e.prototype.performLayout=function(e,t){var r=this;var n=this.item,i=n.paddingX,o=n.paddingY,a=n.label,s=n.maxWidth,l=n.marker,u=l.size,c=l.padding,d=l.shape,p=n.label,f=p.maxLength,h=f===void 0?Infinity:f,v=p.fontStyle,g=p.fontWeight,y=p.fontSize,m=p.fontFamily;var _=__spread$w(this.data);if(this.reverseOrder){_.reverse()}this.itemSelection.update(_);var S=[];var b=a.getFont();var C=.8;var x=s!==null&&s!==void 0?s:e*C;var w=u+c+i;this.itemSelection.each((function(e,t){var n;var i=getMarker$1(d||t.marker.shape);if(!(e.marker&&e.marker instanceof i)){e.marker=new i}e.markerSize=u;e.spacing=c;e.fontStyle=v;e.fontWeight=g;e.fontSize=y;e.fontFamily=m;var o=t.itemId||t.id;var a=((n=t.label.text)!==null&&n!==void 0?n:"<unknown>").replace(/\r?\n/g," ");e.text=r.truncate(a,h,x,w,b,o);S.push(e.computeBBox())}));e=Math.max(1,e);t=Math.max(1,t);if(!isFinite(e)){return false}var O=this.size;var T=this.oldSize;O[0]=e;O[1]=t;if(O[0]!==T[0]||O[1]!==T[1]){T[0]=O[0];T[1]=O[1]}var E=this.updatePagination(S,e,t),P=E.pages,A=E.maxPageHeight,R=E.maxPageWidth;this.pages=P;this.maxPageSize=[R-i,A-o];var D=this.pagination.currentPage;var M=this.pages[D];if(this.pages.length<1||!M){this.visible=false;return}this.visible=true;this.updatePositions(D);this.update()};e.prototype.truncate=function(e,t,r,n,i,o){var a,s;var l="...";var u=e.split("");var c=false;if(e.length>t){e=""+e.substring(0,t);c=true}var d=Math.floor(n+HdpiCanvas.getTextSize(e,i).width);if(d>r){var p="";var f=this.getCharacterWidths(i);var h=n+f[l];try{for(var v=__values$r(u),g=v.next();!g.done;g=v.next()){var y=g.value;if(!f[y]){f[y]=HdpiCanvas.getTextSize(y,i).width}h+=f[y];if(h>r){break}p+=y}}catch(e){a={error:e}}finally{try{if(g&&!g.done&&(s=v.return))s.call(v)}finally{if(a)throw a.error}}e=p;c=true}if(c){e+=l;this.truncatedItems.add(o)}else{this.truncatedItems.delete(o)}return e};e.prototype.updatePagination=function(e,t,r){var n=this.getOrientation();var i=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=n;this.pagination.translationX=0;this.pagination.translationY=0;var o=this.calculatePagination(e,t,r),a=o.pages,s=o.maxPageHeight,l=o.maxPageWidth,u=o.paginationBBox,c=o.paginationVertical;var d=a.findIndex((function(e){return e.endIndex>=i}));this.pagination.currentPage=Math.min(Math.max(d,0),a.length-1);var p=this.item,f=p.paddingX,h=p.paddingY;var v=8;var g=l-f;var y=s-h;var m=0;var _=-u.y-this.item.marker.size/2;if(c){_+=y+v}else{m+=-u.x+g+v;_+=(y-u.height)/2}this.pagination.translationX=m;this.pagination.translationY=_;this.pagination.update();this.pagination.updateMarkers();return{maxPageHeight:s,maxPageWidth:l,pages:a}};e.prototype.calculatePagination=function(e,t,r){var n,i,o;var a=this.item,s=a.paddingX,l=a.paddingY;var u=this.getOrientation();var c=["left","right"].includes(this.position);var d=this.pagination.computeBBox();var p=new BBox(0,0,0,0);var f=[];var h=0;var v=0;var g=0;var y=function(e){var t=e.width,r=e.height;return t===d.width&&r===d.height};var m=this.maxWidth!==undefined||this.maxHeight!==undefined;do{if(g++>10){Logger.warn("unable to find stable legend layout.");break}d=p;var _=t-(c?0:d.width);var S=r-(c?d.height:0);var b=gridLayout({orientation:u,bboxes:e,maxHeight:S,maxWidth:_,itemPaddingY:l,itemPaddingX:s,forceResult:m});f=(n=b===null||b===void 0?void 0:b.pages)!==null&&n!==void 0?n:[];h=(i=b===null||b===void 0?void 0:b.maxPageWidth)!==null&&i!==void 0?i:0;v=(o=b===null||b===void 0?void 0:b.maxPageHeight)!==null&&o!==void 0?o:0;var C=f.length;this.pagination.visible=C>1;this.pagination.totalPages=C;this.pagination.update();p=this.pagination.computeBBox();if(!this.pagination.visible){break}}while(!y(p));return{maxPageWidth:h,maxPageHeight:v,pages:f,paginationBBox:d,paginationVertical:c}};e.prototype.updatePositions=function(e){if(e===void 0){e=0}var t=this,r=t.item.paddingY,n=t.itemSelection,i=t.pages;if(i.length<1||!i[e]){return}var o=i[e],a=o.columns,s=o.startIndex,l=o.endIndex;var u=0;var c=0;var d=a.length;var p=a[0].indices.length;var f=this.getOrientation()==="horizontal";var h=a[0].bboxes[0].height+r;var v=[];n.each((function(e,t,r){var n,i;if(r<s||r>l){e.visible=false;return}var o=r-s;var g=0;var y=0;if(f){g=o%d;y=Math.floor(o/d)}else{g=Math.floor(o/p);y=o%p}e.visible=true;var m=a[g];if(!m){return}c=h*y;u=(n=v[y])!==null&&n!==void 0?n:0;v[y]=((i=v[y])!==null&&i!==void 0?i:0)+m.columnWidth;e.translationX=Math.floor(u);e.translationY=Math.floor(c)}))};e.prototype.updatePageNumber=function(e){var t=this.pages;var r=t[e],n=r.startIndex,i=r.endIndex;if(n===0){this.paginationTrackingIndex=0}else if(e===t.length-1){this.paginationTrackingIndex=i}else{this.paginationTrackingIndex=Math.floor((n+i)/2)}this.pagination.update();this.pagination.updateMarkers();this.updatePositions(e);this.chart.update(ChartUpdateType.SCENE_RENDER)};e.prototype.update=function(){var e=this.item,t=e.marker.strokeWidth,r=e.label.color;this.itemSelection.each((function(e,n){var i=n.marker;e.markerFill=i.fill;e.markerStroke=i.stroke;e.markerStrokeWidth=t;e.markerFillOpacity=i.fillOpacity;e.markerStrokeOpacity=i.strokeOpacity;e.opacity=n.enabled?1:.5;e.color=r}))};e.prototype.getDatumForPoint=function(e,t){var r,n;var i=[];var o={dist:Infinity,datum:undefined};try{for(var a=__values$r(this.group.children),s=a.next();!s.done;s=a.next()){var l=s.value;if(!l.visible)continue;if(!(l instanceof MarkerLabel))continue;var u=l.computeBBox();u.grow(this.item.paddingX/2,"horizontal");u.grow(this.item.paddingY/2,"vertical");if(u.containsPoint(e,t)){return l.datum}var c=e-u.x-this.item.paddingX/2;var d=t-u.y-this.item.paddingY/2;var p=Math.pow(c,2)+Math.pow(d,2);var f=c>=0&&d>=0;if(f&&p<o.dist){o.dist=p;o.datum=l.datum}i.push(u)}}catch(e){r={error:e}}finally{try{if(s&&!s.done&&(n=a.return))n.call(a)}finally{if(r)throw r.error}}var h=BBox.merge(i);if(!h.containsPoint(e,t)){return undefined}return o.datum};e.prototype.computeBBox=function(){return this.group.computeBBox()};e.prototype.computePagedBBox=function(){var e=this.group.computeBBox();if(this.pages.length<=1){return e}var t=__read$U(this.maxPageSize,2),r=t[0],n=t[1];e.height=Math.max(n,e.height);e.width=Math.max(r,e.width);return e};e.prototype.checkLegendClick=function(e){var t=this,r=t.listeners.legendItemClick,n=t.chart,i=t.highlightManager,o=t.item.toggleSeriesVisible;var a=this.getDatumForPoint(e.offsetX,e.offsetY);if(!a){return}var s=a.id,l=a.itemId,u=a.enabled;var c=n.series.find((function(e){return e.id===s}));if(!c){return}e.consume();var d=u;if(o){d=!u;n.series.forEach((function(e){if(e.id===c.id){e.toggleSeriesItem(l,d)}else{e.toggleOtherSeriesItems(c,a,d)}}))}if(!d){i.updateHighlight(this.id)}else{i.updateHighlight(this.id,{series:c,itemId:l,datum:undefined})}this.chart.update(ChartUpdateType.PROCESS_DATA,{forceNodeDataRefresh:true});r===null||r===void 0?void 0:r({type:"click",enabled:d,itemId:l,seriesId:c.id})};e.prototype.checkLegendDoubleClick=function(e){var t,r;var n=this,i=n.listeners.legendItemDoubleClick,o=n.chart,a=n.item.toggleSeriesVisible;if(o.mode==="integrated"){return}var s=this.getDatumForPoint(e.offsetX,e.offsetY);if(!s){return}var l=s.id,u=s.itemId,c=s.seriesId;var d=o.series.find((function(e){return e.id===l}));if(!d){return}e.consume();if(a){var p=o.series.reduce((function(e,t){return __spread$w(e,t.getLegendData())}),[]);var f=p.filter((function(e){return e.enabled})).length;var h=p.find((function(e){return e.itemId===u&&e.seriesId===c}));var v=p.reduce((function(e,t){var r;var n;(r=e[n=t.seriesId])!==null&&r!==void 0?r:e[n]=0;e[t.seriesId]++;return e}),{});var g=p.reduce((function(e,t){var r;var n;if(!t.enabled)return e;(r=e[n=t.seriesId])!==null&&r!==void 0?r:e[n]=0;e[t.seriesId]++;return e}),{});var y=Object.values(v).filter((function(e){return e>1})).length===0;var m=Object.values(g).filter((function(e){return e>1})).length===0;var _=f===1&&((t=h===null||h===void 0?void 0:h.enabled)!==null&&t!==void 0?t:false);var S=m&&((r=h===null||h===void 0?void 0:h.enabled)!==null&&r!==void 0?r:false);o.series.forEach((function(e){var t=e.getLegendData();t.forEach((function(t){var r=t.itemId===u&&t.seriesId===c;var n=r||y&&_||!y&&S;e.toggleSeriesItem(t.itemId,n)}));if(e.id!==d.id){e.toggleOtherSeriesItems(d,s,undefined,S)}}))}this.chart.update(ChartUpdateType.PROCESS_DATA,{forceNodeDataRefresh:true});i===null||i===void 0?void 0:i({type:"dblclick",enabled:true,itemId:u,seriesId:d.id})};e.prototype.handleLegendMouseMove=function(e){var t=this,r=t.enabled,n=t.item.toggleSeriesVisible,i=t.listeners;if(!r){return}var o=this.computeBBox();var a=e.pageX,s=e.pageY,l=e.offsetX,u=e.offsetY;var c=this.group.visible&&o.containsPoint(l,u);if(!c){this.cursorManager.updateCursor(this.id);this.highlightManager.updateHighlight(this.id);this.tooltipManager.removeTooltip(this.id);return}e.consume();var d=this.getDatumForPoint(l,u);var p=c&&d!==undefined;if(!p){this.cursorManager.updateCursor(this.id);this.highlightManager.updateHighlight(this.id);return}var f=d?this.chart.series.find((function(e){return e.id===(d===null||d===void 0?void 0:d.id)})):undefined;if(d&&this.truncatedItems.has(d.itemId||d.id)){this.tooltipManager.updateTooltip(this.id,{pageX:a,pageY:s,offsetX:l,offsetY:u,event:e},toTooltipHtml$1({content:d.label.text}))}else{this.tooltipManager.removeTooltip(this.id)}if(n||i.legendItemClick!=null){this.cursorManager.updateCursor(this.id,"pointer")}if((d===null||d===void 0?void 0:d.enabled)&&f){this.highlightManager.updateHighlight(this.id,{series:f,itemId:d===null||d===void 0?void 0:d.itemId,datum:undefined})}else{this.highlightManager.updateHighlight(this.id)}};e.prototype.positionLegend=function(e){var t=this;var r=e.clone();if(!this.enabled||!this.data.length){return{shrinkRect:r}}var n=__read$U(this.calculateLegendDimensions(e),2),i=n[0],o=n[1];var a=0;var s=0;this.translationX=0;this.translationY=0;this.performLayout(i,o);var l=this.computePagedBBox();var u=function(){switch(t.position){case"top":return 0;case"bottom":return e.height-l.height;case"left":return 0;case"right":default:return e.width-l.width}};if(this.visible){switch(this.position){case"top":case"bottom":a=(e.width-l.width)/2;s=u();r.shrink(l.height,this.position);break;case"left":case"right":default:a=u();s=(e.height-l.height)/2;r.shrink(l.width,this.position)}this.translationX=Math.floor(-l.x+e.x+a);this.translationY=Math.floor(-l.y+e.y+s)}if(this.visible&&this.enabled&&this.data.length){var c=this.spacing;r.shrink(c,this.position);var d=l.clone();d.x+=this.translationX;d.y+=this.translationY;this.tooltipManager.updateExclusiveRect(this.id,d)}else{this.tooltipManager.updateExclusiveRect(this.id)}return{shrinkRect:r}};e.prototype.calculateLegendDimensions=function(e){var t=e.width,r=e.height;var n=t/r;var i=.5;var o=.2;var a=.25;var s=0;var l=0;switch(this.position){case"top":case"bottom":var u=n<1?Math.min(i,o*(1/n)):o;s=this.maxWidth?Math.min(this.maxWidth,t):t;l=this.maxHeight?Math.min(this.maxHeight,r):Math.round(r*u);break;case"left":case"right":default:var c=n>1?Math.min(i,a*n):a;s=this.maxWidth?Math.min(this.maxWidth,t):Math.round(t*c);l=this.maxHeight?Math.min(this.maxHeight,r):r}return[s,l]};e.className="Legend";__decorate$1K([Validate(BOOLEAN)],e.prototype,"_enabled",void 0);__decorate$1K([Validate(POSITION)],e.prototype,"position",void 0);__decorate$1K([Validate(OPT_NUMBER(0))],e.prototype,"maxWidth",void 0);__decorate$1K([Validate(OPT_NUMBER(0))],e.prototype,"maxHeight",void 0);__decorate$1K([Validate(OPT_BOOLEAN)],e.prototype,"reverseOrder",void 0);__decorate$1K([Validate(OPT_ORIENTATION)],e.prototype,"orientation",void 0);__decorate$1K([Validate(NUMBER(0))],e.prototype,"spacing",void 0);return e}();var __values$q=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var SizeMonitor=function(){function e(){}e.init=function(){var e=this;var t=window.ResizeObserver;if(t){this.resizeObserver=new t((function(t){var r,n;try{for(var i=__values$q(t),o=i.next();!o.done;o=i.next()){var a=o.value;var s=a.contentRect,l=s.width,u=s.height;e.checkSize(e.elements.get(a.target),a.target,l,u)}}catch(e){r={error:e}}finally{try{if(o&&!o.done&&(n=i.return))n.call(i)}finally{if(r)throw r.error}}}))}else{var r=function(){e.elements.forEach((function(t,r){e.checkClientSize(r,t)}))};window.setInterval(r,100)}this.ready=true};e.checkSize=function(e,t,r,n){if(e){if(!e.size||r!==e.size.width||n!==e.size.height){e.size={width:r,height:n};e.cb(e.size,t)}}};e.observe=function(e,t){if(!this.ready){this.init()}this.unobserve(e);if(this.resizeObserver){this.resizeObserver.observe(e)}this.elements.set(e,{cb:t});this.checkClientSize(e,{cb:t})};e.unobserve=function(e){if(this.resizeObserver){this.resizeObserver.unobserve(e)}this.elements.delete(e)};e.checkClientSize=function(e,t){var r=e.clientWidth?e.clientWidth:0;var n=e.clientHeight?e.clientHeight:0;this.checkSize(t,e,r,n)};e.elements=new Map;e.ready=false;return e}();function circleRectOverlap(e,t,r,n,i){var o=e.x<t?t:e.x>t+n?t+n:e.x;var a=e.y<r?r:e.y>r+i?r+i:e.y;var s=e.x-o;var l=e.y-a;var u=Math.sqrt(s*s+l*l);return u<=e.size*.5}function rectRectOverlap(e,t,r,n,i){var o=e.x+e.width>t&&e.x<t+n;var a=e.y+e.height>r&&e.y<r+i;return o&&a}function rectContainsRect(e,t,r,n,i){return t+n<e.x+e.width&&t>e.x&&r>e.y&&r+i<e.y+e.height}function isPointLabelDatum(e){return e!=null&&typeof e.point==="object"&&typeof e.label==="object"}function placeLabels(e,t,r){if(r===void 0){r=5}var n=[];e=e.map((function(e){return e.slice().sort((function(e,t){return t.point.size-e.point.size}))}));for(var i=0;i<e.length;i++){var o=n[i]=[];var a=e[i];if(!(a&&a.length&&a[0].label)){continue}var s=function(i,s){var l=a[i];var u=l.label;var c=l.point.size*.5;var d=l.point.x-u.width*.5;var p=l.point.y-c-u.height-r;var f=u.width,h=u.height;var v=!t||rectContainsRect(t,d,p,f,h);if(!v){return"continue"}var g=e.some((function(e){return e.some((function(e){return circleRectOverlap(e.point,d,p,f,h)}))}));if(g){return"continue"}var y=n.some((function(e){return e.some((function(e){return rectRectOverlap(e,d,p,f,h)}))}));if(y){return"continue"}o.push({index:i,text:u.text,x:d,y:p,width:f,height:h,datum:l})};for(var l=0,u=a.length;l<u;l++){s(l,u)}}return n}function axisLabelsOverlap(e,t){var r=[];var n=function(n){var i=e[n];var o=i.point,a=o.x,s=o.y,l=i.label.text;var u=i.label,c=u.width,d=u.height;c+=t!==null&&t!==void 0?t:0;d+=t!==null&&t!==void 0?t:0;var p=r.some((function(e){var t=rectRectOverlap(e,a,s,c,d);return t}));if(p){return{value:true}}r.push({index:n,text:l,x:a,y:s,width:c,height:d,datum:i})};for(var i=0;i<e.length;i++){var o=n(i);if(typeof o==="object")return o.value}return false}var __awaiter$e=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$e=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};function debouncedAnimationFrame(e){return buildScheduler((function(e){return requestAnimationFrame(e)}),e)}function debouncedCallback(e){return buildScheduler((function(e){return setTimeout(e,0)}),e)}function buildScheduler(e,t){var r=0;var n=false;var i;var o;var a=function(){return n};var s=function(){n=false;o===null||o===void 0?void 0:o();o=undefined;i=undefined;if(r>0){e(l)}};var l=function(){var e=r;r=0;n=true;var i=t({count:e});if(!i){s();return}i.then(s).catch(s)};return{schedule:function(){if(r===0&&!a()){e(l)}r++},await:function(){return __awaiter$e(this,void 0,void 0,(function(){return __generator$e(this,(function(e){switch(e.label){case 0:if(!a()){return[2]}if(!i){i=new Promise((function(e){o=e}))}e.label=1;case 1:if(!a())return[3,3];return[4,i];case 2:e.sent();return[3,1];case 3:return[2]}}))}))}}}var __extends$2r=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1J=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var MARKER_SHAPES=["circle","cross","diamond","heart","plus","square","triangle"];var MARKER_SHAPE=predicateWithMessage((function(e){return MARKER_SHAPES.includes(e)||Object.getPrototypeOf(e)===Marker}),"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");var SeriesMarker=function(e){__extends$2r(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.enabled=true;t.shape=Circle;t.size=6;t.maxSize=30;t.domain=undefined;t.fill=undefined;t.stroke=undefined;t.strokeWidth=1;t.fillOpacity=undefined;t.strokeOpacity=undefined;return t}__decorate$1J([Validate(BOOLEAN),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"enabled",void 0);__decorate$1J([Validate(MARKER_SHAPE),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"shape",void 0);__decorate$1J([Validate(NUMBER(0)),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"size",void 0);__decorate$1J([Validate(NUMBER(0)),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"maxSize",void 0);__decorate$1J([Validate(OPT_NUMBER_ARRAY),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"domain",void 0);__decorate$1J([Validate(OPT_COLOR_STRING),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"fill",void 0);__decorate$1J([Validate(OPT_COLOR_STRING),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"stroke",void 0);__decorate$1J([Validate(OPT_NUMBER(0)),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"strokeWidth",void 0);__decorate$1J([Validate(OPT_NUMBER(0,1)),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"fillOpacity",void 0);__decorate$1J([Validate(OPT_NUMBER(0,1)),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"strokeOpacity",void 0);return t}(ChangeDetectable);var __read$T=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var ContinuousScale=function(){function e(t,r){this.domain=t;this.range=r;this.nice=false;this.tickCount=e.defaultTickCount;this.minTickCount=0;this.maxTickCount=Infinity;this.niceDomain=null;this.strictClampByDefault=false;this.cache=null;this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}e.prototype.transform=function(e){return e};e.prototype.transformInvert=function(e){return e};e.prototype.fromDomain=function(e){if(typeof e==="number"){return e}else if(e instanceof Date){return e.getTime()}return NaN};e.prototype.getDomain=function(){if(this.nice){this.refresh();if(this.niceDomain){return this.niceDomain}}return this.domain};e.prototype.convert=function(e,t){var r=this;var n;if(!this.domain||this.domain.length<2){return NaN}this.refresh();var i=(n=t===null||t===void 0?void 0:t.strict)!==null&&n!==void 0?n:this.strictClampByDefault;var o=this.getDomain().map((function(e){return r.transform(e)}));var a=__read$T(o,2),s=a[0],l=a[1];var u=this.range;var c=__read$T(u,2),d=c[0],p=c[1];e=this.transform(e);if(e<s){return i?NaN:d}else if(e>l){return i?NaN:p}if(s===l){return(d+p)/2}else if(e===s){return d}else if(e===l){return p}return d+(this.fromDomain(e)-this.fromDomain(s))/(this.fromDomain(l)-this.fromDomain(s))*(p-d)};e.prototype.invert=function(e){var t=this;this.refresh();var r=this.getDomain().map((function(e){return t.transform(e)}));var n=__read$T(r,2),i=n[0],o=n[1];var a=this.range;var s=__read$T(a,2),l=s[0],u=s[1];var c=l>u;var d=c?u:l;var p=c?l:u;var f;if(e<d){return c?o:i}else if(e>p){return c?i:o}else if(l===u){f=this.toDomain((this.fromDomain(i)+this.fromDomain(o))/2)}else{f=this.toDomain(this.fromDomain(i)+(e-l)/(u-l)*(this.fromDomain(o)-this.fromDomain(i)))}return this.transformInvert(f)};e.prototype.didChange=function(){var e=this;var t=this.cache;var r=!t||this.cacheProps.some((function(r){return e[r]!==t[r]}));if(r){this.cache={};this.cacheProps.forEach((function(t){return e.cache[t]=e[t]}));return true}return false};e.prototype.refresh=function(){if(this.didChange()){this.update()}};e.prototype.isDenseInterval=function(e){var t=e.start,r=e.stop,n=e.interval,i=e.count;var o=this.range;var a=r-t;var s=Math.min(o[0],o[1]);var l=Math.max(o[0],o[1]);var u=l-s;var c=typeof n==="number"?n:1;i!==null&&i!==void 0?i:i=a/c;if(i>=u){Logger.warn("the configured tick interval, "+JSON.stringify(n)+", results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration.");return true}return false};e.defaultTickCount=5;e.defaultMaxTickCount=6;return e}();var __read$S=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};function clamp(e,t,r){return Math.max(t,Math.min(r,e))}var BandScale$5=function(){function e(){this.type="band";this.cache=null;this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"];this.index=new Map;this.ordinalRange=[];this._domain=[];this.range=[0,1];this._bandwidth=1;this._rawBandwidth=1;this._paddingInner=0;this._paddingOuter=0;this.round=false}e.prototype.didChange=function(){var e=this;var t=this.cache;var r=!t||this.cacheProps.some((function(r){return e[r]!==t[r]}));if(r){this.cache={};this.cacheProps.forEach((function(t){return e.cache[t]=e[t]}));return true}return false};e.prototype.refresh=function(){if(this.didChange()){this.update()}};Object.defineProperty(e.prototype,"domain",{get:function(){return this._domain},set:function(e){var t=[];this.index=new Map;var r=this.index;e.forEach((function(e){if(r.get(e)===undefined){r.set(e,t.push(e)-1)}}));this._domain=t},enumerable:false,configurable:true});e.prototype.ticks=function(){this.refresh();var e=this.interval,t=e===void 0?1:e;var r=Math.abs(Math.round(t));return this._domain.filter((function(e,t){return t%r===0}))};e.prototype.convert=function(e){this.refresh();var t=this.index.get(e);if(t===undefined){return NaN}var r=this.ordinalRange[t];if(r===undefined){return NaN}return r};e.prototype.invert=function(e){this.refresh();var t=this.ordinalRange.findIndex((function(t){return t===e}));return this.domain[t]};Object.defineProperty(e.prototype,"bandwidth",{get:function(){this.refresh();return this._bandwidth},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"rawBandwidth",{get:function(){this.refresh();return this._rawBandwidth},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"padding",{get:function(){return this._paddingInner},set:function(e){e=clamp(e,0,1);this._paddingInner=e;this._paddingOuter=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"paddingInner",{get:function(){return this._paddingInner},set:function(e){this._paddingInner=clamp(e,0,1)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"paddingOuter",{get:function(){return this._paddingOuter},set:function(e){this._paddingOuter=clamp(e,0,1)},enumerable:false,configurable:true});e.prototype.update=function(){var e=this._domain.length;if(e===0){return}var t=this.round;var r=this._paddingInner;var n=this._paddingOuter;var i=__read$S(this.range,2),o=i[0],a=i[1];var s=a-o;var l=s/Math.max(1,e+2*n-r);var u=t?Math.floor(l):l;var c=u*(e-r);var d=o+(s-c)/2;var p=t?Math.round(d):d;var f=u*(1-r);var h=t?Math.round(f):f;var v=l*(1-r);var g=[];for(var y=0;y<e;y++){g.push(p+u*y)}this._bandwidth=h;this._rawBandwidth=v;this.ordinalRange=g};return e}();var __extends$2q=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1I=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Line=function(e){__extends$2q(t,e);function t(){var t=e.call(this)||this;t.x1=0;t.y1=0;t.x2=0;t.y2=0;t.restoreOwnStyles();return t}t.prototype.computeBBox=function(){return new BBox(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)};t.prototype.isPointInPath=function(e,t){return false};t.prototype.render=function(t){var r;var n=t.ctx,i=t.forceRender,o=t.stats;if(this.dirty===RedrawType.NONE&&!i){if(o)o.nodesSkipped+=this.nodeCount.count;return}this.computeTransformMatrix();this.matrix.toContext(n);var a=this.x1;var s=this.y1;var l=this.x2;var u=this.y2;if(a===l){var c=Math.round(a)+Math.floor(this.strokeWidth)%2/2;a=c;l=c}else if(s===u){var d=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=d;u=d}n.beginPath();n.moveTo(a,s);n.lineTo(l,u);this.fillStroke(n);(r=this.fillShadow)===null||r===void 0?void 0:r.markClean();e.prototype.render.call(this,t)};t.className="Line";t.defaultStyles=Object.assign({},Shape.defaultStyles,{fill:undefined,strokeWidth:1});__decorate$1I([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"x1",void 0);__decorate$1I([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"y1",void 0);__decorate$1I([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"x2",void 0);__decorate$1I([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"y2",void 0);return t}(Shape);function isEqual$2(e,t,r){if(r===void 0){r=1e-10}return Math.abs(e-t)<r}function toFixed(e,t){if(t===void 0){t=2}var r=Math.floor(Math.log(Math.abs(e))/Math.LN10);if(r>=0||!isFinite(r)){return e.toFixed(t)}return e.toFixed(Math.abs(r)-1+t)}function mod(e,t){if(e>=0){return Math.floor(e%t)}return Math.floor(e%t+t)}var __extends$2p=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1H=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ArcType;(function(e){e[e["Open"]=0]="Open";e[e["Chord"]=1]="Chord";e[e["Round"]=2]="Round"})(ArcType||(ArcType={}));var Arc=function(e){__extends$2p(t,e);function t(){var t=e.call(this)||this;t.centerX=0;t.centerY=0;t.radius=10;t.startAngle=0;t.endAngle=Math.PI*2;t.counterClockwise=false;t.type=ArcType.Open;t.restoreOwnStyles();return t}Object.defineProperty(t.prototype,"fullPie",{get:function(){return isEqual$2(normalizeAngle360(this.startAngle),normalizeAngle360(this.endAngle))},enumerable:false,configurable:true});t.prototype.updatePath=function(){var e=this.path;e.clear();e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise);if(this.type===ArcType.Chord){e.closePath()}else if(this.type===ArcType.Round&&!this.fullPie){e.lineTo(this.centerX,this.centerY);e.closePath()}};t.prototype.computeBBox=function(){return new BBox(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)};t.prototype.isPointInPath=function(e,t){var r=this.transformPoint(e,t);var n=this.computeBBox();return this.type!==ArcType.Open&&n.containsPoint(r.x,r.y)&&this.path.isPointInPath(r.x,r.y)};t.className="Arc";t.defaultStyles=Object.assign({},Shape.defaultStyles,{lineWidth:1,fillStyle:null});__decorate$1H([ScenePathChangeDetection()],t.prototype,"centerX",void 0);__decorate$1H([ScenePathChangeDetection()],t.prototype,"centerY",void 0);__decorate$1H([ScenePathChangeDetection()],t.prototype,"radius",void 0);__decorate$1H([ScenePathChangeDetection()],t.prototype,"startAngle",void 0);__decorate$1H([ScenePathChangeDetection()],t.prototype,"endAngle",void 0);__decorate$1H([ScenePathChangeDetection()],t.prototype,"counterClockwise",void 0);__decorate$1H([ScenePathChangeDetection()],t.prototype,"type",void 0);return t}(Path);var __decorate$1G=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Caption=function(){function e(){this.node=new Text;this.enabled=false;this.text="";this.fontSize=10;this.fontFamily="sans-serif";this.spacing=e.PADDING;this._lineHeight=undefined;var t=this.node;t.textAlign="center";t.pointerEvents=PointerEvents.None}Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight=e;this.node.lineHeight=e},enumerable:false,configurable:true});e.PADDING=10;__decorate$1G([Validate(BOOLEAN)],e.prototype,"enabled",void 0);__decorate$1G([Validate(STRING),ProxyPropertyOnWrite("node")],e.prototype,"text",void 0);__decorate$1G([Validate(OPT_FONT_STYLE),ProxyPropertyOnWrite("node")],e.prototype,"fontStyle",void 0);__decorate$1G([Validate(OPT_FONT_WEIGHT),ProxyPropertyOnWrite("node")],e.prototype,"fontWeight",void 0);__decorate$1G([Validate(NUMBER(0)),ProxyPropertyOnWrite("node")],e.prototype,"fontSize",void 0);__decorate$1G([Validate(STRING),ProxyPropertyOnWrite("node")],e.prototype,"fontFamily",void 0);__decorate$1G([Validate(OPT_COLOR_STRING),ProxyPropertyOnWrite("node","fill")],e.prototype,"color",void 0);__decorate$1G([Validate(OPT_NUMBER(0))],e.prototype,"spacing",void 0);__decorate$1G([Validate(OPT_NUMBER(0))],e.prototype,"_lineHeight",void 0);return e}();function areArrayItemsStrictlyEqual(e,t){return e.length===t.length&&e.every((function(e,r){var n=t[r];if(Array.isArray(e)&&Array.isArray(n)){return areArrayItemsStrictlyEqual(e,n)}return e===n}))}function areArrayNumbersEqual(e,t){return e.length===t.length&&e.every((function(e,r){return Number(e)===Number(t[r])}))}var __extends$2o=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function ticks(e,t,r,n,i){if(r<2){return range(e,t,t-e)}var o=tickStep(e,t,r,n,i);if(isNaN(o)){return new NumericTicks(0)}e=Math.ceil(e/o)*o;t=Math.floor(t/o)*o;return range(e,t,o)}var tickMultipliers=[1,2,5,10];function tickStep(e,t,r,n,i){if(n===void 0){n=0}if(i===void 0){i=Infinity}var o=(t-e)/r;var a=Math.floor(Math.log10(o));var s=Math.pow(10,a);var l=tickMultipliers.map((function(o){var a=o*s;var l=Math.ceil((t-e)/a);var u=l>=n&&l<=i;var c=Math.abs(l-r);return{multiplier:o,isWithinBounds:u,diffCount:c}})).sort((function(e,t){if(e.isWithinBounds!==t.isWithinBounds){return e.isWithinBounds?-1:1}return e.diffCount-t.diffCount}))[0].multiplier;if(!l||isNaN(l)){return NaN}return l*s}function singleTickDomain(e,t){var r=Math.floor(Math.log10(t-e));var n=Math.pow(10,r);return tickMultipliers.map((function(r){var i=r*n;var o=Math.floor(e/i)*i;var a=Math.ceil(t/i)*i;var s=1-(t-e)/(a-o);var l=[o,a];return{error:s,domain:l}})).sort((function(e,t){return e.error-t.error}))[0].domain}var NumericTicks=function(e){__extends$2o(t,e);function t(t,r){var n=e.call(this)||this;if(r){for(var i=0,o=r.length;i<o;i++){n[i]=r[i]}}n.fractionDigits=t;return n}return t}(Array);function range(e,t,r){var n=function(e){var t,r;var n=e.split("e");return Math.max(((r=(t=n[0].split(".")[1])===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0)-Number(n[1]),0)};var i=n((r%1).toExponential());var o=Math.pow(10,i);var a=Math.ceil((t-e)/r);var s=new NumericTicks(i);for(var l=0;l<=a;l++){var u=e+r*l;s.push(Math.round(u*o)/o)}return s}var CONSTANTS={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function dayOfYear(e,t){if(t===void 0){t=new Date(e.getFullYear(),0,1)}var r=e.getTimezoneOffset()-t.getTimezoneOffset();var n=e.getTime()-t.getTime()+r*6e4;var i=36e5*24;return Math.floor(n/i)}function weekOfYear(e,t){var r=new Date(e.getFullYear(),0,1);var n=r.getDay();var i=(t-n+7)%7;var o=new Date(e.getFullYear(),0,i+1);if(o<=e){return Math.floor(dayOfYear(e,o)/7)+1}return 0}var SUNDAY=0;var MONDAY=1;var THURSDAY=4;function isoWeekOfYear(e,t){if(t===void 0){t=e.getFullYear()}var r=new Date(t,0,1);var n=r.getDay();var i=(THURSDAY-n+7)%7;var o=new Date(t,0,i-(THURSDAY-MONDAY)+1);if(o<=e){return Math.floor(dayOfYear(e,o)/7)+1}return isoWeekOfYear(e,t-1)}function timezone(e){var t=e.getTimezoneOffset();var r=Math.abs(t);var n=t>0?"-":"+";return""+n+pad(Math.floor(r/60),2,"0")+pad(Math.floor(r%60),2,"0")}var FORMATTERS={a:function(e){return CONSTANTS.shortDays[e.getDay()]},A:function(e){return CONSTANTS.days[e.getDay()]},b:function(e){return CONSTANTS.shortMonths[e.getMonth()]},B:function(e){return CONSTANTS.months[e.getMonth()]},c:"%x, %X",d:function(e,t){return pad(e.getDate(),2,t!==null&&t!==void 0?t:"0")},e:"%_d",f:function(e,t){return pad(e.getMilliseconds()*1e3,6,t!==null&&t!==void 0?t:"0")},H:function(e,t){return pad(e.getHours(),2,t!==null&&t!==void 0?t:"0")},I:function(e,t){var r=e.getHours()%12;return r===0?"12":pad(r,2,t!==null&&t!==void 0?t:"0")},j:function(e,t){return pad(dayOfYear(e)+1,3,t!==null&&t!==void 0?t:"0")},m:function(e,t){return pad(e.getMonth()+1,2,t!==null&&t!==void 0?t:"0")},M:function(e,t){return pad(e.getMinutes(),2,t!==null&&t!==void 0?t:"0")},L:function(e,t){return pad(e.getMilliseconds(),3,t!==null&&t!==void 0?t:"0")},p:function(e){return e.getHours()<12?"AM":"PM"},Q:function(e){return String(e.getTime())},s:function(e){return String(Math.floor(e.getTime()/1e3))},S:function(e,t){return pad(e.getSeconds(),2,t!==null&&t!==void 0?t:"0")},u:function(e){var t=e.getDay();if(t<1)t+=7;return String(t%7)},U:function(e,t){return pad(weekOfYear(e,SUNDAY),2,t!==null&&t!==void 0?t:"0")},V:function(e,t){return pad(isoWeekOfYear(e),2,t!==null&&t!==void 0?t:"0")},w:function(e,t){return pad(e.getDay(),2,t!==null&&t!==void 0?t:"0")},W:function(e,t){return pad(weekOfYear(e,MONDAY),2,t!==null&&t!==void 0?t:"0")},x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:function(e,t){return pad(e.getFullYear()%100,2,t!==null&&t!==void 0?t:"0")},Y:function(e,t){return pad(e.getFullYear(),4,t!==null&&t!==void 0?t:"0")},Z:function(e){return timezone(e)},"%":function(){return"%"}};var PADS={_:" ",0:"0","-":""};function pad(e,t,r){var n=String(Math.floor(e));if(n.length>=t){return n}return""+r.repeat(t-n.length)+n}function buildFormatter(e){var t=[];while(e.length>0){var r=e.indexOf("%");if(r!==0){var n=r>0?e.substring(0,r):e;t.push(n)}if(r<0)break;var i=e[r+1];var o=PADS[i];if(o!=null){r++}var a=e[r+1];var s=FORMATTERS[a];if(typeof s==="function"){t.push([s,o])}else if(typeof s==="string"){var l=buildFormatter(s);t.push([l,o])}else{t.push(""+(o!==null&&o!==void 0?o:"")+a)}e=e.substring(r+2)}return function(e){var r=typeof e==="number"?new Date(e):e;return t.map((function(e){return typeof e==="string"?e:e[0](r,e[1])})).join("")}}var __extends$2n=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __values$p=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$R=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$v=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$R(arguments[t]));return e};var _a$2;var DefaultTimeFormats;(function(e){e[e["MILLISECOND"]=0]="MILLISECOND";e[e["SECOND"]=1]="SECOND";e[e["MINUTE"]=2]="MINUTE";e[e["HOUR"]=3]="HOUR";e[e["WEEK_DAY"]=4]="WEEK_DAY";e[e["SHORT_MONTH"]=5]="SHORT_MONTH";e[e["MONTH"]=6]="MONTH";e[e["SHORT_YEAR"]=7]="SHORT_YEAR";e[e["YEAR"]=8]="YEAR"})(DefaultTimeFormats||(DefaultTimeFormats={}));var formatStrings=(_a$2={},_a$2[DefaultTimeFormats.MILLISECOND]=".%L",_a$2[DefaultTimeFormats.SECOND]=":%S",_a$2[DefaultTimeFormats.MINUTE]="%I:%M",_a$2[DefaultTimeFormats.HOUR]="%I %p",_a$2[DefaultTimeFormats.WEEK_DAY]="%a",_a$2[DefaultTimeFormats.SHORT_MONTH]="%b %d",_a$2[DefaultTimeFormats.MONTH]="%B",_a$2[DefaultTimeFormats.SHORT_YEAR]="%y",_a$2[DefaultTimeFormats.YEAR]="%Y",_a$2);function toNumber(e){return e instanceof Date?e.getTime():e}var TimeScale$1=function(e){__extends$2n(t,e);function t(){var t=e.call(this,[new Date(2022,11,7),new Date(2022,11,8)],[0,1])||this;t.type="time";t.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"];t.year=year;t.month=month;t.week=sunday;t.day=day;t.hour=hour;t.minute=minute;t.second=second;t.millisecond=millisecond;t.tickIntervals=[[t.second,1,durationSecond],[t.second,5,5*durationSecond],[t.second,15,15*durationSecond],[t.second,30,30*durationSecond],[t.minute,1,durationMinute],[t.minute,5,5*durationMinute],[t.minute,15,15*durationMinute],[t.minute,30,30*durationMinute],[t.hour,1,durationHour],[t.hour,3,3*durationHour],[t.hour,6,6*durationHour],[t.hour,12,12*durationHour],[t.day,1,durationDay],[t.day,2,2*durationDay],[t.week,1,durationWeek],[t.week,2,2*durationWeek],[t.week,3,3*durationWeek],[t.month,1,durationMonth],[t.month,2,2*durationMonth],[t.month,3,3*durationMonth],[t.month,4,4*durationMonth],[t.month,6,6*durationMonth],[t.year,1,durationYear]];return t}t.prototype.toDomain=function(e){return new Date(e)};t.prototype.calculateDefaultTickFormat=function(e){var t,r;if(e===void 0){e=[]}var n=DefaultTimeFormats.YEAR;var i=function(e){if(e<n){n=e}};try{for(var o=__values$p(e),a=o.next();!a.done;a=o.next()){var s=a.value;var l=this.getLowestGranularityFormat(s);i(l)}}catch(e){t={error:e}}finally{try{if(a&&!a.done&&(r=o.return))r.call(o)}finally{if(t)throw t.error}}var u=toNumber(e[0]);var c=toNumber(e[e.length-1]);var d=new Date(u).getFullYear();var p=new Date(c).getFullYear();var f=p-d>0;return this.buildFormatString(n,f)};t.prototype.buildFormatString=function(e,t){var r=[formatStrings[e]];var n=0;var i=this.getDomain();var o=Math.min.apply(Math,__spread$v(i.map(toNumber)));var a=Math.max.apply(Math,__spread$v(i.map(toNumber)));var s=a-o;switch(e){case DefaultTimeFormats.SECOND:if(s/durationMinute>1){r.push(formatStrings[DefaultTimeFormats.MINUTE])}case DefaultTimeFormats.MINUTE:if(s/durationHour>1){r.push(formatStrings[DefaultTimeFormats.HOUR])}case DefaultTimeFormats.HOUR:n=r.length;if(s/durationDay>1){r.push(formatStrings[DefaultTimeFormats.WEEK_DAY])}case DefaultTimeFormats.WEEK_DAY:if(s/durationWeek>1||t){var l=r.indexOf(formatStrings[DefaultTimeFormats.WEEK_DAY]);if(l>-1){r.splice(l,1,formatStrings[DefaultTimeFormats.SHORT_MONTH])}}case DefaultTimeFormats.SHORT_MONTH:case DefaultTimeFormats.MONTH:if(s/durationYear>1||t){r.push(formatStrings[DefaultTimeFormats.YEAR])}}if(n<r.length){r=__spread$v(r.slice(0,n),[r.slice(n).join(" ")])}if(n>0){r=__spread$v(r.slice(0,n).reverse(),r.slice(n));if(n<r.length){r.splice(n,0," ")}}return r.join("")};t.prototype.getLowestGranularityFormat=function(e){if(this.second.floor(e)<e){return DefaultTimeFormats.MILLISECOND}else if(this.minute.floor(e)<e){return DefaultTimeFormats.SECOND}else if(this.hour.floor(e)<e){return DefaultTimeFormats.MINUTE}else if(this.day.floor(e)<e){return DefaultTimeFormats.HOUR}else if(this.month.floor(e)<e){if(this.week.floor(e)<e){return DefaultTimeFormats.WEEK_DAY}return DefaultTimeFormats.SHORT_MONTH}else if(this.year.floor(e)<e){return DefaultTimeFormats.MONTH}return DefaultTimeFormats.YEAR};t.prototype.defaultTickFormat=function(e){var t=this.calculateDefaultTickFormat(e);return function(e){return buildFormatter(t)(e)}};t.prototype.getTickInterval=function(e){var t;var r=e.start,n=e.stop,i=e.count,o=e.minCount,a=e.maxCount;var s=this.tickIntervals;var l;var u;var c=i!==null&&i!==void 0?i:ContinuousScale.defaultTickCount;var d=Math.abs(n-r)/Math.max(c,1);var p=0;while(p<s.length&&d>s[p][2]){p++}if(p===0){u=Math.max(tickStep(r,n,c,o,a),1);l=this.millisecond}else if(p===s.length){var f=r/durationYear;var h=n/durationYear;u=tickStep(f,h,c,o,a);l=this.year}else{var v=d-s[p-1][2];var g=s[p][2]-d;var y=v<g?p-1:p;t=__read$R(s[y],2),l=t[0],u=t[1]}return l.every(u)};t.prototype.invert=function(t){return new Date(e.prototype.invert.call(this,t))};t.prototype.ticks=function(){if(!this.domain||this.domain.length<2){return[]}this.refresh();var e=__read$R(this.getDomain().map(toNumber),2),t=e[0],r=e[1];if(this.interval!==undefined){return this.getTicksForInterval({start:t,stop:r})}if(this.nice){var n=this.tickCount;if(n===2){return this.niceDomain}if(n===1){return this.niceDomain.slice(0,1)}}return this.getDefaultTicks({start:t,stop:r})};t.prototype.getDefaultTicks=function(e){var t=e.start,r=e.stop;var n=this.getTickInterval({start:t,stop:r,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return n?n.range(new Date(t),new Date(r)):[]};t.prototype.getTicksForInterval=function(e){var t=e.start,r=e.stop;var n=this,i=n.interval,o=n.tickIntervals;if(!i){return[]}if(i instanceof TimeInterval){var a=i.range(new Date(t),new Date(r));if(this.isDenseInterval({start:t,stop:r,interval:i,count:a.length})){return this.getDefaultTicks({start:t,stop:r})}return a}var s=Math.abs(i);if(this.isDenseInterval({start:t,stop:r,interval:s})){return this.getDefaultTicks({start:t,stop:r})}var l=__spread$v(o);l.reverse();var u=l.find((function(e){return s%e[2]===0}));if(u){var c=u[0].every(s/(u[2]/u[1]));return c.range(new Date(t),new Date(r))}var d=new Date(t);var p=new Date(r);var f=[];while(d<=p){f.push(d);d=new Date(d);d.setMilliseconds(d.getMilliseconds()+s)}return f};t.prototype.tickFormat=function(e){var t=e.ticks,r=e.specifier;return r==undefined?this.defaultTickFormat(t):buildFormatter(r)};t.prototype.update=function(){if(!this.domain||this.domain.length<2){return}if(this.nice){this.updateNiceDomain()}};t.prototype.updateNiceDomain=function(){var e=4;var t=__read$R(this.domain,2),r=t[0],n=t[1];for(var i=0;i<e;i++){this.updateNiceDomainIteration(r,n);var o=__read$R(this.niceDomain,2),a=o[0],s=o[1];if(toNumber(r)===toNumber(a)&&toNumber(n)===toNumber(s)){break}r=a;n=s}};t.prototype.updateNiceDomainIteration=function(e,t){var r=toNumber(e);var n=toNumber(t);var i=this.interval;var o;if(i instanceof TimeInterval){o=i}else{var a=typeof i==="number"?(n-r)/Math.max(i,1):this.tickCount;o=this.getTickInterval({start:r,stop:n,count:a,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(o){var s=o.range(e,t,true);var l=s[0];var u=s[s.length-1];this.niceDomain=[l,u]}};return t}(ContinuousScale);var __read$Q=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$u=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$Q(arguments[t]));return e};var _a$1;var group=function(e){return"("+e+")"};var optionalGroup=function(e){return group(e)+"?"};var nonCapturingGroup=function(e){return optionalGroup("?:"+e)};var formatRegEx=function(){var e=".";var t="[<>=^]";var r="[+\\-( ]";var n="[$#]";var i="0";var o="\\d+";var a=",";var s="\\d+";var l="~";var u="[%a-z]";return new RegExp(["^",nonCapturingGroup(""+optionalGroup(e)+group(t)),optionalGroup(r),optionalGroup(n),optionalGroup(i),optionalGroup(o),optionalGroup(a),nonCapturingGroup("\\."+group(s)),optionalGroup(l),optionalGroup(u),"$"].join(""),"i")}();var surroundedRegEx=function(){var e=".*?";var t=".+?";var r=".*?";return new RegExp(["^",group(e),"#\\{"+group(t)+"\\}",group(r),"$"].join(""))}();function parseFormatter(e){var t;var r;var n;var i=e.match(surroundedRegEx);if(i){t=__read$Q(i,4),r=t[1],e=t[2],n=t[3]}var o=e.match(formatRegEx);if(!o){throw new Error("The number formatter is invalid: "+e)}var a=__read$Q(o,11),s=a[1],l=a[2],u=a[3],c=a[4],d=a[5],p=a[6],f=a[7],h=a[8],v=a[9],g=a[10];return{fill:s,align:l,sign:u,symbol:c,zero:d,width:parseInt(p),comma:f,precision:parseInt(h),trim:Boolean(v),type:g,prefix:r,suffix:n}}function format(e){var t=typeof e==="string"?parseFormatter(e):e;var r=t.fill,n=t.align,i=t.sign,o=i===void 0?"-":i,a=t.symbol,s=t.zero,l=t.width,u=t.comma,c=t.type,d=t.prefix,p=d===void 0?"":d,f=t.suffix,h=f===void 0?"":f;var v=t.precision,g=t.trim;var y;if(!c){y=decimalTypes["g"];g=true}else if(c in decimalTypes&&c in integerTypes){y=isNaN(v)?integerTypes[c]:decimalTypes[c]}else if(c in decimalTypes){y=decimalTypes[c]}else if(c in integerTypes){y=integerTypes[c]}else{throw new Error("The number formatter type is invalid: "+c)}if(isNaN(v)){v=c?6:12}return function(e){var t=y(e,v);if(g){t=removeTrailingZeros(t)}if(u){t=insertSeparator(t,u)}t=addSign(e,t,o);if(a&&a!=="#"){t=""+a+t}if(a==="#"&&c==="x"){t="0x"+t}if(c==="s"){t=""+t+getSIPrefix(e)}if(c==="%"||c==="p"){t=t+"%"}if(!isNaN(l)){t=addPadding(t,l,r||s,n)}t=""+p+t+h;return t}}var absFloor=function(e){return Math.floor(Math.abs(e))};var integerTypes={b:function(e){return absFloor(e).toString(2)},c:function(e){return String.fromCharCode(e)},d:function(e){return Math.round(Math.abs(e)).toFixed(0)},o:function(e){return absFloor(e).toString(8)},x:function(e){return absFloor(e).toString(16)},X:function(e){return integerTypes.x(e).toUpperCase()},n:function(e){return integerTypes.d(e)},"%":function(e){return""+absFloor(e*100).toFixed(0)}};var decimalTypes={e:function(e,t){return Math.abs(e).toExponential(t)},E:function(e,t){return decimalTypes.e(e,t).toUpperCase()},f:function(e,t){return Math.abs(e).toFixed(t)},F:function(e,t){return decimalTypes.f(e,t).toUpperCase()},g:function(e,t){if(e===0){return"0"}var r=Math.abs(e);var n=Math.floor(Math.log10(r));if(n>=-4&&n<t){return r.toFixed(t-1-n)}return r.toExponential(t-1)},G:function(e,t){return decimalTypes.g(e,t).toUpperCase()},n:function(e,t){return decimalTypes.g(e,t)},p:function(e,t){return decimalTypes.r(e*100,t)},r:function(e,t){if(e===0){return"0"}var r=Math.abs(e);var n=Math.floor(Math.log10(r));var i=n-(t-1);if(i<=0){return r.toFixed(-i)}var o=Math.pow(10,i);return(Math.round(r/o)*o).toFixed()},s:function(e,t){var r=getSIPrefixPower(e);return decimalTypes.r(e/Math.pow(10,r),t)},"%":function(e,t){return decimalTypes.f(e*100,t)}};function removeTrailingZeros(e){return e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function insertSeparator(e,t){var r=e.indexOf(".");if(r<0){r=e.length}var n=e.substring(0,r).split("");var i=e.substring(r);for(var o=n.length-3;o>0;o-=3){n.splice(o,0,t)}return""+n.join("")+i}function getSIPrefix(e){return siPrefixes[getSIPrefixPower(e)]}function getSIPrefixPower(e){var t=Math.log10(Math.abs(e));var r=Math.floor(t/3)*3;return Math.max(minSIPrefix,Math.min(maxSIPrefix,r))}var minSIPrefix=-24;var maxSIPrefix=24;var siPrefixes=(_a$1={},_a$1[minSIPrefix]="y",_a$1[-21]="z",_a$1[-18]="a",_a$1[-15]="f",_a$1[-12]="p",_a$1[-9]="n",_a$1[-6]="",_a$1[-3]="m",_a$1[0]="",_a$1[3]="k",_a$1[6]="M",_a$1[9]="G",_a$1[12]="T",_a$1[15]="P",_a$1[18]="E",_a$1[21]="Z",_a$1[maxSIPrefix]="Y",_a$1);var minusSign="";function addSign(e,t,r){if(r===void 0){r=""}if(r==="("){return e>=0?t:"("+t+")"}var n=r==="+"?"+":"";return""+(e>=0?n:minusSign)+t}function addPadding(e,t,r,n){if(r===void 0){r=" "}if(n===void 0){n=">"}var i=e;if(n===">"||!n){i=i.padStart(t,r)}else if(n==="<"){i=i.padEnd(t,r)}else if(n==="^"){var o=Math.max(0,t-i.length);var a=Math.ceil(o/2);var s=Math.floor(o/2);i=i.padStart(a+i.length,r);i=i.padEnd(s+i.length,r)}return i}function tickFormat(e,t){var r=parseFormatter(t||",f");if(isNaN(r.precision)){if(r.type==="f"||r.type==="%"){r.precision=Math.max.apply(Math,__spread$u(e.map((function(e){if(typeof e!=="number"||e===0){return 0}var t=Math.floor(Math.log10(Math.abs(e)));var n=r.type?6:12;var i=e.toExponential(n-1).replace(/\.?0+e/,"e");var o=i.indexOf(".");if(o<0){return t>=0?0:-t}var a=i.indexOf("e")-o;return Math.max(0,a-t-1)}))))}else if(!r.type||r.type in decimalTypes){r.precision=Math.max.apply(Math,__spread$u(e.map((function(e){if(typeof e!=="number"){return 0}var t=e.toExponential((r.type?6:12)-1).replace(/\.?0+e/,"e");return t.substring(0,t.indexOf("e")).replace(".","").length}))))}}var n=format(r);return function(e){return n(Number(e))}}var __extends$2m=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1F=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$P=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$t=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$P(arguments[t]));return e};var identity=function(e){return e};var LogScale=function(e){__extends$2m(t,e);function t(){var t=e.call(this,[1,10],[0,1])||this;t.type="log";t.base=10;t.cacheProps=["domain","range","nice","tickCount","base"];t.baseLog=identity;t.basePow=identity;t.log=function(e){return t.domain[0]>=0?t.baseLog(e):-t.baseLog(-e)};t.pow=function(e){return t.domain[0]>=0?t.basePow(e):-t.basePow(-e)};return t}t.prototype.toDomain=function(e){return e};t.prototype.transform=function(e){return this.domain[0]>=0?Math.log(e):-Math.log(-e)};t.prototype.transformInvert=function(e){return this.domain[0]>=0?Math.exp(e):-Math.exp(-e)};t.prototype.update=function(){if(!this.domain||this.domain.length<2){return}this.updateLogFn();this.updatePowFn();if(this.nice){this.updateNiceDomain()}};t.prototype.updateLogFn=function(){var e=this.base;var t;if(e===10){t=Math.log10}else if(e===Math.E){t=Math.log}else if(e===2){t=Math.log2}else{var r=Math.log(e);t=function(e){return Math.log(e)/r}}this.baseLog=t};t.prototype.updatePowFn=function(){var e=this.base;var r;if(e===10){r=t.pow10}else if(e===Math.E){r=Math.exp}else{r=function(t){return Math.pow(e,t)}}this.basePow=r};t.prototype.updateNiceDomain=function(){var e=__read$P(this.domain,2),t=e[0],r=e[1];var n=this.pow(Math.floor(this.log(t)));var i=this.pow(Math.ceil(this.log(r)));this.niceDomain=[n,i]};t.pow10=function(e){return e>=0?Math.pow(10,e):1/Math.pow(10,-e)};t.prototype.ticks=function(){var e=this;var t;var r=(t=this.tickCount)!==null&&t!==void 0?t:10;if(!this.domain||this.domain.length<2||r<1){return[]}this.refresh();var n=this.base;var i=__read$P(this.getDomain(),2),o=i[0],a=i[1];var s=this.log(o);var l=this.log(a);if(this.interval){var u=Math.abs(this.interval);var c=Math.abs(l-s);var d=range(s,l,Math.min(c,u)).map((function(t){return e.pow(t)})).filter((function(e){return e>=o&&e<=a}));if(!this.isDenseInterval({start:o,stop:a,interval:u,count:d.length})){return d}}var p=n%1===0;var f=l-s>=r;if(!p||f){return ticks(s,l,Math.min(l-s,r)).map((function(t){return e.pow(t)}))}var h=[];var v=o>0;s=Math.floor(s)-1;l=Math.round(l)+1;var g=Math.min.apply(Math,__spread$t(this.range));var y=Math.max.apply(Math,__spread$t(this.range));var m=(y-g)/r;var _=Infinity;for(var S=s;S<=l;S++){var b=this.convert(this.pow(S+1));for(var C=1;C<n;C++){var x=v?C:n-C+1;var w=this.pow(S)*x;var O=this.convert(w);var T=Math.abs(_-O);var E=Math.abs(O-b);var P=T>=m&&E>=m;if(w>=o&&w<=a&&(C===1||P)){h.push(w);_=O}}}return h};t.prototype.tickFormat=function(e){var t=e.count,r=e.ticks,n=e.specifier;var i=this.base;if(n==null){n=i===10?".0e":","}if(typeof n!=="function"){n=format(n)}if(t===Infinity){return n}if(t==null){t=10}r=r!==null&&r!==void 0?r:this.ticks();return function(e){return n(e)}};__decorate$1F([Validate(NUMBER(0))],t.prototype,"base",void 0);return t}(ContinuousScale);function Default(e,t){if(t===void 0){t=[undefined]}return addTransformToInstanceProperty((function(r,n,i){if(t.includes(i)){return e}return i}))}function extent$4(e){var t=e.length;if(t===0){return undefined}var r=Infinity;var n=-Infinity;for(var i=0;i<t;i++){var o=e[i];if(o instanceof Date){o=o.getTime()}if(typeof o!=="number"){continue}if(o<r){r=o}if(o>n){n=o}}var a=[r,n];if(a.some((function(e){return!isFinite(e)}))){return undefined}return a}var __decorate$1E=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Label$1=function(){function e(){this.enabled=true;this.fontSize=12;this.fontFamily="Verdana, sans-serif";this.fontStyle=undefined;this.fontWeight=undefined;this.color="rgba(70, 70, 70, 1)"}e.prototype.getFont=function(){return getFont(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)};__decorate$1E([Validate(BOOLEAN)],e.prototype,"enabled",void 0);__decorate$1E([Validate(NUMBER(0))],e.prototype,"fontSize",void 0);__decorate$1E([Validate(STRING)],e.prototype,"fontFamily",void 0);__decorate$1E([Validate(OPT_FONT_STYLE)],e.prototype,"fontStyle",void 0);__decorate$1E([Validate(OPT_FONT_WEIGHT)],e.prototype,"fontWeight",void 0);__decorate$1E([Validate(COLOR_STRING)],e.prototype,"color",void 0);return e}();function calculateLabelRotation(e){var t=e.parallelFlipRotation,r=t===void 0?0:t,n=e.regularFlipRotation,i=n===void 0?0:n;var o=e.rotation?normalizeAngle360(toRadians$1(e.rotation)):0;var a=!o&&r>=0&&r<=Math.PI?-1:1;var s=!o&&i>=0&&i<=Math.PI?-1:1;var l=0;if(e.parallel){l=a*Math.PI/2}else if(s===-1){l=Math.PI}return{labelRotation:o,autoRotation:l,parallelFlipFlag:a,regularFlipFlag:s}}var __decorate$1D=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$O=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$O(arguments[t]));return e};var TICK_COUNT=predicateWithMessage((function(e,t){return NUMBER(0)(e,t)||e instanceof TimeInterval}),"expecting a tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'");var OPT_TICK_COUNT=predicateWithMessage((function(e,t){return OPTIONAL(e,t,TICK_COUNT)}),"expecting an optional tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'");var OPT_TICK_INTERVAL=predicateWithMessage((function(e,t){return OPTIONAL(e,t,(function(e,t){return e!==0&&NUMBER(0)(e,t)||e instanceof TimeInterval}))}),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'");var GRID_STYLE_KEYS=["stroke","lineDash"];var GRID_STYLE=predicateWithMessage(ARRAY(undefined,(function(e){for(var t in e){if(!GRID_STYLE_KEYS.includes(t)){return false}}return true})),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");var Tags;(function(e){e[e["TickLine"]=0]="TickLine";e[e["TickLabel"]=1]="TickLabel";e[e["GridLine"]=2]="GridLine";e[e["GridArc"]=3]="GridArc";e[e["AxisLine"]=4]="AxisLine"})(Tags||(Tags={}));var AxisLine=function(){function e(){this.width=1;this.color="rgba(195, 195, 195, 1)"}__decorate$1D([Validate(NUMBER(0))],e.prototype,"width",void 0);__decorate$1D([Validate(OPT_COLOR_STRING)],e.prototype,"color",void 0);return e}();var AxisTick=function(){function e(){this.width=1;this.size=6;this.color="rgba(195, 195, 195, 1)";this.count=undefined;this.interval=undefined;this.values=undefined;this.minSpacing=NaN;this.maxSpacing=NaN}__decorate$1D([Validate(NUMBER(0))],e.prototype,"width",void 0);__decorate$1D([Validate(NUMBER(0))],e.prototype,"size",void 0);__decorate$1D([Validate(OPT_COLOR_STRING)],e.prototype,"color",void 0);__decorate$1D([Validate(OPT_TICK_COUNT),Deprecated("Use tick.interval or tick.minSpacing and tick.maxSpacing instead")],e.prototype,"count",void 0);__decorate$1D([Validate(OPT_TICK_INTERVAL)],e.prototype,"interval",void 0);__decorate$1D([Validate(OPT_ARRAY())],e.prototype,"values",void 0);__decorate$1D([Validate(AND(NUMBER_OR_NAN(1),LESS_THAN("maxSpacing"))),Default(NaN)],e.prototype,"minSpacing",void 0);__decorate$1D([Validate(AND(NUMBER_OR_NAN(1),GREATER_THAN("minSpacing"))),Default(NaN)],e.prototype,"maxSpacing",void 0);return e}();var AxisLabel=function(){function e(){this.fontStyle=undefined;this.fontWeight=undefined;this.fontSize=12;this.fontFamily="Verdana, sans-serif";this.padding=5;this.minSpacing=NaN;this.color="rgba(87, 87, 87, 1)";this.rotation=undefined;this.autoRotate=undefined;this.autoRotateAngle=335;this.avoidCollisions=true;this.mirrored=false;this.parallel=false;this.formatter=undefined;this.format=undefined}__decorate$1D([Validate(OPT_FONT_STYLE)],e.prototype,"fontStyle",void 0);__decorate$1D([Validate(OPT_FONT_WEIGHT)],e.prototype,"fontWeight",void 0);__decorate$1D([Validate(NUMBER(1))],e.prototype,"fontSize",void 0);__decorate$1D([Validate(STRING)],e.prototype,"fontFamily",void 0);__decorate$1D([Validate(NUMBER(0))],e.prototype,"padding",void 0);__decorate$1D([Validate(NUMBER_OR_NAN()),Default(NaN)],e.prototype,"minSpacing",void 0);__decorate$1D([Validate(OPT_COLOR_STRING)],e.prototype,"color",void 0);__decorate$1D([Validate(OPT_NUMBER(-360,360))],e.prototype,"rotation",void 0);__decorate$1D([Validate(OPT_BOOLEAN)],e.prototype,"autoRotate",void 0);__decorate$1D([Validate(NUMBER(-360,360))],e.prototype,"autoRotateAngle",void 0);__decorate$1D([Validate(BOOLEAN)],e.prototype,"avoidCollisions",void 0);__decorate$1D([Validate(BOOLEAN)],e.prototype,"mirrored",void 0);__decorate$1D([Validate(BOOLEAN)],e.prototype,"parallel",void 0);__decorate$1D([Validate(OPT_STRING)],e.prototype,"format",void 0);return e}();var Axis=function(){function e(e){this.id=createId$1(this);this.nice=true;this.dataDomain=[];this.axisGroup=new Group({name:this.id+"-axis",zIndex:Layers.AXIS_ZINDEX});this.lineNode=this.axisGroup.appendChild(new Line);this.tickLineGroup=this.axisGroup.appendChild(new Group({name:this.id+"-Axis-tick-lines",zIndex:Layers.AXIS_ZINDEX}));this.tickLabelGroup=this.axisGroup.appendChild(new Group({name:this.id+"-Axis-tick-labels",zIndex:Layers.AXIS_ZINDEX}));this.crossLineGroup=new Group({name:this.id+"-CrossLines"});this.gridGroup=new Group({name:this.id+"-Axis-grid"});this.gridLineGroup=this.gridGroup.appendChild(new Group({name:this.id+"-gridLines",zIndex:Layers.AXIS_GRID_ZINDEX}));this.gridArcGroup=this.gridGroup.appendChild(new Group({name:this.id+"-gridArcs",zIndex:Layers.AXIS_GRID_ZINDEX}));this.tickLineGroupSelection=Selection.select(this.tickLineGroup,Line);this.tickLabelGroupSelection=Selection.select(this.tickLabelGroup,Text);this.gridLineGroupSelection=Selection.select(this.gridLineGroup,Line);this.gridArcGroupSelection=Selection.select(this.gridArcGroup,Arc);this._crossLines=[];this.line=new AxisLine;this.tick=new AxisTick;this.label=new AxisLabel;this.translation={x:0,y:0};this.rotation=0;this.layout={label:{align:"center",baseline:"middle",rotation:0,fractionDigits:0,padding:this.label.padding,format:this.label.format}};this.requestedRange=[0,1];this._visibleRange=[0,1];this._title=undefined;this._gridLength=0;this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}];this._radialGrid=false;this.fractionDigits=0;this.gridPadding=0;this.seriesAreaPadding=0;this.thickness=0;this._scale=e;this.refreshScale()}Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"crossLines",{get:function(){return this._crossLines},set:function(e){var t=this;var r,n;(r=this._crossLines)===null||r===void 0?void 0:r.forEach((function(e){return t.detachCrossLine(e)}));this._crossLines=e;(n=this._crossLines)===null||n===void 0?void 0:n.forEach((function(e){t.attachCrossLine(e);t.initCrossLine(e)}))},enumerable:false,configurable:true});e.prototype.attachCrossLine=function(e){this.crossLineGroup.appendChild(e.group)};e.prototype.detachCrossLine=function(e){this.crossLineGroup.removeChild(e.group)};e.prototype.destroy=function(){};e.prototype.refreshScale=function(){var e=this;var t;this.requestedRange=this.scale.range.slice();(t=this.crossLines)===null||t===void 0?void 0:t.forEach((function(t){e.initCrossLine(t)}))};e.prototype.updateRange=function(){var e;var t=this,r=t.requestedRange,n=t.visibleRange,i=t.scale;var o=(r[1]-r[0])/(n[1]-n[0]);var a=o*n[0];var s=r[0]-a;i.range=[s,s+o];(e=this.crossLines)===null||e===void 0?void 0:e.forEach((function(e){e.clippedRange=[r[0],r[1]]}))};e.prototype.setCrossLinesVisible=function(e){this.crossLineGroup.visible=e};e.prototype.attachAxis=function(e,t){e.insertBefore(this.gridGroup,t);e.insertBefore(this.axisGroup,t);e.insertBefore(this.crossLineGroup,t)};e.prototype.detachAxis=function(e){e.removeChild(this.gridGroup);e.removeChild(this.axisGroup);e.removeChild(this.crossLineGroup)};e.prototype.inRange=function(e,t,r){if(t===void 0){t=0}if(r===void 0){r=0}return this.inRangeEx(e,t,r)===0};e.prototype.inRangeEx=function(e,t,r){if(t===void 0){t=0}if(r===void 0){r=0}var n=this.range;var i=Math.min(n[0],n[1]);var o=Math.max(n[0],n[1]);if(e+t<i-r){return-1}if(e>o+r){return 1}return 0};Object.defineProperty(e.prototype,"range",{get:function(){return this.requestedRange},set:function(e){this.requestedRange=e.slice();this.updateRange()},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"visibleRange",{get:function(){return this._visibleRange.slice()},set:function(e){if(e&&e.length===2){var t=__read$O(e,2),r=t[0],n=t[1];r=Math.max(0,r);n=Math.min(1,n);r=Math.min(r,n);n=Math.max(r,n);this._visibleRange=[r,n];this.updateRange()}},enumerable:false,configurable:true});e.prototype.onLabelFormatChange=function(e,t){var r=this,n=r.scale,i=r.fractionDigits;var o=n instanceof LogScale;var a=!o&&i>0?function(e){return typeof e==="number"?e.toFixed(i):String(e)}:function(e){return String(e)};if(t&&n&&n.tickFormat){try{this.labelFormatter=n.tickFormat({ticks:e,specifier:t})}catch(e){this.labelFormatter=a;Logger.warnOnce("the axis label format string "+t+" is invalid. No formatting will be applied")}}else{this.labelFormatter=a}};Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(e){var t=this._title;if(t!==e){if(t){this.axisGroup.removeChild(t.node)}if(e){e.node.rotation=-Math.PI/2;this.axisGroup.appendChild(e.node)}this._title=e;this.setTickCount(this.tick.count);this.setTickInterval(this.tick.interval);this.updateTitle({ticks:this.scale.ticks()})}},enumerable:false,configurable:true});e.prototype.setDomain=function(){var e;var t=this,r=t.scale,n=t.dataDomain,i=t.tick.values;if(i&&r instanceof ContinuousScale){var o=__read$O((e=extent$4(i))!==null&&e!==void 0?e:[Infinity,-Infinity],2),a=o[0],s=o[1];var l=Math.min(r.fromDomain(n[0]),a);var u=Math.max(r.fromDomain(n[1]),s);r.domain=[r.toDomain(l),r.toDomain(u)]}else{r.domain=n}};e.prototype.setTickInterval=function(e){var t;this.scale.interval=(t=this.tick.interval)!==null&&t!==void 0?t:e};e.prototype.setTickCount=function(e,t,r){var n=this.scale;if(!(e&&n instanceof ContinuousScale)){return}if(typeof e==="number"){n.tickCount=e;n.minTickCount=t!==null&&t!==void 0?t:0;n.maxTickCount=r!==null&&r!==void 0?r:Infinity;return}if(n instanceof TimeScale$1){this.setTickInterval(e)}};Object.defineProperty(e.prototype,"gridLength",{get:function(){return this._gridLength},set:function(e){var t=this;var r;if(this._gridLength&&!e||!this._gridLength&&e){this.gridLineGroupSelection=this.gridLineGroupSelection.clear();this.gridArcGroupSelection=this.gridArcGroupSelection.clear()}this._gridLength=e;(r=this.crossLines)===null||r===void 0?void 0:r.forEach((function(e){t.initCrossLine(e)}))},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"radialGrid",{get:function(){return this._radialGrid},set:function(e){if(this._radialGrid!==e){this._radialGrid=e;this.gridLineGroupSelection=this.gridLineGroupSelection.clear();this.gridArcGroupSelection=this.gridArcGroupSelection.clear()}},enumerable:false,configurable:true});e.prototype.update=function(e){var t,r;this.calculateDomain();var n=this,i=n.scale,o=n.gridLength,a=n.tick,s=n.label,l=s.parallel,u=s.mirrored,c=s.avoidCollisions,d=n.requestedRange;var p=Math.min.apply(Math,__spread$s(d));var f=Math.max.apply(Math,__spread$s(d));var h=toRadians$1(this.rotation);var v=this.isAnySeriesActive();var g=u?1:-1;var y=normalizeAngle360(h);var m=normalizeAngle360(h-Math.PI/2);var _=this.nice;this.setDomain();this.setTickInterval(this.tick.interval);if(i instanceof ContinuousScale){i.nice=_;this.setTickCount(this.tick.count);i.update()}var S=(i.bandwidth||0)/2;this.updatePosition();this.updateLine();var b=0;var C=true;var x=[];var w=this.estimateTickCount({minSpacing:this.tick.minSpacing,maxSpacing:this.tick.maxSpacing}),O=w.maxTickCount,T=w.minTickCount,E=w.defaultTickCount;var P=i instanceof ContinuousScale;var A=e!==undefined;var R=c&&this.tick.interval===undefined&&this.tick.values===undefined;var D=!isNaN(this.tick.minSpacing)||!isNaN(this.tick.maxSpacing);var M=this.tick.count||!P||isNaN(O)?10:O;while(C){var N=true;var I=function(){if(b>M){return"break"}var r=x;var n=Math.max(E-b,T);var a=R&&!(P&&L.tick.count===undefined)&&(D||b!==0);if(L.tick.values){x=L.tick.values}else if(O===0){x=[]}else if(b===0||!a){L.setTickCount((t=L.tick.count)!==null&&t!==void 0?t:n,T,O);x=i.ticks()}if(a){var s=D?Math.ceil(x.length/n):2;x=x.filter((function(e,t){return t%s===0}))}var l=void 0;if(A){l=L.updateSecondaryAxisTicks(e);x=l}L.updateSelections({halfBandwidth:S,gridLength:o,ticks:x});if(!A&&x.length>0){e=x.length}N=R?areArrayNumbersEqual(x,r):false;b++};var L=this;while(N){var k=I();if(k==="break")break}if(N){break}this.onLabelFormatChange(x,this.label.format);var F=this.updateLabels({parallelFlipRotation:y,regularFlipRotation:m,sideFlag:g,tickLabelGroupSelection:this.tickLabelGroupSelection,ticks:x}),$=F.labelData,G=F.rotated;var B=this.getLabelSpacing(G);C=R?axisLabelsOverlap($,B):false}this.updateGridLines({gridLength:o,halfBandwidth:S,sideFlag:g});var V=false;var j=function(e){var t=Math.floor(p);var r=Math.ceil(f);if(t===r){e.visible=false;return}if(e.translationY>=t-1&&e.translationY<t){e.translationY=t}if(e.translationY>r&&e.translationY<=r+1){e.translationY=r}var n=e.translationY>=t&&e.translationY<=r;if(n){V=true}e.visible=n};var H=this,U=H.gridLineGroupSelection,z=H.gridArcGroupSelection,W=H.tickLineGroupSelection,K=H.tickLabelGroupSelection;U.each(j);z.each(j);W.each(j);K.each(j);this.tickLineGroup.visible=V;this.tickLabelGroup.visible=V;this.gridLineGroup.visible=V;this.gridArcGroup.visible=V;(r=this.crossLines)===null||r===void 0?void 0:r.forEach((function(e){e.sideFlag=-g;e.direction=h===-Math.PI/2?ChartAxisDirection.X:ChartAxisDirection.Y;e.label.parallel=e.label.parallel!==undefined?e.label.parallel:l;e.parallelFlipRotation=y;e.regularFlipRotation=m;e.update(v)}));this.updateTitle({ticks:x});W.each((function(e){e.strokeWidth=a.width;e.stroke=a.color;e.visible=V;e.x1=g*a.size;e.x2=0;e.y1=0;e.y2=0}));return e};e.prototype.estimateTickCount=function(t){var r=t.minSpacing,n=t.maxSpacing;var i=this.requestedRange;var o=Math.min.apply(Math,__spread$s(i));var a=Math.max.apply(Math,__spread$s(i));var s=a-o;var l=Math.max(e.defaultTickMinSpacing,s/ContinuousScale.defaultMaxTickCount);if(isNaN(r)&&isNaN(n)){r=l;n=s;if(r>n){n=r}}else if(isNaN(r)){r=l;if(r>n){r=n}}else if(isNaN(n)){n=s;if(r>n){n=r}}var u=Math.max(1,Math.floor(s/r));var c=Math.min(u,Math.ceil(s/n));var d=ContinuousScale.defaultTickCount;if(d>u){d=u}else if(d<c){d=c}return{minTickCount:c,maxTickCount:u,defaultTickCount:d}};e.prototype.getLabelSpacing=function(e){var t=this.label;if(!isNaN(t.minSpacing)){return t.minSpacing}return e?0:10};e.prototype.calculateDomain=function(){};e.prototype.updatePosition=function(){var e=this,t=e.label,r=e.crossLineGroup,n=e.axisGroup,i=e.gridGroup,o=e.translation,a=e.gridLineGroupSelection,s=e.gridPadding,l=e.gridLength;var u=toRadians$1(this.rotation);var c=t.mirrored?1:-1;var d=Math.floor(o.x);var p=Math.floor(o.y);r.translationX=d;r.translationY=p;r.rotation=u;n.translationX=d;n.translationY=p;n.rotation=u;i.translationX=d;i.translationY=p;i.rotation=u;a.each((function(e){e.x1=s;e.x2=-c*l+s;e.y1=0;e.y2=0}))};e.prototype.updateSecondaryAxisTicks=function(e){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")};e.prototype.updateSelections=function(e){var t=e.ticks,r=e.halfBandwidth,n=e.gridLength;var i=this.scale;var o=t.map((function(e){return{tick:e,translationY:i.convert(e)+r}}));var a=this.radialGrid?this.gridLineGroupSelection:this.gridLineGroupSelection.update(n?o:[],(function(e){var t=new Line;t.tag=Tags.GridLine;e.append(t)}));var s=this.radialGrid?this.gridArcGroupSelection.update(n?o:[],(function(e){var t=new Arc;t.tag=Tags.GridArc;e.append(t)})):this.gridArcGroupSelection;var l=this.tickLineGroupSelection.update(o,(function(e){var t=new Line;t.tag=Tags.TickLine;e.appendChild(t)}));var u=this.tickLabelGroupSelection.update(o,(function(e){var t=new Text;t.tag=Tags.TickLabel;e.appendChild(t)}));var c=function(e){return e.translationY=Math.round(e.datum.translationY)};a.each(c);s.each(c);l.each(c);u.each(c);this.tickLineGroupSelection=l;this.tickLabelGroupSelection=u;this.gridLineGroupSelection=a;this.gridArcGroupSelection=s};e.prototype.updateGridLines=function(e){var t=e.gridLength,r=e.halfBandwidth,n=e.sideFlag;var i=this,o=i.gridStyle,a=i.scale,s=i.tick,l=i.gridPadding;if(t&&o.length){var u=o.length;var c=void 0;if(this.radialGrid){var d=normalizeAngle360Inclusive(toRadians$1(t));c=this.gridArcGroupSelection.each((function(e,t){var n=Math.round(a.convert(t)+r);e.centerX=0;e.centerY=a.range[0]-n;e.endAngle=d;e.radius=n}))}else{c=this.gridLineGroupSelection.each((function(e){e.x1=l;e.x2=-n*t+l;e.y1=0;e.y2=0}))}c.each((function(e,t,r){var n=o[r%u];e.stroke=n.stroke;e.strokeWidth=s.width;e.lineDash=n.lineDash;e.fill=undefined}))}};e.prototype.updateLabels=function(e){var t=this;var r=e.ticks,n=e.tickLabelGroupSelection,i=e.sideFlag,o=e.parallelFlipRotation,a=e.regularFlipRotation;var s=this,l=s.label,u=s.label,c=u.parallel,d=u.rotation,p=s.tick;var f=0;var h=calculateLabelRotation({rotation:d,parallel:c,regularFlipRotation:a,parallelFlipRotation:o}),v=h.autoRotation,g=h.labelRotation,y=h.parallelFlipFlag,m=h.regularFlipFlag;this.fractionDigits=r.fractionDigits>=0?r.fractionDigits:0;var _=new Map;var S=i*(p.size+l.padding+this.seriesAreaPadding);var b=new Matrix;Matrix.updateTransformMatrix(b,1,1,v,0,0);var C=[];var x=n.each((function(e,r,n){var i=r.tick,o=r.translationY;e.fontStyle=l.fontStyle;e.fontWeight=l.fontWeight;e.fontSize=l.fontSize;e.fontFamily=l.fontFamily;e.fill=l.color;e.text=t.formatTickDatum(i,n);var a=e.text===""||e.text==undefined;var s=e.computeBBox();var u=s.width,c=s.height;var d=new BBox(S,o,0,0);b.transformBBox(d,s);var p=s.x,f=p===void 0?0:p,h=s.y,v=h===void 0?0:h;s.width=u;s.height=c;_.set(n,a?null:s);if(a){return}C.push({point:{x:f,y:v,size:0},label:{width:u,height:c,text:""}})}));var w=this.getLabelSpacing();var O=axisLabelsOverlap(C,w);if(l.rotation===undefined&&l.autoRotate===true&&O){f=normalizeAngle360(toRadians$1(l.autoRotateAngle))}var T="middle";if(c&&!g){if(i*y===-1){T="hanging"}else{T="bottom"}}var E=g>0&&g<=Math.PI;var P=f>0&&f<=Math.PI;var A=E||P?-1:1;var R="start";if(c){if(g||f){if(i*A===-1){R="end"}}else{R="center"}}else if(i*m===-1){R="end"}var D=v+g+f;if(D){Matrix.updateTransformMatrix(b,1,1,D,0,0)}C=[];x.each((function(e,t,r){if(e.text===""||e.text==undefined){e.visible=false;return}e.textBaseline=T;e.textAlign=R;e.x=S;e.rotationCenterX=S;e.rotation=D;var n=_.get(r);if(!n){return}e.visible=true;var i=n.width,o=i===void 0?0:i,a=n.height,s=a===void 0?0:a;var l=t.translationY;var u=new BBox(S,l,0,0);b.transformBBox(u,n);var c=n.x,d=c===void 0?0:c,p=n.y,f=p===void 0?0:p;C.push({point:{x:d,y:f,size:0},label:{width:o,height:s,text:e.text}})}));this.layout.label={align:R,baseline:T,rotation:D,fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format};return{labelData:C,rotated:!!(g||f)}};e.prototype.updateLine=function(){var e=this,t=e.lineNode,r=e.requestedRange;t.x1=0;t.x2=0;t.y1=r[0];t.y2=r[1];t.strokeWidth=this.line.width;t.stroke=this.line.color;t.visible=true};e.prototype.updateTitle=function(e){var t=e.ticks;var r=this,n=r.label,i=r.rotation,o=r.title,a=r.lineNode,s=r.requestedRange,l=r.tickLineGroup,u=r.tickLabelGroup;if(!o){return}var c=false;if(o.enabled&&a.visible){c=true;var d=n.mirrored?1:-1;var p=normalizeAngle360(i);var f=Caption.PADDING;var h=o.node;var v=d===-1&&p>Math.PI&&p<Math.PI*2?-1:1;h.rotation=v*d*Math.PI/2;h.x=Math.floor(v*d*(s[0]+s[1])/2);var g=0;if((t===null||t===void 0?void 0:t.length)>0){var y=Group.computeBBox([l,u]);var m=i===0?y.width:y.height;if(Math.abs(m)<Infinity){g+=m}}if(d===-1){h.y=Math.floor(v*(-f-g))}else{h.y=Math.floor(-f-g)}h.textBaseline=v===1?"bottom":"top"}o.node.visible=c};e.prototype.formatTickDatum=function(e,t){var r=this,n=r.label,i=r.labelFormatter,o=r.fractionDigits;if(n.formatter){return n.formatter({value:o>0?e:String(e),index:t,fractionDigits:o,formatter:i})}else if(i){return i(e)}return String(e)};e.prototype.formatDatum=function(e){return String(e)};e.prototype.computeBBox=function(){return this.axisGroup.computeBBox()};e.prototype.initCrossLine=function(e){e.scale=this.scale;e.gridLength=this.gridLength};e.prototype.isAnySeriesActive=function(){return false};e.prototype.clipTickLines=function(e,t,r,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new BBox(e,t,r,n))};e.prototype.clipGrid=function(e,t,r,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new BBox(e,t,r,n))};e.prototype.calculatePadding=function(e,t){return Math.abs(e*.01)};e.defaultTickMinSpacing=50;__decorate$1D([Validate(BOOLEAN)],e.prototype,"nice",void 0);__decorate$1D([Validate(GRID_STYLE)],e.prototype,"gridStyle",void 0);__decorate$1D([Validate(NUMBER(0))],e.prototype,"thickness",void 0);return e}();var __extends$2l=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __read$N=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var LinearScale$1=function(e){__extends$2l(t,e);function t(){var t=e.call(this,[0,1],[0,1])||this;t.type="linear";return t}t.prototype.toDomain=function(e){return e};t.prototype.ticks=function(){var e;var t=(e=this.tickCount)!==null&&e!==void 0?e:ContinuousScale.defaultTickCount;if(!this.domain||this.domain.length<2||t<1||this.domain.some((function(e){return!isFinite(e)}))){return[]}this.refresh();var r=__read$N(this.getDomain(),2),n=r[0],i=r[1];var o=this.interval;if(o){var a=Math.abs(o);if(!this.isDenseInterval({start:n,stop:i,interval:a})){return range(n,i,a)}}return ticks(n,i,t,this.minTickCount,this.maxTickCount)};t.prototype.update=function(){if(!this.domain||this.domain.length<2){return}if(this.nice){this.updateNiceDomain()}};t.prototype.updateNiceDomain=function(){var e,t;var r=(e=this.tickCount)!==null&&e!==void 0?e:ContinuousScale.defaultTickCount;var n=__read$N(this.domain,2),i=n[0],o=n[1];if(r<1){this.niceDomain=[i,o];return}if(r===1){this.niceDomain=singleTickDomain(i,o);return}var a=4;var s=i;var l=o;for(var u=0;u<a;u++){var c=(t=this.interval)!==null&&t!==void 0?t:tickStep(i,o,r,this.minTickCount,this.maxTickCount);var d=__read$N(this.domain,2),p=d[0],f=d[1];if(c>=1){i=Math.floor(p/c)*c;o=Math.ceil(f/c)*c}else{var h=1/c;i=Math.floor(p*h)/h;o=Math.ceil(f*h)/h}if(i===s&&o===l){break}s=i;l=o}this.niceDomain=[i,o]};t.prototype.tickFormat=function(e){var t=e.ticks,r=e.specifier;return tickFormat(t||this.ticks(),r)};return t}(ContinuousScale);var __extends$2k=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$E=function(){__assign$E=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$E.apply(this,arguments)};var __decorate$1C=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$M=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$r=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$M(arguments[t]));return e};var __values$o=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function flipChartAxisDirection(e){if(e===ChartAxisDirection.X){return ChartAxisDirection.Y}else{return ChartAxisDirection.X}}var ChartAxis=function(e){__extends$2k(t,e);function t(t,r){var n=e.call(this,r)||this;n.moduleCtx=t;n.keys=[];n.direction=ChartAxisDirection.Y;n.boundSeries=[];n.includeInvisibleDomains=false;n.modules={};n._position="left";return n}Object.defineProperty(t.prototype,"type",{get:function(){return this.constructor.type||""},enumerable:false,configurable:true});t.prototype.useCalculatedTickCount=function(){return this.scale instanceof LinearScale$1};Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){if(this._position!==e){this._position=e;switch(e){case"top":this.direction=ChartAxisDirection.X;this.rotation=-90;this.label.mirrored=true;this.label.parallel=true;break;case"right":this.direction=ChartAxisDirection.Y;this.rotation=0;this.label.mirrored=true;this.label.parallel=false;break;case"bottom":this.direction=ChartAxisDirection.X;this.rotation=-90;this.label.mirrored=false;this.label.parallel=true;break;case"left":this.direction=ChartAxisDirection.Y;this.rotation=0;this.label.mirrored=false;this.label.parallel=false;break}if(this.axisContext){this.axisContext.position=e;this.axisContext.direction=this.direction}}},enumerable:false,configurable:true});t.prototype.calculateDomain=function(){var e;var t=this,r=t.direction,n=t.boundSeries,i=t.includeInvisibleDomains;if(this.linkedTo){this.dataDomain=this.linkedTo.dataDomain}else{var o=[];n.filter((function(e){return i||e.isEnabled()})).forEach((function(e){o.push(e.getDomain(r))}));var a=(e=new Array).concat.apply(e,__spread$r(o));this.dataDomain=this.normaliseDataDomain(a)}};t.prototype.normaliseDataDomain=function(e){return e};t.prototype.isAnySeriesActive=function(){var e=this;return this.boundSeries.some((function(t){return e.includeInvisibleDomains||t.isEnabled()}))};t.prototype.getLayoutState=function(){return __assign$E({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)};t.prototype.addModule=function(e){var t=this;if(this.modules[e.optionsKey]!=null){throw new Error("AG Charts - module already initialised: "+e.optionsKey)}if(this.axisContext==null){var r=function(){return t.boundSeries.map((function(e){return e.getKeys(t.direction)})).reduce((function(e,t){e.push.apply(e,__spread$r(t));return e}),[])};this.axisContext={axisId:this.id,position:this.position,direction:this.direction,continuous:this.scale instanceof ContinuousScale,keys:r,scaleValueFormatter:function(e){var r,n,i;return(i=(n=(r=t.scale).tickFormat)===null||n===void 0?void 0:n.call(r,{specifier:e}))!==null&&i!==void 0?i:undefined},scaleBandwidth:function(){var e;return(e=t.scale.bandwidth)!==null&&e!==void 0?e:0},scaleConvert:function(e){return t.scale.convert(e)},scaleInvert:function(e){var r,n,i;return(i=(n=(r=t.scale).invert)===null||n===void 0?void 0:n.call(r,e))!==null&&i!==void 0?i:undefined}}}var n=e.initialiseModule(__assign$E(__assign$E({},this.moduleCtx),{parent:this.axisContext}));this.modules[e.optionsKey]=n;this[e.optionsKey]=n.instance};t.prototype.removeModule=function(e){var t,r;(r=(t=this.modules[e.optionsKey])===null||t===void 0?void 0:t.instance)===null||r===void 0?void 0:r.destroy();delete this.modules[e.optionsKey];delete this[e.optionsKey]};t.prototype.isModuleEnabled=function(e){return this.modules[e.optionsKey]!=null};t.prototype.destroy=function(){var t,r;e.prototype.destroy.call(this);try{for(var n=__values$o(Object.entries(this.modules)),i=n.next();!i.done;i=n.next()){var o=__read$M(i.value,2),a=o[0],s=o[1];s.instance.destroy();delete this.modules[a];delete this[a]}}catch(e){t={error:e}}finally{try{if(i&&!i.done&&(r=n.return))r.call(n)}finally{if(t)throw t.error}}};__decorate$1C([Validate(STRING_ARRAY)],t.prototype,"keys",void 0);__decorate$1C([Validate(POSITION)],t.prototype,"_position",void 0);return t}(Axis);var __extends$2j=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1B=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$L=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$q=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$L(arguments[t]));return e};var CategoryAxis=function(e){__extends$2j(t,e);function t(t){var r=e.call(this,t,new BandScale$5)||this;r._paddingOverrideEnabled=false;r.groupPaddingInner=.1;r.includeInvisibleDomains=true;return r}Object.defineProperty(t.prototype,"paddingInner",{get:function(){this._paddingOverrideEnabled=true;return this.scale.paddingInner},set:function(e){this._paddingOverrideEnabled=true;this.scale.paddingInner=e},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"paddingOuter",{get:function(){return this.scale.paddingOuter},set:function(e){this.scale.paddingOuter=e},enumerable:false,configurable:true});t.prototype.normaliseDataDomain=function(e){var t=new Set(e);return new(Array.bind.apply(Array,__spread$q([void 0],t.values())))};t.prototype.calculateDomain=function(){if(!this._paddingOverrideEnabled){var t=this.boundSeries;var r=t.map((function(e){var t;return(t=e.getBandScalePadding)===null||t===void 0?void 0:t.call(e)})).filter((function(e){return e!=null}));if(r.length>0){this.scale.paddingInner=Math.min.apply(Math,__spread$q(r.map((function(e){return e.inner}))));this.scale.paddingOuter=Math.max.apply(Math,__spread$q(r.map((function(e){return e.outer}))))}}return e.prototype.calculateDomain.call(this)};t.className="CategoryAxis";t.type="category";__decorate$1B([Validate(NUMBER(0,1))],t.prototype,"groupPaddingInner",void 0);return t}(ChartAxis);var __assign$D=function(){__assign$D=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$D.apply(this,arguments)};var __read$K=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$K(arguments[t]));return e};var __values$n=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function jsonDiff(e,t){var r,n;var i=classify(e);var o=classify(t);if(o==="array"){var a=t;if(i!=="array"||e.length!==a.length){return __spread$p(a)}if(a.some((function(t,r){var n;return jsonDiff((n=e)===null||n===void 0?void 0:n[r],t)!=null}))){return __spread$p(a)}return null}if(o==="primitive"){if(i!=="primitive"){return __assign$D({},t)}if(e!==t){return t}return null}var s=e||{};var l=t||{};var u=new Set(__spread$p(Object.keys(s),Object.keys(l)));var c=0;var d={};var p=function(e){if(s[e]===l[e]){return"continue"}var t=function(t){d[e]=t;c++};var r=classify(s[e]);var n=classify(l[e]);if(r!==n){t(l[e]);return"continue"}if(n==="primitive"||n===null){t(l[e]);return"continue"}if(n==="array"&&s[e].length!==l[e].length){t(l[e]);return"continue"}if(n==="class-instance"){t(l[e]);return"continue"}if(n==="function"&&s[e]!==l[e]){t(l[e]);return"continue"}var i=jsonDiff(s[e],l[e]);if(i!==null){t(i)}};try{for(var f=__values$n(u),h=f.next();!h.done;h=f.next()){var v=h.value;p(v)}}catch(e){r={error:e}}finally{try{if(h&&!h.done&&(n=f.return))n.call(f)}finally{if(r)throw r.error}}return c===0?null:d}var DELETE=Symbol("<delete-property>");var NOT_SPECIFIED=Symbol("<unspecified-property>");function jsonMerge(e,t){var r,n;var i=(t===null||t===void 0?void 0:t.avoidDeepClone)||[];var o=e.map((function(e){return classify(e)}));if(o.some((function(e){return e==="array"}))){var a=e[e.length-1];if(a instanceof Array){return a.map((function(e){var r=classify(e);if(r==="array")return jsonMerge([[],e],t);if(r==="object")return jsonMerge([{},e],t);return e}))}return a}var s={};var l=new Set(e.map((function(e){return e!=null?Object.keys(e):[]})).reduce((function(e,t){return e.concat(t)}),[]));var u=function(r){var n=e.map((function(e){return e!=null&&r in e?e[r]:NOT_SPECIFIED})).filter((function(e){return e!==NOT_SPECIFIED}));if(n.length===0){return"continue"}var o=n[n.length-1];if(o===DELETE){return"continue"}var a=n.map((function(e){return classify(e)}));var l=a[0];if(a.some((function(e){return e!==l}))){s[r]=o;return"continue"}if((l==="array"||l==="object")&&!i.includes(r)){s[r]=jsonMerge(n,t)}else if(l==="array"){s[r]=__spread$p(o)}else{s[r]=o}};try{for(var c=__values$n(l),d=c.next();!d.done;d=c.next()){var p=d.value;u(p)}}catch(e){r={error:e}}finally{try{if(d&&!d.done&&(n=c.return))n.call(c)}finally{if(r)throw r.error}}return s}function jsonApply(e,t,r){var n;if(r===void 0){r={}}var i=r.path,o=i===void 0?undefined:i,a=r.matcherPath,s=a===void 0?o?o.replace(/(\[[0-9+]+\])/i,"[]"):undefined:a,l=r.skip,u=l===void 0?[]:l,c=r.constructors,d=c===void 0?{}:c,p=r.allowedTypes,f=p===void 0?{}:p,h=r.idx;if(e==null){throw new Error("AG Charts - target is uninitialised: "+(o||"<root>"))}if(t==null){return e}var v=e;if(h!=null&&"_declarationOrder"in v){v["_declarationOrder"]=h}var g=classify(e);var y=function(i){var a=""+(s?s+".":"")+i;if(u.indexOf(a)>=0){return"continue"}var l=t[i];var c=""+(o?o+".":"")+i;var p=v.constructor;var h=v[i];var y=(n=d[i])!==null&&n!==void 0?n:d[a];try{var m=classify(h);var _=classify(l);if(g==="class-instance"&&!(i in e||Object.prototype.hasOwnProperty.call(v,i))){Logger.warn("unable to set ["+c+"] in "+(p===null||p===void 0?void 0:p.name)+" - property is unknown");return"continue"}var S=f[a]||[m];if(m==="class-instance"&&_==="object"){}else if(m!=null&&_!=null&&!S.includes(_)){Logger.warn("unable to set ["+c+"] in "+(p===null||p===void 0?void 0:p.name)+" - can't apply type of ["+_+"], allowed types are: ["+S+"]");return"continue"}if(_==="array"){y=y!==null&&y!==void 0?y:d[a+"[]"];if(y!=null){var b=l;v[i]=b.map((function(e,t){return jsonApply(new y,e,__assign$D(__assign$D({},r),{path:c,matcherPath:a+"[]",idx:t}))}))}else{v[i]=l}}else if(_==="class-instance"){v[i]=l}else if(_==="object"){if(h!=null){jsonApply(h,l,__assign$D(__assign$D({},r),{path:c,matcherPath:a,idx:undefined}))}else if(y!=null){v[i]=jsonApply(new y,l,__assign$D(__assign$D({},r),{path:c,matcherPath:a,idx:undefined}))}else{v[i]=l}}else{v[i]=l}}catch(e){var C=e;Logger.warn("unable to set ["+c+"] in ["+(p===null||p===void 0?void 0:p.name)+"]; nested error is: "+C.message);return"continue"}};for(var m in t){y(m)}return e}function jsonWalk(e,t,r){var n=[];for(var i=3;i<arguments.length;i++){n[i-3]=arguments[i]}var o=classify(e);var a=r.skip||[];if(o==="array"){e.forEach((function(e,i){jsonWalk.apply(void 0,__spread$p([e,t,r],(n!==null&&n!==void 0?n:[]).map((function(e){return e===null||e===void 0?void 0:e[i]}))))}));return}else if(o!=="object"){return}t.apply(void 0,__spread$p([o,e],n));var s=function(i){if(a.indexOf(i)>=0){return"continue"}var o=e[i];var s=n===null||n===void 0?void 0:n.map((function(e){return e===null||e===void 0?void 0:e[i]}));var l=classify(o);if(l==="object"||l==="array"){jsonWalk.apply(void 0,__spread$p([o,t,r],s))}};for(var l in e){s(l)}}function classify(e){if(e==null){return null}else if(e instanceof HTMLElement){return"primitive"}else if(e instanceof Array){return"array"}else if(e instanceof Date){return"primitive"}else if(typeof e==="object"&&e.constructor===Object){return"object"}else if(typeof e==="function"){return"function"}else if(typeof e==="object"&&e.constructor!=null){return"class-instance"}return"primitive"}var __extends$2i=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1A=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __awaiter$d=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$d=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __read$J=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$o=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$J(arguments[t]));return e};var __values$m=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var _a;var DEFAULT_DIRECTION_KEYS=(_a={},_a[ChartAxisDirection.X]=["xKey"],_a[ChartAxisDirection.Y]=["yKey"],_a);var CartesianSeriesNodeBaseClickEvent=function(e){__extends$2i(t,e);function t(t,r,n,i,o){var a=e.call(this,n,i,o)||this;a.xKey=t;a.yKey=r;return a}return t}(SeriesNodeBaseClickEvent);var CartesianSeriesNodeClickEvent=function(e){__extends$2i(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.type="nodeClick";return t}return t}(CartesianSeriesNodeBaseClickEvent);var CartesianSeriesNodeDoubleClickEvent=function(e){__extends$2i(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.type="nodeDoubleClick";return t}return t}(CartesianSeriesNodeBaseClickEvent);var CartesianSeries=function(e){__extends$2i(t,e);function t(t){if(t===void 0){t={}}var r;var n=e.call(this,{useSeriesGroupLayer:true,pickModes:t.pickModes,directionKeys:(r=t.directionKeys)!==null&&r!==void 0?r:DEFAULT_DIRECTION_KEYS})||this;n._contextNodeData=[];n.nodeDataDependencies={};n.highlightSelection=Selection.select(n.highlightNode,(function(){return n.opts.hasMarkers?n.markerFactory():n.nodeFactory()}));n.highlightLabelSelection=Selection.select(n.highlightLabel,Text);n.subGroups=[];n.subGroupId=0;n.seriesItemEnabled=new Map;var i=t.pathsPerSeries,o=i===void 0?1:i,a=t.hasMarkers,s=a===void 0?false:a,l=t.pathsZIndexSubOrderOffset,u=l===void 0?[]:l,c=t.renderLayerPerSubSeries,d=c===void 0?true:c;n.opts={pathsPerSeries:o,hasMarkers:s,pathsZIndexSubOrderOffset:u,renderLayerPerSubSeries:d};return n}Object.defineProperty(t.prototype,"contextNodeData",{get:function(){var e;return(e=this._contextNodeData)===null||e===void 0?void 0:e.slice()},enumerable:false,configurable:true});t.prototype.destroy=function(){e.prototype.destroy.call(this);this._contextNodeData.splice(0,this._contextNodeData.length);this.subGroups.splice(0,this.subGroups.length)};t.prototype.checkDomainXY=function(e,t,r,n){var i=(r&&isContinuous(e)||!r&&isDiscrete(e))&&(n&&isContinuous(t)||!n&&isDiscrete(t));return i?[e,t]:undefined};t.prototype.checkRangeXY=function(e,t,r,n){return!isNaN(e)&&!isNaN(t)&&r.inRange(e)&&n.inRange(t)};t.prototype.update=function(e){var t,r;var n=e.seriesRect;return __awaiter$d(this,void 0,void 0,(function(){var e,i,o,a,s,l,u;return __generator$d(this,(function(c){switch(c.label){case 0:e=this,i=e.seriesItemEnabled,o=e.visible;a=((r=(t=this.highlightManager)===null||t===void 0?void 0:t.getActiveHighlight())!==null&&r!==void 0?r:{}).series;s=a?a===this:undefined;l=o&&i.size===0||__spread$o(i.values()).some((function(e){return e===true}));u={seriesRectWidth:n===null||n===void 0?void 0:n.width,seriesRectHeight:n===null||n===void 0?void 0:n.height};if(jsonDiff(this.nodeDataDependencies,u)!=null){this.nodeDataDependencies=u;this.markNodeDataDirty()}return[4,this.updateSelections(s,l)];case 1:c.sent();return[4,this.updateNodes(s,l)];case 2:c.sent();return[2]}}))}))};t.prototype.updateSelections=function(e,t){return __awaiter$d(this,void 0,void 0,(function(){var r;var n=this;return __generator$d(this,(function(i){switch(i.label){case 0:return[4,this.updateHighlightSelection(e)];case 1:i.sent();if(!t){return[2]}if(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty()){return[2]}if(!this.nodeDataRefresh)return[3,4];this.nodeDataRefresh=false;r=this;return[4,this.createNodeData()];case 2:r._contextNodeData=i.sent();return[4,this.updateSeriesGroups()];case 3:i.sent();i.label=4;case 4:return[4,Promise.all(this.subGroups.map((function(t,r){return n.updateSeriesGroupSelections(t,r,e)})))];case 5:i.sent();return[2]}}))}))};t.prototype.updateSeriesGroupSelections=function(e,t,r){return __awaiter$d(this,void 0,void 0,(function(){var n,i,o,a,s,l,u,c,d,p,f;return __generator$d(this,(function(h){switch(h.label){case 0:n=e.datumSelection,i=e.labelSelection,o=e.markerSelection,a=e.paths;s=this._contextNodeData[t];l=s.nodeData,u=s.labelData,c=s.itemId;return[4,this.updatePaths({seriesHighlighted:r,itemId:c,contextData:s,paths:a,seriesIdx:t})];case 1:h.sent();d=e;return[4,this.updateDatumSelection({nodeData:l,datumSelection:n,seriesIdx:t})];case 2:d.datumSelection=h.sent();p=e;return[4,this.updateLabelSelection({labelData:u,labelSelection:i,seriesIdx:t})];case 3:p.labelSelection=h.sent();if(!o)return[3,5];f=e;return[4,this.updateMarkerSelection({nodeData:l,markerSelection:o,seriesIdx:t})];case 4:f.markerSelection=h.sent();h.label=5;case 5:return[2]}}))}))};t.prototype.nodeFactory=function(){return new Group};t.prototype.markerFactory=function(){var e=getMarker$1();return new e};t.prototype.updateSeriesGroups=function(){var e;return __awaiter$d(this,void 0,void 0,(function(){var t,r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m,_;var S=this;return __generator$d(this,(function(b){t=this,r=t._contextNodeData,n=t.contentGroup,i=t.subGroups,o=t.opts,a=o.pathsPerSeries,s=o.hasMarkers,l=o.pathsZIndexSubOrderOffset,u=o.renderLayerPerSubSeries;if(r.length===i.length){return[2]}if(r.length<i.length){i.splice(r.length).forEach((function(e){var t,r;var i=e.dataNodeGroup,o=e.markerGroup,a=e.labelGroup,s=e.paths;n.removeChild(i);if(o){n.removeChild(o)}if(a){n.removeChild(a)}try{for(var l=__values$m(s),u=l.next();!u.done;u=l.next()){var c=u.value;n.removeChild(c)}}catch(e){t={error:e}}finally{try{if(u&&!u.done&&(r=l.return))r.call(l)}finally{if(t)throw t.error}}}))}c=r.length;while(c>i.length){d=u;p=this.subGroupId++;f=p;h=new Group({name:this.id+"-series-sub"+p+"-dataNodes",layer:d,zIndex:Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:[function(){return S._declarationOrder},f]});v=s?new Group({name:this.id+"-series-sub"+this.subGroupId+++"-markers",layer:d,zIndex:Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:[function(){return S._declarationOrder},1e4+p]}):undefined;g=new Group({name:this.id+"-series-sub"+this.subGroupId+++"-labels",layer:d,zIndex:Layers.SERIES_LABEL_ZINDEX,zIndexSubOrder:[function(){return S._declarationOrder},p]});n.appendChild(h);n.appendChild(g);if(v){n.appendChild(v)}y=u?h:n;m=[];for(_=0;_<a;_++){m[_]=new Path;m[_].zIndex=Layers.SERIES_LAYER_ZINDEX;m[_].zIndexSubOrder=[function(){return S._declarationOrder},((e=l[_])!==null&&e!==void 0?e:0)+f];y.appendChild(m[_])}i.push({paths:m,dataNodeGroup:h,markerGroup:v,labelGroup:g,labelSelection:Selection.select(g,Text),datumSelection:Selection.select(h,(function(){return S.nodeFactory()})),markerSelection:v?Selection.select(v,(function(){return S.markerFactory()})):undefined})}return[2]}))}))};t.prototype.updateNodes=function(e,t){var r;return __awaiter$d(this,void 0,void 0,(function(){var n,i,o,a,s,l,u,c,d,p,f,h;var v=this;return __generator$d(this,(function(g){switch(g.label){case 0:n=this,i=n.highlightSelection,o=n.highlightLabelSelection,a=n._contextNodeData,s=n.seriesItemEnabled,l=n.opts,u=l.hasMarkers,c=l.renderLayerPerSubSeries;d=this.visible&&((r=this._contextNodeData)===null||r===void 0?void 0:r.length)>0&&t;this.rootGroup.visible=d;this.contentGroup.visible=d;this.highlightGroup.visible=d&&!!e;p=this.getOpacity();f=this.subGroups.map((function(e,t){var r=a[t].itemId;return v.getOpacity({itemId:r})}));h=f.some((function(e){return e!==p}));this.contentGroup.opacity=h?1:p;if(!u)return[3,2];return[4,this.updateMarkerNodes({markerSelection:i,isHighlight:true,seriesIdx:-1})];case 1:g.sent();return[3,4];case 2:return[4,this.updateDatumNodes({datumSelection:i,isHighlight:true,seriesIdx:-1})];case 3:g.sent();g.label=4;case 4:return[4,this.updateLabelNodes({labelSelection:o,seriesIdx:-1})];case 5:g.sent();return[4,Promise.all(this.subGroups.map((function(t,r){return __awaiter$d(v,void 0,void 0,(function(){var n,i,o,l,p,v,g,y,m,_,S,b,C;var x,w;var O;return __generator$d(this,(function(T){switch(T.label){case 0:n=t.dataNodeGroup,i=t.markerGroup,o=t.datumSelection,l=t.labelSelection,p=t.markerSelection,v=t.paths,g=t.labelGroup;y=a[r].itemId;m=d&&((O=s.get(y))!==null&&O!==void 0?O:true);_=h?f[r]:1;n.opacity=_;n.visible=m;g.visible=m;if(i){i.opacity=_;i.zIndex=n.zIndex>=Layers.SERIES_LAYER_ZINDEX?n.zIndex:n.zIndex+1;i.visible=m}if(g){g.opacity=_}try{for(S=__values$m(v),b=S.next();!b.done;b=S.next()){C=b.value;if(!c){C.opacity=_;C.visible=m}}}catch(e){x={error:e}}finally{try{if(b&&!b.done&&(w=S.return))w.call(S)}finally{if(x)throw x.error}}if(!n.visible){return[2]}return[4,this.updatePathNodes({seriesHighlighted:e,itemId:y,paths:v,seriesIdx:r})];case 1:T.sent();return[4,this.updateDatumNodes({datumSelection:o,isHighlight:false,seriesIdx:r})];case 2:T.sent();return[4,this.updateLabelNodes({labelSelection:l,seriesIdx:r})];case 3:T.sent();if(!(u&&p))return[3,5];return[4,this.updateMarkerNodes({markerSelection:p,isHighlight:false,seriesIdx:r})];case 4:T.sent();T.label=5;case 5:return[2]}}))}))})))];case 6:g.sent();return[2]}}))}))};t.prototype.updateHighlightSelection=function(e){var t;return __awaiter$d(this,void 0,void 0,(function(){var r,n,i,o,a,s,l,u,c,d,p,f,h,v;var g,y;return __generator$d(this,(function(m){switch(m.label){case 0:r=this,n=r.highlightSelection,i=r.highlightLabelSelection,o=r._contextNodeData;a=(t=this.highlightManager)===null||t===void 0?void 0:t.getActiveHighlight();s=e&&(a===null||a===void 0?void 0:a.datum)?a:undefined;l=this;return[4,this.updateHighlightSelectionItem({item:s,highlightSelection:n})];case 1:l.highlightSelection=m.sent();if(this.isLabelEnabled()&&s!=null){c=s.itemId,d=c===void 0?undefined:c;try{for(p=__values$m(o),f=p.next();!f.done;f=p.next()){h=f.value.labelData;u=h.find((function(e){return e.datum===s.datum&&e.itemId===d}));if(u!=null){break}}}catch(e){g={error:e}}finally{try{if(f&&!f.done&&(y=p.return))y.call(p)}finally{if(g)throw g.error}}}v=this;return[4,this.updateHighlightSelectionLabel({item:u,highlightLabelSelection:i})];case 2:v.highlightLabelSelection=m.sent();return[2]}}))}))};t.prototype.pickNodeExactShape=function(t){var r,n;var i=e.prototype.pickNodeExactShape.call(this,t);if(i){return i}var o=t.x,a=t.y;var s=this.opts.hasMarkers;try{for(var l=__values$m(this.subGroups),u=l.next();!u.done;u=l.next()){var c=u.value,d=c.dataNodeGroup,p=c.markerGroup;var f=d.pickNode(o,a);if(!f&&s){f=p===null||p===void 0?void 0:p.pickNode(o,a)}if(f){return{datum:f.datum,distance:0}}}}catch(e){r={error:e}}finally{try{if(u&&!u.done&&(n=l.return))n.call(l)}finally{if(r)throw r.error}}};t.prototype.pickNodeClosestDatum=function(e){var t,r,n,i;var o,a;var s=e.x,l=e.y;var u=this,c=u.xAxis,d=u.yAxis,p=u.rootGroup,f=u._contextNodeData;var h=p.transformPoint(s,l);var v=Infinity;var g;try{for(var y=__values$m(f),m=y.next();!m.done;m=y.next()){var _=m.value;try{for(var S=(n=void 0,__values$m(_.nodeData)),b=S.next();!b.done;b=S.next()){var C=b.value;var x=C.point,w=x===void 0?{}:x,O=w.x,T=O===void 0?NaN:O,E=w.y,P=E===void 0?NaN:E;if(isNaN(T)||isNaN(P)){continue}var A=(c===null||c===void 0?void 0:c.inRange(T))&&(d===null||d===void 0?void 0:d.inRange(P));if(!A){continue}var R=Math.max(Math.pow(h.x-T,2)+Math.pow(h.y-P,2),0);if(R<v){v=R;g=C}}}catch(e){n={error:e}}finally{try{if(b&&!b.done&&(i=S.return))i.call(S)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{if(m&&!m.done&&(r=y.return))r.call(y)}finally{if(t)throw t.error}}if(g){var R=Math.max(Math.sqrt(v)-((a=(o=g.point)===null||o===void 0?void 0:o.size)!==null&&a!==void 0?a:0),0);return{datum:g,distance:R}}};t.prototype.pickNodeMainAxisFirst=function(e,t){var r,n,i,o;var a,s;var l=e.x,u=e.y;var c=this,d=c.xAxis,p=c.yAxis,f=c.rootGroup,h=c._contextNodeData;var v=[d,p].filter((function(e){return e instanceof CategoryAxis})).map((function(e){return e.direction}));if(t&&v.length===0){return}var g=__read$J(v,1),y=g[0],m=y===void 0?ChartAxisDirection.X:y;var _=f.transformPoint(l,u);var S=m===ChartAxisDirection.X?[_.x,_.y]:[_.y,_.x];var b=[Infinity,Infinity];var C=undefined;try{for(var x=__values$m(h),w=x.next();!w.done;w=x.next()){var O=w.value;try{for(var T=(i=void 0,__values$m(O.nodeData)),E=T.next();!E.done;E=T.next()){var P=E.value;var A=P.point,R=A===void 0?{}:A,D=R.x,M=D===void 0?NaN:D,N=R.y,I=N===void 0?NaN:N;if(isNaN(M)||isNaN(I)){continue}var L=(d===null||d===void 0?void 0:d.inRange(M))&&(p===null||p===void 0?void 0:p.inRange(I));if(!L){continue}var k=m===ChartAxisDirection.X?[M,I]:[I,M];var F=true;for(var $=0;$<k.length;$++){var G=Math.abs(k[$]-S[$]);if(G>b[$]){F=false;break}if(G<b[$]){b[$]=G;b.fill(Infinity,$+1,b.length)}}if(F){C=P}}}catch(e){i={error:e}}finally{try{if(E&&!E.done&&(o=T.return))o.call(T)}finally{if(i)throw i.error}}}}catch(e){r={error:e}}finally{try{if(w&&!w.done&&(n=x.return))n.call(x)}finally{if(r)throw r.error}}if(C){var B=Math.max(Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2))-((s=(a=C.point)===null||a===void 0?void 0:a.size)!==null&&s!==void 0?s:0),0);return{datum:C,distance:B}}};t.prototype.toggleSeriesItem=function(t,r){if(this.seriesItemEnabled.size>0){this.seriesItemEnabled.set(t,r);this.nodeDataRefresh=true}else{e.prototype.toggleSeriesItem.call(this,t,r)}};t.prototype.isEnabled=function(){var t,r;if(this.seriesItemEnabled.size>0){try{for(var n=__values$m(this.seriesItemEnabled),i=n.next();!i.done;i=n.next()){var o=__read$J(i.value,2),a=o[1];if(a){return true}}}catch(e){t={error:e}}finally{try{if(i&&!i.done&&(r=n.return))r.call(n)}finally{if(t)throw t.error}}return false}return e.prototype.isEnabled.call(this)};t.prototype.isPathOrSelectionDirty=function(){return false};t.prototype.getLabelData=function(){return[]};t.prototype.isAnySeriesVisible=function(){var e,t;try{for(var r=__values$m(this.seriesItemEnabled.values()),n=r.next();!n.done;n=r.next()){var i=n.value;if(i){return true}}}catch(t){e={error:t}}finally{try{if(n&&!n.done&&(t=r.return))t.call(r)}finally{if(e)throw e.error}}return false};t.prototype.validateXYData=function(e,t,r,n,i,o,a,s){var l;if(s===void 0){s=1}if(((l=this.chart)===null||l===void 0?void 0:l.mode)==="integrated"){return true}if(!n||!i||r.length===0||this.seriesItemEnabled.size>0&&!this.isAnySeriesVisible()){return true}var u=function(e,t,r){if(t===void 0){t=0}if(r===void 0){r=0}return e.some(t===r?function(e){return isContinuous(e)}:function(e){return u(e,t+1,r)})};var c=n.scale instanceof ContinuousScale;var d=i.scale instanceof ContinuousScale;var p=true;if(c&&!u(o)){Logger.warnOnce("the number axis has no numeric data supplied for xKey: ["+e+"].");p=false}if(d&&!u(a,0,s-1)){Logger.warnOnce("the number axis has no numeric data supplied for yKey: ["+t+"].");p=false}return p};t.prototype.updatePaths=function(e){return __awaiter$d(this,void 0,void 0,(function(){return __generator$d(this,(function(t){e.paths.forEach((function(e){return e.visible=false}));return[2]}))}))};t.prototype.updatePathNodes=function(e){return __awaiter$d(this,void 0,void 0,(function(){return __generator$d(this,(function(e){return[2]}))}))};t.prototype.updateHighlightSelectionItem=function(e){return __awaiter$d(this,void 0,void 0,(function(){var t,r,n,i,o;return __generator$d(this,(function(a){t=this.opts.hasMarkers;r=e.item,n=e.highlightSelection;i=r?[r]:[];if(t){o=n;return[2,this.updateMarkerSelection({nodeData:i,markerSelection:o,seriesIdx:-1})]}else{return[2,this.updateDatumSelection({nodeData:i,datumSelection:n,seriesIdx:-1})]}}))}))};t.prototype.updateHighlightSelectionLabel=function(e){return __awaiter$d(this,void 0,void 0,(function(){var t,r,n;return __generator$d(this,(function(i){t=e.item,r=e.highlightLabelSelection;n=t?[t]:[];return[2,this.updateLabelSelection({labelData:n,labelSelection:r,seriesIdx:-1})]}))}))};t.prototype.updateDatumSelection=function(e){return __awaiter$d(this,void 0,void 0,(function(){return __generator$d(this,(function(t){return[2,e.datumSelection]}))}))};t.prototype.updateDatumNodes=function(e){return __awaiter$d(this,void 0,void 0,(function(){return __generator$d(this,(function(e){return[2]}))}))};t.prototype.updateMarkerSelection=function(e){return __awaiter$d(this,void 0,void 0,(function(){return __generator$d(this,(function(t){return[2,e.markerSelection]}))}))};t.prototype.updateMarkerNodes=function(e){return __awaiter$d(this,void 0,void 0,(function(){return __generator$d(this,(function(e){return[2]}))}))};return t}(Series);var CartesianSeriesMarker=function(e){__extends$2i(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.formatter=undefined;return t}__decorate$1A([Validate(OPT_FUNCTION),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"formatter",void 0);return t}(SeriesMarker);function sleep(e){return new Promise((function(t){setTimeout((function(){return t(undefined)}),e)}))}var __decorate$1z=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Overlay=function(){function e(e,t){this.renderer=undefined;this.text=undefined;this.className=e;this.parentElement=t}e.prototype.show=function(e){var t,r;var n=this.element;if(!this.element){n=document.createElement("div");n.className=this.className;this.element=n}n.style.position="absolute";n.style.left=e.x+"px";n.style.top=e.y+"px";n.style.width=e.width+"px";n.style.height=e.height+"px";if(this.renderer){this.element.innerHTML=this.renderer()}else{var i=document.createElement("div");i.style.alignItems="center";i.style.boxSizing="border-box";i.style.display="flex";i.style.justifyContent="center";i.style.margin="8px";i.style.height="100%";i.style.font="12px Verdana, sans-serif";i.innerText=(t=this.text)!==null&&t!==void 0?t:"No data to display";n.append(i)}(r=this.parentElement)===null||r===void 0?void 0:r.append(n)};e.prototype.hide=function(){var e;(e=this.element)===null||e===void 0?void 0:e.remove();this.element=undefined};__decorate$1z([Validate(OPT_FUNCTION)],e.prototype,"renderer",void 0);__decorate$1z([Validate(OPT_STRING)],e.prototype,"text",void 0);return e}();var ChartOverlays=function(){function e(e){this.noData=new Overlay("ag-chart-no-data-overlay",e)}return e}();var __read$I=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$n=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$I(arguments[t]));return e};var __values$l=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var Listeners=function(){function e(){this.registeredListeners={}}e.prototype.addListener=function(e,t){var r;var n=Symbol(e);if(!this.registeredListeners[e]){this.registeredListeners[e]=[]}(r=this.registeredListeners[e])===null||r===void 0?void 0:r.push({symbol:n,handler:t});return n};e.prototype.dispatch=function(e){var t;var r=[];for(var n=1;n<arguments.length;n++){r[n-1]=arguments[n]}var i=(t=this.registeredListeners[e])!==null&&t!==void 0?t:[];return i.map((function(e){return e.handler.apply(e,__spread$n(r))}))};e.prototype.cancellableDispatch=function(e,t){var r,n;var i;var o=[];for(var a=2;a<arguments.length;a++){o[a-2]=arguments[a]}var s=(i=this.registeredListeners[e])!==null&&i!==void 0?i:[];var l=[];try{for(var u=__values$l(s),c=u.next();!c.done;c=u.next()){var d=c.value;if(t())break;l.push(d.handler.apply(d,__spread$n(o)))}}catch(e){r={error:e}}finally{try{if(c&&!c.done&&(n=u.return))n.call(u)}finally{if(r)throw r.error}}return l};e.prototype.reduceDispatch=function(e,t){var r,n;var i;var o=[];for(var a=2;a<arguments.length;a++){o[a-2]=arguments[a]}var s=(i=this.registeredListeners[e])!==null&&i!==void 0?i:[];var l=undefined;try{for(var u=__values$l(s),c=u.next();!c.done;c=u.next()){var d=c.value;l=d.handler.apply(d,__spread$n(o));o=t.apply(void 0,__spread$n([l],o))}}catch(e){r={error:e}}finally{try{if(c&&!c.done&&(n=u.return))n.call(u)}finally{if(r)throw r.error}}return l};e.prototype.removeListener=function(e){for(var t in this.registeredListeners){var r=this.registeredListeners[t];var n=r===null||r===void 0?void 0:r.findIndex((function(t){return t.symbol===e}));if(n!=null&&n>=0){r===null||r===void 0?void 0:r.splice(n,1)}if(n!=null&&(r===null||r===void 0?void 0:r.length)===0){delete this.registeredListeners[t]}}};return e}();var BaseManager=function(){function e(){this.listeners=new Listeners}e.prototype.addListener=function(e,t){return this.listeners.addListener(e,t)};e.prototype.removeListener=function(e){this.listeners.removeListener(e)};return e}();var __extends$2h=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$C=function(){__assign$C=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$C.apply(this,arguments)};var __awaiter$c=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$c=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __values$k=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var WINDOW_EVENT_HANDLERS=["pagehide","mousemove","mouseup","wheel"];var EVENT_HANDLERS=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel"];var CSS="\n.ag-chart-wrapper {\n    touch-action: none;\n}\n";var InteractionManager=function(e){__extends$2h(t,e);function t(r,n){var i,o,a,s;if(n===void 0){n=document}var l=e.call(this)||this;l.eventHandler=function(e){return l.processEvent(e)};l.mouseDown=false;l.touchDown=false;l.rootElement=n.body;l.element=r;try{for(var u=__values$k(EVENT_HANDLERS),c=u.next();!c.done;c=u.next()){var d=c.value;if(d.startsWith("touch")){r.addEventListener(d,l.eventHandler,{passive:true})}else{r.addEventListener(d,l.eventHandler)}}}catch(e){i={error:e}}finally{try{if(c&&!c.done&&(o=u.return))o.call(u)}finally{if(i)throw i.error}}try{for(var p=__values$k(WINDOW_EVENT_HANDLERS),f=p.next();!f.done;f=p.next()){var d=f.value;window.addEventListener(d,l.eventHandler)}}catch(e){a={error:e}}finally{try{if(f&&!f.done&&(s=p.return))s.call(p)}finally{if(a)throw a.error}}if(t.interactionDocuments.indexOf(n)<0){var h=document.createElement("style");h.innerHTML=CSS;document.head.insertBefore(h,document.head.querySelector("style"));t.interactionDocuments.push(n)}return l}t.prototype.destroy=function(){var e,t,r,n;try{for(var i=__values$k(WINDOW_EVENT_HANDLERS),o=i.next();!o.done;o=i.next()){var a=o.value;window.removeEventListener(a,this.eventHandler)}}catch(t){e={error:t}}finally{try{if(o&&!o.done&&(t=i.return))t.call(i)}finally{if(e)throw e.error}}try{for(var s=__values$k(EVENT_HANDLERS),l=s.next();!l.done;l=s.next()){var a=l.value;this.element.removeEventListener(a,this.eventHandler)}}catch(e){r={error:e}}finally{try{if(l&&!l.done&&(n=s.return))n.call(s)}finally{if(r)throw r.error}}};t.prototype.processEvent=function(e){var t=this.decideInteractionEventTypes(e);if(t.length>0){this.dispatchEvent(e,t)}};t.prototype.dispatchEvent=function(e,t){return __awaiter$c(this,void 0,void 0,(function(){var r,n,i,o,a,s;var l,u;return __generator$c(this,(function(c){r=this.calculateCoordinates(e);if(r==null){return[2]}n=function(t){var n=i.buildEvent(__assign$C(__assign$C({event:e},r),{type:t}));i.listeners.cancellableDispatch(t,(function(){return n.consumed}),n)};i=this;try{for(o=__values$k(t),a=o.next();!a.done;a=o.next()){s=a.value;n(s)}}catch(e){l={error:e}}finally{try{if(a&&!a.done&&(u=o.return))u.call(o)}finally{if(l)throw l.error}}return[2]}))}))};t.prototype.decideInteractionEventTypes=function(e){switch(e.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":this.mouseDown=true;this.dragStartElement=e.target;return["drag-start"];case"touchstart":this.touchDown=true;this.dragStartElement=e.target;return["drag-start"];case"touchmove":case"mousemove":if(!this.mouseDown&&!this.touchDown&&!this.isEventOverElement(e)){return[]}return this.mouseDown||this.touchDown?["drag"]:["hover"];case"mouseup":if(!this.mouseDown&&!this.isEventOverElement(e)){return[]}this.mouseDown=false;this.dragStartElement=undefined;return["drag-end"];case"touchend":if(!this.touchDown&&!this.isEventOverElement(e)){return[]}this.touchDown=false;this.dragStartElement=undefined;return["drag-end"];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":var t=e instanceof MouseEvent&&(e.buttons&1)===1;if(this.mouseDown!==t){this.mouseDown=t;return[t?"drag-start":"drag-end"]}return[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]};t.prototype.isEventOverElement=function(e){var t;return e.target===this.element||((t=e.target)===null||t===void 0?void 0:t.parentElement)===this.element};t.prototype.calculateCoordinates=function(e){var r;if(e instanceof MouseEvent){var n=e.clientX,i=e.clientY,o=e.pageX,a=e.pageY,s=e.offsetX,l=e.offsetY;return this.fixOffsets(e,{clientX:n,clientY:i,pageX:o,pageY:a,offsetX:s,offsetY:l})}else if(typeof TouchEvent!=="undefined"&&e instanceof TouchEvent){var u=(r=e.touches[0])!==null&&r!==void 0?r:e.changedTouches[0];var n=u.clientX,i=u.clientY,o=u.pageX,a=u.pageY;return __assign$C(__assign$C({},t.NULL_COORDS),{clientX:n,clientY:i,pageX:o,pageY:a})}else if(e instanceof PageTransitionEvent){if(e.persisted){return}return t.NULL_COORDS}};t.prototype.fixOffsets=function(e,t){var r=function(e){var t=0;var r=0;while(e){t+=e.offsetLeft;r+=e.offsetTop;e=e.offsetParent}return{x:t,y:r}};if(this.dragStartElement!=null&&e.target!==this.dragStartElement){var n=r(this.dragStartElement);var i=r(e.target);t.offsetX-=n.x-i.x;t.offsetY-=n.y-i.y}return t};t.prototype.buildEvent=function(e){var t=e.type,r=e.event,n=e.clientX,i=e.clientY;var o=e.offsetX,a=e.offsetY,s=e.pageX,l=e.pageY;if(!isNumber$4(o)||!isNumber$4(a)){var u=this.element.getBoundingClientRect();o=n-u.left;a=i-u.top}if(!isNumber$4(s)||!isNumber$4(l)){var c=this.rootElement.getBoundingClientRect();s=n-c.left;l=i-c.top}var d={type:t,offsetX:o,offsetY:a,pageX:s,pageY:l,sourceEvent:r,consumed:false,consume:function(){return d.consumed=true}};return d};t.interactionDocuments=[];t.NULL_COORDS={clientX:-Infinity,clientY:-Infinity,pageX:-Infinity,pageY:-Infinity,offsetX:-Infinity,offsetY:-Infinity};return t}(BaseManager);var __read$H=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var CursorManager=function(){function e(e){this.states={};this.element=e}e.prototype.updateCursor=function(e,t){delete this.states[e];if(t!=null){this.states[e]={style:t}}this.applyStates()};e.prototype.applyStates=function(){var e="default";Object.entries(this.states).reverse().slice(0,1).forEach((function(t){var r=__read$H(t,2);r[0];var n=r[1].style;return e=n}));this.element.style.cursor=e};return e}();var __extends$2g=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __read$G=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};function isEqual$1(e,t){if(e===t)return true;if((e===null||e===void 0?void 0:e.series)!==(t===null||t===void 0?void 0:t.series))return false;if((e===null||e===void 0?void 0:e.itemId)!==(t===null||t===void 0?void 0:t.itemId))return false;if((e===null||e===void 0?void 0:e.datum)!==(t===null||t===void 0?void 0:t.datum))return false;return true}var HighlightManager=function(e){__extends$2g(t,e);function t(){var t=e.call(this)||this;t.states={};t.activeHighlight=undefined;return t}t.prototype.updateHighlight=function(e,t){delete this.states[e];if(t!=null){this.states[e]={highlightedDatum:t}}this.applyStates()};t.prototype.getActiveHighlight=function(){return this.activeHighlight};t.prototype.applyStates=function(){var e=this.activeHighlight;var t=undefined;Object.entries(this.states).reverse().slice(0,1).forEach((function(e){var r=__read$G(e,2);r[0];var n=r[1].highlightedDatum;return t=n}));this.activeHighlight=t;var r=!isEqual$1(e,this.activeHighlight);if(r){var n={type:"highlight-change",previousHighlight:e,currentHighlight:this.activeHighlight};this.listeners.dispatch("highlight-change",n)}};return t}(BaseManager);var __values$j=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$F=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var TooltipManager=function(){function e(e,t){var r=this;this.states={};this.exclusiveAreas={};this.destroyFns=[];this.tooltip=e;var n=t.addListener("hover",(function(e){return r.checkExclusiveRects(e)}));this.destroyFns.push((function(){return t.removeListener(n)}))}e.prototype.updateTooltip=function(e,t,r){var n;if(r==null){r=(n=this.states[e])===null||n===void 0?void 0:n.content}this.states[e]={content:r,meta:t};this.applyStates()};e.prototype.updateExclusiveRect=function(e,t){if(t){this.exclusiveAreas[e]=t}else{delete this.exclusiveAreas[e]}};e.prototype.removeTooltip=function(e){delete this.states[e];this.applyStates()};e.prototype.getTooltipMeta=function(e){var t;return(t=this.states[e])===null||t===void 0?void 0:t.meta};e.prototype.destroy=function(){var e,t;try{for(var r=__values$j(this.destroyFns),n=r.next();!n.done;n=r.next()){var i=n.value;i()}}catch(t){e={error:t}}finally{try{if(n&&!n.done&&(t=r.return))t.call(r)}finally{if(e)throw e.error}}};e.prototype.checkExclusiveRects=function(e){var t,r;var n;try{for(var i=__values$j(Object.entries(this.exclusiveAreas)),o=i.next();!o.done;o=i.next()){var a=__read$F(o.value,2),s=a[0],l=a[1];if(!l.containsPoint(e.offsetX,e.offsetY)){continue}n=s;break}}catch(e){t={error:e}}finally{try{if(o&&!o.done&&(r=i.return))r.call(i)}finally{if(t)throw t.error}}if(n===this.appliedExclusiveArea){return}this.appliedExclusiveArea=n;this.applyStates()};e.prototype.applyStates=function(){var e=this;var t;var r=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);var n=undefined;var i=undefined;r.reverse().slice(0,1).forEach((function(t){var r;var o=(r=e.states[t])!==null&&r!==void 0?r:{},a=o.content,s=o.meta;n=a;i=s}));if(i===undefined||n===undefined){this.appliedState=undefined;this.tooltip.toggle(false);return}if(((t=this.appliedState)===null||t===void 0?void 0:t.content)===n){var o=this.tooltip.isVisible();this.tooltip.show(i,undefined,o)}else{this.tooltip.show(i,n)}this.appliedState={content:n,meta:i}};return e}();var __extends$2f=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$B=function(){__assign$B=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$B.apply(this,arguments)};var __values$i=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$E=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};function isEqual(e,t){var r,n,i,o,a,s,l,u;if(e===t)return true;if(((r=e===null||e===void 0?void 0:e.x)===null||r===void 0?void 0:r.min)!==((n=t===null||t===void 0?void 0:t.x)===null||n===void 0?void 0:n.min))return false;if(((i=e===null||e===void 0?void 0:e.x)===null||i===void 0?void 0:i.max)!==((o=t===null||t===void 0?void 0:t.x)===null||o===void 0?void 0:o.max))return false;if(((a=e===null||e===void 0?void 0:e.y)===null||a===void 0?void 0:a.max)!==((s=t===null||t===void 0?void 0:t.y)===null||s===void 0?void 0:s.max))return false;if(((l=e===null||e===void 0?void 0:e.y)===null||l===void 0?void 0:l.min)!==((u=t===null||t===void 0?void 0:t.y)===null||u===void 0?void 0:u.min))return false;return true}var ZoomManager=function(e){__extends$2f(t,e);function t(){var t=e.call(this)||this;t.states={};t.currentZoom=undefined;return t}t.prototype.updateZoom=function(e,t){delete this.states[e];if(t!=null){this.states[e]=__assign$B({},t)}this.applyStates()};t.prototype.getZoom=function(){return this.currentZoom};t.prototype.applyStates=function(){var e,t;var r=this.currentZoom;var n={};try{for(var i=__values$i(Object.entries(this.states)),o=i.next();!o.done;o=i.next()){var a=__read$E(o.value,2),s=a[0],l=a[1],u=l.x,c=l.y;n.x=u!==null&&u!==void 0?u:n.x;n.y=c!==null&&c!==void 0?c:n.y}}catch(t){e={error:t}}finally{try{if(o&&!o.done&&(t=i.return))t.call(i)}finally{if(e)throw e.error}}this.currentZoom=n.x!=null||n.y!=null?n:undefined;var d=!isEqual(r,this.currentZoom);if(!d){return}var p=__assign$B({type:"zoom-change"},r!==null&&r!==void 0?r:{});this.listeners.dispatch("zoom-change",p)};return t}(BaseManager);var __assign$A=function(){__assign$A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$A.apply(this,arguments)};function isLayoutStage(e){return e!=="layout-complete"}function isLayoutComplete(e){return e==="layout-complete"}var LayoutService=function(){function e(){this.layoutProcessors=new Listeners;this.listeners=new Listeners}e.prototype.addListener=function(e,t){if(isLayoutStage(e)){return this.layoutProcessors.addListener(e,t)}else if(isLayoutComplete(e)){return this.listeners.addListener(e,t)}throw new Error("AG Charts - unsupported listener type: "+e)};e.prototype.removeListener=function(e){this.listeners.removeListener(e);this.layoutProcessors.removeListener(e)};e.prototype.dispatchPerformLayout=function(e,t){var r=this.layoutProcessors.reduceDispatch(e,(function(e,t){var r=e.shrinkRect;return[__assign$A(__assign$A({},t),{shrinkRect:r})]}),t);return r!==null&&r!==void 0?r:t};e.prototype.dispatchLayoutComplete=function(e){this.listeners.dispatch("layout-complete",e)};return e}();var UpdateService=function(){function e(e){this.updateCallback=e}e.prototype.update=function(e){if(e===void 0){e=ChartUpdateType.FULL}this.updateCallback(e)};return e}();var __decorate$1y=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ChartHighlight=function(){function e(){this.range="tooltip"}__decorate$1y([Validate(STRING_UNION("tooltip","node"))],e.prototype,"range",void 0);return e}();var __extends$2e=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$z=function(){__assign$z=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$z.apply(this,arguments)};var __decorate$1x=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __awaiter$b=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$b=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __values$h=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$D=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$m=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$D(arguments[t]));return e};var Chart=function(e){__extends$2e(t,e);function t(t,r,n){if(t===void 0){t=window.document}var i;var o=e.call(this)||this;o.id=createId$1(o);o.processedOptions={};o.userOptions={};o.queuedUserOptions=[];o.seriesRoot=new Group({name:o.id+"-Series-root"});o.extraDebugStats={};o._container=undefined;o.data=[];o.padding=new Padding$1(20);o.seriesAreaPadding=new Padding$1(0);o.title=undefined;o.subtitle=undefined;o.footnote=undefined;o.mode="standalone";o._destroyed=false;o.modules={};o._pendingFactoryUpdates=[];o._performUpdateNoRenderCount=0;o._performUpdateType=ChartUpdateType.NONE;o.seriesToUpdate=new Set;o.performUpdateTrigger=debouncedCallback((function(e){var t=e.count;return __awaiter$b(o,void 0,void 0,(function(){var e;return __generator$b(this,(function(r){switch(r.label){case 0:if(this._destroyed)return[2];r.label=1;case 1:r.trys.push([1,3,,4]);return[4,this.performUpdate(t)];case 2:r.sent();return[3,4];case 3:e=r.sent();this._lastPerformUpdateError=e;Logger.error("update error",e);return[3,4];case 4:return[2]}}))}))}));o._axes=[];o._series=[];o.lastInteractionEvent=undefined;o.pointerScheduler=debouncedAnimationFrame((function(){if(o.lastInteractionEvent){o.handlePointer(o.lastInteractionEvent)}o.lastInteractionEvent=undefined}));o.onSeriesNodeClick=function(e){var t=__assign$z(__assign$z({},e),{type:"seriesNodeClick"});Object.defineProperty(t,"series",{enumerable:false,get:function(){return e.series}});o.fireEvent(t)};o.onSeriesNodeDoubleClick=function(e){var t=__assign$z(__assign$z({},e),{type:"seriesNodeDoubleClick"});o.fireEvent(t)};var a=n===null||n===void 0?void 0:n.scene;var s=(i=n===null||n===void 0?void 0:n.element)!==null&&i!==void 0?i:t.createElement("div");var l=n===null||n===void 0?void 0:n.container;var u=new Group({name:"root"});u.visible=false;u.append(o.seriesRoot);o.axisGroup=new Group({name:"Axes",layer:true,zIndex:Layers.AXIS_ZINDEX});u.appendChild(o.axisGroup);o.element=s;s.classList.add("ag-chart-wrapper");s.style.position="relative";o.scene=a!==null&&a!==void 0?a:new Scene({document:t,overrideDevicePixelRatio:r});o.debug=false;o.scene.debug.consoleLog=false;o.scene.root=u;o.scene.container=s;o.autoSize=true;o.interactionManager=new InteractionManager(s);o.cursorManager=new CursorManager(s);o.highlightManager=new HighlightManager;o.zoomManager=new ZoomManager;o.layoutService=new LayoutService;o.updateService=new UpdateService((function(e){if(e===void 0){e=ChartUpdateType.FULL}return o.update(e)}));SizeMonitor.observe(o.element,(function(e){var t=e.width,r=e.height;if(!o.autoSize){return}if(t===0&&r===0){return}if(t===o.width&&r===o.height){return}o._lastAutoSize=[t,r];o.resize(t,r)}));o.layoutService.addListener("start-layout",(function(e){return o.positionPadding(e.shrinkRect)}));o.layoutService.addListener("start-layout",(function(e){return o.positionCaptions(e.shrinkRect)}));o.tooltip=new Tooltip(o.scene.canvas.element,t,t.body);o.tooltipManager=new TooltipManager(o.tooltip,o.interactionManager);o.legend=new Legend(o,o.interactionManager,o.cursorManager,o.highlightManager,o.tooltipManager,o.layoutService);o.overlays=new ChartOverlays(o.element);o.highlight=new ChartHighlight;o.container=l;o.interactionManager.addListener("click",(function(e){return o.onClick(e)}));o.interactionManager.addListener("dblclick",(function(e){return o.onDoubleClick(e)}));o.interactionManager.addListener("hover",(function(e){return o.onMouseMove(e)}));o.interactionManager.addListener("leave",(function(e){return o.onLeave(e)}));o.interactionManager.addListener("page-left",(function(){return o.destroy()}));o.interactionManager.addListener("wheel",(function(){return o.disablePointer()}));o.zoomManager.addListener("zoom-change",(function(e){return o.update(ChartUpdateType.PROCESS_DATA,{forceNodeDataRefresh:true})}));o.highlightManager.addListener("highlight-change",(function(e){return o.changeHighlightDatum(e)}));return o}t.prototype.getOptions=function(){var e;var t=this.queuedUserOptions;var r=(e=t[t.length-1])!==null&&e!==void 0?e:this.userOptions;return jsonMerge([r])};Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(e){if(this._container!==e){var t=this.element.parentNode;if(t!=null){t.removeChild(this.element)}if(e&&!this.destroyed){e.appendChild(this.element)}this._container=e}},enumerable:false,configurable:true});t.prototype.autoSizeChanged=function(e){var t=this.element.style;if(e){t.display="block";t.width="100%";t.height="100%";if(!this._lastAutoSize){return}this.resize(this._lastAutoSize[0],this._lastAutoSize[1])}else{t.display="inline-block";t.width="auto";t.height="auto"}};t.prototype.download=function(e,t){this.scene.download(e,t)};Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:false,configurable:true});t.prototype.addModule=function(e){if(this.modules[e.optionsKey]!=null){throw new Error("AG Charts - module already initialised: "+e.optionsKey)}var t=e.initialiseModule(this.getModuleContext());this.modules[e.optionsKey]=t;this[e.optionsKey]=t.instance};t.prototype.removeModule=function(e){var t,r;(r=(t=this.modules[e.optionsKey])===null||t===void 0?void 0:t.instance)===null||r===void 0?void 0:r.destroy();delete this.modules[e.optionsKey];delete this[e.optionsKey]};t.prototype.isModuleEnabled=function(e){return this.modules[e.optionsKey]!=null};t.prototype.getModuleContext=function(){var e=this,t=e.scene,r=e.interactionManager,n=e.zoomManager,i=e.cursorManager,o=e.highlightManager,a=e.tooltipManager,s=e.layoutService,l=e.updateService;return{scene:t,interactionManager:r,zoomManager:n,cursorManager:i,highlightManager:o,tooltipManager:a,layoutService:s,updateService:l}};t.prototype.destroy=function(e){var t,r;if(this._destroyed){return}var n=e===null||e===void 0?void 0:e.keepTransferableResources;var i=undefined;this._performUpdateType=ChartUpdateType.NONE;this._pendingFactoryUpdates.splice(0);this.tooltipManager.destroy();this.tooltip.destroy();this.legend.destroy();SizeMonitor.unobserve(this.element);try{for(var o=__values$h(Object.entries(this.modules)),a=o.next();!a.done;a=o.next()){var s=__read$D(a.value,2),l=s[0],u=s[1];u.instance.destroy();delete this.modules[l];delete this[l]}}catch(e){t={error:e}}finally{try{if(a&&!a.done&&(r=o.return))r.call(o)}finally{if(t)throw t.error}}this.interactionManager.destroy();if(n){this.scene.strip();i={container:this.container,scene:this.scene,element:this.element}}else{this.scene.destroy();this.container=undefined}this.series.forEach((function(e){return e.destroy()}));this.series=[];this.axes.forEach((function(e){return e.destroy()}));this.axes=[];this._destroyed=true;return i};t.prototype.log=function(e){if(this.debug){Logger.debug(e)}};t.prototype.disablePointer=function(e){if(e===void 0){e=false}if(!e){this.tooltipManager.removeTooltip(this.id)}this.highlightManager.updateHighlight(this.id);if(this.lastInteractionEvent){this.lastInteractionEvent=undefined}};t.prototype.requestFactoryUpdate=function(e){var t=this._pendingFactoryUpdates;var r=t.length;if(r===0){t.push(e);this._processCallbacks()}else{t.splice(1,r-1,e)}};t.prototype._processCallbacks=function(){return __awaiter$b(this,void 0,void 0,(function(){var e,t;return __generator$b(this,(function(r){switch(r.label){case 0:e=this._pendingFactoryUpdates;r.label=1;case 1:if(!(e.length>0))return[3,7];if(!this.updatePending)return[3,3];return[4,sleep(1)];case 2:r.sent();return[3,1];case 3:r.trys.push([3,5,,6]);return[4,e[0]()];case 4:r.sent();return[3,6];case 5:t=r.sent();Logger.error("update error",t);return[3,6];case 6:e.shift();return[3,1];case 7:return[2]}}))}))};Object.defineProperty(t.prototype,"performUpdateType",{get:function(){return this._performUpdateType},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"updatePending",{get:function(){return this._performUpdateType!==ChartUpdateType.NONE||this.lastInteractionEvent!=null},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"lastPerformUpdateError",{get:function(){return this._lastPerformUpdateError},enumerable:false,configurable:true});t.prototype.awaitUpdateCompletion=function(){return __awaiter$b(this,void 0,void 0,(function(){return __generator$b(this,(function(e){switch(e.label){case 0:return[4,this.performUpdateTrigger.await()];case 1:e.sent();return[2]}}))}))};t.prototype.update=function(e,t){var r,n;if(e===void 0){e=ChartUpdateType.FULL}var i=t||{},o=i.forceNodeDataRefresh,a=o===void 0?false:o,s=i.seriesToUpdate,l=s===void 0?this.series:s;if(a){this.series.forEach((function(e){return e.markNodeDataDirty()}))}try{for(var u=__values$h(l),c=u.next();!c.done;c=u.next()){var d=c.value;this.seriesToUpdate.add(d)}}catch(e){r={error:e}}finally{try{if(c&&!c.done&&(n=u.return))n.call(u)}finally{if(r)throw r.error}}if(e<this._performUpdateType){this._performUpdateType=e;this.performUpdateTrigger.schedule()}};t.prototype.performUpdate=function(e){var t;return __awaiter$b(this,void 0,void 0,(function(){var r,n,i,o,a,s,l,u,c,d;return __generator$b(this,(function(p){switch(p.label){case 0:r=this,n=r._performUpdateType,i=r.extraDebugStats;o=[performance.now()];a=n;switch(a){case ChartUpdateType.FULL:return[3,1];case ChartUpdateType.PROCESS_DATA:return[3,1];case ChartUpdateType.PERFORM_LAYOUT:return[3,3];case ChartUpdateType.SERIES_UPDATE:return[3,5];case ChartUpdateType.TOOLTIP_RECALCULATION:return[3,7];case ChartUpdateType.SCENE_RENDER:return[3,8];case ChartUpdateType.NONE:return[3,10]}return[3,11];case 1:return[4,this.processData()];case 2:p.sent();this.disablePointer(true);o.push(performance.now());p.label=3;case 3:if(this.autoSize&&!this._lastAutoSize){s=this._performUpdateNoRenderCount++;if(s<5){this._performUpdateType=ChartUpdateType.PERFORM_LAYOUT;this.performUpdateTrigger.schedule();return[3,11]}}this._performUpdateNoRenderCount=0;return[4,this.performLayout()];case 4:p.sent();this.handleOverlays();o.push(performance.now());p.label=5;case 5:l=this.seriesRect;u=__spread$m(this.seriesToUpdate).map((function(e){return e.update({seriesRect:l})}));this.seriesToUpdate.clear();return[4,Promise.all(u)];case 6:p.sent();o.push(performance.now());p.label=7;case 7:c=this.tooltipManager.getTooltipMeta(this.id);if(n<ChartUpdateType.SERIES_UPDATE&&((t=c===null||c===void 0?void 0:c.event)===null||t===void 0?void 0:t.type)==="hover"){this.handlePointer(c.event)}p.label=8;case 8:return[4,this.scene.render({debugSplitTimes:o,extraDebugStats:i})];case 9:p.sent();this.extraDebugStats={};p.label=10;case 10:this._performUpdateType=ChartUpdateType.NONE;p.label=11;case 11:d=performance.now();this.log({chart:this,durationMs:Math.round((d-o[0])*100)/100,count:e,performUpdateType:ChartUpdateType[n]});return[2]}}))}))};Object.defineProperty(t.prototype,"axes",{get:function(){return this._axes},set:function(e){var t=this;var r=new Set;this._axes.forEach((function(e){e.detachAxis(t.axisGroup);r.add(e)}));this._axes=e.filter((function(e){return!e.linkedTo})).concat(e.filter((function(e){return e.linkedTo})));this._axes.forEach((function(e){e.attachAxis(t.axisGroup);r.delete(e)}));r.forEach((function(e){return e.destroy()}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"series",{get:function(){return this._series},set:function(e){var t=this;this.removeAllSeries();e.forEach((function(e){return t.addSeries(e)}))},enumerable:false,configurable:true});t.prototype.addSeries=function(e,t){var r=this,n=r.series,i=r.seriesRoot;var o=n.indexOf(e)<0;if(o){var a=t?n.indexOf(t):-1;if(a>=0){n.splice(a,0,e);i.insertBefore(e.rootGroup,t.rootGroup)}else{n.push(e);i.append(e.rootGroup)}this.initSeries(e);return true}return false};t.prototype.initSeries=function(e){e.chart=this;e.highlightManager=this.highlightManager;if(!e.data){e.data=this.data}this.addSeriesListeners(e)};t.prototype.freeSeries=function(e){e.chart=undefined;e.removeEventListener("nodeClick",this.onSeriesNodeClick);e.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)};t.prototype.removeAllSeries=function(){var e=this;this.series.forEach((function(t){e.freeSeries(t);e.seriesRoot.removeChild(t.rootGroup)}));this._series=[]};t.prototype.addSeriesListeners=function(e){if(this.hasEventListener("seriesNodeClick")){e.addEventListener("nodeClick",this.onSeriesNodeClick)}if(this.hasEventListener("seriesNodeDoubleClick")){e.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}};t.prototype.updateAllSeriesListeners=function(){var e=this;this.series.forEach((function(t){t.removeEventListener("nodeClick",e.onSeriesNodeClick);t.removeEventListener("nodeDoubleClick",e.onSeriesNodeDoubleClick);e.addSeriesListeners(t)}))};t.prototype.assignSeriesToAxes=function(){var e=this;this.axes.forEach((function(t){t.boundSeries=e.series.filter((function(e){var r=t.direction===ChartAxisDirection.X?e.xAxis:e.yAxis;return r===t}))}))};t.prototype.assignAxesToSeries=function(e){var t=this;if(e===void 0){e=false}var r={};this.axes.forEach((function(e){var t=e.direction;var n=r[t]||(r[t]=[]);n.push(e)}));this.series.forEach((function(n){n.directions.forEach((function(i){var o=i===ChartAxisDirection.X?n.xAxis:n.yAxis;if(o&&!e){return}var a=r[i];if(!a){Logger.warn("no available axis for direction ["+i+"]; check series and axes configuration.");return}var s=n.getKeys(i);var l=t.findMatchingAxis(a,n.getKeys(i));if(!l){Logger.warn("no matching axis for direction ["+i+"] and keys ["+s+"]; check series and axes configuration.");return}if(i===ChartAxisDirection.X){n.xAxis=l}else{n.yAxis=l}}))}))};t.prototype.findMatchingAxis=function(e,t){var r,n,i,o;try{for(var a=__values$h(e),s=a.next();!s.done;s=a.next()){var l=s.value;var u=l.keys;if(!u.length){return l}if(!t){continue}try{for(var c=(i=void 0,__values$h(t)),d=c.next();!d.done;d=c.next()){var p=d.value;if(u.indexOf(p)>=0){return l}}}catch(e){i={error:e}}finally{try{if(d&&!d.done&&(o=c.return))o.call(c)}finally{if(i)throw i.error}}}}catch(e){r={error:e}}finally{try{if(s&&!s.done&&(n=a.return))n.call(a)}finally{if(r)throw r.error}}};t.prototype.resize=function(e,t){if(!e||!t||!Number.isFinite(e)||!Number.isFinite(t))return;if(this.scene.resize(e,t)){this.disablePointer();this.update(ChartUpdateType.PERFORM_LAYOUT,{forceNodeDataRefresh:true})}};t.prototype.processData=function(){return __awaiter$b(this,void 0,void 0,(function(){return __generator$b(this,(function(e){switch(e.label){case 0:if(this.axes.length>0||this.series.some((function(e){return e instanceof CartesianSeries}))){this.assignAxesToSeries(true);this.assignSeriesToAxes()}return[4,Promise.all(this.series.map((function(e){return e.processData()})))];case 1:e.sent();return[4,this.updateLegend()];case 2:e.sent();return[2]}}))}))};t.prototype.placeLabels=function(){var e,t;var r=[];var n=[];try{for(var i=__values$h(this.series),o=i.next();!o.done;o=i.next()){var a=o.value;if(!a.visible){continue}var s=a.getLabelData();if(!(s&&isPointLabelDatum(s[0]))){continue}n.push(s);r.push(a)}}catch(t){e={error:t}}finally{try{if(o&&!o.done&&(t=i.return))t.call(i)}finally{if(e)throw e.error}}var l=this.seriesRect;var u=l&&n.length>0?placeLabels(n,{x:0,y:0,width:l.width,height:l.height}):[];return new Map(u.map((function(e,t){return[r[t],e]})))};t.prototype.updateLegend=function(){return __awaiter$b(this,void 0,void 0,(function(){var e,t;return __generator$b(this,(function(r){e=[];this.series.filter((function(e){return e.showInLegend})).forEach((function(t){e.push.apply(e,__spread$m(t.getLegendData()))}));t=this.legend.item.label.formatter;if(t){e.forEach((function(e){return e.label.text=t({get id(){Logger.warnOnce("LegendLabelFormatterParams.id is deprecated, use seriesId instead");return e.seriesId},itemId:e.itemId,value:e.label.text,seriesId:e.seriesId})}))}this.legend.data=e;return[2]}))}))};t.prototype.performLayout=function(){return __awaiter$b(this,void 0,void 0,(function(){var e,t,r,n;return __generator$b(this,(function(i){this.scene.root.visible=true;e=this.scene,t=e.width,r=e.height;n=new BBox(0,0,t,r);n=this.layoutService.dispatchPerformLayout("start-layout",{shrinkRect:n}).shrinkRect;n=this.layoutService.dispatchPerformLayout("before-series",{shrinkRect:n}).shrinkRect;return[2,n]}))}))};t.prototype.positionPadding=function(e){var t=this.padding;e.shrink(t.left,"left");e.shrink(t.top,"top");e.shrink(t.right,"right");e.shrink(t.bottom,"bottom");return{shrinkRect:e}};t.prototype.positionCaptions=function(e){var t=this,r=t.title,n=t.subtitle,i=t.footnote;var o=e.clone();var a=function(e){var t;var r=o.y;e.node.x=o.x+o.width/2;e.node.y=r;e.node.textBaseline="top";var n=e.node.computeBBox();var i=Math.ceil(n.y-r+n.height+((t=e.spacing)!==null&&t!==void 0?t:0));o.shrink(i,"top")};var s=function(e){var t;var r=o.y+o.height;e.node.x=o.x+o.width/2;e.node.y=r;e.node.textBaseline="bottom";var n=e.node.computeBBox();var i=Math.ceil(r-n.y+((t=e.spacing)!==null&&t!==void 0?t:0));o.shrink(i,"bottom")};if(r){r.node.visible=r.enabled;if(r.node.visible){a(r)}}if(n){n.node.visible=r!==undefined&&r.enabled&&n.enabled;if(n.node.visible){a(n)}}if(i){i.node.visible=i.enabled;if(i.node.visible){s(i)}}return{shrinkRect:o}};t.prototype.getSeriesRect=function(){return this.seriesRect};t.prototype.pickSeriesNode=function(e,t,r){var n,i;var o,a;var s=performance.now();var l=t?[SeriesNodePickMode.EXACT_SHAPE_MATCH]:undefined;var u=__spread$m(this.series).reverse();var c=undefined;try{for(var d=__values$h(u),p=d.next();!p.done;p=d.next()){var f=p.value;if(!f.visible||!f.rootGroup.visible){continue}var h=(o=f.pickNode(e,l))!==null&&o!==void 0?o:{},v=h.match,g=h.distance;if(!v||g==null){continue}if((!c||c.distance>g)&&g<=(r!==null&&r!==void 0?r:Infinity)){c={series:f,distance:g,datum:v}}if(g===0){break}}}catch(e){n={error:e}}finally{try{if(p&&!p.done&&(i=d.return))i.call(d)}finally{if(n)throw n.error}}this.extraDebugStats["pickSeriesNode"]=Math.round(((a=this.extraDebugStats["pickSeriesNode"])!==null&&a!==void 0?a:0)+(performance.now()-s));return c};t.prototype.onMouseMove=function(e){this.lastInteractionEvent=e;this.pointerScheduler.schedule();this.extraDebugStats["mouseX"]=e.offsetX;this.extraDebugStats["mouseY"]=e.offsetY;this.update(ChartUpdateType.SCENE_RENDER)};t.prototype.onLeave=function(e){if(this.tooltip.pointerLeftOntoTooltip(e)){return}this.disablePointer()};t.prototype.handlePointer=function(e){var t=this;var r=this,n=r.lastPick,i=r.hoverRect;var o=e.offsetX,a=e.offsetY;var s=function(e){if(e===void 0){e=false}if(n){t.disablePointer(e)}};if(!(i===null||i===void 0?void 0:i.containsPoint(o,a))){s();return}this.handlePointerTooltip(e,s);this.handlePointerNode(e)};t.prototype.handlePointerTooltip=function(e,t){var r,n;var i=this,o=i.lastPick,a=i.tooltip;var s=a.range;var l=e.pageX,u=e.pageY,c=e.offsetX,d=e.offsetY;var p;if(typeof s==="number"&&Number.isFinite(s)){p=s}var f=this.pickSeriesNode({x:c,y:d},s==="exact",p);if(!f){this.tooltipManager.updateTooltip(this.id);if(this.highlight.range==="tooltip")t(true);return}var h=this.highlight.range==="node"||!o||o.datum!==f.datum;var v;if(h){v=f.series.getTooltipHtml(f.datum);if(this.highlight.range==="tooltip"){this.highlightManager.updateHighlight(this.id,f.datum)}}else if(o){o.event=e.sourceEvent}var g=p!=null;var y=this.tooltip.enabled&&f.series.tooltip.enabled;var m=s==="exact"&&f.distance===0;var _=s==="nearest"||g||m;var S=y&&_&&(!h||v!==undefined);var b={xOffset:f.datum.series.tooltip.position.xOffset,yOffset:f.datum.series.tooltip.position.yOffset};var C=this.mergePointerDatum({pageX:l,pageY:u,offsetX:c,offsetY:d,event:e,position:b},f.datum);C.enableInteraction=(n=(r=f.series.tooltip.interaction)===null||r===void 0?void 0:r.enabled)!==null&&n!==void 0?n:false;if(S){this.tooltipManager.updateTooltip(this.id,C,v)}};t.prototype.handlePointerNode=function(e){var t=this;var r=this.checkSeriesNodeRange(e,(function(e,r){if(e.hasEventListener("nodeClick")||e.hasEventListener("nodeDoubleClick")){t.cursorManager.updateCursor("chart","pointer")}if(t.highlight.range==="node"){t.highlightManager.updateHighlight(t.id,r)}}));if(!r){this.cursorManager.updateCursor("chart");if(this.highlight.range==="node"){this.highlightManager.updateHighlight(this.id)}}};t.prototype.onClick=function(e){if(this.checkSeriesNodeClick(e)){this.update(ChartUpdateType.SERIES_UPDATE);return}this.fireEvent({type:"click",event:e.sourceEvent})};t.prototype.onDoubleClick=function(e){if(this.checkSeriesNodeDoubleClick(e)){this.update(ChartUpdateType.SERIES_UPDATE);return}this.fireEvent({type:"doubleClick",event:e.sourceEvent})};t.prototype.checkSeriesNodeClick=function(e){return this.checkSeriesNodeRange(e,(function(t,r){return t.fireNodeClickEvent(e.sourceEvent,r)}))};t.prototype.checkSeriesNodeDoubleClick=function(e){return this.checkSeriesNodeRange(e,(function(t,r){return t.fireNodeDoubleClickEvent(e.sourceEvent,r)}))};t.prototype.checkSeriesNodeRange=function(e,t){var r=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},false);var n=r===null||r===void 0?void 0:r.datum;var i=n===null||n===void 0?void 0:n.series.nodeClickRange;if(n&&i==="nearest"){t(n.series,n);return true}var o;if(typeof i==="number"&&Number.isFinite(i)){o=i}var a=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},i==="exact",o);if(!a)return false;var s=o!=null;var l=i==="exact"&&a.distance===0;if(s||l){t(a.series,a.datum);return true}return false};t.prototype.mergePointerDatum=function(e,t){var r=t.series.tooltip.position.type;if(r==="node"&&t.nodeMidPoint){var n=t.nodeMidPoint,i=n.x,o=n.y;var a=this.scene.canvas;var s=t.series.rootGroup.inverseTransformPoint(i,o);var l=a.element.getBoundingClientRect();return __assign$z(__assign$z({},e),{pageX:Math.round(l.left+window.scrollX+s.x),pageY:Math.round(l.top+window.scrollY+s.y),offsetX:Math.round(s.x),offsetY:Math.round(s.y)})}return e};t.prototype.changeHighlightDatum=function(e){var t=new Set;var r=e.currentHighlight||{},n=r.series,i=n===void 0?undefined:n,o=r.datum;var a=e.previousHighlight||{},s=a.series,l=s===void 0?undefined:s,u=a.datum;if(l){t.add(l)}if(i){t.add(i)}if((l===null||l===void 0?void 0:l.cursor)&&u){this.cursorManager.updateCursor(l.id)}if((i===null||i===void 0?void 0:i.cursor)&&o){this.cursorManager.updateCursor(i.id,i.cursor)}this.lastPick=e.currentHighlight?{datum:e.currentHighlight}:undefined;var c=i==null||l==null;if(c){this.update(ChartUpdateType.SERIES_UPDATE)}else{this.update(ChartUpdateType.SERIES_UPDATE,{seriesToUpdate:t})}};t.prototype.waitForUpdate=function(e){if(e===void 0){e=5e3}return __awaiter$b(this,void 0,void 0,(function(){var t;return __generator$b(this,(function(r){switch(r.label){case 0:t=performance.now();r.label=1;case 1:if(!(this._pendingFactoryUpdates.length>0||this.updatePending))return[3,3];if(performance.now()-t>e){throw new Error("waitForUpdate() timeout reached.")}return[4,sleep(5)];case 2:r.sent();return[3,1];case 3:return[4,this.awaitUpdateCompletion()];case 4:r.sent();return[2]}}))}))};t.prototype.handleOverlays=function(){this.handleNoDataOverlay()};t.prototype.handleNoDataOverlay=function(){var e=!this.series.some((function(e){return e.hasData()}));var t=this.getSeriesRect();if(e&&t){this.overlays.noData.show(t)}else{this.overlays.noData.hide()}};__decorate$1x([ActionOnSet({newValue:function(e){this.scene.debug.consoleLog=e}})],t.prototype,"debug",void 0);__decorate$1x([ActionOnSet({newValue:function(e){var t;(t=this.series)===null||t===void 0?void 0:t.forEach((function(t){return t.data=e}))}})],t.prototype,"data",void 0);__decorate$1x([ActionOnSet({newValue:function(e){this.autoSize=false;this.resize(e,this.height)}})],t.prototype,"width",void 0);__decorate$1x([ActionOnSet({newValue:function(e){this.autoSize=false;this.resize(this.width,e)}})],t.prototype,"height",void 0);__decorate$1x([ActionOnSet({changeValue:function(e){this.autoSizeChanged(e)}}),Validate(BOOLEAN)],t.prototype,"autoSize",void 0);__decorate$1x([ActionOnSet({newValue:function(e){var t;(t=this.scene.root)===null||t===void 0?void 0:t.appendChild(e.node)},oldValue:function(e){var t;(t=this.scene.root)===null||t===void 0?void 0:t.removeChild(e.node)}})],t.prototype,"title",void 0);__decorate$1x([ActionOnSet({newValue:function(e){var t;(t=this.scene.root)===null||t===void 0?void 0:t.appendChild(e.node)},oldValue:function(e){var t;(t=this.scene.root)===null||t===void 0?void 0:t.removeChild(e.node)}})],t.prototype,"subtitle",void 0);__decorate$1x([ActionOnSet({newValue:function(e){var t;(t=this.scene.root)===null||t===void 0?void 0:t.appendChild(e.node)},oldValue:function(e){var t;(t=this.scene.root)===null||t===void 0?void 0:t.removeChild(e.node)}})],t.prototype,"footnote",void 0);__decorate$1x([Validate(STRING_UNION("standalone","integrated"))],t.prototype,"mode",void 0);return t}(Observable);var TreeNode=function(){function e(e,t,r){if(e===void 0){e=""}if(r===void 0){r=0}this.x=0;this.y=0;this.subtreeLeft=NaN;this.subtreeRight=NaN;this.screenX=0;this.screenY=0;this.children=[];this.leafCount=0;this.prelim=0;this.mod=0;this.ancestor=this;this.change=0;this.shift=0;this.label=e;this.parent=t;this.depth=t?t.depth+1:0;this.number=r}e.prototype.getLeftSibling=function(){return this.number>0&&this.parent?this.parent.children[this.number-1]:undefined};e.prototype.getLeftmostSibling=function(){return this.number>0&&this.parent?this.parent.children[0]:undefined};e.prototype.nextLeft=function(){return this.children?this.children[0]:this.thread};e.prototype.nextRight=function(){return this.children?this.children[this.children.length-1]:this.thread};e.prototype.getSiblings=function(){var e=this;return this.parent?this.parent.children.filter((function(t,r){return r!==e.number})):[]};return e}();function ticksToTree(e,t){if(t===void 0){t=true}var r=new TreeNode;var n=0;if(t){e.forEach((function(e){return n=Math.max(n,e.labels.length)}))}e.forEach((function(e){if(t){while(e.labels.length<n){e.labels.unshift("")}}insertTick(r,e)}));return r}function insertTick(e,t){var r=t.labels.slice().reverse();var n=r.length-1;r.forEach((function(t,r){var i=e.children;var o=i.find((function(e){return e.label===t}));var a=r!==n;if(o&&a){e=o}else{var s=new TreeNode(t,e);s.number=i.length;i.push(s);if(a){e=s}}}))}function moveSubtree(e,t,r){var n=t.number-e.number;var i=r/n;t.change-=i;t.shift+=r;e.change+=i;t.prelim+=r;t.mod+=r}function ancestor(e,t,r){return t.getSiblings().indexOf(e.ancestor)>=0?e.ancestor:r}function executeShifts(e){var t=e.children;if(t){var r=0;var n=0;for(var i=t.length-1;i>=0;i--){var o=t[i];o.prelim+=r;o.mod+=r;n+=o.change;r+=o.shift+n}}}function apportion(e,t,r){var n=e.getLeftSibling();if(n){var i=e;var o=e;var a=n;var s=o.getLeftmostSibling();var l=o.mod;var u=i.mod;var c=a.mod;var d=s.mod;while(a.nextRight()&&o.nextLeft()){a=a.nextRight();o=o.nextLeft();s=s.nextLeft();i=i.nextRight();i.ancestor=e;var p=a.prelim+c-(o.prelim+l)+r;if(p>0){moveSubtree(ancestor(a,e,t),e,p);l+=p;u+=p}c+=a.mod;l+=o.mod;d+=s.mod;u+=i.mod}if(a.nextRight()&&!i.nextRight()){i.thread=a.nextRight();i.mod+=c-u}else{if(o.nextLeft()&&!s.nextLeft()){s.thread=o.nextLeft();s.mod+=l-d}t=e}}return t}function firstWalk(e,t){var r=e.children;if(r.length){var n=r[0];r.forEach((function(e){firstWalk(e,t);n=apportion(e,n,t)}));executeShifts(e);var i=(r[0].prelim+r[r.length-1].prelim)/2;var o=e.getLeftSibling();if(o){e.prelim=o.prelim+t;e.mod=e.prelim-i}else{e.prelim=i}}else{var o=e.getLeftSibling();e.prelim=o?o.prelim+t:0}}var Dimensions=function(){function e(){this.top=Infinity;this.right=-Infinity;this.bottom=-Infinity;this.left=Infinity}e.prototype.update=function(e,t){var r=t(e),n=r.x,i=r.y;if(n>this.right){this.right=n}if(n<this.left){this.left=n}if(i>this.bottom){this.bottom=i}if(i<this.top){this.top=i}};return e}();function secondWalk(e,t,r){e.x=e.prelim+t;e.y=e.depth;r.update(e);e.children.forEach((function(n){return secondWalk(n,t+e.mod,r)}))}function thirdWalk(e){var t=e.children;var r=0;t.forEach((function(e){thirdWalk(e);if(e.children.length){r+=e.leafCount}else{r++}}));e.leafCount=r;if(t.length){e.subtreeLeft=t[0].subtreeLeft;e.subtreeRight=t[e.children.length-1].subtreeRight;e.x=(e.subtreeLeft+e.subtreeRight)/2}else{e.subtreeLeft=e.x;e.subtreeRight=e.x}}function treeLayout(e){var t=new TreeLayout;firstWalk(e,1);secondWalk(e,-e.prelim,t);thirdWalk(e);return t}var TreeLayout=function(){function e(){this.dimensions=new Dimensions;this.leafCount=0;this.nodes=[];this.leafNodes=[];this.nonLeafNodes=[];this.depth=0}e.prototype.update=function(e){this.dimensions.update(e,(function(e){return{x:e.x,y:e.y}}));if(!e.children.length){this.leafCount++;this.leafNodes.push(e)}else{this.nonLeafNodes.push(e)}if(e.depth>this.depth){this.depth=e.depth}this.nodes.push(e)};e.prototype.resize=function(e,t,r,n,i){if(r===void 0){r=0}if(n===void 0){n=0}if(i===void 0){i=false}var o=this.leafCount-1;var a=this.depth;var s=this.dimensions;var l=1;var u=1;if(e>0&&o){var c=(s.right-s.left)/o;var d=e/o;l=d/c;if(i){l=-l}}if(t>0&&a){var p=(s.bottom-s.top)/a;var f=t/a;u=f/p}var h=new Dimensions;this.nodes.forEach((function(e){e.screenX=e.x*l;e.screenY=e.y*u;h.update(e,(function(e){return{x:e.screenX,y:e.screenY}}))}));var v=-h.left;var g=-h.top;this.nodes.forEach((function(e){e.screenX+=v+r;e.screenY+=g+n}))};return e}();var __extends$2d=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1w=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$C=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$l=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$C(arguments[t]));return e};var GroupedCategoryAxisLabel=function(e){__extends$2d(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.grid=false;return t}__decorate$1w([Validate(BOOLEAN)],t.prototype,"grid",void 0);return t}(AxisLabel);var GroupedCategoryAxis=function(e){__extends$2d(t,e);function t(t){var r=e.call(this,t,new BandScale$5)||this;r.tickScale=new BandScale$5;r.translation={x:0,y:0};r.line=new AxisLine;r.label=new GroupedCategoryAxisLabel;r.labelColor="rgba(87, 87, 87, 1)";r.includeInvisibleDomains=true;var n=r,i=n.tickLineGroup,o=n.tickLabelGroup,a=n.gridLineGroup,s=n.tickScale,l=n.scale;l.paddingOuter=.1;l.paddingInner=l.paddingOuter*2;r.requestedRange=l.range.slice();r.refreshScale();s.paddingInner=1;s.paddingOuter=0;r.gridLineSelection=Selection.select(a,Line);r.axisLineSelection=Selection.select(i,Line);r.separatorSelection=Selection.select(i,Line);r.labelSelection=Selection.select(o,Text);return r}Object.defineProperty(t.prototype,"range",{get:function(){return this.requestedRange.slice()},set:function(e){this.requestedRange=e.slice();this.updateRange()},enumerable:false,configurable:true});t.prototype.updateRange=function(){var e=this,t=e.requestedRange,r=e.visibleRange,n=e.scale;var i=(t[1]-t[0])/(r[1]-r[0]);var o=i*r[0];var a=t[0]-o;this.tickScale.range=n.range=[a,a+i];this.resizeTickTree()};t.prototype.resizeTickTree=function(){var e=this.scale;var t=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range;var r=this.tickTreeLayout;var n=this.lineHeight;if(r){r.resize(Math.abs(t[1]-t[0]),r.depth*n,(Math.min(t[0],t[1])||0)+(e.bandwidth||0)/2,-r.depth*n,t[1]-t[0]<0)}};Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this.label.fontSize*1.5},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"gridLength",{get:function(){return this._gridLength},set:function(e){if(this._gridLength&&!e||!this._gridLength&&e){this.gridLineSelection.clear();this.labelSelection.clear()}this._gridLength=e},enumerable:false,configurable:true});t.prototype.calculateDomain=function(){var e;var t=this,r=t.direction,n=t.boundSeries;var i=[];var o=undefined;n.filter((function(e){return e.visible})).forEach((function(e){if(r===ChartAxisDirection.X){if(o===undefined){var t=e.getDomain(r);i.push(t);o=typeof t[0]==="number"}else if(o){i.push(e.getDomain(r))}}else{i.push(e.getDomain(r))}}));var a=(e=new Array).concat.apply(e,__spread$l(i));var s=extent$4(a)||a;this.dataDomain=this.normaliseDataDomain(s)};t.prototype.normaliseDataDomain=function(e){var t=e.filter((function(e,t,r){return r.indexOf(e)===t}));var r=ticksToTree(t);this.tickTreeLayout=treeLayout(r);var n=t.slice();n.push("");this.tickScale.domain=n;this.resizeTickTree();return t};t.prototype.update=function(e){var t=this;this.calculateDomain();var r=this,n=r.scale,i=r.label,o=r.label.parallel,a=r.tickScale,s=r.requestedRange;n.domain=this.dataDomain;var l=n.range[0];var u=n.range[1];var c=Math.abs(u-l);var d=c/n.domain.length||0;var p=toRadians$1(this.rotation);var f=Math.abs(Math.cos(p))<1e-8;this.updatePosition();var h=this.title;if(h){h.node.visible=false}var v=this.lineHeight;var g=this.tickTreeLayout;var y=n.ticks();var m=g?g.nodes:[];var _=g?g.depth>1:false;var S=a.ticks();var b=i.mirrored?1:-1;var C=calculateLabelRotation({rotation:i.rotation,parallel:o,regularFlipRotation:normalizeAngle360(p-Math.PI/2),parallelFlipRotation:normalizeAngle360(p)}),x=C.autoRotation,w=C.labelRotation,O=C.parallelFlipFlag;var T=this.gridLineSelection.update(this.gridLength?S:[]);var E=this.labelSelection.update(m);var P=i.formatter;var A=new Map;var R=0;E.each((function(e,t,r){e.fontStyle=i.fontStyle;e.fontWeight=i.fontWeight;e.fontSize=i.fontSize;e.fontFamily=i.fontFamily;e.fill=i.color;e.textBaseline=O===-1?"bottom":"hanging";e.textAlign="center";e.translationX=t.screenY-i.fontSize*.25;e.translationY=t.screenX;if(r===0){if(h&&h.enabled&&y.length>0){e.visible=true;e.text=h.text;e.fontSize=h.fontSize;e.fontStyle=h.fontStyle;e.fontWeight=h.fontWeight;e.fontFamily=h.fontFamily;e.textBaseline="hanging"}else{e.visible=false}}else{e.text=P?P({value:String(t.label),index:r}):String(t.label);e.visible=t.screenX>=s[0]&&t.screenX<=s[1]}var n=e.computeBBox();A.set(e.id,n);if(n.width>R){R=n.width}}));var D=b*i.padding;var M=this.label.grid;var N=[];E.each((function(e,r,n){e.x=D;e.rotationCenterX=D;if(!r.children.length){e.rotation=w;e.textAlign="end";e.textBaseline="middle";var i=A.get(e.id);if(i&&i.height>d){e.visible=false}}else{e.translationX-=R-v+t.label.padding;var o=r.leafCount*d;var i=A.get(e.id);if(i&&i.width>o){e.visible=false}else if(f){e.rotation=x}else{e.rotation=-Math.PI/2}}if(r.parent&&_){var a=!r.children.length?r.screenX-d/2:r.screenX-r.leafCount*d/2;if(!r.children.length){if(r.number!==r.children.length-1||M){N.push({y:a,x1:0,x2:-R-t.label.padding*2,toString:function(){return String(n)}})}}else{var s=-R-t.label.padding*2+r.screenY;N.push({y:a,x1:s+v,x2:s,toString:function(){return String(n)}})}}}));var I=0;N.forEach((function(e){return I=Math.min(I,e.x2)}));N.push({y:Math.max(l,u),x1:0,x2:I,toString:function(){return String(N.length)}});var L=this.separatorSelection.update(N);var k=1e-7;L.each((function(e,r){e.x1=r.x1;e.x2=r.x2;e.y1=r.y;e.y2=r.y;e.visible=r.y>=s[0]-k&&r.y<=s[1]+k;e.stroke=t.tick.color;e.fill=undefined;e.strokeWidth=1}));this.gridLineSelection=T;this.labelSelection=E;var F=g?g.depth+1:1;var $=[];for(var G=0;G<F;G++){$.push(G)}var B=this.axisLineSelection.update($);B.each((function(e,r,n){var i=n>0?-R-t.label.padding*2-(n-1)*v:0;e.x1=i;e.x2=i;e.y1=s[0];e.y2=s[1];e.strokeWidth=t.line.width;e.stroke=t.line.color;e.visible=y.length>0&&(n===0||M&&_)}));if(this.gridLength){var V=this.gridStyle;var j=V.length;T.each((function(e,r,n){var i=Math.round(a.convert(r));e.x1=0;e.x2=-b*t.gridLength;e.y1=i;e.y2=i;e.visible=i>=s[0]&&i<=s[1];var o=V[n%j];e.stroke=o.stroke;e.strokeWidth=t.tick.width;e.lineDash=o.lineDash;e.fill=undefined}))}return e};t.className="GroupedCategoryAxis";t.type="groupedCategory";__decorate$1w([Validate(OPT_COLOR_STRING)],t.prototype,"labelColor",void 0);return t}(ChartAxis);var __extends$2c=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$y=function(){__assign$y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$y.apply(this,arguments)};var __awaiter$a=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$a=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __values$g=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$B=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var directions=["top","right","bottom","left"];var CartesianChart=function(e){__extends$2c(t,e);function t(t,r,n){if(t===void 0){t=window.document}var i=e.call(this,t,r,n)||this;i.paired=true;i._lastAxisWidths={top:0,bottom:0,left:0,right:0};i._lastVisibility={crossLines:true,series:true};var o=i.scene.root;i.legend.attachLegend(o);return i}t.prototype.performLayout=function(){return __awaiter$a(this,void 0,void 0,(function(){var t,r,n,i,o,a,s,l,u,c,d;return __generator$a(this,(function(p){switch(p.label){case 0:return[4,e.prototype.performLayout.call(this)];case 1:t=p.sent();r=this.updateAxes(t),n=r.seriesRect,i=r.visibility,o=r.clipSeries;this.seriesRoot.visible=i.series;this.seriesRect=n;this.series.forEach((function(e){e.rootGroup.translationX=Math.floor(n.x);e.rootGroup.translationY=Math.floor(n.y)}));a=this,s=a.seriesRoot,l=a.seriesAreaPadding;u=n.clone().grow(l);c=20;d=u.clone().grow(c);this.hoverRect=d;this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:u,hoverRect:d,visible:i.series},axes:this.axes.map((function(e){return __assign$y({id:e.id},e.getLayoutState())}))});if(o){s.setClipRectInGroupCoordinateSpace(u)}else{s.setClipRectInGroupCoordinateSpace()}return[2,t]}}))}))};t.prototype.updateAxes=function(e){var t,r;var n;var i=__assign$y({},this._lastAxisWidths);var o=__assign$y({},this._lastVisibility);var a=new Set(this._axes.map((function(e){return e.position})));try{for(var s=__values$g(Object.keys(i)),l=s.next();!l.done;l=s.next()){var u=l.value;if(!a.has(u)){delete i[u]}}}catch(e){t={error:e}}finally{try{if(l&&!l.done&&(r=s.return))r.call(s)}finally{if(t)throw t.error}}var c=function(e,t){if(Object.keys(e).some((function(e){return i[e]==null}))){return false}return o.crossLines===t.crossLines&&o.series===t.series&&Object.entries(i).every((function(t){var r=__read$B(t,2),n=r[0],i=r[1];var o=e[n];if(i!=null||o!=null){return i===o}return true}))};var d=function(e){return Object.entries(e).reduce((function(e,t){var r=__read$B(t,2),n=r[0],i=r[1];if(i&&Math.abs(i)===Infinity){i=0}e[n]=i!=null?Math.ceil(i):i;return e}),{})};var p={};var f={};var h=false;var v=(n=this.seriesRect)===null||n===void 0?void 0:n.clone();var g=0;do{Object.assign(i,p);Object.assign(o,f);var y=this.updateAxesPass(i,e.clone(),v);p=d(y.axisWidths);f=y.visibility;h=y.clipSeries;v=y.seriesRect;if(g++>10){Logger.warn("unable to find stable axis layout.");break}}while(!c(p,f));var m=5;this.axes.forEach((function(t){t.setCrossLinesVisible(o.crossLines);if(!v){return}t.clipGrid(v.x,v.y,v.width+m,v.height+m);switch(t.position){case"left":case"right":t.clipTickLines(e.x,v.y,e.width+m,v.height+m);break;case"top":case"bottom":t.clipTickLines(v.x,e.y,v.width+m,e.height+m);break}}));this._lastAxisWidths=i;this._lastVisibility=o;return{seriesRect:v,visibility:o,clipSeries:h}};t.prototype.updateAxesPass=function(e,t,r){var n=this;var i=this.axes;var o={};var a={};var s={series:true,crossLines:true};var l=false;var u={};var c=this.applySeriesPadding(t);var d=r?this.buildCrossLinePadding(r,e):{};var p=this.buildAxisBound(c,e,d,s);var f=this.buildSeriesRect(p,e);i.forEach((function(t){var r,i;var s=t.position;var c=n.calculateAxisDimensions({axis:t,seriesRect:f,axisWidths:e,newAxisWidths:a,primaryTickCounts:u,clipSeries:l,addInterAxisPadding:((r=o[s])!==null&&r!==void 0?r:0)>0}),d=c.clipSeries,h=c.axisThickness,v=c.axisOffset;o[s]=((i=o[s])!==null&&i!==void 0?i:0)+1;l=l||d;n.positionAxis({axis:t,axisBound:p,axisOffset:v,axisThickness:h,axisWidths:e,primaryTickCounts:u,seriesRect:f})}));return{clipSeries:l,seriesRect:f,axisWidths:a,visibility:s}};t.prototype.buildCrossLinePadding=function(e,t){var r,n;var i;var o={};this.axes.forEach((function(t){if(t.crossLines){t.crossLines.forEach((function(t){t.calculatePadding(o,e)}))}}));try{for(var a=__values$g(Object.entries(o)),s=a.next();!s.done;s=a.next()){var l=__read$B(s.value,2),u=l[0],c=l[1],d=c===void 0?0:c;o[u]=Math.max(d-((i=t[u])!==null&&i!==void 0?i:0),0)}}catch(e){r={error:e}}finally{try{if(s&&!s.done&&(n=a.return))n.call(a)}finally{if(r)throw r.error}}return o};t.prototype.applySeriesPadding=function(e){var t=this;var r=e.clone();var n=this.axes.slice().reverse();directions.forEach((function(e){var i=t.seriesAreaPadding[e];var o=n.find((function(t){return t.position===e}));if(o){o.seriesAreaPadding=i}else{r.shrink(i,e)}}));return r};t.prototype.buildAxisBound=function(e,t,r,n){var i,o,a,s;var l=e.clone();var u=r.top,c=u===void 0?0:u,d=r.right,p=d===void 0?0:d,f=r.bottom,h=f===void 0?0:f,v=r.left,g=v===void 0?0:v;var y=g+p;var m=c+h;var _=((i=t.left)!==null&&i!==void 0?i:0)+((o=t.right)!==null&&o!==void 0?o:0)+y;var S=((a=t.top)!==null&&a!==void 0?a:0)+((s=t.bottom)!==null&&s!==void 0?s:0)+m;if(l.width<=_||l.height<=S){n.crossLines=false;n.series=false;return l}l.x+=g;l.y+=c;l.width-=y;l.height-=m;return l};t.prototype.buildSeriesRect=function(e,t){var r=e.clone();var n=t.top,i=t.bottom,o=t.left,a=t.right;r.x+=o!==null&&o!==void 0?o:0;r.y+=n!==null&&n!==void 0?n:0;r.width-=(o!==null&&o!==void 0?o:0)+(a!==null&&a!==void 0?a:0);r.height-=(n!==null&&n!==void 0?n:0)+(i!==null&&i!==void 0?i:0);r.width=Math.max(0,r.width);r.height=Math.max(0,r.height);return r};t.prototype.clampToOutsideSeriesRect=function(e,t,r,n){var i=e.x,o=e.y,a=e.width,s=e.height;var l=[i,o,i+a,o+s];var u=n===1?Math.min:Math.max;var c=l[(r==="x"?0:1)+(n===1?0:2)];return u(t,c)};t.prototype.calculateAxisDimensions=function(e){var t,r,n,i,o,a;var s=e.axis,l=e.seriesRect,u=e.axisWidths,c=e.newAxisWidths,d=e.primaryTickCounts,p=e.addInterAxisPadding;var f=e.clipSeries;var h=s.position,v=s.direction;var g=function(e){if(e instanceof CategoryAxis||e instanceof GroupedCategoryAxis){return[0,l.height]}return[l.height,0]};s.label.mirrored=["top","right"].includes(h);var y=(t=c[h])!==null&&t!==void 0?t:0;switch(h){case"top":case"bottom":s.range=[0,l.width];s.gridLength=l.height;break;case"right":case"left":s.range=g(s);s.gridLength=l.width;break}var m=(r=this.zoomManager.getZoom())===null||r===void 0?void 0:r[s.direction];var _=m!==null&&m!==void 0?m:{},S=_.min,b=S===void 0?0:S,C=_.max,x=C===void 0?1:C;s.visibleRange=[b,x];if(!f&&(s.visibleRange[0]>0||s.visibleRange[1]<1)){f=true}var w=s.nice?d[v]:undefined;w=s.update(w);d[v]=(n=d[v])!==null&&n!==void 0?n:w;var O=0;if(s.thickness){O=s.thickness}else{var T=s.computeBBox();O=v===ChartAxisDirection.X?T.height:T.width}var E=15;if(p){O+=E}O=Math.ceil(O);c[h]=((i=c[h])!==null&&i!==void 0?i:0)+O;s.gridPadding=((o=u[h])!==null&&o!==void 0?o:0)-((a=c[h])!==null&&a!==void 0?a:0);return{clipSeries:f,axisThickness:O,axisOffset:y}};t.prototype.positionAxis=function(e){var t,r,n,i;var o=e.axis,a=e.axisBound,s=e.axisWidths,l=e.seriesRect,u=e.axisOffset,c=e.axisThickness;var d=o.position;switch(d){case"top":o.translation.x=a.x+((t=s.left)!==null&&t!==void 0?t:0);o.translation.y=this.clampToOutsideSeriesRect(l,a.y+1+u+c,"y",1);break;case"bottom":o.translation.x=a.x+((r=s.left)!==null&&r!==void 0?r:0);o.translation.y=this.clampToOutsideSeriesRect(l,a.y+a.height+1-c-u,"y",-1);break;case"left":o.translation.y=a.y+((n=s.top)!==null&&n!==void 0?n:0);o.translation.x=this.clampToOutsideSeriesRect(l,a.x+u+c,"x",1);break;case"right":o.translation.y=a.y+((i=s.top)!==null&&i!==void 0?i:0);o.translation.x=this.clampToOutsideSeriesRect(l,a.x+a.width-c-u,"x",-1);break}o.updatePosition()};t.className="CartesianChart";t.type="cartesian";return t}(Chart);var __extends$2b=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var PolarSeries=function(e){__extends$2b(t,e);function t(t){var r;var n=t.useLabelLayer,i=n===void 0?false:n;var o=e.call(this,{useLabelLayer:i,pickModes:[SeriesNodePickMode.EXACT_SHAPE_MATCH],directionKeys:(r={},r[ChartAxisDirection.X]=["angleKey"],r[ChartAxisDirection.Y]=["radiusKey"],r)})||this;o.centerX=0;o.centerY=0;o.radius=0;return o}t.prototype.getLabelData=function(){return[]};t.prototype.computeLabelsBBox=function(e){return null};return t}(Series);var __extends$2a=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __awaiter$9=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$9=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var PolarChart=function(e){__extends$2a(t,e);function t(t,r,n){if(t===void 0){t=window.document}var i=e.call(this,t,r,n)||this;i.padding=new Padding$1(40);var o=i.scene.root;i.legend.attachLegend(o);return i}t.prototype.performLayout=function(){return __awaiter$9(this,void 0,void 0,(function(){var t,r,n,i;return __generator$9(this,(function(o){switch(o.label){case 0:return[4,e.prototype.performLayout.call(this)];case 1:t=o.sent();r=t.clone();this.computeSeriesRect(t);this.computeCircle();n=20;i=t.clone().grow(n);this.hoverRect=i;this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:r,paddedRect:t,hoverRect:i,visible:true},axes:[]});return[2,t]}}))}))};t.prototype.computeSeriesRect=function(e){var t=this.seriesAreaPadding;e.shrink(t.left,"left");e.shrink(t.top,"top");e.shrink(t.right,"right");e.shrink(t.bottom,"bottom");this.seriesRect=e};t.prototype.computeCircle=function(){var e=this;var t=this.seriesRect;var r=this.series.filter((function(e){return e instanceof PolarSeries}));var n=function(e,t,n){r.forEach((function(r){r.centerX=e;r.centerY=t;r.radius=n}))};var i=t.x+t.width/2;var o=t.y+t.height/2;var a=Math.max(0,Math.min(t.width,t.height)/2);var s=a;n(i,o,s);var l=function(t){var l=(t===void 0?{}:t).hideWhenNecessary,u=l===void 0?false:l;var c=r.map((function(e){return e.computeLabelsBBox({hideWhenNecessary:u})})).filter((function(e){return e!=null}));if(c.length===0){n(i,o,a);return}var d=BBox.merge(c);var p=e.refineCircle(d,s);n(p.centerX,p.centerY,p.radius);if(p.radius===s){return}s=p.radius};l();l();l();l({hideWhenNecessary:true});l({hideWhenNecessary:true})};t.prototype.refineCircle=function(e,t){var r=.5;var n=this.seriesRect;var i=-t;var o=-t;var a=t;var s=t;var l=Math.max(0,i-e.x);var u=Math.max(0,o-e.y);var c=Math.max(0,e.x+e.width-a);var d=Math.max(0,e.y+e.height-s);var p=n.width-l-c;var f=n.height-u-d;var h=Math.min(p,f)/2;var v=r*n.width/2;var g=r*n.height/2;var y=Math.min(v,g);if(h<y){h=y;var m=l+c;var _=u+d;if(2*h+_>n.height){var S=n.height-2*h;if(Math.min(u,d)*2>S){u=S/2;d=S/2}else if(u>d){u=S-d}else{d=S-u}}if(2*h+m>n.width){var b=n.width-2*h;if(Math.min(l,c)*2>b){l=b/2;c=b/2}else if(l>c){l=b-c}else{c=b-l}}}var C=l+2*h+c;var x=u+2*h+d;return{centerX:n.x+(n.width-C)/2+l+h,centerY:n.y+(n.height-x)/2+u+h,radius:h}};t.className="PolarChart";t.type="polar";return t}(Chart);var __extends$29=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __awaiter$8=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$8=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var HierarchyChart=function(e){__extends$29(t,e);function t(t,r,n){if(t===void 0){t=window.document}var i=e.call(this,t,r,n)||this;i._data={};var o=i.scene.root;i.legend.attachLegend(o);return i}t.prototype.performLayout=function(){return __awaiter$8(this,void 0,void 0,(function(){var t,r,n,i,o,a;return __generator$8(this,(function(s){switch(s.label){case 0:return[4,e.prototype.performLayout.call(this)];case 1:t=s.sent();r=this.seriesAreaPadding;n=t.clone();t.shrink(r.left,"left");t.shrink(r.top,"top");t.shrink(r.right,"right");t.shrink(r.bottom,"bottom");this.seriesRect=t;i=20;o=t.clone().grow(i);this.hoverRect=o;this.series.forEach((function(e){e.rootGroup.translationX=Math.floor(t.x);e.rootGroup.translationY=Math.floor(t.y);e.update({seriesRect:t})}));a=this.seriesRoot;a.setClipRectInGroupCoordinateSpace(new BBox(t.x,t.y,t.width,t.height));this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:t,hoverRect:o,visible:true},axes:[]});return[2,t]}}))}))};t.className="HierarchyChart";t.type="hierarchy";return t}(Chart);var __read$A=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var interpolatePattern=/(#\{(.*?)\})/g;function interpolate(e,t,r){return e.replace(interpolatePattern,(function(){var e=[];for(var n=0;n<arguments.length;n++){e[n]=arguments[n]}var i=e[2];var o=__read$A(i.split(":"),2),a=o[0],s=o[1];var l=t[a];if(typeof l==="number"){var u=s&&r&&r[s];if(u){var c=u,d=c.locales,p=c.options;return l.toLocaleString(d,p)}return String(l)}if(l instanceof Date){var u=s&&r&&r[s];if(typeof u==="string"){var f=buildFormatter(u);return f(l)}return l.toDateString()}if(typeof l==="string"||l&&l.toString){return String(l)}return""}))}var element=null;function sanitizeHtml(e){element=element||document.createElement("div");if(!e){return""}element.textContent=e;return element.innerHTML}function calculateNiceSecondaryAxis(e,t){var r=Math.floor(e[0]);var n=e[1];r=calculateNiceStart(r,n,t);var i=getTickStep(r,n,t);var o=t-1;n=r+o*i;var a=[r,n];var s=getTicks(r,i,t);return[a,s]}function calculateNiceStart(e,t,r){var n=Math.abs(t-e)/(r-1);var i=Math.floor(Math.log10(n));var o=Math.pow(10,i);return Math.floor(e/o)*o}function getTicks(e,t,r){var n=Math.floor(Math.log10(t));var i=t>0&&t<1?Math.abs(n):0;var o=Math.pow(10,i);var a=new NumericTicks(i);for(var s=0;s<r;s++){var l=e+t*s;a[s]=Math.round(l*o)/o}return a}function getTickStep(e,t,r){var n=r-1;var i=(t-e)/n;return calculateNextNiceStep(i)}function calculateNextNiceStep(e){var t=Math.floor(Math.log10(e));var r=Math.pow(10,t);var n=e/r*10;if(n>0&&n<=1){return r/10}if(n>1&&n<=2){return 2*r/10}if(n>1&&n<=5){return 5*r/10}if(n>5&&n<=10){return 10*r/10}if(n>10&&n<=20){return 20*r/10}if(n>20&&n<=40){return 40*r/10}if(n>40&&n<=50){return 50*r/10}if(n>50&&n<=100){return 100*r/10}return n}var __extends$28=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1v=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$z=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var NumberAxis=function(e){__extends$28(t,e);function t(t,r){if(r===void 0){r=new LinearScale$1}var n=e.call(this,t,r)||this;n.min=NaN;n.max=NaN;r.strictClampByDefault=true;return n}t.prototype.normaliseDataDomain=function(e){var t=this,r=t.min,n=t.max;if(e.length>2){e=extent$4(e)||[NaN,NaN]}if(!isNaN(r)){e=[r,e[1]]}if(!isNaN(n)){e=[e[0],n]}if(e[0]>e[1]){e=[]}return e};t.prototype.formatDatum=function(e){if(typeof e==="number"){return e.toFixed(2)}else{Logger.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers.");return String(e)}};t.prototype.updateSecondaryAxisTicks=function(e){if(this.dataDomain==null){throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.")}var t=__read$z(calculateNiceSecondaryAxis(this.dataDomain,e!==null&&e!==void 0?e:0),2),r=t[0],n=t[1];this.scale.nice=false;this.scale.domain=r;this.scale.update();return n};t.className="NumberAxis";t.type="number";__decorate$1v([Validate(AND(NUMBER_OR_NAN(),LESS_THAN("max"))),Default(NaN)],t.prototype,"min",void 0);__decorate$1v([Validate(AND(NUMBER_OR_NAN(),GREATER_THAN("min"))),Default(NaN)],t.prototype,"max",void 0);return t}(ChartAxis);var __extends$27=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1u=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};function NON_ZERO_NUMBER(){var e="expecting a non-zero Number";return predicateWithMessage((function(e){return typeof e==="number"&&e!==0}),e)}var LogAxis=function(e){__extends$27(t,e);function t(t){var r=e.call(this,t,new LogScale)||this;r.min=NaN;r.max=NaN;r.scale.strictClampByDefault=true;return r}t.prototype.normaliseDataDomain=function(e){var t=this,r=t.min,n=t.max;if(e.length>2){e=extent$4(e)||[NaN,NaN]}if(!isNaN(r)){e=[r,e[1]]}if(!isNaN(n)){e=[e[0],n]}var i=e[0]>e[1];var o=e[0]<0&&e[1]>0;var a=e[0]===0&&e[1]===0;var s=i||o||a;if(s){e=[];if(o){Logger.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information.")}else if(a){Logger.warn("the data domain has 0 extent, no data is rendered.")}}if(e[0]===0){e[0]=1}if(e[1]===0){e[1]=-1}return e};Object.defineProperty(t.prototype,"base",{get:function(){return this.scale.base},set:function(e){this.scale.base=e},enumerable:false,configurable:true});t.className="LogAxis";t.type="log";__decorate$1u([Validate(AND(NUMBER_OR_NAN(),LESS_THAN("max"),NON_ZERO_NUMBER())),Default(NaN)],t.prototype,"min",void 0);__decorate$1u([Validate(AND(NUMBER_OR_NAN(),GREATER_THAN("min"),NON_ZERO_NUMBER())),Default(NaN)],t.prototype,"max",void 0);return t}(NumberAxis);var __assign$x=function(){__assign$x=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$x.apply(this,arguments)};var __values$f=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$y=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$k=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$y(arguments[t]));return e};function extendDomain(e,t){var r,n;if(t===void 0){t=[Infinity,-Infinity]}try{for(var i=__values$f(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(typeof a!=="number"){continue}if(a<t[0]){t[0]=a}if(a>t[1]){t[1]=a}}}catch(e){r={error:e}}finally{try{if(o&&!o.done&&(n=i.return))n.call(i)}finally{if(r)throw r.error}}return t}function sumValues(e,t){var r,n;if(t===void 0){t=[0,0]}try{for(var i=__values$f(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(typeof a!=="number"){continue}if(a<0){t[0]+=a}if(a>0){t[1]+=a}}}catch(e){r={error:e}}finally{try{if(o&&!o.done&&(n=i.return))n.call(i)}finally{if(r)throw r.error}}return t}function toKeyString(e){return e.map((function(e){if(e==null){return e}else if(typeof e==="number"||typeof e==="string"||typeof e==="boolean"){return e}else if(typeof e==="object"){return JSON.stringify(e)}return e})).join("-")}var SMALLEST_KEY_INTERVAL={type:"reducer",property:"smallestKeyInterval",initialValue:Infinity,reducer:function(){var e=NaN;return function(t,r){var n=r.keys[0];var i=Math.abs(n-e);e=n;if(!isNaN(i)&&i>0&&i<t){return i}return t}}};var SUM_VALUE_EXTENT={type:"processor",property:"sumValueExtent",calculate:function(e){var t,r;var n,i,o,a;var s=__spread$k((i=(n=e.domain.sumValues)===null||n===void 0?void 0:n[0])!==null&&i!==void 0?i:[0,0]);try{for(var l=__values$f((a=(o=e.domain.sumValues)===null||o===void 0?void 0:o.slice(1))!==null&&a!==void 0?a:[]),u=l.next();!u.done;u=l.next()){var c=__read$y(u.value,2),d=c[0],p=c[1];if(d<s[0]){s[0]=d}if(p>s[1]){s[1]=p}}}catch(e){t={error:e}}finally{try{if(u&&!u.done&&(r=l.return))r.call(l)}finally{if(t)throw t.error}}return s}};var INVALID_VALUE=Symbol("invalid");var DataModel=function(){function e(e){var t,r,n,i;var o=this;var a;var s=e.props;var l=true;try{for(var u=__values$f(s),c=u.next();!c.done;c=u.next()){var d=c.value;if(d.type==="key"&&!l){throw new Error("AG Charts - internal config error: keys must come before values.")}if(d.type==="value"&&l){l=false}}}catch(e){t={error:e}}finally{try{if(c&&!c.done&&(r=u.return))r.call(u)}finally{if(t)throw t.error}}this.opts=__assign$x({dataVisible:true},e);this.keys=s.filter((function(e){return e.type==="key"})).map((function(e,t){return __assign$x(__assign$x({},e),{index:t,missing:false})}));this.values=s.filter((function(e){return e.type==="value"})).map((function(e,t){return __assign$x(__assign$x({},e),{index:t,missing:false})}));this.sums=s.filter((function(e){return e.type==="sum"}));this.reducers=s.filter((function(e){return e.type==="reducer"}));this.processors=s.filter((function(e){return e.type==="processor"}));try{for(var p=__values$f((a=this.sums)!==null&&a!==void 0?a:[]),f=p.next();!f.done;f=p.next()){var h=f.value.properties;if(h.length===0)continue;if(!h.some((function(e){return o.values.some((function(t){return t.property===e}))}))){throw new Error("AG Charts - internal config error: sum properties must match defined properties ("+h+").")}}}catch(e){n={error:e}}finally{try{if(f&&!f.done&&(i=p.return))i.call(p)}finally{if(n)throw n.error}}}e.prototype.resolveProcessedDataIndex=function(e){var t=this.resolveProcessedDataDef(e);if((t===null||t===void 0?void 0:t.type)==="key"||(t===null||t===void 0?void 0:t.type)==="value"){return{type:t.type,index:t.index}}};e.prototype.resolveProcessedDataDef=function(e){var t=this,r=t.keys,n=t.values;var i=__spread$k(r,n).find((function(t){var r=t.property;return r===e}));if(!i)return undefined;return i};e.prototype.getDomain=function(e,t){var r=this.resolveProcessedDataIndex(e);if(!r){return[]}return t.domain[r.type==="key"?"keys":"values"][r.index]};e.prototype.processData=function(e){var t,r,n,i;var o=this,a=o.opts,s=a.groupByKeys,l=a.normaliseTo,u=o.sums,c=o.reducers,d=o.processors;var p=performance.now();try{for(var f=__values$f(__spread$k(this.keys,this.values)),h=f.next();!h.done;h=f.next()){var v=h.value;v.missing=false}}catch(e){t={error:e}}finally{try{if(h&&!h.done&&(r=f.return))r.call(f)}finally{if(t)throw t.error}}if(s&&this.keys.length===0){return undefined}var g=this.extractData(e);if(s){g=this.groupData(g)}if(u.length>0){this.sumData(g)}if(typeof l==="number"){this.normaliseData(g)}if(c.length>0){this.reduceData(g)}if(d.length>0){this.postProcessData(g)}try{for(var y=__values$f(__spread$k(this.keys,this.values)),m=y.next();!m.done;m=y.next()){var v=m.value;if(v.missing){Logger.warnOnce("the key '"+v.property+"' was not found in at least one data element.")}}}catch(e){n={error:e}}finally{try{if(m&&!m.done&&(i=y.return))i.call(y)}finally{if(n)throw n.error}}var _=performance.now();g.time=_-p;return g};e.prototype.extractData=function(e){var t,r,n,i,o,a;var s=this,l=s.keys,u=s.values,c=s.opts.dataVisible;var d=this.initDataDomainProcessor(),p=d.dataDomain,f=d.processValue;var h=new Array(c?e.length:0);var v=0;try{e:for(var g=__values$f(e),y=g.next();!y.done;y=g.next()){var m=y.value;var _=c?new Array(l.length):undefined;var S=0;try{for(var b=(n=void 0,__values$f(l)),C=b.next();!C.done;C=b.next()){var x=C.value;var w=f(x,m);if(w===INVALID_VALUE){continue e}if(_){_[S++]=w}}}catch(e){n={error:e}}finally{try{if(C&&!C.done&&(i=b.return))i.call(b)}finally{if(n)throw n.error}}var O=c?new Array(u.length):undefined;var T=0;try{for(var E=(o=void 0,__values$f(u)),P=E.next();!P.done;P=E.next()){var x=P.value;var A=f(x,m);if(A===INVALID_VALUE){continue e}if(O){O[T++]=A}}}catch(e){o={error:e}}finally{try{if(P&&!P.done&&(a=E.return))a.call(E)}finally{if(o)throw o.error}}if(c){h[v++]={datum:m,keys:_,values:O}}}}catch(e){t={error:e}}finally{try{if(y&&!y.done&&(r=g.return))r.call(g)}finally{if(t)throw t.error}}h.length=v;var R=function(e){var t=p.get(e.property).domain;if(Array.isArray(t)&&t[0]>t[1]){return[]}return __spread$k(t)};return{type:"ungrouped",data:h,domain:{keys:l.map((function(e){return R(e)})),values:u.map((function(e){return R(e)}))},indices:{keys:l.reduce((function(e,t){var r=t.property,n=t.index;e[r]=n;return e}),{}),values:u.reduce((function(e,t){var r=t.property,n=t.index;e[r]=n;return e}),{})},defs:{keys:l,values:u},time:0}};e.prototype.groupData=function(e){var t,r,n,i;var o=new Map;try{for(var a=__values$f(e.data),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.keys,c=l.values,d=l.datum;var p=toKeyString(u);if(o.has(p)){var f=o.get(p);f.values.push(c);f.datum.push(d)}else{o.set(p,{keys:u,values:[c],datum:[d]})}}}catch(e){t={error:e}}finally{try{if(s&&!s.done&&(r=a.return))r.call(a)}finally{if(t)throw t.error}}var h=new Array(o.size);var v=0;try{for(var g=__values$f(o.entries()),y=g.next();!y.done;y=g.next()){var m=__read$y(y.value,2),_=m[1],u=_.keys,c=_.values,d=_.datum;h[v++]={keys:u,values:c,datum:d}}}catch(e){n={error:e}}finally{try{if(y&&!y.done&&(i=g.return))i.call(g)}finally{if(n)throw n.error}}return __assign$x(__assign$x({},e),{type:"grouped",data:h})};e.prototype.sumData=function(e){var t,r,n,i,o,a;var s;var l=this,u=l.values,c=l.sums;if(!c)return;var d=c.map((function(){return[Infinity,-Infinity]}));var p=c.map((function(e){return e.properties.map((function(e){return u.findIndex((function(t){return t.property===e}))}))}));try{for(var f=__values$f(e.data),h=f.next();!h.done;h=f.next()){var v=h.value;var g=v.values;(s=v.sumValues)!==null&&s!==void 0?s:v.sumValues=new Array(p.length);if(e.type==="ungrouped"){g=[g]}var y=0;try{for(var m=(n=void 0,__values$f(p)),_=m.next();!_.done;_=m.next()){var S=_.value;var b=extendDomain([]);var C=function(e){var t=S.map((function(t){return e[t]}));var r=sumValues(t);if(r){extendDomain(r,b)}};try{for(var x=(o=void 0,__values$f(g)),w=x.next();!w.done;w=x.next()){var O=w.value;C(O)}}catch(e){o={error:e}}finally{try{if(w&&!w.done&&(a=x.return))a.call(x)}finally{if(o)throw o.error}}extendDomain(b,d[y]);v.sumValues[y++]=b}}catch(e){n={error:e}}finally{try{if(_&&!_.done&&(i=m.return))i.call(m)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{if(h&&!h.done&&(r=f.return))r.call(f)}finally{if(t)throw t.error}}e.domain.sumValues=d};e.prototype.normaliseData=function(e){var t,r,n,i,o,a,s,l,u,c,d,p,f,h;var v;var g=this,y=g.sums,m=g.values,_=g.opts.normaliseTo;if(_==null)return;var S=e.domain.sumValues;var b=y.map((function(e){return e.properties.map((function(e){return m.findIndex((function(t){return t.property===e}))}))}));var C=function(e,t){var r=e*_/t;if(r>=0){return Math.min(_,r)}return Math.max(-_,r)};for(var x=0;x<y.length;x++){var w=S===null||S===void 0?void 0:S[x];if(w==null)continue;var O=-Infinity;try{for(var T=(t=void 0,__values$f(w)),E=T.next();!E.done;E=T.next()){var P=E.value;var A=Math.abs(P);if(O<A){O=A}}}catch(e){t={error:e}}finally{try{if(E&&!E.done&&(r=T.return))r.call(T)}finally{if(t)throw t.error}}var R=0;try{for(var D=(n=void 0,__values$f(w)),M=D.next();!M.done;M=D.next()){var N=M.value;w[R]=C(w[R],O);R++}}catch(e){n={error:e}}finally{try{if(M&&!M.done&&(i=D.return))i.call(D)}finally{if(n)throw n.error}}try{for(var I=(o=void 0,__values$f(e.data)),L=I.next();!L.done;L=I.next()){var k=L.value;var F=k.sumValues;var $=k.values;if(e.type==="ungrouped"){$=[$]}var G=0;try{for(var B=(s=void 0,__values$f((v=F===null||F===void 0?void 0:F[x])!==null&&v!==void 0?v:[])),V=B.next();!V.done;V=B.next()){var P=V.value;var A=Math.abs(P);if(G<A){G=A}}}catch(e){s={error:e}}finally{try{if(V&&!V.done&&(l=B.return))l.call(B)}finally{if(s)throw s.error}}try{for(var j=(u=void 0,__values$f($)),H=j.next();!H.done;H=j.next()){var U=H.value;try{for(var z=(d=void 0,__values$f(b[x])),W=z.next();!W.done;W=z.next()){var K=W.value;U[K]=C(U[K],G)}}catch(e){d={error:e}}finally{try{if(W&&!W.done&&(p=z.return))p.call(z)}finally{if(d)throw d.error}}}}catch(e){u={error:e}}finally{try{if(H&&!H.done&&(c=j.return))c.call(j)}finally{if(u)throw u.error}}if(F==null)continue;R=0;try{for(var Y=(f=void 0,__values$f(F[x])),X=Y.next();!X.done;X=Y.next()){var N=X.value;F[x][R]=C(F[x][R],G);R++}}catch(e){f={error:e}}finally{try{if(X&&!X.done&&(h=Y.return))h.call(Y)}finally{if(f)throw f.error}}}}catch(e){o={error:e}}finally{try{if(L&&!L.done&&(a=I.return))a.call(I)}finally{if(o)throw o.error}}}};e.prototype.reduceData=function(e){var t,r,n,i;var o;var a=this.reducers;var s=a.map((function(e){return e.reducer()}));var l=a.map((function(e){return e.initialValue}));try{for(var u=__values$f(e.data),c=u.next();!c.done;c=u.next()){var d=c.value;var p=0;try{for(var f=(n=void 0,__values$f(s)),h=f.next();!h.done;h=f.next()){var v=h.value;l[p]=v(l[p],d);p++}}catch(e){n={error:e}}finally{try{if(h&&!h.done&&(i=f.return))i.call(f)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{if(c&&!c.done&&(r=u.return))r.call(u)}finally{if(t)throw t.error}}for(var g=0;g<l.length;g++){(o=e.reduced)!==null&&o!==void 0?o:e.reduced={};e.reduced[a[g].property]=l[g]}};e.prototype.postProcessData=function(e){var t,r;var n;var i=this.processors;try{for(var o=__values$f(i),a=o.next();!a.done;a=o.next()){var s=a.value;(n=e.reduced)!==null&&n!==void 0?n:e.reduced={};e.reduced[s.property]=s.calculate(e)}}catch(e){t={error:e}}finally{try{if(a&&!a.done&&(r=o.return))r.call(o)}finally{if(t)throw t.error}}};e.prototype.initDataDomainProcessor=function(){var e=this,t=e.keys,r=e.values;var n=new Map;var i=function(e,t,r){if(t==="category"){r.set(e,{type:t,domain:new Set})}else{r.set(e,{type:t,domain:[Infinity,-Infinity]})}};var o=function(e){if(e===void 0){e=n}t.forEach((function(t){return i(t.property,t.valueType,e)}));r.forEach((function(t){return i(t.property,t.valueType,e)}));return e};o();var a=function(e,t,r){var i,a;if(r===void 0){r=n}var s=e.property in t;var l="missingValue"in e;if(!e.missing&&!s&&!l){e.missing=true}if(!r.has(e.property)){o(r)}var u=s?t[e.property]:e.missingValue;if(s){var c=(a=(i=e.validation)===null||i===void 0?void 0:i.call(e,u))!==null&&a!==void 0?a:true;if(!c){if("invalidValue"in e){u=e.invalidValue}else{return INVALID_VALUE}}}var d=r.get(e.property);if((d===null||d===void 0?void 0:d.type)==="category"){d.domain.add(u)}else if((d===null||d===void 0?void 0:d.type)==="range"){if(d.domain[0]>u){d.domain[0]=u}if(d.domain[1]<u){d.domain[1]=u}}return u};return{dataDomain:n,processValue:a,initDataDomain:o}};return e}();var __extends$26=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1t=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var TimeAxis=function(e){__extends$26(t,e);function t(t){var r=e.call(this,t,new TimeScale$1)||this;r.datumFormat="%m/%d/%y, %H:%M:%S";r.min=undefined;r.max=undefined;var n=r.scale;n.strictClampByDefault=true;r.refreshScale();r.datumFormatter=n.tickFormat({specifier:r.datumFormat});return r}t.prototype.normaliseDataDomain=function(e){var t=this,r=t.min,n=t.max;if(typeof r==="number"){r=new Date(r)}if(typeof n==="number"){n=new Date(n)}if(e.length>2){e=(extent$4(e)||[0,1e3]).map((function(e){return new Date(e)}))}if(r instanceof Date){e=[r,e[1]]}if(n instanceof Date){e=[e[0],n]}if(e[0]>e[1]){e=[]}return e};t.prototype.onLabelFormatChange=function(t,r){if(r){e.prototype.onLabelFormatChange.call(this,t,r)}else{this.labelFormatter=this.scale.tickFormat({ticks:t})}};t.prototype.formatDatum=function(e){return this.datumFormatter(e)};t.prototype.calculatePadding=function(e,t){return 1};t.className="TimeAxis";t.type="time";__decorate$1t([Validate(AND(OPT_DATE_OR_DATETIME_MS,LESS_THAN("max")))],t.prototype,"min",void 0);__decorate$1t([Validate(AND(OPT_DATE_OR_DATETIME_MS,GREATER_THAN("min")))],t.prototype,"max",void 0);return t}(ChartAxis);var __extends$25=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1s=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __awaiter$7=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$7=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __read$x=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$j=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$x(arguments[t]));return e};var __values$e=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var AreaSeriesLabel=function(e){__extends$25(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.formatter=undefined;return t}__decorate$1s([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0);return t}(Label$1);var AreaSeriesTooltip=function(e){__extends$25(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.renderer=undefined;t.format=undefined;return t}__decorate$1s([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0);__decorate$1s([Validate(OPT_STRING)],t.prototype,"format",void 0);return t}(SeriesTooltip);var AreaSeriesTag;(function(e){e[e["Fill"]=0]="Fill";e[e["Stroke"]=1]="Stroke";e[e["Marker"]=2]="Marker";e[e["Label"]=3]="Label"})(AreaSeriesTag||(AreaSeriesTag={}));var AreaSeries=function(e){__extends$25(t,e);function t(){var t=e.call(this,{pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:true,renderLayerPerSubSeries:false,directionKeys:{x:["xKey"],y:["yKeys"]}})||this;t.tooltip=new AreaSeriesTooltip;t.marker=new CartesianSeriesMarker;t.label=new AreaSeriesLabel;t.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"];t.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"];t.fillOpacity=1;t.strokeOpacity=1;t.lineDash=[0];t.lineDashOffset=0;t._xKey="";t.xName="";t._yKeys=[];t._visibles=[];t.yNames=[];t.strokeWidth=2;t.shadow=undefined;var r=t,n=r.marker,i=r.label;n.enabled=false;i.enabled=false;return t}Object.defineProperty(t.prototype,"xKey",{get:function(){return this._xKey},set:function(e){this._xKey=e;this.processedData=undefined},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"yKeys",{get:function(){return this._yKeys},set:function(e){if(!areArrayItemsStrictlyEqual(this._yKeys,e)){this._yKeys=e;this.processedData=undefined;this.processSeriesItemEnabled()}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visibles",{get:function(){return this._visibles},set:function(e){this._visibles=e;this.processSeriesItemEnabled()},enumerable:false,configurable:true});t.prototype.processSeriesItemEnabled=function(){var e=this,t=e.seriesItemEnabled,r=e._visibles,n=r===void 0?[]:r;t.clear();this._yKeys.forEach((function(e,r){var i;return t.set(e,(i=n[r])!==null&&i!==void 0?i:true)}))};Object.defineProperty(t.prototype,"normalizedTo",{get:function(){return this._normalizedTo},set:function(e){var t=e?Math.abs(e):undefined;if(this._normalizedTo!==t){this._normalizedTo=t}},enumerable:false,configurable:true});t.prototype.processData=function(){return __awaiter$7(this,void 0,void 0,(function(){var e,t,r,n,i,o,a,s,l,u,c,d;return __generator$7(this,(function(p){e=this,t=e.xKey,r=e.yKeys,n=e.seriesItemEnabled,i=e.xAxis,o=e.yAxis,a=e.normalizedTo;s=t&&r.length&&this.data?this.data:[];l=(i===null||i===void 0?void 0:i.scale)instanceof ContinuousScale;u=(o===null||o===void 0?void 0:o.scale)instanceof ContinuousScale;c=__spread$j(n.entries()).filter((function(e){var t=__read$x(e,2),r=t[1];return r})).map((function(e){var t=__read$x(e,1),r=t[0];return r}));d=a&&isFinite(a)?a:undefined;this.dataModel=new DataModel({props:__spread$j([keyProperty(t,l)],c.map((function(e){return valueProperty(e,u,{missingValue:NaN,invalidValue:undefined})})),[sumProperties(c),SUM_VALUE_EXTENT]),groupByKeys:true,dataVisible:this.visible&&c.length>0,normaliseTo:d});this.processedData=this.dataModel.processData(s);return[2]}))}))};t.prototype.getDomain=function(e){var t=this,r=t.processedData,n=t.xAxis,i=t.yAxis;if(!r)return[];var o=r,a=__read$x(o.defs.keys,1),s=a[0],l=o.domain,u=__read$x(l.keys,1),c=u[0],d=__read$x(l.values,1),p=d[0],f=o.reduced,h=SUM_VALUE_EXTENT.property,v=(f===void 0?{}:f)[h];if(e===ChartAxisDirection.X){if(s.valueType==="category"){return c}return this.fixNumericExtent(extent$4(c),n)}else if(i instanceof LogAxis||i instanceof TimeAxis){return this.fixNumericExtent(p,i)}else{return this.fixNumericExtent(v,i)}};t.prototype.createNodeData=function(){return __awaiter$7(this,void 0,void 0,(function(){var e,t,r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m,_,S,b,C,x;var w=this;return __generator$7(this,(function(O){e=this,t=e.xAxis,r=e.yAxis,n=e.data,i=e.processedData,o=(i===void 0?{}:i).data;if(!t||!r||!n){return[2,[]]}a=[];s=this,l=s.yKeys,u=s.xKey,c=s.marker,d=s.label,p=s.fills,f=s.strokes,h=s.id;v=t.scale;g=r.scale;y=g instanceof ContinuousScale;m=(v.bandwidth||0)/2;_=n.length;S=new Array(_).fill(null).map((function(){return{left:0,right:0}}));b=new Array(_).fill(0);C=function(e,t,r,n){var i=v.convert(e)+m;var o=S[r][n];var a=S[r][n]+t;var s=g.convert(o,{strict:false});var l=g.convert(a,{strict:false});S[r][n]=a;return[{x:i,y:l,size:c.size},{x:i,y:s,size:c.size}]};x=function(e,t,r,n){var i;var o=w.normalizedTo&&isFinite(w.normalizedTo);var a=o&&y&&isContinuous(n);var s=!o&&!isNaN(n)||a;if(s){i=b[r]+=t}var l=v.convert(e)+m;var u=g.convert(i,{strict:false});return{x:l,y:u,size:c.size}};l.forEach((function(e,t){var r;var n=(r=w.dataModel)===null||r===void 0?void 0:r.resolveProcessedDataIndex(e);var i=[];var s=[];var l={itemId:e,points:[],yValues:[]};var v={itemId:e,points:[]};a[t]={itemId:e,fillSelectionData:v,labelData:i,nodeData:s,strokeSelectionData:l};if(!n){return}var g=v.points;var y=[];var m=l.points;var _=l.yValues;var S=-1;o===null||o===void 0?void 0:o.forEach((function(r,a){var l=__read$x(r.keys,1),v=l[0],O=r.datum,T=r.values;T.forEach((function(l,E){S++;var P=O[E];var A=l[n.index];var R=isNaN(A)?undefined:A;var D=E<T.length-1;var M=D?r:o[a+1];var N=M===null||M===void 0?void 0:M.keys[0];var I=D?E+1:0;var L=M===null||M===void 0?void 0:M.values[I][n.index];var k=isNaN(L)?undefined:L;var F=x(v,+R,S,P[e]);if(c){s.push({index:S,series:w,itemId:e,datum:P,nodeMidPoint:{x:F.x,y:F.y},cumulativeValue:b[S],yValue:R,yKey:e,xKey:u,point:F,fill:p[t%p.length],stroke:f[t%f.length]})}var $;if(d.formatter){$=d.formatter({value:R,seriesId:h})}else{$=isNumber$4(R)?Number(R).toFixed(2):String(R)}if(d){i.push({index:S,itemId:e,point:F,label:$?{text:$,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontSize:d.fontSize,fontFamily:d.fontFamily,textAlign:"center",textBaseline:"bottom",fill:d.color}:undefined})}var G=[v,N];var B=[R,k];if(G.some((function(e){return e==undefined}))){return}if(B.some((function(e){return e==undefined}))){B[0]=0;B[1]=0}var V=C(G[0],+B[0],S,"right");g.push(V[0]);y.push(V[1]);var j=C(G[1],+B[1],S,"left");g.push(j[0]);y.push(j[1]);m.push({x:NaN,y:NaN});_.push(undefined);m.push(V[0]);_.push(R);if(k!==undefined){m.push(j[0]);_.push(R)}}))}));for(var O=y.length-1;O>=0;O--){g.push(y[O])}}));return[2,a]}))}))};t.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()};t.prototype.updatePaths=function(e){return __awaiter$7(this,void 0,void 0,(function(){var t,r,n,i,o,a;return __generator$7(this,(function(s){t=e.contextData,r=t.fillSelectionData,n=t.strokeSelectionData,i=__read$x(e.paths,2),o=i[0],a=i[1];o.datum=r;o.tag=AreaSeriesTag.Fill;o.lineJoin="round";o.stroke=undefined;o.pointerEvents=PointerEvents.None;a.datum=n;a.tag=AreaSeriesTag.Stroke;a.fill=undefined;a.lineJoin=a.lineCap="round";a.pointerEvents=PointerEvents.None;return[2]}))}))};t.prototype.updatePathNodes=function(e){return __awaiter$7(this,void 0,void 0,(function(){var t,r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m,_,f,S,b,h,v,C,x,m;var w,O,T,E;return __generator$7(this,(function(P){t=__read$x(e.paths,2),r=t[0],n=t[1],i=e.seriesIdx,o=e.itemId;a=this,s=a.strokes,l=a.fills,u=a.fillOpacity,c=a.strokeOpacity,d=a.strokeWidth,p=a.shadow;{f=r.datum.points;r.fill=l[i%l.length];r.fillOpacity=u;r.strokeOpacity=c;r.strokeWidth=d;r.lineDash=this.lineDash;r.lineDashOffset=this.lineDashOffset;r.fillShadow=p;h=r.path;h.clear({trackChanges:true});v=0;try{for(g=__values$e(f),y=g.next();!y.done;y=g.next()){m=y.value;if(v++>0){h.lineTo(m.x,m.y)}else{h.moveTo(m.x,m.y)}}}catch(e){w={error:e}}finally{try{if(y&&!y.done&&(O=g.return))O.call(g)}finally{if(w)throw w.error}}h.closePath();r.checkPathDirty()}{_=n.datum,f=_.points,S=_.yValues;b=true;n.stroke=s[i%s.length];n.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:o});n.strokeOpacity=c;n.lineDash=this.lineDash;n.lineDashOffset=this.lineDashOffset;h=n.path;h.clear({trackChanges:true});v=0;try{for(C=__values$e(f),x=C.next();!x.done;x=C.next()){m=x.value;if(S[v++]===undefined){b=true}else if(b){h.moveTo(m.x,m.y);b=false}else{h.lineTo(m.x,m.y)}}}catch(e){T={error:e}}finally{try{if(x&&!x.done&&(E=C.return))E.call(C)}finally{if(T)throw T.error}}n.checkPathDirty()}return[2]}))}))};t.prototype.markerFactory=function(){var e=this.marker.shape;var t=getMarker$1(e);return new t};t.prototype.updateMarkerSelection=function(e){return __awaiter$7(this,void 0,void 0,(function(){var t,r,n,i;return __generator$7(this,(function(o){t=e.nodeData,r=e.markerSelection;n=this.marker.enabled;i=n&&t?t:[];if(this.marker.isDirty()){r.clear()}return[2,r.update(i,(function(e){e.tag=AreaSeriesTag.Marker}))]}))}))};t.prototype.updateMarkerNodes=function(e){return __awaiter$7(this,void 0,void 0,(function(){var t,r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m,_,S,b,C,x,w;return __generator$7(this,(function(O){t=e.markerSelection,r=e.isHighlight;n=this,i=n.id,o=n.xKey,a=n.marker,s=n.seriesItemEnabled,l=n.yKeys,u=n.fills,c=n.strokes,d=n.fillOpacity,p=n.marker.fillOpacity,f=p===void 0?d:p,h=n.strokeOpacity,v=n.highlightStyle.item,g=v.fill,y=v.fillOpacity,m=y===void 0?f:y,_=v.stroke,S=v.strokeWidth;b=a.size,C=a.formatter;x=a.strokeWidth!==undefined?a.strokeWidth:this.strokeWidth;w=typeof a.shape==="function";t.each((function(e,t){var n,d;var p=l.indexOf(t.yKey);var v=r&&g!==undefined?g:a.fill||u[p%u.length];var y=r?m:f;var O=r&&_!==undefined?_:a.stroke||c[p%u.length];var T=r&&S!==undefined?S:x;var E=undefined;if(C){E=C({datum:t.datum,xKey:o,yKey:t.yKey,fill:v,stroke:O,strokeWidth:T,size:b,highlighted:r,seriesId:i})}e.fill=E&&E.fill||v;e.stroke=E&&E.stroke||O;e.strokeWidth=E&&E.strokeWidth!==undefined?E.strokeWidth:T;e.fillOpacity=y!==null&&y!==void 0?y:1;e.strokeOpacity=(d=(n=a.strokeOpacity)!==null&&n!==void 0?n:h)!==null&&d!==void 0?d:1;e.size=E&&E.size!==undefined?E.size:b;e.translationX=t.point.x;e.translationY=t.point.y;e.visible=e.size>0&&!!s.get(t.yKey)&&!isNaN(t.point.x)&&!isNaN(t.point.y);if(!w||e.dirtyPath){return}e.path.clear({trackChanges:true});e.updatePath();e.checkPathDirty()}));if(!r){this.marker.markClean()}return[2]}))}))};t.prototype.updateLabelSelection=function(e){return __awaiter$7(this,void 0,void 0,(function(){var t,r;return __generator$7(this,(function(n){t=e.labelData,r=e.labelSelection;return[2,r.update(t,(function(e){e.tag=AreaSeriesTag.Label}))]}))}))};t.prototype.updateLabelNodes=function(e){return __awaiter$7(this,void 0,void 0,(function(){var t,r,n,i,o,a,s,l;return __generator$7(this,(function(u){t=e.labelSelection;r=this.label,n=r.enabled,i=r.fontStyle,o=r.fontWeight,a=r.fontSize,s=r.fontFamily,l=r.color;t.each((function(e,t){var r=t.point,u=t.label;if(u&&n){e.fontStyle=i;e.fontWeight=o;e.fontSize=a;e.fontFamily=s;e.textAlign=u.textAlign;e.textBaseline=u.textBaseline;e.text=u.text;e.x=r.x;e.y=r.y-10;e.fill=l;e.visible=true}else{e.visible=false}}));return[2]}))}))};t.prototype.getNodeClickEvent=function(e,t){return new CartesianSeriesNodeClickEvent(this.xKey,t.yKey,e,t,this)};t.prototype.getNodeDoubleClickEvent=function(e,t){return new CartesianSeriesNodeDoubleClickEvent(this.xKey,t.yKey,e,t,this)};t.prototype.getTooltipHtml=function(e){var t,r,n;var i=this,o=i.xKey,a=i.id;var s=e.yKey;var l=(t=this.dataModel)===null||t===void 0?void 0:t.resolveProcessedDataIndex(s);if(!(o&&s)||!l){return""}var u=e.datum;var c=u[o];var d=u[s];var p=this,f=p.xAxis,h=p.yAxis,v=p.yKeys;if(!(f&&h&&isNumber$4(d))||!l){return""}var g=this,y=g.xName,m=g.yNames,_=g.fills,S=g.strokes,b=g.tooltip,C=g.marker;var x=C.size,w=C.formatter,O=C.strokeWidth,T=C.fill,E=C.stroke;var P=f.formatDatum(c);var A=h.formatDatum(d);var R=v.indexOf(s);var D=(n=(r=this.processedData)===null||r===void 0?void 0:r.data[e.index])===null||n===void 0?void 0:n.values[0][l===null||l===void 0?void 0:l.index];var M=m[R];var N=sanitizeHtml(M);var I=sanitizeHtml(P+": "+A);var L=O!==undefined?O:this.strokeWidth;var k=T||_[R%_.length];var F=E||S[R%_.length];var $=undefined;if(w){$=w({datum:u,xKey:o,yKey:s,fill:k,stroke:F,strokeWidth:L,size:x,highlighted:false,seriesId:a})}var G=$&&$.fill||k;var B={title:N,backgroundColor:G,content:I};var V=b.renderer,j=b.format;if(j||V){var H={datum:u,xKey:o,xName:y,xValue:c,yKey:s,yValue:d,processedYValue:D,yName:M,color:G,title:N,seriesId:a};if(j){return toTooltipHtml$1({content:interpolate(j,H)},B)}if(V){return toTooltipHtml$1(V(H),B)}}return toTooltipHtml$1(B)};t.prototype.getLegendData=function(){var e,t;var r=this,n=r.data,i=r.id,o=r.xKey,a=r.yKeys,s=r.yNames,l=r.seriesItemEnabled,u=r.marker,c=r.fills,d=r.strokes,p=r.fillOpacity,f=r.strokeOpacity;if(!n||!n.length||!o||!a.length){return[]}var h=[];for(var v=a.length-1;v>=0;v--){var g=a[v];h.push({id:i,itemId:g,seriesId:i,enabled:l.get(g)||false,label:{text:s[v]||a[v]},marker:{shape:u.shape,fill:u.fill||c[v%c.length],stroke:u.stroke||d[v%d.length],fillOpacity:(e=u.fillOpacity)!==null&&e!==void 0?e:p,strokeOpacity:(t=u.strokeOpacity)!==null&&t!==void 0?t:f}})}return h};t.prototype.isLabelEnabled=function(){return this.label.enabled};t.className="AreaSeries";t.type="area";__decorate$1s([Validate(COLOR_STRING_ARRAY)],t.prototype,"fills",void 0);__decorate$1s([Validate(COLOR_STRING_ARRAY)],t.prototype,"strokes",void 0);__decorate$1s([Validate(NUMBER(0,1))],t.prototype,"fillOpacity",void 0);__decorate$1s([Validate(NUMBER(0,1))],t.prototype,"strokeOpacity",void 0);__decorate$1s([Validate(OPT_LINE_DASH)],t.prototype,"lineDash",void 0);__decorate$1s([Validate(NUMBER(0))],t.prototype,"lineDashOffset",void 0);__decorate$1s([Validate(STRING)],t.prototype,"_xKey",void 0);__decorate$1s([Validate(STRING)],t.prototype,"xName",void 0);__decorate$1s([Validate(STRING_ARRAY)],t.prototype,"_yKeys",void 0);__decorate$1s([Validate(BOOLEAN_ARRAY)],t.prototype,"_visibles",void 0);__decorate$1s([Validate(STRING_ARRAY)],t.prototype,"yNames",void 0);__decorate$1s([Validate(OPT_NUMBER())],t.prototype,"_normalizedTo",void 0);__decorate$1s([Validate(NUMBER(0))],t.prototype,"strokeWidth",void 0);return t}(CartesianSeries);var __extends$24=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1r=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Rect=function(e){__extends$24(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.borderPath=new Path2D;t.x=0;t.y=0;t.width=10;t.height=10;t.radius=0;t.crisp=false;t.lastUpdatePathStrokeWidth=Shape.defaultStyles.strokeWidth;t.effectiveStrokeWidth=Shape.defaultStyles.strokeWidth;t.microPixelEffectOpacity=1;return t}t.prototype.isDirtyPath=function(){var e;if(this.lastUpdatePathStrokeWidth!==this.strokeWidth){return true}if(this.path.isDirty()||this.borderPath.isDirty()||((e=this.clipPath)===null||e===void 0?void 0:e.isDirty())){return true}return false};t.prototype.updatePath=function(){var e,t,r;var n=this,i=n.path,o=n.borderPath,a=n.crisp;var s=this,l=s.x,u=s.y,c=s.width,d=s.height,p=s.strokeWidth;var f=(t=(e=this.layerManager)===null||e===void 0?void 0:e.canvas.pixelRatio)!==null&&t!==void 0?t:1;var h=1/f;var v=1;i.clear({trackChanges:true});o.clear({trackChanges:true});if(a){if(c<=h){v*=c/h}if(d<=h){v*=d/h}c=this.align(l,c);d=this.align(u,d);l=this.align(l);u=this.align(u)}if(p){if(c<h){var g=l+h/2;o.moveTo(g,u);o.lineTo(g,u+d);p=h;this.borderClipPath=undefined}else if(d<h){var y=u+h/2;o.moveTo(l,y);o.lineTo(l+c,y);p=h;this.borderClipPath=undefined}else if(p<c&&p<d){var m=p/2;l+=m;u+=m;c-=p;d-=p;this.borderClipPath=undefined;i.rect(l,u,c,d);o.rect(l,u,c,d)}else{this.borderClipPath=(r=this.borderClipPath)!==null&&r!==void 0?r:new Path2D;this.borderClipPath.clear({trackChanges:true});this.borderClipPath.rect(l,u,c,d);o.rect(l,u,c,d)}}else{this.borderClipPath=undefined;i.rect(l,u,c,d)}this.effectiveStrokeWidth=p;this.lastUpdatePathStrokeWidth=p;this.microPixelEffectOpacity=v};t.prototype.computeBBox=function(){var e=this,t=e.x,r=e.y,n=e.width,i=e.height;return new BBox(t,r,n,i)};t.prototype.isPointInPath=function(e,t){var r=this.transformPoint(e,t);var n=this.computeBBox();return n.containsPoint(r.x,r.y)};t.prototype.applyFillAlpha=function(e){var t=this,r=t.fillOpacity,n=t.microPixelEffectOpacity,i=t.opacity;e.globalAlpha=i*r*n};t.prototype.renderStroke=function(e){var t=this,r=t.stroke,n=t.effectiveStrokeWidth,i=t.borderPath,o=t.borderClipPath,a=t.opacity,s=t.microPixelEffectOpacity;var l=!!r&&!!n;if(l){var u=this,c=u.strokeOpacity,d=u.lineDash,p=u.lineDashOffset,f=u.lineCap,h=u.lineJoin;if(o){o.draw(e);e.clip()}i.draw(e);var v=e.globalAlpha;e.strokeStyle=r;e.globalAlpha=v*a*c*s;e.lineWidth=n;if(d){e.setLineDash(d)}if(p){e.lineDashOffset=p}if(f){e.lineCap=f}if(h){e.lineJoin=h}e.stroke();e.globalAlpha=v}};t.className="Rect";__decorate$1r([ScenePathChangeDetection()],t.prototype,"x",void 0);__decorate$1r([ScenePathChangeDetection()],t.prototype,"y",void 0);__decorate$1r([ScenePathChangeDetection()],t.prototype,"width",void 0);__decorate$1r([ScenePathChangeDetection()],t.prototype,"height",void 0);__decorate$1r([ScenePathChangeDetection()],t.prototype,"radius",void 0);__decorate$1r([ScenePathChangeDetection()],t.prototype,"crisp",void 0);return t}(Path);var __extends$23=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1q=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __awaiter$6=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$6=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __read$w=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$i=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$w(arguments[t]));return e};var BAR_LABEL_PLACEMENTS=["inside","outside"];var OPT_BAR_LABEL_PLACEMENT=function(e,t){return OPTIONAL(e,t,(function(e){return BAR_LABEL_PLACEMENTS.includes(e)}))};var BarSeriesNodeTag;(function(e){e[e["Bar"]=0]="Bar";e[e["Label"]=1]="Label"})(BarSeriesNodeTag||(BarSeriesNodeTag={}));var BarSeriesLabel=function(e){__extends$23(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.formatter=undefined;t.placement="inside";return t}__decorate$1q([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0);__decorate$1q([Validate(OPT_BAR_LABEL_PLACEMENT)],t.prototype,"placement",void 0);return t}(Label$1);var BarSeriesTooltip=function(e){__extends$23(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.renderer=undefined;return t}__decorate$1q([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0);return t}(SeriesTooltip);function is2dArray$1(e){return e.length>0&&Array.isArray(e[0])}var BarSeries=function(e){__extends$23(t,e);function t(){var t;var r=e.call(this,{pickModes:[SeriesNodePickMode.EXACT_SHAPE_MATCH],pathsPerSeries:0,directionKeys:(t={},t[ChartAxisDirection.X]=["xKey"],t[ChartAxisDirection.Y]=["yKeys"],t)})||this;r.label=new BarSeriesLabel;r.tooltip=new BarSeriesTooltip;r.flipXY=false;r.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"];r.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"];r.fillOpacity=1;r.strokeOpacity=1;r.lineDash=[0];r.lineDashOffset=0;r.formatter=undefined;r.groupScale=new BandScale$5;r._xKey="";r.xName="";r.cumYKeyCount=[];r.flatYKeys=undefined;r.hideInLegend=[];r.yKeys=[];r.yKeysCache=[];r.visibles=[];r._grouped=false;r.stackGroups={};r.yNames={};r.strokeWidth=1;r.shadow=undefined;r.smallestDataInterval=undefined;r.label.enabled=false;return r}t.prototype.resolveKeyDirection=function(e){return this.flipXY?flipChartAxisDirection(e):e};Object.defineProperty(t.prototype,"xKey",{get:function(){return this._xKey},set:function(e){this._xKey=e;this.processedData=undefined},enumerable:false,configurable:true});t.prototype.processYKeys=function(){var e=this;var t=this.yKeys;var r=undefined;if(!is2dArray$1(t)){r=t;t=this.grouped?r.map((function(e){return[e]})):[r]}var n=Object.values(this.stackGroups);if(n.length>0){var i=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])};var o=i(t);var a=new Set(i(n));var s=o.filter((function(e){return!a.has(e)}));t=n.map((function(e){return e}));if(s.length>0){t.push(s)}var l=function(e){return e.reduce((function(e,t,r){return e.set(t,r)}),new Map)};var u=i(t);var c=l(u);var d=function(e){var t=Array.from({length:e.length});e.forEach((function(e,r){var n=o[r];var i=c.get(n);t[i]=e}));return t};this.fills=d(this.fills);this.strokes=d(this.strokes);this.visibles=d(this.visibles)}if(!areArrayItemsStrictlyEqual(this.yKeysCache,t)){this.flatYKeys=r?r:undefined;this.yKeys=t;var p=0;this.cumYKeyCount=[];var f=[];t.forEach((function(t,r){if(t.length>0){f.push(String(r))}e.cumYKeyCount.push(p);p+=t.length}));this.processSeriesItemEnabled();var h=this.groupScale;h.domain=f}this.yKeysCache=t};t.prototype.processSeriesItemEnabled=function(){var e=this.seriesItemEnabled;var t=function(e,t){return e.concat.apply(e,__spread$i(Array.isArray(t)?t:[t]))};var r=this.visibles.reduce(t,[]);e.clear();var n=0;this.yKeys.forEach((function(t){t.forEach((function(t){var i;return e.set(t,(i=r[n++])!==null&&i!==void 0?i:true)}))}))};Object.defineProperty(t.prototype,"grouped",{get:function(){return this._grouped},set:function(e){this._grouped=e},enumerable:false,configurable:true});t.prototype.getStackGroup=function(e){var t;var r=this.stackGroups;return(t=Object.entries(r).find((function(t){var r=__read$w(t,2);r[0];var n=r[1];return n.includes(e)})))===null||t===void 0?void 0:t[0]};t.prototype.processYNames=function(){var e=this.yNames;if(Array.isArray(e)&&this.flatYKeys){var t={};this.flatYKeys.forEach((function(r,n){t[r]=e[n]}));this.yNames=t}};Object.defineProperty(t.prototype,"normalizedTo",{get:function(){return this._normalizedTo},set:function(e){var t=e?Math.abs(e):undefined;this._normalizedTo=t},enumerable:false,configurable:true});t.prototype.processData=function(){var e,t,r,n,i;return __awaiter$6(this,void 0,void 0,(function(){var o,a,s,l,u,c,d,p,f,h,v;return __generator$6(this,(function(g){this.processYKeys();this.processYNames();o=this,a=o.xKey,s=o.seriesItemEnabled,l=o.normalizedTo,u=o.data,c=u===void 0?[]:u;d=((e=this.getCategoryAxis())===null||e===void 0?void 0:e.scale)instanceof ContinuousScale;p=((t=this.getValueAxis())===null||t===void 0?void 0:t.scale)instanceof ContinuousScale;f=__spread$i(s.entries()).filter((function(e){var t=__read$w(e,2),r=t[1];return r})).map((function(e){var t=__read$w(e,1),r=t[0];return r}));h=this.yKeys.map((function(e){return e.filter((function(e){return s.get(e)}))})).filter((function(e){return e.length>0}));v=l&&isFinite(l)?l:undefined;this.dataModel=new DataModel({props:__spread$i([keyProperty(a,d)],f.map((function(e){return valueProperty(e,p,{invalidValue:null})})),h.map((function(e){return sumProperties(e)})),d?[SMALLEST_KEY_INTERVAL]:[],[SUM_VALUE_EXTENT]),groupByKeys:true,dataVisible:this.visible&&f.length>0,normaliseTo:v});this.processedData=this.dataModel.processData(c);this.smallestDataInterval={x:(i=(n=(r=this.processedData)===null||r===void 0?void 0:r.reduced)===null||n===void 0?void 0:n[SMALLEST_KEY_INTERVAL.property])!==null&&i!==void 0?i:Infinity,y:Infinity};return[2]}))}))};t.prototype.getDomain=function(e){var t=this,r=t.flipXY,n=t.processedData;if(!n)return[];if(r){e=flipChartAxisDirection(e)}var i=n,o=__read$w(i.defs.keys,1),a=o[0],s=i.domain,l=__read$w(s.keys,1),u=l[0],c=__read$w(s.values,1),d=c[0],p=i.reduced,f=p===void 0?{}:p,h=SMALLEST_KEY_INTERVAL.property,v=f[h],g=SUM_VALUE_EXTENT.property,y=f[g];if(e===ChartAxisDirection.X){if(a.valueType==="category"){return u}var m=extent$4(u)||[NaN,NaN];if(r){return[m[0]+-v,m[1]]}return[m[0],m[1]+v]}else if(this.getValueAxis()instanceof LogAxis){return this.fixNumericExtent(d)}else{return this.fixNumericExtent(y)}};t.prototype.getNodeClickEvent=function(e,t){return new CartesianSeriesNodeClickEvent(this.xKey,t.yKey,e,t,this)};t.prototype.getNodeDoubleClickEvent=function(e,t){return new CartesianSeriesNodeDoubleClickEvent(this.xKey,t.yKey,e,t,this)};t.prototype.getCategoryAxis=function(){return this.flipXY?this.yAxis:this.xAxis};t.prototype.getValueAxis=function(){return this.flipXY?this.xAxis:this.yAxis};t.prototype.calculateStep=function(e){var t;var r=this.smallestDataInterval;var n=this.getCategoryAxis();if(!n){return}var i=n.dataDomain[1]-n.dataDomain[0];var o=i/((t=r===null||r===void 0?void 0:r.x)!==null&&t!==void 0?t:1)+1;var a=Math.floor(e);var s=Math.min(o,a);var l=e/Math.max(1,s);return l};t.prototype.createNodeData=function(){return __awaiter$6(this,void 0,void 0,(function(){var e,t,r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m,_,S,b,C,x,w,O,T,E,P,A,R,D;var M=this;return __generator$6(this,(function(N){e=this,t=e.data,r=e.visible;n=this.getCategoryAxis();i=this.getValueAxis();if(!(t&&r&&n&&i)){return[2,[]]}o=n.scale;a=i.scale;s=this,l=s.groupScale,u=s.yKeys,c=s.xKey,d=s.cumYKeyCount,p=s.fills,f=s.strokes,h=s.strokeWidth,v=s.seriesItemEnabled,g=s.label,y=s.flipXY,m=s.id,_=s.processedData;S=g.fontStyle,b=g.fontWeight,C=g.fontSize,x=g.fontFamily,w=g.color,O=g.formatter,T=g.placement;E=o.bandwidth;if(o instanceof ContinuousScale){P=Math.max(n.range[0],n.range[1]);A=this.calculateStep(P);E=A}l.range=[0,E];if(n instanceof CategoryAxis){l.padding=n.groupPaddingInner}else if(n instanceof GroupedCategoryAxis){l.padding=.1}else{l.padding=0}if(l.padding===0){l.round=false}else{l.round=true}R=l.bandwidth>=1?l.bandwidth:l.rawBandwidth;D=[];_===null||_===void 0?void 0:_.data.forEach((function(e,t){var r,i,s,g,E;var P;var A=e.keys,N=e.datum,I=e.values;var L=o.convert(A[0]);for(var k=0;k<((r=u===null||u===void 0?void 0:u.length)!==null&&r!==void 0?r:0);k++){var F=(i=u===null||u===void 0?void 0:u[k])!==null&&i!==void 0?i:[];(s=D[k])!==null&&s!==void 0?s:D[k]=[];var $=0;var G=0;for(var B=0;B<F.length;B++){var V=F[B];var j=(g=_===null||_===void 0?void 0:_.indices.values[V])!==null&&g!==void 0?g:-1;(E=(P=D[k])[B])!==null&&E!==void 0?E:P[B]={itemId:V,nodeData:[],labelData:[]};if(j===undefined)continue;var H=I[0][j];var U=+H;var z=L+l.convert(String(k));if(!n.inRange(z,R)){continue}if(isNaN(U)){continue}var W=U<0?$:G;var K=a.convert(W+U,{strict:false});var Y=a.convert(W,{strict:false});var X=void 0;if(O){X=O({value:isNumber$4(H)?H:undefined,seriesId:m})}else{X=isNumber$4(H)?H.toFixed(2):""}var q=void 0;var Z=void 0;if(y){Z=z+R/2;if(T==="inside"){q=K+(H>=0?-1:1)*Math.abs(Y-K)/2}else{q=K+(H>=0?1:-1)*4}}else{q=z+R/2;if(T==="inside"){Z=K+(H>=0?1:-1)*Math.abs(Y-K)/2}else{Z=K+(H>=0?-3:4)}}var J=void 0;var Q=void 0;if(T==="inside"){J="center";Q="middle"}else{J=y?H>=0?"start":"end":"center";Q=y?"middle":H>=0?"bottom":"top"}var ee=d[k]+B;var te={x:y?Math.min(K,Y):z,y:y?z:Math.min(K,Y),width:y?Math.abs(Y-K):R,height:y?R:Math.abs(Y-K)};var re={x:te.x+te.width/2,y:te.y+te.height/2};var ne={index:t,series:M,itemId:V,datum:N[0],cumulativeValue:W+U,yValue:H,yKey:V,xKey:c,x:te.x,y:te.y,width:te.width,height:te.height,nodeMidPoint:re,colorIndex:ee,fill:p[ee%p.length],stroke:f[ee%f.length],strokeWidth:h,label:v.get(V)&&X?{text:X,fontStyle:S,fontWeight:b,fontSize:C,fontFamily:x,textAlign:J,textBaseline:Q,fill:w,x:q,y:Z}:undefined};D[k][B].nodeData.push(ne);D[k][B].labelData.push(ne);if(U<0){$+=U}else{G+=U}}}}));return[2,D.reduce((function(e,t){return e.concat.apply(e,__spread$i(t))}),[])]}))}))};t.prototype.nodeFactory=function(){return new Rect};t.prototype.updateDatumSelection=function(e){return __awaiter$6(this,void 0,void 0,(function(){var t,r;return __generator$6(this,(function(n){t=e.nodeData,r=e.datumSelection;return[2,r.update(t,(function(e){return e.tag=BarSeriesNodeTag.Bar}))]}))}))};t.prototype.updateDatumNodes=function(e){var t,r;return __awaiter$6(this,void 0,void 0,(function(){var n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m,_,S,b,C,x,w,O;var T=this;return __generator$6(this,(function(E){n=e.datumSelection,i=e.isHighlight;o=this,a=o.fills,s=o.strokes,l=o.fillOpacity,u=o.strokeOpacity,c=o.shadow,d=o.formatter,p=o.xKey,f=o.flipXY,h=o.highlightStyle.item,v=h.fill,g=h.fillOpacity,y=g===void 0?l:g,m=h.stroke,_=h.strokeWidth,S=o.id;b=__read$w((r=(t=this.xAxis)===null||t===void 0?void 0:t.visibleRange)!==null&&r!==void 0?r:[],2),C=b[0],x=b[1];w=C!==0||x!==1;O=!w;n.each((function(e,t){var r=t.colorIndex;var n=i&&v!==undefined?v:a[r%a.length];var o=i&&m!==undefined?m:s[r%a.length];var h=i&&_!==undefined?_:T.getStrokeWidth(T.strokeWidth,t);var g=i?y:l;var b=T.getStackGroup(t.yKey);var C=undefined;if(d){C=d({datum:t.datum,fill:n,stroke:o,strokeWidth:h,highlighted:i,xKey:p,yKey:t.yKey,seriesId:S,stackGroup:b})}e.crisp=O;e.x=t.x;e.y=t.y;e.width=t.width;e.height=t.height;e.fill=C&&C.fill||n;e.stroke=C&&C.stroke||o;e.strokeWidth=C&&C.strokeWidth!==undefined?C.strokeWidth:h;e.fillOpacity=g;e.strokeOpacity=u;e.lineDash=T.lineDash;e.lineDashOffset=T.lineDashOffset;e.fillShadow=c;e.visible=f?t.width>0:t.height>0}));return[2]}))}))};t.prototype.updateLabelSelection=function(e){return __awaiter$6(this,void 0,void 0,(function(){var t,r,n,i;return __generator$6(this,(function(o){t=e.labelData,r=e.labelSelection;n=this.label.enabled;i=n?t:[];return[2,r.update(i,(function(e){e.tag=BarSeriesNodeTag.Label;e.pointerEvents=PointerEvents.None}))]}))}))};t.prototype.updateLabelNodes=function(e){return __awaiter$6(this,void 0,void 0,(function(){var t,r,n,i,o,a,s,l;return __generator$6(this,(function(u){t=e.labelSelection;r=this.label,n=r.enabled,i=r.fontStyle,o=r.fontWeight,a=r.fontSize,s=r.fontFamily,l=r.color;t.each((function(e,t){var r=t.label;if(r&&n){e.fontStyle=i;e.fontWeight=o;e.fontSize=a;e.fontFamily=s;e.textAlign=r.textAlign;e.textBaseline=r.textBaseline;e.text=r.text;e.x=r.x;e.y=r.y;e.fill=l;e.visible=true}else{e.visible=false}}));return[2]}))}))};t.prototype.getTooltipHtml=function(e){var t=this,r=t.xKey,n=t.yKeys,i=t.processedData;var o=this.getCategoryAxis();var a=this.getValueAxis();var s=e.yKey;if(!i||!r||!s||!o||!a){return""}var l=0;var u=0;var c=0;for(;c<n.length;c++){var d=n[c];u=d.indexOf(s);if(u>=0){l+=u;break}l+=d.length}var p=this,f=p.xName,h=p.yNames,v=p.fills,g=p.strokes,y=p.tooltip,m=p.formatter,_=p.id;var S=y.renderer;var b=e.datum;var C=h[s];var x=this.getStackGroup(s);var w=v[l%v.length];var O=g[l%v.length];var T=this.getStrokeWidth(this.strokeWidth);var E=b[r];var P=b[s];var A=sanitizeHtml(o.formatDatum(E));var R=sanitizeHtml(a.formatDatum(P));var D=sanitizeHtml(C);var M=A+": "+R;var N=undefined;if(m){N=m({datum:b,fill:w,stroke:O,strokeWidth:T,highlighted:false,xKey:r,yKey:s,seriesId:_,stackGroup:x})}var I=N&&N.fill||w;var L={title:D,backgroundColor:I,content:M};if(S){return toTooltipHtml$1(S({datum:b,xKey:r,xValue:E,xName:f,yKey:s,yValue:P,yName:C,color:I,title:D,seriesId:_,stackGroup:x}),L)}return toTooltipHtml$1(L)};t.prototype.getLegendData=function(){var e=this,t=e.id,r=e.data,n=e.xKey,i=e.yKeys,o=e.yNames,a=e.cumYKeyCount,s=e.seriesItemEnabled,l=e.hideInLegend,u=e.fills,c=e.strokes,d=e.fillOpacity,p=e.strokeOpacity,f=e.flipXY;if(!r||!r.length||!n||!i.length){return[]}var h=[];this.yKeys.forEach((function(e,r){var n=f?0:e.length-1;var i=f?1:-1;for(var v=n,g=0;g<e.length;v+=i,g++){var y=e[v];if(l.indexOf(y)>=0){return}var m=a[r]+v;h.push({id:t,itemId:y,seriesId:t,enabled:s.get(y)||false,label:{text:o[y]||y},marker:{fill:u[m%u.length],stroke:c[m%c.length],fillOpacity:d,strokeOpacity:p}})}}));return h};t.prototype.toggleSeriesItem=function(t,r){e.prototype.toggleSeriesItem.call(this,t,r);var n=this.yKeys.map((function(e){return e.slice()}));this.seriesItemEnabled.forEach((function(e,t){if(!e){n.forEach((function(e){var r=e.indexOf(t);if(r>=0){e.splice(r,1)}}))}}));var i=[];n.forEach((function(e,t){if(e.length>0){i.push(String(t))}}));this.groupScale.domain=i;this.nodeDataRefresh=true};t.prototype.isLabelEnabled=function(){return this.label.enabled};t.prototype.getBandScalePadding=function(){return{inner:.2,outer:.3}};t.className="BarSeries";t.type="bar";__decorate$1q([Validate(BOOLEAN)],t.prototype,"flipXY",void 0);__decorate$1q([Validate(COLOR_STRING_ARRAY)],t.prototype,"fills",void 0);__decorate$1q([Validate(COLOR_STRING_ARRAY)],t.prototype,"strokes",void 0);__decorate$1q([Validate(NUMBER(0,1))],t.prototype,"fillOpacity",void 0);__decorate$1q([Validate(NUMBER(0,1))],t.prototype,"strokeOpacity",void 0);__decorate$1q([Validate(OPT_LINE_DASH)],t.prototype,"lineDash",void 0);__decorate$1q([Validate(NUMBER(0))],t.prototype,"lineDashOffset",void 0);__decorate$1q([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0);__decorate$1q([Validate(STRING)],t.prototype,"_xKey",void 0);__decorate$1q([Validate(STRING)],t.prototype,"xName",void 0);__decorate$1q([Validate(STRING_ARRAY)],t.prototype,"hideInLegend",void 0);__decorate$1q([Validate(BOOLEAN_ARRAY)],t.prototype,"visibles",void 0);__decorate$1q([Validate(BOOLEAN)],t.prototype,"_grouped",void 0);__decorate$1q([Validate(OPT_NUMBER())],t.prototype,"_normalizedTo",void 0);__decorate$1q([Validate(NUMBER(0))],t.prototype,"strokeWidth",void 0);return t}(CartesianSeries);var __extends$22=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1p=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __awaiter$5=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$5=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __read$v=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$h=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$v(arguments[t]));return e};var HISTOGRAM_AGGREGATIONS=["count","sum","mean"];var HISTOGRAM_AGGREGATION=predicateWithMessage((function(e){return HISTOGRAM_AGGREGATIONS.includes(e)}),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var HistogramSeriesNodeTag;(function(e){e[e["Bin"]=0]="Bin";e[e["Label"]=1]="Label"})(HistogramSeriesNodeTag||(HistogramSeriesNodeTag={}));var HistogramSeriesLabel=function(e){__extends$22(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.formatter=undefined;return t}__decorate$1p([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0);return t}(Label$1);var defaultBinCount=10;var aggregationFunctions={count:function(e){return e.data.length},sum:function(e,t){return e.data.reduce((function(e,r){return e+r[t]}),0)},mean:function(e,t){return aggregationFunctions.sum(e,t)/aggregationFunctions.count(e,t)}};var HistogramBin=function(){function e(e){var t=__read$v(e,2),r=t[0],n=t[1];this.data=[];this.aggregatedValue=0;this.frequency=0;this.domain=[r,n]}e.prototype.addDatum=function(e){this.data.push(e);this.frequency++};Object.defineProperty(e.prototype,"domainWidth",{get:function(){var e=__read$v(this.domain,2),t=e[0],r=e[1];return r-t},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"relativeHeight",{get:function(){return this.aggregatedValue/this.domainWidth},enumerable:false,configurable:true});e.prototype.calculateAggregatedValue=function(e,t){if(!t){e="count"}var r=aggregationFunctions[e];this.aggregatedValue=r(this,t)};e.prototype.getY=function(e){return e?this.relativeHeight:this.aggregatedValue};return e}();var HistogramSeriesTooltip=function(e){__extends$22(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.renderer=undefined;return t}__decorate$1p([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0);return t}(SeriesTooltip);var HistogramSeries=function(e){__extends$22(t,e);function t(){var t=e.call(this,{pickModes:[SeriesNodePickMode.EXACT_SHAPE_MATCH]})||this;t.binnedData=[];t.xDomain=[];t.yDomain=[];t.label=new HistogramSeriesLabel;t.tooltip=new HistogramSeriesTooltip;t.fill=undefined;t.stroke=undefined;t.fillOpacity=1;t.strokeOpacity=1;t.lineDash=[0];t.lineDashOffset=0;t.xKey="";t.areaPlot=false;t.bins=undefined;t.aggregation="count";t.binCount=undefined;t.xName="";t.yKey="";t.yName="";t.strokeWidth=1;t.shadow=undefined;t.label.enabled=false;return t}t.prototype.deriveBins=function(){var e=this;var t=this.bins;if(!this.data){return[]}var r=this.data.map((function(t){return t[e.xKey]}));var n=this.fixNumericExtent(extent$4(r));if(this.binCount===undefined){if(t){return t}var i=ticks(n[0],n[1],defaultBinCount);var o=tickStep(n[0],n[1],defaultBinCount);var a=i[0];var s=function(e){return[e,e+o]};return __spread$h([[a-o,a]],i.map(s))}else{return this.calculateNiceBins(n,this.binCount)}};t.prototype.calculateNiceBins=function(e,t){var r=Math.floor(e[0]);var n=e[1];var i=t||1;var o=this.calculateNiceStart(r,n,i),a=o.start,s=o.binSize;return this.getBins(a,n,s,i)};t.prototype.getBins=function(e,t,r,n){var i=[];for(var o=0;o<n;o++){var a=Math.round((e+o*r)*10)/10;var s=Math.round((e+(o+1)*r)*10)/10;if(o===n-1){s=Math.max(s,t)}i[o]=[a,s]}return i};t.prototype.calculateNiceStart=function(e,t,r){var n=Math.abs(t-e)/r;var i=Math.floor(Math.log10(n));var o=Math.pow(10,i);var a=Math.floor(e/o)*o;return{start:a,binSize:n}};t.prototype.placeDataInBins=function(e){var t=this;var r=this.xKey;var n=this.deriveBins();this.bins=n;var i=e.slice().sort((function(e,t){if(e[r]<t[r]){return-1}if(e[r]>t[r]){return 1}return 0}));var o=[new HistogramBin(n[0])];var a=0;for(var s=0;s<i.length&&a<n.length;s++){var l=i[s];while(l[r]>n[a][1]&&a<n.length){a++;o.push(new HistogramBin(n[a]))}if(a<n.length){o[a].addDatum(l)}}o.forEach((function(e){return e.calculateAggregatedValue(t.aggregation,t.yKey)}));return o};Object.defineProperty(t.prototype,"xMax",{get:function(){var e=this;return this.data&&this.data.reduce((function(t,r){return Math.max(t,r[e.xKey])}),Number.NEGATIVE_INFINITY)},enumerable:false,configurable:true});t.prototype.processData=function(){return __awaiter$5(this,void 0,void 0,(function(){var e,t,r,n,i,o,a,s,l;var u=this;return __generator$5(this,(function(c){e=this,t=e.xKey,r=e.data;this.binnedData=this.placeDataInBins(t&&r?r:[]);n=this.binnedData.map((function(e){return e.getY(u.areaPlot)}));i=extent$4(n);this.yDomain=this.fixNumericExtent([0,i?i[1]:1]);o=this.binnedData[0];a=this.binnedData[this.binnedData.length-1];s=o.domain[0];l=a.domain[1];this.xDomain=[s,l];return[2]}))}))};t.prototype.getDomain=function(e){if(e===ChartAxisDirection.X){return this.xDomain}else{return this.yDomain}};t.prototype.getNodeClickEvent=function(e,t){return new CartesianSeriesNodeClickEvent(this.xKey,this.yKey,e,t,this)};t.prototype.getNodeDoubleClickEvent=function(e,t){return new CartesianSeriesNodeDoubleClickEvent(this.xKey,this.yKey,e,t,this)};t.prototype.createNodeData=function(){return __awaiter$5(this,void 0,void 0,(function(){var e,t,r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m,_,S,b;var C=this;return __generator$5(this,(function(x){e=this,t=e.xAxis,r=e.yAxis;if(!this.seriesItemEnabled||!t||!r){return[2,[]]}n=t.scale;i=r.scale;o=this,a=o.fill,s=o.stroke,l=o.strokeWidth,u=o.id,c=o.yKey,d=o.xKey;p=[];f=function(e){return String(e.value)};h=this.label,v=h.formatter,g=v===void 0?f:v,y=h.fontStyle,m=h.fontWeight,_=h.fontSize,S=h.fontFamily,b=h.color;this.binnedData.forEach((function(e){var t=e.aggregatedValue,r=e.frequency,o=__read$v(e.domain,2),f=o[0],h=o[1],v=e.relativeHeight;var x=n.convert(f),w=n.convert(h),O=C.areaPlot?v:c?t:r,T=i.convert(0),E=i.convert(O),P=w-x,A=Math.abs(E-T);var R=O!==0?{text:g({value:e.aggregatedValue,seriesId:u}),fontStyle:y,fontWeight:m,fontSize:_,fontFamily:S,fill:b,x:x+P/2,y:E+A/2}:undefined;var D={x:x+P/2,y:E+A/2};p.push({series:C,datum:e,aggregatedValue:e.aggregatedValue,domain:e.domain,yKey:c,xKey:d,x:x,y:E,width:P,height:A,nodeMidPoint:D,fill:a,stroke:s,strokeWidth:l,label:R})}));return[2,[{itemId:this.yKey,nodeData:p,labelData:p}]]}))}))};t.prototype.nodeFactory=function(){return new Rect};t.prototype.updateDatumSelection=function(e){return __awaiter$5(this,void 0,void 0,(function(){var t,r;return __generator$5(this,(function(n){t=e.nodeData,r=e.datumSelection;return[2,r.update(t,(function(e){e.tag=HistogramSeriesNodeTag.Bin;e.crisp=true}))]}))}))};t.prototype.updateDatumNodes=function(e){return __awaiter$5(this,void 0,void 0,(function(){var t,r,n,i,o,a,s,l,u,c,d,p;var f=this;return __generator$5(this,(function(h){t=e.datumSelection,r=e.isHighlight;n=this,i=n.fillOpacity,o=n.strokeOpacity,a=n.shadow,s=n.highlightStyle.item,l=s.fill,u=s.fillOpacity,c=u===void 0?i:u,d=s.stroke,p=s.strokeWidth;t.each((function(e,t,n){var s=r&&p!==undefined?p:t.strokeWidth;var u=r?c:i;e.x=t.x;e.y=t.y;e.width=t.width;e.height=t.height;e.fill=r&&l!==undefined?l:t.fill;e.stroke=r&&d!==undefined?d:t.stroke;e.fillOpacity=u;e.strokeOpacity=o;e.strokeWidth=s;e.lineDash=f.lineDash;e.lineDashOffset=f.lineDashOffset;e.fillShadow=a;e.zIndex=r?Series.highlightedZIndex:n;e.visible=t.height>0}));return[2]}))}))};t.prototype.updateLabelSelection=function(e){return __awaiter$5(this,void 0,void 0,(function(){var t,r;return __generator$5(this,(function(n){t=e.labelData,r=e.labelSelection;return[2,r.update(t,(function(e){e.tag=HistogramSeriesNodeTag.Label;e.pointerEvents=PointerEvents.None;e.textAlign="center";e.textBaseline="middle"}))]}))}))};t.prototype.updateLabelNodes=function(e){return __awaiter$5(this,void 0,void 0,(function(){var t,r;return __generator$5(this,(function(n){t=e.labelSelection;r=this.label.enabled;t.each((function(e,t){var n=t.label;if(n&&r){e.text=n.text;e.x=n.x;e.y=n.y;e.fontStyle=n.fontStyle;e.fontWeight=n.fontWeight;e.fontSize=n.fontSize;e.fontFamily=n.fontFamily;e.fill=n.fill;e.visible=true}else{e.visible=false}}));return[2]}))}))};t.prototype.getTooltipHtml=function(e){var t=this,r=t.xKey,n=t.yKey,i=t.xAxis,o=t.yAxis;if(!r||!i||!o){return""}var a=this,s=a.xName,l=a.yName,u=a.fill,c=a.tooltip,d=a.aggregation,p=a.id;var f=c.renderer;var h=e.datum;var v=h.aggregatedValue,g=h.frequency,y=__read$v(h.domain,2),m=y[0],_=y[1];var S=sanitizeHtml(s||r)+": "+i.formatDatum(m)+" - "+i.formatDatum(_);var b=n?"<b>"+sanitizeHtml(l||n)+" ("+d+")</b>: "+o.formatDatum(v)+"<br>":"";b+="<b>Frequency</b>: "+g;var C={title:S,backgroundColor:u,content:b};if(f){return toTooltipHtml$1(f({datum:h,xKey:r,xValue:h.domain,xName:s,yKey:n,yValue:h.aggregatedValue,yName:l,color:u,title:S,seriesId:p}),C)}return toTooltipHtml$1(C)};t.prototype.getLegendData=function(){var e=this,t=e.id,r=e.data,n=e.xKey,i=e.yName,o=e.visible,a=e.fill,s=e.stroke,l=e.fillOpacity,u=e.strokeOpacity;if(!r||r.length===0){return[]}return[{id:t,itemId:n,seriesId:t,enabled:o,label:{text:i||n||"Frequency"},marker:{fill:a||"rgba(0, 0, 0, 0)",stroke:s||"rgba(0, 0, 0, 0)",fillOpacity:l,strokeOpacity:u}}]};t.prototype.isLabelEnabled=function(){return this.label.enabled};t.className="HistogramSeries";t.type="histogram";__decorate$1p([Validate(OPT_COLOR_STRING)],t.prototype,"fill",void 0);__decorate$1p([Validate(OPT_COLOR_STRING)],t.prototype,"stroke",void 0);__decorate$1p([Validate(NUMBER(0,1))],t.prototype,"fillOpacity",void 0);__decorate$1p([Validate(NUMBER(0,1))],t.prototype,"strokeOpacity",void 0);__decorate$1p([Validate(OPT_LINE_DASH)],t.prototype,"lineDash",void 0);__decorate$1p([Validate(NUMBER(0))],t.prototype,"lineDashOffset",void 0);__decorate$1p([Validate(STRING)],t.prototype,"xKey",void 0);__decorate$1p([Validate(BOOLEAN)],t.prototype,"areaPlot",void 0);__decorate$1p([Validate(OPT_ARRAY())],t.prototype,"bins",void 0);__decorate$1p([Validate(HISTOGRAM_AGGREGATION)],t.prototype,"aggregation",void 0);__decorate$1p([Validate(OPT_NUMBER(0))],t.prototype,"binCount",void 0);__decorate$1p([Validate(STRING)],t.prototype,"xName",void 0);__decorate$1p([Validate(STRING)],t.prototype,"yKey",void 0);__decorate$1p([Validate(STRING)],t.prototype,"yName",void 0);__decorate$1p([Validate(NUMBER(0))],t.prototype,"strokeWidth",void 0);return t}(CartesianSeries);var __extends$21=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1o=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __awaiter$4=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$4=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __values$d=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$u=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var LineSeriesLabel=function(e){__extends$21(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.formatter=undefined;return t}__decorate$1o([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0);return t}(Label$1);var LineSeriesTooltip=function(e){__extends$21(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.renderer=undefined;t.format=undefined;return t}__decorate$1o([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0);__decorate$1o([Validate(OPT_STRING)],t.prototype,"format",void 0);return t}(SeriesTooltip);var LineSeries=function(e){__extends$21(t,e);function t(){var t=e.call(this,{hasMarkers:true,pickModes:[SeriesNodePickMode.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,SeriesNodePickMode.NEAREST_NODE,SeriesNodePickMode.EXACT_SHAPE_MATCH]})||this;t.xDomain=[];t.yDomain=[];t.pointsData=[];t.marker=new CartesianSeriesMarker;t.label=new LineSeriesLabel;t.title=undefined;t.stroke="#874349";t.lineDash=[0];t.lineDashOffset=0;t.strokeWidth=2;t.strokeOpacity=1;t.tooltip=new LineSeriesTooltip;t._xKey="";t.xName="";t._yKey="";t.yName="";var r=t,n=r.marker,i=r.label;n.fill="#c16068";n.stroke="#874349";i.enabled=false;return t}Object.defineProperty(t.prototype,"xKey",{get:function(){return this._xKey},set:function(e){this._xKey=e;this.pointsData.splice(0)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"yKey",{get:function(){return this._yKey},set:function(e){this._yKey=e;this.pointsData.splice(0)},enumerable:false,configurable:true});t.prototype.getDomain=function(e){if(e===ChartAxisDirection.X){return this.xDomain}return this.yDomain};t.prototype.processData=function(){return __awaiter$4(this,void 0,void 0,(function(){var e,t,r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y;var m,_;return __generator$4(this,(function(S){e=this,t=e.xAxis,r=e.yAxis,n=e.xKey,i=e.yKey,o=e.pointsData;a=n&&i&&this.data?this.data:[];if(!t||!r){return[2]}s=t.scale instanceof ContinuousScale;l=r.scale instanceof ContinuousScale;u=[];c=[];o.splice(0);try{for(d=__values$d(a),p=d.next();!p.done;p=d.next()){f=p.value;h=f[n];v=f[i];g=checkDatum(h,s);if(s&&g===undefined){continue}y=checkDatum(v,l);u.push(g);c.push(y);o.push({xDatum:g,yDatum:y,datum:f})}}catch(e){m={error:e}}finally{try{if(p&&!p.done&&(_=d.return))_.call(d)}finally{if(m)throw m.error}}this.validateXYData(this.xKey,this.yKey,a,t,r,u,c,1);this.xDomain=s?this.fixNumericExtent(extent$4(u),t):u;this.yDomain=l?this.fixNumericExtent(extent$4(c),r):c;return[2]}))}))};t.prototype.createNodeData=function(){var e;return __awaiter$4(this,void 0,void 0,(function(){var t,r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m,_,S,b,C,x,w,O,T,E,P,A,R,D,M,N,I,L;return __generator$4(this,(function(k){t=this,r=t.data,n=t.xAxis,i=t.yAxis,o=t.marker,a=o.enabled,s=o.size,l=o.strokeWidth;if(!r||!n||!i){return[2,[]]}u=this,c=u.pointsData,d=u.label,p=u.yKey,f=u.xKey,h=u.id;v=n.scale;g=i.scale;y=(v.bandwidth||0)/2;m=(g.bandwidth||0)/2;_=new Array(r.length);S=a?s:0;b=true;C=undefined;x=undefined;w=0;for(O=0;O<c.length;O++){T=x||c[O];if(T.yDatum===undefined){C=undefined;b=true}else{E=T.xDatum,P=T.yDatum,A=T.datum;R=v.convert(E)+y;if(isNaN(R)){C=undefined;b=true;continue}D=(v.bandwidth||s*.5+(l||0))+1;x=((e=c[O+1])===null||e===void 0?void 0:e.yDatum)===undefined?undefined:c[O+1];M=n.inRangeEx(R,0,D);N=x&&n.inRangeEx(v.convert(x.xDatum)+y,0,D);if(M===-1&&N===-1){b=true;continue}if(M===1&&C===1){b=true;continue}C=M;I=g.convert(P)+m;L=void 0;if(d.formatter){L=d.formatter({value:P,seriesId:h})}else{L=typeof P==="number"&&isFinite(P)?P.toFixed(2):P?String(P):""}_[w++]={series:this,datum:A,yKey:p,xKey:f,point:{x:R,y:I,moveTo:b,size:S},nodeMidPoint:{x:R,y:I},label:L?{text:L,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontSize:d.fontSize,fontFamily:d.fontFamily,textAlign:"center",textBaseline:"bottom",fill:d.color}:undefined};b=false}}_.length=w;return[2,[{itemId:p,nodeData:_,labelData:_}]]}))}))};t.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()};t.prototype.updatePaths=function(e){return __awaiter$4(this,void 0,void 0,(function(){var t,r,n,i,o,a,s;var l,u;return __generator$4(this,(function(c){t=e.contextData.nodeData,r=__read$u(e.paths,1),n=r[0];i=n.path;n.fill=undefined;n.lineJoin="round";n.pointerEvents=PointerEvents.None;i.clear({trackChanges:true});try{for(o=__values$d(t),a=o.next();!a.done;a=o.next()){s=a.value;if(s.point.moveTo){i.moveTo(s.point.x,s.point.y)}else{i.lineTo(s.point.x,s.point.y)}}}catch(e){l={error:e}}finally{try{if(a&&!a.done&&(u=o.return))u.call(o)}finally{if(l)throw l.error}}n.checkPathDirty();return[2]}))}))};t.prototype.updatePathNodes=function(e){return __awaiter$4(this,void 0,void 0,(function(){var t,r;return __generator$4(this,(function(n){t=__read$u(e.paths,1),r=t[0];r.stroke=this.stroke;r.strokeWidth=this.getStrokeWidth(this.strokeWidth);r.strokeOpacity=this.strokeOpacity;r.lineDash=this.lineDash;r.lineDashOffset=this.lineDashOffset;return[2]}))}))};t.prototype.markerFactory=function(){var e=this.marker.shape;var t=getMarker$1(e);return new t};t.prototype.updateMarkerSelection=function(e){return __awaiter$4(this,void 0,void 0,(function(){var t,r,n,i,o;return __generator$4(this,(function(a){t=e.nodeData;r=e.markerSelection;n=this.marker,i=n.shape,o=n.enabled;t=i&&o?t:[];if(this.marker.isDirty()){r.clear()}return[2,r.update(t)]}))}))};t.prototype.updateMarkerNodes=function(e){return __awaiter$4(this,void 0,void 0,(function(){var t,r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m,_,S;return __generator$4(this,(function(b){t=e.markerSelection,r=e.isHighlight;n=this,i=n.marker,o=n.marker.fillOpacity,a=n.xKey,s=n.yKey,l=n.stroke,u=n.strokeOpacity,c=n.highlightStyle.item,d=c.fill,p=c.fillOpacity,f=p===void 0?o:p,h=c.stroke,v=c.strokeWidth,g=n.id;y=i.size,m=i.formatter;_=i.strokeWidth!==undefined?i.strokeWidth:this.strokeWidth;S=typeof i.shape==="function";t.each((function(e,t){var n,c;var p=r&&d!==undefined?d:i.fill;var b=r?f:o;var C=r&&h!==undefined?h:i.stroke||l;var x=r&&v!==undefined?v:_;var w=undefined;if(m){w=m({datum:t.datum,xKey:a,yKey:s,fill:p,stroke:C,strokeWidth:x,size:y,highlighted:r,seriesId:g})}e.fill=w&&w.fill||p;e.stroke=w&&w.stroke||C;e.strokeWidth=w&&w.strokeWidth!==undefined?w.strokeWidth:x;e.fillOpacity=b!==null&&b!==void 0?b:1;e.strokeOpacity=(c=(n=i.strokeOpacity)!==null&&n!==void 0?n:u)!==null&&c!==void 0?c:1;e.size=w&&w.size!==undefined?w.size:y;e.translationX=t.point.x;e.translationY=t.point.y;e.visible=e.size>0&&!isNaN(t.point.x)&&!isNaN(t.point.y);if(!S||e.dirtyPath){return}e.path.clear({trackChanges:true});e.updatePath();e.checkPathDirty()}));if(!r){this.marker.markClean()}return[2]}))}))};t.prototype.updateLabelSelection=function(e){return __awaiter$4(this,void 0,void 0,(function(){var t,r,n,i,o;return __generator$4(this,(function(a){t=e.labelData;r=e.labelSelection;n=this.marker,i=n.shape,o=n.enabled;t=i&&o?t:[];return[2,r.update(t)]}))}))};t.prototype.updateLabelNodes=function(e){return __awaiter$4(this,void 0,void 0,(function(){var t,r,n,i,o,a,s,l;return __generator$4(this,(function(u){t=e.labelSelection;r=this.label,n=r.enabled,i=r.fontStyle,o=r.fontWeight,a=r.fontSize,s=r.fontFamily,l=r.color;t.each((function(e,t){var r=t.point,u=t.label;if(t&&u&&n){e.fontStyle=i;e.fontWeight=o;e.fontSize=a;e.fontFamily=s;e.textAlign=u.textAlign;e.textBaseline=u.textBaseline;e.text=u.text;e.x=r.x;e.y=r.y-10;e.fill=l;e.visible=true}else{e.visible=false}}));return[2]}))}))};t.prototype.getNodeClickEvent=function(e,t){return new CartesianSeriesNodeClickEvent(this.xKey,this.yKey,e,t,this)};t.prototype.getNodeDoubleClickEvent=function(e,t){return new CartesianSeriesNodeDoubleClickEvent(this.xKey,this.yKey,e,t,this)};t.prototype.getTooltipHtml=function(e){var t=this,r=t.xKey,n=t.yKey,i=t.xAxis,o=t.yAxis;if(!r||!n||!i||!o){return""}var a=this,s=a.xName,l=a.yName,u=a.tooltip,c=a.marker,d=a.id;var p=u.renderer,f=u.format;var h=e.datum;var v=h[r];var g=h[n];var y=i.formatDatum(v);var m=o.formatDatum(g);var _=sanitizeHtml(this.title||l);var S=sanitizeHtml(y+": "+m);var b=c.formatter,C=c.fill,x=c.stroke,w=c.strokeWidth,O=c.size;var T=w!==undefined?w:this.strokeWidth;var E=undefined;if(b){E=b({datum:h,xKey:r,yKey:n,fill:C,stroke:x,strokeWidth:T,size:O,highlighted:false,seriesId:d})}var P=E&&E.fill||C;var A={title:_,backgroundColor:P,content:S};if(f||p){var R={datum:h,xKey:r,xValue:v,xName:s,yKey:n,yValue:g,yName:l,title:_,color:P,seriesId:d};if(f){return toTooltipHtml$1({content:interpolate(f,R)},A)}if(p){return toTooltipHtml$1(p(R),A)}}return toTooltipHtml$1(A)};t.prototype.getLegendData=function(){var e,t,r;var n=this,i=n.id,o=n.data,a=n.xKey,s=n.yKey,l=n.yName,u=n.visible,c=n.title,d=n.marker,p=n.stroke,f=n.strokeOpacity;if(!(o&&o.length&&a&&s)){return[]}return[{id:i,itemId:s,seriesId:i,enabled:u,label:{text:c||l||s},marker:{shape:d.shape,fill:d.fill||"rgba(0, 0, 0, 0)",stroke:d.stroke||p||"rgba(0, 0, 0, 0)",fillOpacity:(e=d.fillOpacity)!==null&&e!==void 0?e:1,strokeOpacity:(r=(t=d.strokeOpacity)!==null&&t!==void 0?t:f)!==null&&r!==void 0?r:1}}]};t.prototype.isLabelEnabled=function(){return this.label.enabled};t.className="LineSeries";t.type="line";__decorate$1o([Validate(OPT_STRING)],t.prototype,"title",void 0);__decorate$1o([Validate(OPT_COLOR_STRING)],t.prototype,"stroke",void 0);__decorate$1o([Validate(OPT_LINE_DASH)],t.prototype,"lineDash",void 0);__decorate$1o([Validate(NUMBER(0))],t.prototype,"lineDashOffset",void 0);__decorate$1o([Validate(NUMBER(0))],t.prototype,"strokeWidth",void 0);__decorate$1o([Validate(NUMBER(0,1))],t.prototype,"strokeOpacity",void 0);__decorate$1o([Validate(STRING)],t.prototype,"_xKey",void 0);__decorate$1o([Validate(STRING)],t.prototype,"xName",void 0);__decorate$1o([Validate(STRING)],t.prototype,"_yKey",void 0);__decorate$1o([Validate(STRING)],t.prototype,"yName",void 0);return t}(CartesianSeries);var __extends$20=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$w=function(){__assign$w=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$w.apply(this,arguments)};var __decorate$1n=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __awaiter$3=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$3=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __read$t=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$g=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$t(arguments[t]));return e};var __values$c=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var ScatterSeriesNodeBaseClickEvent=function(e){__extends$20(t,e);function t(t,r,n,i,o,a){var s=e.call(this,r,n,i,o,a)||this;s.sizeKey=t;return s}return t}(CartesianSeriesNodeBaseClickEvent);var ScatterSeriesNodeClickEvent=function(e){__extends$20(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.type="nodeClick";return t}return t}(ScatterSeriesNodeBaseClickEvent);var ScatterSeriesNodeDoubleClickEvent=function(e){__extends$20(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.type="nodeDoubleClick";return t}return t}(ScatterSeriesNodeBaseClickEvent);var ScatterSeriesTooltip=function(e){__extends$20(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.renderer=undefined;return t}__decorate$1n([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0);return t}(SeriesTooltip);var ScatterSeries=function(e){__extends$20(t,e);function t(){var t=e.call(this,{pickModes:[SeriesNodePickMode.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,SeriesNodePickMode.NEAREST_NODE,SeriesNodePickMode.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:true})||this;t.sizeScale=new LinearScale$1;t.marker=new CartesianSeriesMarker;t.label=new Label$1;t.title=undefined;t.labelKey=undefined;t.xName="";t.yName="";t.sizeName="Size";t.labelName="Label";t._xKey="";t._yKey="";t._sizeKey=undefined;t.tooltip=new ScatterSeriesTooltip;var r=t.label;r.enabled=false;return t}Object.defineProperty(t.prototype,"xKey",{get:function(){return this._xKey},set:function(e){this._xKey=e;this.processedData=undefined},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"yKey",{get:function(){return this._yKey},set:function(e){this._yKey=e;this.processedData=undefined},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"sizeKey",{get:function(){return this._sizeKey},set:function(e){this._sizeKey=e;this.processedData=undefined},enumerable:false,configurable:true});t.prototype.processData=function(){var e,t,r,n;return __awaiter$3(this,void 0,void 0,(function(){var i,o,a,s,l,u,c,d,p,f,h,v;return __generator$3(this,(function(g){i=this,o=i.xKey,a=i.yKey,s=i.sizeKey,l=i.xAxis,u=i.yAxis,c=i.marker,d=i.data;p=(l===null||l===void 0?void 0:l.scale)instanceof ContinuousScale;f=(u===null||u===void 0?void 0:u.scale)instanceof ContinuousScale;this.dataModel=new DataModel({props:__spread$g([valueProperty(o,p),valueProperty(a,f)],s?[valueProperty(s,true)]:[]),dataVisible:this.visible});this.processedData=this.dataModel.processData(d!==null&&d!==void 0?d:[]);if(s){h=(t=(e=this.dataModel.resolveProcessedDataIndex(s))===null||e===void 0?void 0:e.index)!==null&&t!==void 0?t:-1;v=(n=(r=this.processedData)===null||r===void 0?void 0:r.domain.values[h])!==null&&n!==void 0?n:[];this.sizeScale.domain=c.domain?c.domain:v}return[2]}))}))};t.prototype.getDomain=function(e){var t,r,n,i,o,a;var s=(t=this.dataModel)===null||t===void 0?void 0:t.resolveProcessedDataIndex(this.xKey);var l=(r=this.dataModel)===null||r===void 0?void 0:r.resolveProcessedDataIndex(this.yKey);if(!s||!l){return[]}if(e===ChartAxisDirection.X){return(i=(n=this.processedData)===null||n===void 0?void 0:n.domain.values[0])!==null&&i!==void 0?i:[]}else{return(a=(o=this.processedData)===null||o===void 0?void 0:o.domain.values[1])!==null&&a!==void 0?a:[]}};t.prototype.getNodeClickEvent=function(e,t){return new ScatterSeriesNodeClickEvent(this.sizeKey,this.xKey,this.yKey,e,t,this)};t.prototype.getNodeDoubleClickEvent=function(e,t){return new ScatterSeriesNodeDoubleClickEvent(this.sizeKey,this.xKey,this.yKey,e,t,this)};t.prototype.createNodeData=function(){var e,t,r,n,i,o;return __awaiter$3(this,void 0,void 0,(function(){var a,s,l,u,c,d,p,f,h,v,g,y,m,_,S,b,C,x,w,O,T,E,P,A,R,D,M,N,I,L;var k,F;return __generator$3(this,(function($){a=this,s=a.visible,l=a.xAxis,u=a.yAxis,c=a.yKey,d=a.xKey,p=a.label,f=a.labelKey;h=(e=this.dataModel)===null||e===void 0?void 0:e.resolveProcessedDataIndex(d);v=(t=this.dataModel)===null||t===void 0?void 0:t.resolveProcessedDataIndex(c);if(!(h&&v&&s&&l&&u)){return[2,[]]}g=l.scale;y=u.scale;m=(g.bandwidth||0)/2;_=(y.bandwidth||0)/2;S=this,b=S.sizeScale,C=S.marker;x=new Array((n=(r=this.processedData)===null||r===void 0?void 0:r.data.length)!==null&&n!==void 0?n:0);b.range=[C.size,C.maxSize];w=p.getFont();O=0;try{for(T=__values$c((o=(i=this.processedData)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:[]),E=T.next();!E.done;E=T.next()){P=E.value,A=P.values,R=P.datum;D=g.convert(A[h.index])+m;M=y.convert(A[v.index])+_;if(!this.checkRangeXY(D,M,l,u)){continue}N=f?String(R[f]):"";I=HdpiCanvas.getTextSize(N,w);L=A.length>2?b.convert(A[2]):C.size;x[O++]={series:this,itemId:c,yKey:c,xKey:d,datum:R,point:{x:D,y:M,size:L},nodeMidPoint:{x:D,y:M},label:__assign$w({text:N},I)}}}catch(e){k={error:e}}finally{try{if(E&&!E.done&&(F=T.return))F.call(T)}finally{if(k)throw k.error}}x.length=O;return[2,[{itemId:this.yKey,nodeData:x,labelData:x}]]}))}))};t.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()};t.prototype.getLabelData=function(){var e;return(e=this.contextNodeData)===null||e===void 0?void 0:e.reduce((function(e,t){return e.concat(t.labelData)}),[])};t.prototype.markerFactory=function(){var e=this.marker.shape;var t=getMarker$1(e);return new t};t.prototype.updateMarkerSelection=function(e){return __awaiter$3(this,void 0,void 0,(function(){var t,r,n,i;return __generator$3(this,(function(o){t=e.nodeData,r=e.markerSelection;n=this.marker.enabled;if(this.marker.isDirty()){r.clear()}i=n?t:[];return[2,r.update(i)]}))}))};t.prototype.updateMarkerNodes=function(e){return __awaiter$3(this,void 0,void 0,(function(){var t,r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m,_,S;return __generator$3(this,(function(b){t=e.markerSelection,r=e.isHighlight;n=this,i=n.marker,o=n.xKey,a=n.yKey,s=n.sizeScale,l=n.marker,u=l.fillOpacity,c=l.strokeOpacity,d=l.strokeWidth,p=n.highlightStyle.item,f=p.fill,h=p.fillOpacity,v=h===void 0?u:h,g=p.stroke,y=p.strokeWidth,m=n.id;_=i.formatter;s.range=[i.size,i.maxSize];S=typeof i.shape==="function";t.each((function(e,t){var n,s,l,p,h,b,C;var x=r&&f!==undefined?f:i.fill;var w=r?v:u;var O=r&&g!==undefined?g:i.stroke;var T=c;var E=r&&y!==undefined?y:d!==null&&d!==void 0?d:1;var P=(s=(n=t.point)===null||n===void 0?void 0:n.size)!==null&&s!==void 0?s:0;var A=undefined;if(_){A=_({datum:t.datum,xKey:o,yKey:a,fill:x,stroke:O,strokeWidth:E,size:P,highlighted:r,seriesId:m})}e.fill=A&&A.fill||x;e.stroke=A&&A.stroke||O;e.strokeWidth=(l=A===null||A===void 0?void 0:A.strokeWidth)!==null&&l!==void 0?l:E;e.size=A&&A.size!==undefined?A.size:P;e.fillOpacity=w!==null&&w!==void 0?w:1;e.strokeOpacity=T!==null&&T!==void 0?T:1;e.translationX=(h=(p=t.point)===null||p===void 0?void 0:p.x)!==null&&h!==void 0?h:0;e.translationY=(C=(b=t.point)===null||b===void 0?void 0:b.y)!==null&&C!==void 0?C:0;e.visible=e.size>0;if(!S||e.dirtyPath){return}e.path.clear({trackChanges:true});e.updatePath();e.checkPathDirty()}));if(!r){this.marker.markClean()}return[2]}))}))};t.prototype.updateLabelSelection=function(e){var t,r;return __awaiter$3(this,void 0,void 0,(function(){var n,i,o,a;return __generator$3(this,(function(s){n=e.labelSelection;i=this.label.enabled;o=i?(r=(t=this.chart)===null||t===void 0?void 0:t.placeLabels().get(this))!==null&&r!==void 0?r:[]:[];a=o.map((function(e){return __assign$w(__assign$w({},e.datum),{point:{x:e.x,y:e.y,size:e.datum.point.size}})}));return[2,n.update(a)]}))}))};t.prototype.updateLabelNodes=function(e){return __awaiter$3(this,void 0,void 0,(function(){var t,r;return __generator$3(this,(function(n){t=e.labelSelection;r=this.label;t.each((function(e,t){var n,i,o,a;e.text=t.label.text;e.fill=r.color;e.x=(i=(n=t.point)===null||n===void 0?void 0:n.x)!==null&&i!==void 0?i:0;e.y=(a=(o=t.point)===null||o===void 0?void 0:o.y)!==null&&a!==void 0?a:0;e.fontStyle=r.fontStyle;e.fontWeight=r.fontWeight;e.fontSize=r.fontSize;e.fontFamily=r.fontFamily;e.textAlign="left";e.textBaseline="top"}));return[2]}))}))};t.prototype.getTooltipHtml=function(e){var t,r,n;var i=this,o=i.xKey,a=i.yKey,s=i.xAxis,l=i.yAxis;if(!o||!a||!s||!l){return""}var u=this,c=u.marker,d=u.tooltip,p=u.xName,f=u.yName,h=u.sizeKey,v=u.sizeName,g=u.labelKey,y=u.labelName,m=u.id;var _=c.fill,S=c.stroke;var b=this.getStrokeWidth((t=c.strokeWidth)!==null&&t!==void 0?t:1);var C=this.marker.formatter;var x=undefined;if(C){x=C({datum:e,xKey:o,yKey:a,fill:_,stroke:S,strokeWidth:b,size:(n=(r=e.point)===null||r===void 0?void 0:r.size)!==null&&n!==void 0?n:0,highlighted:false,seriesId:m})}var w=x&&x.fill||_||"gray";var O=this.title||f;var T=e.datum;var E=T[o];var P=T[a];var A=sanitizeHtml(s.formatDatum(E));var R=sanitizeHtml(l.formatDatum(P));var D="<b>"+sanitizeHtml(p||o)+"</b>: "+A+"<br>"+("<b>"+sanitizeHtml(f||a)+"</b>: "+R);if(h){D+="<br><b>"+sanitizeHtml(v||h)+"</b>: "+sanitizeHtml(T[h])}if(g){D="<b>"+sanitizeHtml(y||g)+"</b>: "+sanitizeHtml(T[g])+"<br>"+D}var M={title:O,backgroundColor:w,content:D};var N=d.renderer;if(N){return toTooltipHtml$1(N({datum:T,xKey:o,xValue:E,xName:p,yKey:a,yValue:P,yName:f,sizeKey:h,sizeName:v,labelKey:g,labelName:y,title:O,color:w,seriesId:m}),M)}return toTooltipHtml$1(M)};t.prototype.getLegendData=function(){var e=this,t=e.id,r=e.data,n=e.xKey,i=e.yKey,o=e.yName,a=e.title,s=e.visible,l=e.marker;var u=l.fill,c=l.stroke,d=l.fillOpacity,p=l.strokeOpacity;if(!(r&&r.length&&n&&i)){return[]}return[{id:t,itemId:i,seriesId:t,enabled:s,label:{text:a||o||i},marker:{shape:l.shape,fill:l.fill||u||"rgba(0, 0, 0, 0)",stroke:l.stroke||c||"rgba(0, 0, 0, 0)",fillOpacity:d!==null&&d!==void 0?d:1,strokeOpacity:p!==null&&p!==void 0?p:1}}]};t.prototype.isLabelEnabled=function(){return this.label.enabled};t.className="ScatterSeries";t.type="scatter";__decorate$1n([Validate(OPT_STRING)],t.prototype,"title",void 0);__decorate$1n([Validate(OPT_STRING)],t.prototype,"labelKey",void 0);__decorate$1n([Validate(STRING)],t.prototype,"xName",void 0);__decorate$1n([Validate(STRING)],t.prototype,"yName",void 0);__decorate$1n([Validate(OPT_STRING)],t.prototype,"sizeName",void 0);__decorate$1n([Validate(OPT_STRING)],t.prototype,"labelName",void 0);__decorate$1n([Validate(STRING)],t.prototype,"_xKey",void 0);__decorate$1n([Validate(STRING)],t.prototype,"_yKey",void 0);__decorate$1n([Validate(OPT_STRING)],t.prototype,"_sizeKey",void 0);return t}(CartesianSeries);function isPointInSector(e,t,r){var n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));var i=r.innerRadius,o=r.outerRadius;if(n<Math.min(i,o)||n>Math.max(i,o)){return false}var a=Math.atan2(t,e);if(a<-Math.PI/2){a+=2*Math.PI}var s=r.startAngle,l=r.endAngle;if(l===-Math.PI/2){return a<s}if(s===3*Math.PI/2){return a>l}return a>=l&&a<=s}function lineCollidesSector(e,t){var r=t.startAngle,n=t.endAngle,i=t.innerRadius,o=t.outerRadius;var a={x:o*Math.cos(r),y:o*Math.sin(r)};var s={x:o*Math.cos(n),y:o*Math.sin(n)};var l=i===0?{x:0,y:0}:{x:i*Math.cos(r),y:i*Math.sin(r)};var u=i===0?{x:0,y:0}:{x:i*Math.cos(n),y:i*Math.sin(n)};return segmentIntersection(e.start.x,e.start.y,e.end.x,e.end.y,a.x,a.y,l.x,l.y)!=null||segmentIntersection(e.start.x,e.start.y,e.end.x,e.end.y,s.x,s.y,u.x,u.y)!=null||arcIntersections(0,0,o,r,n,true,e.start.x,e.start.y,e.end.x,e.end.y).length>0}function boxCollidesSector(e,t){var r={x:e.x,y:e.y};var n={x:e.x+e.width,y:e.y};var i={x:e.x,y:e.y+e.height};var o={x:e.x+e.width,y:e.y+e.height};return lineCollidesSector({start:r,end:n},t)||lineCollidesSector({start:i,end:o},t)}var __extends$1$=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1m=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Sector=function(e){__extends$1$(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.centerX=0;t.centerY=0;t.innerRadius=10;t.outerRadius=20;t.startAngle=0;t.endAngle=Math.PI*2;t.angleOffset=0;return t}t.prototype.computeBBox=function(){var e=this.outerRadius;return new BBox(this.centerX-e,this.centerY-e,e*2,e*2)};t.prototype.updatePath=function(){var e=this.path;var t=this.angleOffset;var r=Math.min(this.startAngle,this.endAngle)+t;var n=Math.max(this.startAngle,this.endAngle)+t;var i=Math.min(this.innerRadius,this.outerRadius);var o=Math.max(this.innerRadius,this.outerRadius);var a=isEqual$2(normalizeAngle360(this.startAngle),normalizeAngle360(this.endAngle));var s=this.centerX;var l=this.centerY;e.clear();if(a){e.arc(s,l,o,r,n);if(i>0){e.moveTo(s+i*Math.cos(n),l+i*Math.sin(n));e.arc(s,l,i,n,r,true)}}else{e.moveTo(s+i*Math.cos(r),l+i*Math.sin(r));e.arc(s,l,o,r,n);if(i>0){e.arc(s,l,i,n,r,true)}else{e.lineTo(s,l)}}e.closePath();this.dirtyPath=false};t.prototype.isPointInPath=function(e,t){var r=this.angleOffset;var n=this.startAngle+r;var i=this.endAngle+r;var o=Math.min(this.innerRadius,this.outerRadius);var a=Math.max(this.innerRadius,this.outerRadius);var s=this.transformPoint(e,t);return isPointInSector(s.x,s.y,{startAngle:n,endAngle:i,innerRadius:o,outerRadius:a})};t.className="Sector";__decorate$1m([ScenePathChangeDetection()],t.prototype,"centerX",void 0);__decorate$1m([ScenePathChangeDetection()],t.prototype,"centerY",void 0);__decorate$1m([ScenePathChangeDetection()],t.prototype,"innerRadius",void 0);__decorate$1m([ScenePathChangeDetection()],t.prototype,"outerRadius",void 0);__decorate$1m([ScenePathChangeDetection()],t.prototype,"startAngle",void 0);__decorate$1m([ScenePathChangeDetection()],t.prototype,"endAngle",void 0);__decorate$1m([ScenePathChangeDetection()],t.prototype,"angleOffset",void 0);return t}(Path);var __extends$1_=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$v=function(){__assign$v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$v.apply(this,arguments)};var __decorate$1l=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __awaiter$2=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$2=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __read$s=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$s(arguments[t]));return e};var PieSeriesNodeBaseClickEvent=function(e){__extends$1_(t,e);function t(t,r,n,i,o,a,s){var l=e.call(this,o,a,s)||this;l.angleKey=t;l.calloutLabelKey=r;l.sectorLabelKey=n;l.radiusKey=i;return l}__decorate$1l([DeprecatedAndRenamedTo("calloutLabelKey")],t.prototype,"labelKey",void 0);return t}(SeriesNodeBaseClickEvent);var PieSeriesNodeClickEvent=function(e){__extends$1_(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.type="nodeClick";return t}return t}(PieSeriesNodeBaseClickEvent);var PieSeriesNodeDoubleClickEvent=function(e){__extends$1_(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.type="nodeDoubleClick";return t}return t}(PieSeriesNodeBaseClickEvent);var PieNodeTag;(function(e){e[e["Sector"]=0]="Sector";e[e["Callout"]=1]="Callout";e[e["Label"]=2]="Label"})(PieNodeTag||(PieNodeTag={}));var PieSeriesCalloutLabel=function(e){__extends$1_(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.offset=3;t.minAngle=0;t.formatter=undefined;t.minSpacing=4;t.maxCollisionOffset=50;return t}__decorate$1l([Validate(NUMBER(0))],t.prototype,"offset",void 0);__decorate$1l([Validate(NUMBER(0))],t.prototype,"minAngle",void 0);__decorate$1l([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0);__decorate$1l([Validate(NUMBER(0))],t.prototype,"minSpacing",void 0);__decorate$1l([Validate(NUMBER(0))],t.prototype,"maxCollisionOffset",void 0);return t}(Label$1);var PieSeriesSectorLabel=function(e){__extends$1_(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.positionOffset=0;t.positionRatio=.5;t.formatter=undefined;return t}__decorate$1l([Validate(NUMBER())],t.prototype,"positionOffset",void 0);__decorate$1l([Validate(NUMBER(0,1))],t.prototype,"positionRatio",void 0);__decorate$1l([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0);return t}(Label$1);var PieSeriesCalloutLine=function(){function e(){this.colors=undefined;this.length=10;this.strokeWidth=1}__decorate$1l([Validate(OPT_COLOR_STRING_ARRAY)],e.prototype,"colors",void 0);__decorate$1l([Validate(NUMBER(0))],e.prototype,"length",void 0);__decorate$1l([Validate(NUMBER(0))],e.prototype,"strokeWidth",void 0);return e}();var PieSeriesTooltip=function(e){__extends$1_(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.renderer=undefined;return t}__decorate$1l([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0);return t}(SeriesTooltip);var PieTitle=function(e){__extends$1_(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.showInLegend=false;return t}__decorate$1l([Validate(BOOLEAN)],t.prototype,"showInLegend",void 0);return t}(Caption);var DoughnutInnerLabel=function(e){__extends$1_(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.text="";t.margin=2;return t}__decorate$1l([Validate(STRING)],t.prototype,"text",void 0);__decorate$1l([Validate(NUMBER())],t.prototype,"margin",void 0);return t}(Label$1);var DoughnutInnerCircle=function(){function e(){this.fill="transparent";this.fillOpacity=1}__decorate$1l([Validate(COLOR_STRING)],e.prototype,"fill",void 0);__decorate$1l([Validate(OPT_NUMBER(0,1))],e.prototype,"fillOpacity",void 0);return e}();var PieSeries=function(e){__extends$1_(t,e);function t(){var t=e.call(this,{useLabelLayer:true})||this;t.radiusScale=new LinearScale$1;t.groupSelection=Selection.select(t.contentGroup,Group);t.highlightSelection=Selection.select(t.highlightGroup,Group);t.groupSelectionData=[];t.sectorFormatData=[];t.angleScale=function(){var e=new LinearScale$1;e.domain=[0,1];e.range=[-Math.PI,Math.PI].map((function(e){return e+Math.PI/2}));return e}();t.seriesItemEnabled=[];t.calloutLabel=new PieSeriesCalloutLabel;t.label=t.calloutLabel;t.sectorLabel=new PieSeriesSectorLabel;t.calloutLine=new PieSeriesCalloutLine;t.callout=t.calloutLine;t.tooltip=new PieSeriesTooltip;t.angleKey="";t.angleName="";t.innerLabels=[];t.radiusKey=undefined;t.radiusName=undefined;t.radiusMin=undefined;t.radiusMax=undefined;t.calloutLabelKey=undefined;t.calloutLabelName=undefined;t.labelKey=undefined;t.labelName=undefined;t.sectorLabelKey=undefined;t.sectorLabelName=undefined;t.legendItemKey=undefined;t.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"];t.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"];t.fillOpacity=1;t.strokeOpacity=1;t.lineDash=[0];t.lineDashOffset=0;t.formatter=undefined;t.rotation=0;t.outerRadiusOffset=0;t.outerRadiusRatio=1;t.innerRadiusOffset=0;t.innerRadiusRatio=1;t.strokeWidth=1;t.shadow=undefined;t.highlightStyle=new HighlightStyle;t.datumSectorRefs=new WeakMap;t.backgroundGroup=t.rootGroup.appendChild(new Group({name:t.id+"-background",layer:true,zIndex:Layers.SERIES_BACKGROUND_ZINDEX}));var r=new Group({name:"pieCalloutLabels"});var n=new Group({name:"pieSectorLabels"});var i=new Group({name:"innerLabels"});t.labelGroup.append(r);t.labelGroup.append(n);t.labelGroup.append(i);t.calloutLabelSelection=Selection.select(r,Group);t.sectorLabelSelection=Selection.select(n,Text);t.innerLabelsSelection=Selection.select(i,Text);return t}Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(e){var t,r;var n=this._title;if(n!==e){if(n){(t=this.labelGroup)===null||t===void 0?void 0:t.removeChild(n.node)}if(e){e.node.textBaseline="bottom";(r=this.labelGroup)===null||r===void 0?void 0:r.appendChild(e.node)}this._title=e}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e;this.processSeriesItemEnabled()},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"innerCircle",{get:function(){return this._innerCircleConfig},set:function(e){var t;var r=this._innerCircleConfig;if(r!==e){var n=this._innerCircleNode;var i=void 0;if(n){this.backgroundGroup.removeChild(n)}if(e){i=new Circle;i.fill=e.fill;i.fillOpacity=(t=e.fillOpacity)!==null&&t!==void 0?t:1;this.backgroundGroup.appendChild(i)}this._innerCircleConfig=e;this._innerCircleNode=i}},enumerable:false,configurable:true});t.prototype.visibleChanged=function(){this.processSeriesItemEnabled()};t.prototype.processSeriesItemEnabled=function(){var e=this,t=e.data,r=e.visible;this.seriesItemEnabled=(t===null||t===void 0?void 0:t.map((function(){return r})))||[]};t.prototype.getDomain=function(e){if(e===ChartAxisDirection.X){return this.angleScale.domain}else{return this.radiusScale.domain}};t.prototype.processData=function(){return __awaiter$2(this,void 0,void 0,(function(){var e,t,r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m,_,S,b,C,x,w,O,T,E,P,A,R,D,M,N,I;var L=this;return __generator$2(this,(function(k){e=this,t=e.angleKey,r=e.radiusKey,n=e.seriesItemEnabled,i=e.angleScale,o=e.groupSelectionData,a=e.sectorFormatData,s=e.calloutLabel,l=e.sectorLabel,u=e.id;c=t&&this.data?this.data:[];d=c.map((function(e,r){return n[r]&&Math.abs(+e[t])||0}));p=d.reduce((function(e,t){return e+t}),0);f=function(){var e=0;return d.map((function(t){return e+=t/p}))}();h=s.formatter;v=s.enabled?this.calloutLabelKey:undefined;g=l.enabled?this.sectorLabelKey:undefined;y=[];m=[];_=[];S=function(e){return{datum:e,angleKey:t,angleValue:e[t],angleName:L.angleName,radiusKey:r,radiusValue:r?e[r]:undefined,radiusName:L.radiusName,labelKey:v,labelValue:v?e[v]:undefined,labelName:L.calloutLabelName,calloutLabelKey:v,calloutLabelValue:v?e[v]:undefined,calloutLabelName:L.calloutLabelName,sectorLabelKey:g,sectorLabelValue:g?e[g]:undefined,sectorLabelName:L.sectorLabelName,seriesId:u}};if(v){if(h){b=function(){return Logger.warnOnce("the use of { value } in the pie chart label formatter function is deprecated. Please use { datum, labelKey, ... } instead.")};y=c.map((function(e){var t=e[v];var r=__assign$v(__assign$v({},S(e)),{get value(){b();return t},set value(e){b();t=e}});return h(r)}))}else{y=c.map((function(e){return String(e[v])}))}}C=l.formatter;if(g){if(C){m=c.map((function(e){var t=S(e);return C(t)}))}else{m=c.map((function(e){return String(e[g])}))}}if(r){x=this,w=x.radiusMin,O=x.radiusMax;T=c.map((function(e){return Math.abs(e[r])}));E=w!==null&&w!==void 0?w:0;P=O?O:Math.max.apply(Math,__spread$f(T));A=P-E;_=T.map((function(e){return A?(e-E)/A:1}))}o.length=0;a.length=0;a.push.apply(a,__spread$f(c.map((function(e,t){return L.getSectorFormat(e,t,t,false)}))));R=toRadians$1(this.rotation);D=Math.PI/2;M=0;N=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}];I=0;f.forEach((function(e){if(isNaN(e)){return}var t=r?_[M]:1;var n=i.convert(e)+R;var l=i.convert(I)+R;var u=(n+l)/2;var d=Math.abs(l-n);var p=Math.cos(u);var f=Math.sin(u);var h=toRadians$1(s.minAngle);var S=v&&d>h;var b=normalizeAngle180(u);var C=-3*Math.PI/4;var x=b-C;var w=Math.floor(x/D);var O=mod(w,N.length);var T=N[O],E=T.textAlign,P=T.textBaseline;var A=c[M];var k=M;o.push({series:L,datum:A,itemId:k,index:M,radius:t,startAngle:n,endAngle:l,midAngle:u,midCos:p,midSin:f,calloutLabel:S?{text:y[M],textAlign:E,textBaseline:P,hidden:false,collisionTextAlign:undefined,collisionOffsetY:0,box:undefined}:undefined,sectorLabel:g?{text:m[M]}:undefined,sectorFormat:a[M]});M++;I=e}));return[2]}))}))};t.prototype.getSectorFormat=function(e,t,r,n){var i,o,a,s,l;var u=this,c=u.angleKey,d=u.radiusKey,p=u.fills,f=u.strokes,h=u.fillOpacity,v=u.formatter,g=u.id;var y=(i=this.highlightManager)===null||i===void 0?void 0:i.getActiveHighlight();var m=n&&(y===null||y===void 0?void 0:y.series)===this&&t===y.itemId;var _=m?this.highlightStyle.item:null;var S=(_===null||_===void 0?void 0:_.fill)||p[r%p.length];var b=(o=_===null||_===void 0?void 0:_.fillOpacity)!==null&&o!==void 0?o:h;var C=(_===null||_===void 0?void 0:_.stroke)||f[r%f.length];var x=(a=_===null||_===void 0?void 0:_.strokeWidth)!==null&&a!==void 0?a:this.getStrokeWidth(this.strokeWidth);var w;if(v){w=v({datum:e,angleKey:c,radiusKey:d,fill:S,stroke:C,strokeWidth:x,highlighted:m,seriesId:g})}return{fill:(w===null||w===void 0?void 0:w.fill)||S,fillOpacity:(s=w===null||w===void 0?void 0:w.fillOpacity)!==null&&s!==void 0?s:b,stroke:(w===null||w===void 0?void 0:w.stroke)||C,strokeWidth:(l=w===null||w===void 0?void 0:w.strokeWidth)!==null&&l!==void 0?l:x}};t.prototype.createNodeData=function(){return __awaiter$2(this,void 0,void 0,(function(){return __generator$2(this,(function(e){return[2,[]]}))}))};t.prototype.getInnerRadius=function(){var e=this,t=e.radius,r=e.innerRadiusRatio,n=e.innerRadiusOffset;var i=t*(r!==null&&r!==void 0?r:1)+(n?n:0);if(i===t||i<0){return 0}return i};t.prototype.getOuterRadius=function(){var e=this,t=e.radius,r=e.outerRadiusRatio,n=e.outerRadiusOffset;var i=t*(r!==null&&r!==void 0?r:1)+(n?n:0);if(i<0){return 0}return i};t.prototype.updateRadiusScale=function(){var e=this.getInnerRadius();var t=this.getOuterRadius();this.radiusScale.range=[e,t]};t.prototype.getTitleTranslationY=function(){var e,t;var r=Math.max(0,this.radiusScale.range[1]);if(r===0){return NaN}var n=(t=(e=this.title)===null||e===void 0?void 0:e.spacing)!==null&&t!==void 0?t:0;var i=2+n;var o=Math.min.apply(Math,__spread$f([0],this.groupSelectionData.map((function(e){var t,r;return((r=(t=e.calloutLabel)===null||t===void 0?void 0:t.box)===null||r===void 0?void 0:r.y)||0}))));var a=Math.max(0,-r-o);return-r-i-a};t.prototype.update=function(){return __awaiter$2(this,void 0,void 0,(function(){var e,t;return __generator$2(this,(function(r){switch(r.label){case 0:e=this.title;this.updateRadiusScale();this.rootGroup.translationX=this.centerX;this.rootGroup.translationY=this.centerY;if(e){t=this.getTitleTranslationY();if(isFinite(t)){e.node.visible=e.enabled;e.node.translationY=t}else{e.node.visible=false}}this.updateNodeMidPoint();return[4,this.updateSelections()];case 1:r.sent();return[4,this.updateNodes()];case 2:r.sent();return[2]}}))}))};t.prototype.updateNodeMidPoint=function(){var e=this;this.groupSelectionData.forEach((function(t){var r=e.radiusScale.convert(t.radius);t.nodeMidPoint={x:t.midCos*Math.max(0,r/2),y:t.midSin*Math.max(0,r/2)}}))};t.prototype.updateSelections=function(){return __awaiter$2(this,void 0,void 0,(function(){return __generator$2(this,(function(e){switch(e.label){case 0:return[4,this.updateGroupSelection()];case 1:e.sent();return[2]}}))}))};t.prototype.updateGroupSelection=function(){return __awaiter$2(this,void 0,void 0,(function(){var e,t,r,n,i,o,a;var s=this;return __generator$2(this,(function(l){e=this,t=e.groupSelection,r=e.highlightSelection,n=e.calloutLabelSelection,i=e.sectorLabelSelection,o=e.innerLabelsSelection;a=function(e){return e.update(s.groupSelectionData,(function(e){var t=new Sector;t.tag=PieNodeTag.Sector;e.appendChild(t)}))};this.groupSelection=a(t);this.highlightSelection=a(r);n.update(this.groupSelectionData,(function(e){var t=new Line;t.tag=PieNodeTag.Callout;t.pointerEvents=PointerEvents.None;e.appendChild(t);var r=new Text;r.tag=PieNodeTag.Label;r.pointerEvents=PointerEvents.None;e.appendChild(r)}));i.update(this.groupSelectionData,(function(e){e.pointerEvents=PointerEvents.None}));o.update(this.innerLabels,(function(e){e.pointerEvents=PointerEvents.None}));return[2]}))}))};t.prototype.updateNodes=function(){var e;return __awaiter$2(this,void 0,void 0,(function(){var t,r,n,i,o;var a=this;return __generator$2(this,(function(s){t=(e=this.highlightManager)===null||e===void 0?void 0:e.getActiveHighlight();r=this.seriesItemEnabled.indexOf(true)>=0;this.rootGroup.visible=r;this.backgroundGroup.visible=r;this.contentGroup.visible=r;this.highlightGroup.visible=r&&(t===null||t===void 0?void 0:t.series)===this;this.labelGroup.visible=r;this.contentGroup.opacity=this.getOpacity();this.updateInnerCircle();n=this.radiusScale;i=n.convert(0);o=function(e,t,r,o){var s=n.convert(t.radius);var l=e.parent;var u=l===null||l===void 0?void 0:l.parent;if(o&&l&&u){u.removeChild(l);u.appendChild(l)}e.innerRadius=Math.max(0,i);e.outerRadius=Math.max(0,s);e.startAngle=t.startAngle;e.endAngle=t.endAngle;var c=a.getSectorFormat(t.datum,t.itemId,r,o);e.fill=c.fill;e.stroke=c.stroke;e.strokeWidth=c.strokeWidth;e.fillOpacity=c.fillOpacity;e.strokeOpacity=a.strokeOpacity;e.lineDash=a.lineDash;e.lineDashOffset=a.lineDashOffset;e.fillShadow=a.shadow;e.lineJoin="round";e.visible=a.seriesItemEnabled[r];a.datumSectorRefs.set(t,e)};this.groupSelection.selectByTag(PieNodeTag.Sector).forEach((function(e,t){return o(e,e.datum,t,false)}));this.highlightSelection.selectByTag(PieNodeTag.Sector).forEach((function(e,r){var n=(t===null||t===void 0?void 0:t.series)===a&&e.datum.itemId===t.itemId;e.visible=n;if(e.visible){o(e,e.datum,r,n)}}));this.updateCalloutLineNodes();this.updateCalloutLabelNodes();this.updateSectorLabelNodes();this.updateInnerLabelNodes();return[2]}))}))};t.prototype.updateCalloutLineNodes=function(){var e=this,t=e.radiusScale,r=e.calloutLine;var n=r.length;var i=r.strokeWidth;var o=r.colors||this.strokes;var a=this.calloutLabel.offset;this.calloutLabelSelection.selectByTag(PieNodeTag.Callout).forEach((function(e,r){var s=e.datum;var l=t.convert(s.radius);var u=Math.max(0,l);var c=s.calloutLabel;if(c&&c.text&&!c.hidden&&u!==0){e.visible=true;e.strokeWidth=i;e.stroke=o[r%o.length];e.fill=undefined;var d=s.midCos*u;var p=s.midSin*u;var f=s.midCos*(u+n);var h=s.midSin*(u+n);if(c.collisionTextAlign||c.collisionOffsetY!==0){var v=c.box;var g=f<v.x?v.x:f>v.x+v.width?v.x+v.width:f;var y=h<v.y?v.y:h>v.y+v.height?v.y+v.height:h;var m=g-f;var _=y-h;var S=Math.sqrt(Math.pow(m,2)+Math.pow(_,2));var b=S-a;if(b>0){f=f+m*b/S;h=h+_*b/S}}e.x1=d;e.y1=p;e.x2=f;e.y2=h}else{e.visible=false}}))};t.prototype.getLabelOverflow=function(e,t){var r=this.chart.getSeriesRect();var n=r.x-this.centerX;var i=r.x+r.width-this.centerX;var o=r.y-this.centerY;var a=r.y+r.height-this.centerY;var s=1;var l=1;if(t.x+s<n){l=(t.x+t.width-n)/t.width}else if(t.x+t.width-s>i){l=(i-t.x)/t.width}var u=t.y+s<o||t.y+t.height-s>a;var c=Math.floor(e.length*l)-1;return{visibleTextPart:l,textLength:c,hasVerticalOverflow:u}};t.prototype.computeCalloutLabelCollisionOffsets=function(){var e=this;var t=this,r=t.radiusScale,n=t.calloutLabel,i=t.calloutLine;var o=n.offset,a=n.minSpacing;var s=r.convert(0);var l=function(e){var t=e.calloutLabel;var n=r.convert(e.radius);var i=Math.max(0,n);return!t||i===0};var u=this.groupSelectionData;var c=this.groupSelectionData.filter((function(e){return!l(e)}));c.forEach((function(e){var t=e.calloutLabel;t.hidden=false;t.collisionTextAlign=undefined;t.collisionOffsetY=0}));if(c.length<=1){return}var d=c.filter((function(e){return e.midCos<0})).sort((function(e,t){return e.midSin-t.midSin}));var p=c.filter((function(e){return e.midCos>=0})).sort((function(e,t){return e.midSin-t.midSin}));var f=c.filter((function(e){return e.midSin<0&&e.calloutLabel.textAlign==="center"})).sort((function(e,t){return e.midCos-t.midCos}));var h=c.filter((function(e){return e.midSin>=0&&e.calloutLabel.textAlign==="center"})).sort((function(e,t){return e.midCos-t.midCos}));var v=new Text;var g=function(t){var n=t.calloutLabel;var a=r.convert(t.radius);var s=Math.max(0,a);var l=s+i.length+o;var u=t.midCos*l;var c=t.midSin*l+n.collisionOffsetY;e.setTextDimensionalProps(v,u,c,e.calloutLabel,n);return v.computeBBox()};var y=function(e,t,r){var n=g(e).grow(a/2);var i=g(t).grow(a/2);var o=n.x<i.x+i.width&&n.x+n.width>i.x&&(r==="to-top"?n.y<i.y+i.height:n.y+n.height>i.y);if(o){var s=r==="to-top"?n.y-i.y-i.height:n.y+n.height-i.y;t.calloutLabel.collisionOffsetY=s}};var m=function(e){var t=e.slice().sort((function(e,t){return Math.abs(e.midSin)-Math.abs(t.midSin)}))[0];var r=e.indexOf(t);for(var n=r-1;n>=0;n--){var i=e[n+1];var o=e[n];y(i,o,"to-top")}for(var n=r+1;n<e.length;n++){var i=e[n-1];var o=e[n];y(i,o,"to-bottom")}};var _=function(e){var t=c.some((function(e){return e.calloutLabel.collisionOffsetY!==0}));var n=e.map((function(e){return g(e)}));var i=n.map((function(e){return e.clone().grow(a/2)}));var o=false;e:for(var l=0;l<i.length;l++){var d=i[l];for(var p=l+1;p<e.length;p++){var f=i[p];if(d.collidesBBox(f)){o=true;break e}}}var h=u.map((function(e){var t=e.startAngle,n=e.endAngle;var i=r.convert(e.radius);var o=Math.max(0,i);return{startAngle:t,endAngle:n,innerRadius:s,outerRadius:o}}));var v=n.some((function(e){return h.some((function(t){return boxCollidesSector(e,t)}))}));if(!o&&!t&&!v){return}e.filter((function(e){return e.calloutLabel.textAlign==="center"})).forEach((function(e){var t=e.calloutLabel;t.collisionTextAlign=e.midCos<0?"right":e.midCos>0?"left":"center"}))};m(d);m(p);_(f);_(h)};t.prototype.updateCalloutLabelNodes=function(){var e=this;var t=this,r=t.radiusScale,n=t.calloutLabel,i=t.calloutLine;var o=i.length;var a=n.offset,s=n.color;var l=new Text;this.calloutLabelSelection.selectByTag(PieNodeTag.Label).forEach((function(t){var n=t.datum;var i=n.calloutLabel;var u=r.convert(n.radius);var c=Math.max(0,u);if(!i||!i.text||c===0||i.hidden){t.visible=false;return}var d=c+o+a;var p=n.midCos*d;var f=n.midSin*d+i.collisionOffsetY;e.setTextDimensionalProps(l,p,f,e.calloutLabel,i);var h=l.computeBBox();var v=e.getLabelOverflow(i.text,h),g=v.visibleTextPart,y=v.textLength,m=v.hasVerticalOverflow;var _=g===1?i.text:i.text.substring(0,y)+"";e.setTextDimensionalProps(t,p,f,e.calloutLabel,__assign$v(__assign$v({},i),{text:_}));t.fill=s;t.visible=!m}))};t.prototype.computeLabelsBBox=function(e){var t=this;var r=this,n=r.radiusScale,i=r.calloutLabel,o=r.calloutLine;var a=o.length;var s=i.offset,l=i.maxCollisionOffset;this.updateRadiusScale();this.computeCalloutLabelCollisionOffsets();var u=new Text;var c=this.groupSelectionData.map((function(r){var i=r.calloutLabel;var o=n.convert(r.radius);var c=Math.max(0,o);if(!i||c===0){return null}var d=c+a+s;var p=r.midCos*d;var f=r.midSin*d+i.collisionOffsetY;t.setTextDimensionalProps(u,p,f,t.calloutLabel,i);var h=u.computeBBox();i.box=h;if(Math.abs(i.collisionOffsetY)>l){i.hidden=true;return null}if(e.hideWhenNecessary){var v=t.getLabelOverflow(i.text,h),g=v.textLength,y=v.hasVerticalOverflow;var m=i.text.length>2&&g<2;if(y||m){i.hidden=true;return null}}i.hidden=false;return h})).filter((function(e){return e!=null}));if(this.title&&this.title.text){var d=this.getTitleTranslationY();if(isFinite(d)){this.setTextDimensionalProps(u,0,d,this.title,{text:this.title.text,textBaseline:"bottom",textAlign:"center",hidden:false,collisionTextAlign:undefined,collisionOffsetY:0});var p=u.computeBBox();c.push(p)}}if(c.length===0){return null}return BBox.merge(c)};t.prototype.setTextDimensionalProps=function(e,t,r,n,i){var o=n.fontStyle,a=n.fontWeight,s=n.fontSize,l=n.fontFamily;e.fontStyle=o;e.fontWeight=a;e.fontSize=s;e.fontFamily=l;e.text=i.text;e.x=t;e.y=r;e.textAlign=i.collisionTextAlign||i.textAlign;e.textBaseline=i.textBaseline};t.prototype.updateSectorLabelNodes=function(){var e=this;var t=this.radiusScale;var r=t.convert(0);var n=this.sectorLabel,i=n.fontSize,o=n.fontStyle,a=n.fontWeight,s=n.fontFamily,l=n.positionOffset,u=n.positionRatio,c=n.color;var d=r>0;var p=this.seriesItemEnabled.filter(Boolean).length===1;this.sectorLabelSelection.each((function(n,f){var h=f.sectorLabel;var v=t.convert(f.radius);var g=Math.max(0,v);var y=false;if(h&&g!==0){var m=r*(1-u)+v*u+l;n.fill=c;n.fontStyle=o;n.fontWeight=a;n.fontSize=i;n.fontFamily=s;n.text=h.text;var _=!d&&p;if(_){n.x=0;n.y=0}else{n.x=f.midCos*m;n.y=f.midSin*m}n.textAlign="center";n.textBaseline="middle";var S=e.datumSectorRefs.get(f);if(S){var b=n.computeBBox();var C=[[b.x,b.y],[b.x+b.width,b.y],[b.x+b.width,b.y+b.height],[b.x,b.y+b.height]];var x=f.startAngle,w=f.endAngle;var O={startAngle:x,endAngle:w,innerRadius:r,outerRadius:g};if(C.every((function(e){var t=__read$s(e,2),r=t[0],n=t[1];return isPointInSector(r,n,O)}))){y=true}}}n.visible=y}))};t.prototype.updateInnerCircle=function(){var e=this._innerCircleNode;if(!e){return}var t=this.getInnerRadius();if(t===0){e.size=0}else{var r=Math.min(t,this.getOuterRadius());var n=1;e.size=Math.ceil(r*2+n)}};t.prototype.updateInnerLabelNodes=function(){var e=[];var t=[];this.innerLabelsSelection.each((function(r,n){var i=n.fontStyle,o=n.fontWeight,a=n.fontSize,s=n.fontFamily,l=n.color;r.fontStyle=i;r.fontWeight=o;r.fontSize=a;r.fontFamily=s;r.text=n.text;r.x=0;r.y=0;r.fill=l;r.textAlign="center";r.textBaseline="alphabetic";e.push(r.computeBBox());t.push(n.margin)}));var r=function(e){return e===0?0:t[e]};var n=function(e){return e===t.length-1?0:t[e]};var i=e.reduce((function(e,t,i){return e+t.height+r(i)+n(i)}),0);var o=Math.max.apply(Math,__spread$f(e.map((function(e){return e.width}))));var a=this.getInnerRadius();var s=Math.sqrt(Math.pow(o/2,2)+Math.pow(i/2,2));var l=s<=(a>0?a:this.getOuterRadius());var u=[];for(var c=0,d=-i/2;c<e.length;c++){var p=e[c];var f=p.height+d+r(c);u.push(f);d=f+n(c)}this.innerLabelsSelection.each((function(e,t,r){e.y=u[r];e.visible=l}))};t.prototype.getNodeClickEvent=function(e,t){return new PieSeriesNodeClickEvent(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,e,t,this)};t.prototype.getNodeDoubleClickEvent=function(e,t){return new PieSeriesNodeDoubleClickEvent(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,e,t,this)};t.prototype.getTooltipHtml=function(e){var t=this.angleKey;if(!t){return""}var r=this,n=r.tooltip,i=r.angleName,o=r.radiusKey,a=r.radiusName,s=r.calloutLabelKey,l=r.sectorLabelKey,u=r.calloutLabelName,c=r.sectorLabelName,d=r.id;var p=n.renderer;var f=e.sectorFormat.fill;var h=e.datum;var v=s?h[s]+": ":"";var g=h[t];var y=typeof g==="number"?toFixed(g):g.toString();var m=this.title?this.title.text:undefined;var _=v+y;var S={title:m,backgroundColor:f,content:_};if(p){return toTooltipHtml$1(p({datum:h,angleKey:t,angleValue:g,angleName:i,radiusKey:o,radiusValue:o?h[o]:undefined,radiusName:a,labelKey:s,labelName:u,calloutLabelKey:s,calloutLabelName:u,sectorLabelKey:l,sectorLabelName:c,title:m,color:f,seriesId:d}),S)}return toTooltipHtml$1(S)};t.prototype.getLegendData=function(){var e=this;var t=this,r=t.calloutLabelKey,n=t.legendItemKey,i=t.data,o=t.id,a=t.sectorFormatData;if(!i||i.length===0||!n&&!r)return[];var s=this.title&&this.title.showInLegend&&this.title.text;var l=i.map((function(t,i){var l=[];s&&l.push(s);if(n){l.push(String(t[n]))}else if(r){l.push(String(t[r]))}return{id:o,itemId:i,seriesId:o,enabled:e.seriesItemEnabled[i],label:{text:l.join(" - ")},marker:{fill:a[i].fill,stroke:a[i].stroke,fillOpacity:e.fillOpacity,strokeOpacity:e.strokeOpacity}}}));return l};t.prototype.toggleSeriesItem=function(e,t){this.seriesItemEnabled[e]=t;this.nodeDataRefresh=true};t.prototype.toggleOtherSeriesItems=function(e,t,r,n){var i=this;var o,a;var s=this.legendItemKey;if(e.type!=="pie")return;if(s===undefined)return;var l=e;var u=t&&l.legendItemKey&&((o=l.data)===null||o===void 0?void 0:o.find((function(e,r){return r===t.itemId}))[l.legendItemKey]);if(!u)return;(a=this.data)===null||a===void 0?void 0:a.forEach((function(e,t){if(r!==undefined&&e[s]===u){i.toggleSeriesItem(t,r)}else if(n!==undefined){i.toggleSeriesItem(t,n||e[s]===u)}}))};t.className="PieSeries";t.type="pie";__decorate$1l([DeprecatedAndRenamedTo("calloutLabel")],t.prototype,"label",void 0);__decorate$1l([DeprecatedAndRenamedTo("calloutLine")],t.prototype,"callout",void 0);__decorate$1l([Validate(STRING)],t.prototype,"angleKey",void 0);__decorate$1l([Validate(STRING)],t.prototype,"angleName",void 0);__decorate$1l([Validate(OPT_STRING)],t.prototype,"radiusKey",void 0);__decorate$1l([Validate(OPT_STRING)],t.prototype,"radiusName",void 0);__decorate$1l([Validate(OPT_NUMBER(0))],t.prototype,"radiusMin",void 0);__decorate$1l([Validate(OPT_NUMBER(0))],t.prototype,"radiusMax",void 0);__decorate$1l([Validate(OPT_STRING)],t.prototype,"calloutLabelKey",void 0);__decorate$1l([Validate(OPT_STRING)],t.prototype,"calloutLabelName",void 0);__decorate$1l([DeprecatedAndRenamedTo("calloutLabelKey")],t.prototype,"labelKey",void 0);__decorate$1l([DeprecatedAndRenamedTo("calloutLabelName")],t.prototype,"labelName",void 0);__decorate$1l([Validate(OPT_STRING)],t.prototype,"sectorLabelKey",void 0);__decorate$1l([Validate(OPT_STRING)],t.prototype,"sectorLabelName",void 0);__decorate$1l([Validate(OPT_STRING)],t.prototype,"legendItemKey",void 0);__decorate$1l([Validate(COLOR_STRING_ARRAY)],t.prototype,"fills",void 0);__decorate$1l([Validate(COLOR_STRING_ARRAY)],t.prototype,"strokes",void 0);__decorate$1l([Validate(NUMBER(0,1))],t.prototype,"fillOpacity",void 0);__decorate$1l([Validate(NUMBER(0,1))],t.prototype,"strokeOpacity",void 0);__decorate$1l([Validate(OPT_LINE_DASH)],t.prototype,"lineDash",void 0);__decorate$1l([Validate(NUMBER(0))],t.prototype,"lineDashOffset",void 0);__decorate$1l([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0);__decorate$1l([Validate(NUMBER(-360,360))],t.prototype,"rotation",void 0);__decorate$1l([Validate(NUMBER())],t.prototype,"outerRadiusOffset",void 0);__decorate$1l([Validate(NUMBER(0))],t.prototype,"outerRadiusRatio",void 0);__decorate$1l([Validate(NUMBER())],t.prototype,"innerRadiusOffset",void 0);__decorate$1l([Validate(NUMBER(0))],t.prototype,"innerRadiusRatio",void 0);__decorate$1l([Validate(NUMBER(0))],t.prototype,"strokeWidth",void 0);return t}(PolarSeries);var __extends$1Z=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var HierarchySeries=function(e){__extends$1Z(t,e);function t(){return e.call(this,{pickModes:[SeriesNodePickMode.EXACT_SHAPE_MATCH]})||this}t.prototype.getLabelData=function(){return[]};return t}(Series);var __extends$1Y=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1k=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var DropShadow=function(e){__extends$1Y(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.enabled=true;t.color="rgba(0, 0, 0, 0.5)";t.xOffset=0;t.yOffset=0;t.blur=5;return t}__decorate$1k([Validate(BOOLEAN),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"enabled",void 0);__decorate$1k([Validate(COLOR_STRING),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"color",void 0);__decorate$1k([Validate(NUMBER()),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"xOffset",void 0);__decorate$1k([Validate(NUMBER()),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"yOffset",void 0);__decorate$1k([Validate(NUMBER(0)),SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"blur",void 0);return t}(ChangeDetectable);function number(e,t){e=+e;t=+t;return function(r){return e*(1-r)+t*r}}function interpolateColor(e,t){if(typeof e==="string"){try{e=Color.fromString(e)}catch(t){e=Color.fromArray([0,0,0])}}if(typeof t==="string"){try{t=Color.fromString(t)}catch(e){t=Color.fromArray([0,0,0])}}var r=number(e.r,t.r);var n=number(e.g,t.g);var i=number(e.b,t.b);var o=number(e.a,t.a);return function(e){return Color.fromArray([r(e),n(e),i(e),o(e)]).toRgbaString()}}var ColorScale=function(){function e(){this.domain=[0,1];this._range=["red","green"];this.parsedRange=this._range.map((function(e){return Color.fromString(e)}))}Object.defineProperty(e.prototype,"range",{get:function(){return this._range},set:function(e){this._range=e;this.parsedRange=e.map((function(e){return Color.fromString(e)}))},enumerable:false,configurable:true});e.prototype.convert=function(e){var t=this,r=t.domain,n=t.range,i=t.parsedRange;var o=r[0];var a=r[r.length-1];var s=n[0];var l=n[n.length-1];if(e<=o){return s}if(e>=a){return l}var u;var c;if(r.length===2){var d=(e-o)/(a-o);var p=1/(n.length-1);u=n.length<=2?0:Math.min(Math.floor(d*(n.length-1)),n.length-2);c=(d-u*p)/p}else{for(u=0;u<r.length-2;u++){if(e<r[u+1]){break}}var f=r[u];var h=r[u+1];c=(e-f)/(h-f)}var v=i[u];var g=i[u+1];return interpolateColor(v,g)(c)};return e}();var __extends$1X=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$u=function(){__assign$u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$u.apply(this,arguments)};var __decorate$1j=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __awaiter$1=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator$1=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var TreemapSeriesTooltip=function(e){__extends$1X(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.renderer=undefined;return t}__decorate$1j([Validate(OPT_FUNCTION)],t.prototype,"renderer",void 0);return t}(SeriesTooltip);var TreemapSeriesNodeBaseClickEvent=function(e){__extends$1X(t,e);function t(t,r,n,i,o,a){var s=e.call(this,i,o,a)||this;s.labelKey=t;s.sizeKey=r;s.colorKey=n;return s}return t}(SeriesNodeBaseClickEvent);var TreemapSeriesNodeClickEvent=function(e){__extends$1X(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.type="nodeClick";return t}return t}(TreemapSeriesNodeBaseClickEvent);var TreemapSeriesNodeDoubleClickEvent=function(e){__extends$1X(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.type="nodeDoubleClick";return t}return t}(TreemapSeriesNodeBaseClickEvent);var TreemapSeriesLabel=function(e){__extends$1X(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.padding=10;return t}__decorate$1j([Validate(NUMBER(0))],t.prototype,"padding",void 0);return t}(Label$1);var TreemapValueLabel=function(){function e(){this.style=function(){var e=new Label$1;e.color="white";return e}()}__decorate$1j([Validate(OPT_STRING)],e.prototype,"key",void 0);__decorate$1j([Validate(OPT_STRING)],e.prototype,"name",void 0);__decorate$1j([Validate(OPT_FUNCTION)],e.prototype,"formatter",void 0);return e}();var TextNodeTag;(function(e){e[e["Name"]=0]="Name";e[e["Value"]=1]="Value"})(TextNodeTag||(TextNodeTag={}));function getTextSize(e,t){return HdpiCanvas.getTextSize(e,[t.fontWeight,t.fontSize+"px",t.fontFamily].join(" "))}function validateColor(e){if(typeof e==="string"&&!Color.validColorString(e)){var t="black";Logger.warnOnce('invalid Treemap tile colour string "'+e+'". Affected treemap tiles will be coloured '+t+".");return"black"}return e}var TreemapTextHighlightStyle=function(){function e(){this.color="black"}__decorate$1j([Validate(OPT_COLOR_STRING)],e.prototype,"color",void 0);return e}();var TreemapHighlightStyle=function(e){__extends$1X(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.text=new TreemapTextHighlightStyle;return t}return t}(HighlightStyle);var TreemapSeries=function(e){__extends$1X(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.groupSelection=Selection.select(t.contentGroup,Group);t.highlightSelection=Selection.select(t.highlightGroup,Group);t.title=function(){var e=new TreemapSeriesLabel;e.color="white";e.fontWeight="bold";e.fontSize=12;e.fontFamily="Verdana, sans-serif";e.padding=15;return e}();t.subtitle=function(){var e=new TreemapSeriesLabel;e.color="white";e.fontSize=9;e.fontFamily="Verdana, sans-serif";e.padding=13;return e}();t.labels={large:function(){var e=new Label$1;e.color="white";e.fontWeight="bold";e.fontSize=18;return e}(),medium:function(){var e=new Label$1;e.color="white";e.fontWeight="bold";e.fontSize=14;return e}(),small:function(){var e=new Label$1;e.color="white";e.fontWeight="bold";e.fontSize=10;return e}(),value:new TreemapValueLabel};t.nodePadding=2;t.labelKey="label";t.sizeKey="size";t.colorKey="color";t.colorDomain=[-5,5];t.colorRange=["#cb4b3f","#6acb64"];t.groupFill="#272931";t.groupStroke="black";t.groupStrokeWidth=1;t.tileStroke="black";t.tileStrokeWidth=1;t.gradient=true;t.formatter=undefined;t.colorName="Change";t.rootName="Root";t.highlightGroups=true;t.tileShadow=new DropShadow;t.labelShadow=new DropShadow;t.tooltip=new TreemapSeriesTooltip;t.highlightStyle=new TreemapHighlightStyle;return t}t.prototype.getNodePaddingTop=function(e,t){var r=this,n=r.title,i=r.subtitle,o=r.nodePadding;var a=e.label;if(e.isLeaf||!a||e.depth===0){return o}var s=e.depth>1?i:n;var l=getTextSize(a,s);var u=3;if(s.fontSize>t.width/u||s.fontSize>t.height/u){return o}if(l.height>=t.height){return o}return l.height+o*2};t.prototype.getNodePadding=function(e,t){var r=this.nodePadding;var n=this.getNodePaddingTop(e,t);return{top:n,right:r,bottom:r,left:r}};t.prototype.squarify=function(e,t,r){if(r===void 0){r=new Map}var n=1;var i=this.getNodePadding(e,t);r.set(e,t);var o=t.width-i.left-i.right;var a=t.height-i.top-i.bottom;if(o<=0||a<=0||e.value<=0){return r}var s=0;var l=0;var u=Infinity;var c=e.value;var d=e.children;var p=new BBox(t.x+i.left,t.y+i.top,o,a);for(var f=0;f<d.length;f++){var h=d[f].value;var v=d[l].value;var g=p.width<p.height;s+=h;var y=g?p.height:p.width;var m=g?p.width:p.height;var _=m*v/s;var S=y*s/c;var b=Math.max(_,S)/Math.min(_,S);var C=Math.abs(n-b);if(C<u){u=C;continue}s-=h;S=y*s/c;var x=g?p.x:p.y;for(var w=l;w<f;w++){var O=d[w];var T=g?x:p.x;var E=g?p.y:x;var P=m*O.value/s;var A=g?P:S;var R=g?S:P;var D=new BBox(T,E,A,R);this.squarify(O,D,r);c-=O.value;x+=P}if(g){p.y+=S;p.height-=S}else{p.x+=S;p.width-=S}l=f;s=0;u=Infinity;f--}var M=p.width<p.height;var N=M?p.x:p.y;for(var f=l;f<d.length;f++){var T=M?N:p.x;var E=M?p.y:N;var I=d[f].value/c;var L=p.width*(M?I:1);var k=p.height*(M?1:I);var D=new BBox(T,E,L,k);this.squarify(d[f],D,r);N+=M?L:k}return r};t.prototype.processData=function(){return __awaiter$1(this,void 0,void 0,(function(){var e,t,r,n,i,o,a,s,l,u;var c=this;return __generator$1(this,(function(d){if(!this.data){return[2]}e=this,t=e.data,r=e.sizeKey,n=e.labelKey,i=e.colorKey,o=e.colorDomain,a=e.colorRange,s=e.groupFill;l=new ColorScale;l.domain=o;l.range=a;u=function(e,t,o){var a,d;if(t===void 0){t=0}var p=n&&e[n]||"";var f=i?(a=e[i])!==null&&a!==void 0?a:t:t;f=validateColor(f);var h=!e.children;var v=typeof f==="string"?f:h||!s?l.convert(f):s;var g={datum:e,depth:t,parent:o,value:0,label:p,fill:v,series:c,isLeaf:h,children:[]};if(h){g.value=r?(d=e[r])!==null&&d!==void 0?d:1:1}else{e.children.forEach((function(e){var r=u(e,t+1,g);var n=r.value;if(isNaN(n)||!isFinite(n)||n===0){return}g.value+=n;g.children.push(r)}));g.children.sort((function(e,t){return t.value-e.value}))}return g};this.dataRoot=u(t);return[2]}))}))};t.prototype.createNodeData=function(){return __awaiter$1(this,void 0,void 0,(function(){return __generator$1(this,(function(e){return[2,[]]}))}))};t.prototype.update=function(){return __awaiter$1(this,void 0,void 0,(function(){return __generator$1(this,(function(e){switch(e.label){case 0:return[4,this.updateSelections()];case 1:e.sent();return[4,this.updateNodes()];case 2:e.sent();return[2]}}))}))};t.prototype.updateSelections=function(){return __awaiter$1(this,void 0,void 0,(function(){var e,t,r,n,i,o,a,s,l,u;return __generator$1(this,(function(c){if(!this.nodeDataRefresh){return[2]}this.nodeDataRefresh=false;e=this,t=e.chart,r=e.dataRoot;if(!t||!r){return[2]}n=t.getSeriesRect();if(!n){return[2]}i=[];o=function(e){var t;i.push(e);(t=e.children)===null||t===void 0?void 0:t.forEach(o)};o(this.dataRoot);a=this,s=a.groupSelection,l=a.highlightSelection;u=function(e){return e.update(i,(function(e){var t=new Rect;var r=new Text;r.tag=TextNodeTag.Name;var n=new Text;n.tag=TextNodeTag.Value;e.append([t,r,n])}))};this.groupSelection=u(s);this.highlightSelection=u(l);return[2]}))}))};t.prototype.isDatumHighlighted=function(e){var t;var r=(t=this.highlightManager)===null||t===void 0?void 0:t.getActiveHighlight();return e===r&&(e.isLeaf||this.highlightGroups)};t.prototype.getTileFormat=function(e,t){var r;var n=this.formatter;if(!n){return{}}var i=this,o=i.gradient,a=i.colorKey,s=i.labelKey,l=i.sizeKey,u=i.tileStroke,c=i.tileStrokeWidth,d=i.groupStroke,p=i.groupStrokeWidth;var f=e.isLeaf?u:d;var h=e.isLeaf?c:p;return n({seriesId:this.id,datum:e.datum,depth:e.depth,parent:(r=e.parent)===null||r===void 0?void 0:r.datum,colorKey:a,sizeKey:l,labelKey:s,fill:e.fill,stroke:f,strokeWidth:h,gradient:o,highlighted:t})};t.prototype.updateNodes=function(){return __awaiter$1(this,void 0,void 0,(function(){var e,t,r,n,i,o,a,s,l,u,c,d,p,f,h,v,g,y,m,_;var S=this;return __generator$1(this,(function(b){if(!this.chart){return[2]}e=this,t=e.gradient,r=e.highlightStyle,n=r.item,i=n.fill,o=n.fillOpacity,a=n.stroke,s=n.strokeWidth,l=r.text.color,u=e.tileStroke,c=e.tileStrokeWidth,d=e.groupStroke,p=e.groupStrokeWidth,f=e.tileShadow,h=e.labelShadow;v=this.chart.getSeriesRect();g=this.squarify(this.dataRoot,new BBox(0,0,v.width,v.height));y=this.buildLabelMeta(g);this.updateNodeMidPoint(g);m=function(e,r,n){var l,h,v,y,m,_;var b=g.get(r);if(!b){e.visible=false;return}var C=n&&i!==undefined?i:r.fill;var x=(l=n?o:1)!==null&&l!==void 0?l:1;var w=n&&a!==undefined?a:r.isLeaf?u:d;var O=n&&s!==undefined?s:r.isLeaf?c:p;var T=S.getTileFormat(r,n);var E=validateColor((h=T===null||T===void 0?void 0:T.fill)!==null&&h!==void 0?h:C);if((v=T===null||T===void 0?void 0:T.gradient)!==null&&v!==void 0?v:t){var P=Color.tryParseFromString(C).brighter().toString();var A=Color.tryParseFromString(C).darker().toString();e.fill="linear-gradient(180deg, "+P+", "+A+")"}else{e.fill=E}e.fillOpacity=(y=T===null||T===void 0?void 0:T.fillOpacity)!==null&&y!==void 0?y:x;e.stroke=validateColor((m=T===null||T===void 0?void 0:T.stroke)!==null&&m!==void 0?m:w);e.strokeWidth=(_=T===null||T===void 0?void 0:T.strokeWidth)!==null&&_!==void 0?_:O;e.fillShadow=f;e.crisp=true;e.x=b.x;e.y=b.y;e.width=b.width;e.height=b.height;e.visible=true;if(n&&!r.isLeaf){var R=S.getNodePadding(r,b);var D=b.x+R.left;var M=b.x+b.width-R.right;var N=b.y+R.top;var I=b.y+b.height-R.bottom;if(e.clipPath){e.clipPath.clear()}else{e.clipPath=new Path2D}e.clipMode="punch-out";e.clipPath.moveTo(D,N);e.clipPath.lineTo(M,N);e.clipPath.lineTo(M,I);e.clipPath.lineTo(D,I);e.clipPath.lineTo(D,N);e.clipPath.closePath()}};this.groupSelection.selectByClass(Rect).forEach((function(e){return m(e,e.datum,false)}));this.highlightSelection.selectByClass(Rect).forEach((function(e){var t=S.isDatumHighlighted(e.datum);e.visible=t;if(e.visible){m(e,e.datum,t)}}));_=function(e,t,r,n){var i=y.get(t);var o=i===null||i===void 0?void 0:i[n];if(!o){e.visible=false;return}e.text=o.text;e.fontFamily=o.style.fontFamily;e.fontSize=o.style.fontSize;e.fontWeight=o.style.fontWeight;e.fill=r?l!==null&&l!==void 0?l:o.style.color:o.style.color;e.fillShadow=r?undefined:h;e.textAlign=o.hAlign;e.textBaseline=o.vAlign;e.x=o.x;e.y=o.y;e.visible=true};this.groupSelection.selectByTag(TextNodeTag.Name).forEach((function(e){return _(e,e.datum,false,"label")}));this.highlightSelection.selectByTag(TextNodeTag.Name).forEach((function(e){var t=S.isDatumHighlighted(e.datum);e.visible=t;if(e.visible){_(e,e.datum,t,"label")}}));this.groupSelection.selectByTag(TextNodeTag.Value).forEach((function(e){return _(e,e.datum,false,"value")}));this.highlightSelection.selectByTag(TextNodeTag.Value).forEach((function(e){var t=S.isDatumHighlighted(e.datum);e.visible=t;if(e.visible){_(e,e.datum,t,"value")}}));return[2]}))}))};t.prototype.updateNodeMidPoint=function(e){e.forEach((function(e,t){t.nodeMidPoint={x:e.x+e.width/2,y:e.y}}))};t.prototype.buildLabelMeta=function(e){var t=this,r=t.labels,n=t.title,i=t.subtitle,o=t.nodePadding,a=t.labelKey;var s=new Map;e.forEach((function(e,t){if(!a||t.depth===0){return}var l=t.isLeaf?t.label:t.label.toUpperCase();var u;if(t.isLeaf){u=[r.large,r.medium,r.small].find((function(t){var r=getTextSize(l,t),n=r.width,i=r.height;return n<e.width&&i<e.height}))||r.small}else if(t.depth===1){u=n}else{u=i}var c=getTextSize(l,u);var d=e.width-2*o;var p=e.height-2*o;var f=3;if(u.fontSize>e.width/f||u.fontSize>e.height/f){return}if(c.width>d){var h=Math.floor(l.length*d/c.width)-1;l=l.substring(0,h)+""}var v=r.value;var g=v.style;var y=(u.fontSize+g.fontSize)/8;var m=String(t.isLeaf?v.formatter?v.formatter({datum:t.datum}):v.key?t.datum[v.key]:"":"");var _=getTextSize(m,g);var S=m&&_.width<d&&_.height+c.height+y<p;s.set(t,{label:__assign$u({text:l,style:u},t.isLeaf?{hAlign:"center",vAlign:"middle",x:e.x+e.width/2,y:e.y+e.height/2-(S?_.height/2+y/2:0)}:{hAlign:"left",vAlign:"top",x:e.x+o,y:e.y+o}),value:S?{text:m,style:g,hAlign:"center",vAlign:"middle",x:e.x+e.width/2,y:e.y+e.height/2+c.height/2+y/2}:undefined})}));return s};t.prototype.getDomain=function(e){return[0,1]};t.prototype.getNodeClickEvent=function(e,t){return new TreemapSeriesNodeClickEvent(this.labelKey,this.sizeKey,this.colorKey,e,t,this)};t.prototype.getNodeDoubleClickEvent=function(e,t){return new TreemapSeriesNodeDoubleClickEvent(this.labelKey,this.sizeKey,this.colorKey,e,t,this)};t.prototype.getTooltipHtml=function(e){var t;if(!this.highlightGroups&&!e.isLeaf){return""}var r=this,n=r.tooltip,i=r.sizeKey,o=r.labelKey,a=r.colorKey,s=r.rootName,l=r.id,u=r.labels;var c=e.datum;var d=n.renderer;var p=e.depth?c[o]:s||c[o];var f="";var h=this.getTileFormat(e,false);var v=(h===null||h===void 0?void 0:h.fill)||e.fill||"gray";var g=u.value.key;var y=u.value.formatter;if(g||y){var m="";if(y){m=y({datum:c})}else{var _=c[g];if(typeof _==="number"&&isFinite(_)){m=toFixed(_)}}if(m){if(u.value.name){f+="<b>"+u.value.name+":</b> "}f+=m}}var S={title:p,backgroundColor:v,content:f};if(d){return toTooltipHtml$1(d({datum:e.datum,parent:(t=e.parent)===null||t===void 0?void 0:t.datum,depth:e.depth,sizeKey:i,labelKey:o,colorKey:a,title:p,color:v,seriesId:l}),S)}if(!p&&!f){return""}return toTooltipHtml$1(S)};t.prototype.getLegendData=function(){return[]};t.className="TreemapSeries";t.type="treemap";__decorate$1j([Validate(NUMBER(0))],t.prototype,"nodePadding",void 0);__decorate$1j([Validate(STRING)],t.prototype,"labelKey",void 0);__decorate$1j([Validate(OPT_STRING)],t.prototype,"sizeKey",void 0);__decorate$1j([Validate(OPT_STRING)],t.prototype,"colorKey",void 0);__decorate$1j([Validate(NUMBER_ARRAY)],t.prototype,"colorDomain",void 0);__decorate$1j([Validate(COLOR_STRING_ARRAY)],t.prototype,"colorRange",void 0);__decorate$1j([Validate(OPT_STRING)],t.prototype,"groupFill",void 0);__decorate$1j([Validate(OPT_COLOR_STRING)],t.prototype,"groupStroke",void 0);__decorate$1j([Validate(OPT_NUMBER(0))],t.prototype,"groupStrokeWidth",void 0);__decorate$1j([Validate(OPT_COLOR_STRING)],t.prototype,"tileStroke",void 0);__decorate$1j([Validate(OPT_NUMBER(0))],t.prototype,"tileStrokeWidth",void 0);__decorate$1j([Validate(BOOLEAN)],t.prototype,"gradient",void 0);__decorate$1j([Validate(OPT_FUNCTION)],t.prototype,"formatter",void 0);__decorate$1j([Validate(STRING)],t.prototype,"colorName",void 0);__decorate$1j([Validate(STRING)],t.prototype,"rootName",void 0);__decorate$1j([Validate(OPT_BOOLEAN)],t.prototype,"highlightGroups",void 0);return t}(HierarchySeries);var types$1={area:"cartesian",bar:"cartesian",column:"cartesian",histogram:"cartesian",line:"cartesian",scatter:"cartesian",treemap:"hierarchy",pie:"polar"};var CHART_TYPES={add:function(e,t){types$1[e]=t},delete:function(e){delete types$1[e]},has:function(e){return Object.prototype.hasOwnProperty.call(types$1,e)},isCartesian:function(e){return types$1[e]==="cartesian"},isPolar:function(e){return types$1[e]==="polar"},isHierarchy:function(e){return types$1[e]==="hierarchy"},get seriesTypes(){return Object.keys(types$1)},get cartesianTypes(){var e=this;return this.seriesTypes.filter((function(t){return e.isCartesian(t)}))},get polarTypes(){var e=this;return this.seriesTypes.filter((function(t){return e.isPolar(t)}))},get hierarchyTypes(){var e=this;return this.seriesTypes.filter((function(t){return e.isHierarchy(t)}))}};function deepMerge$1(e,t){if(isPlainObject(e)&&isPlainObject(t)){var r={};Object.keys(e).forEach((function(n){if(n in t){r[n]=deepMerge$1(e[n],t[n])}else{r[n]=e[n]}}));Object.keys(t).forEach((function(n){if(!(n in e)){r[n]=t[n]}}));return r}if(Array.isArray(e)&&!Array.isArray(t)||isObject(e)&&!isObject(t)){return e}return t}function isObject(e){return e&&typeof e==="object"}function isPlainObject(e){return isObject(e)&&e.constructor===Object}var __assign$t=function(){__assign$t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$t.apply(this,arguments)};var __read$r=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var palette$8={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]};var BOLD="bold";var INSIDE="inside";var RIGHT="right";var ChartTheme=function(){function e(e){e=deepMerge$1({},e||{});var t=e.overrides,r=t===void 0?null:t,n=e.palette,i=n===void 0?null:n;var o=this.createChartConfigPerChartType(this.getDefaults());if(r){var a=r.common,s=r.cartesian,l=r.polar,u=r.hierarchy;var c=function(e,t,r){if(r){o[e]=deepMerge$1(o[e],r);t.forEach((function(e){var t=e;o[t]=deepMerge$1(o[t],r)}))}};c("common",Object.keys(o),a);c("cartesian",CHART_TYPES.cartesianTypes,s);c("polar",CHART_TYPES.polarTypes,l);c("hierarchy",CHART_TYPES.hierarchyTypes,u);CHART_TYPES.seriesTypes.forEach((function(e){var t;var n=e;var i=r[n];if(i){if(i.series){i.series=(t={},t[n]=i.series,t)}o[n]=deepMerge$1(o[n],i)}}))}this.palette=i!==null&&i!==void 0?i:this.getPalette();this.config=Object.freeze(o)}e.prototype.getPalette=function(){return palette$8};e.getAxisDefaults=function(){return{top:{},right:{},bottom:{},left:{},thickness:0,title:{enabled:false,text:"Axis Title",fontStyle:undefined,fontWeight:BOLD,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:undefined,color:"rgb(87, 87, 87)",formatter:undefined,autoRotate:false,avoidCollisions:true},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}],crossLines:{enabled:false,fill:"rgb(187,221,232)",stroke:"rgb(70,162,192)",strokeWidth:1,label:{enabled:false,fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:this.fontFamily,padding:5,color:"rgb(87, 87, 87)",rotation:undefined}}}};e.getSeriesDefaults=function(){return{tooltip:{enabled:true,renderer:undefined},visible:true,showInLegend:true,highlightStyle:{item:{fill:"yellow",fillOpacity:1},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}};e.getBarSeriesDefaults=function(){return __assign$t(__assign$t({},this.getSeriesDefaults()),{flipXY:false,fillOpacity:1,strokeOpacity:1,xKey:"",xName:"",normalizedTo:undefined,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:false,fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:undefined,placement:INSIDE},shadow:{enabled:false,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})};e.getLineSeriesDefaults=function(){var e=this.getSeriesDefaults();return __assign$t(__assign$t({},e),{tooltip:__assign$t(__assign$t({},e.tooltip),{format:undefined,position:{type:"node"}})})};e.getAreaSeriesDefaults=function(){var e=this.getSeriesDefaults();return __assign$t(__assign$t({},e),{nodeClickRange:"nearest",tooltip:__assign$t(__assign$t({},e.tooltip),{position:{type:"node"}})})};e.getScatterSeriesDefaults=function(){var e=this.getSeriesDefaults();return __assign$t(__assign$t({},e),{tooltip:__assign$t(__assign$t({},e.tooltip),{position:{type:"node"}})})};e.getCartesianSeriesMarkerDefaults=function(){return{enabled:true,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:undefined}};e.getChartDefaults=function(){return{background:{visible:true,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:false,text:"Title",fontStyle:undefined,fontWeight:BOLD,fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},subtitle:{enabled:false,text:"Subtitle",fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)"},footnote:{enabled:false,text:"Footnote",fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",spacing:30},legend:{enabled:true,position:RIGHT,spacing:20,listeners:{},item:{paddingX:16,paddingY:8,marker:{shape:undefined,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:this.fontFamily,formatter:undefined}},reverseOrder:false,pagination:{marker:{size:12},activeStyle:{fill:"rgb(70, 70, 70)"},inactiveStyle:{fill:"rgb(219, 219, 219)"},highlightStyle:{fill:"rgb(70, 70, 70)"},label:{color:"rgb(70, 70, 70)"}}},tooltip:{enabled:true,range:"nearest",delay:0},listeners:{}}};e.prototype.createChartConfigPerChartType=function(e){var t={cartesian:CHART_TYPES.cartesianTypes,polar:CHART_TYPES.polarTypes,hierarchy:CHART_TYPES.hierarchyTypes,groupedCategory:[]};Object.entries(t).forEach((function(t){var r=__read$r(t,2),n=r[0],i=r[1];i.forEach((function(t){if(!e[t]){e[t]=deepMerge$1({},e[n])}}))}));return e};e.prototype.getDefaults=function(){var t=deepMerge$1({},e.defaults);var r=function(t){var r={};r.series=t.reduce((function(t,r){if(Object.prototype.hasOwnProperty.call(e.seriesThemeOverrides,r)){t[r]=e.seriesThemeOverrides[r]({seriesDefaults:e.getSeriesDefaults(),defaultFontFamily:e.fontFamily})}return t}),{});return r};var n={cartesian:r(CHART_TYPES.cartesianTypes),groupedCategory:r(CHART_TYPES.cartesianTypes),polar:r(CHART_TYPES.polarTypes),hierarchy:r(CHART_TYPES.hierarchyTypes)};return deepMerge$1(t,n)};e.prototype.mergeWithParentDefaults=function(e,t){return deepMerge$1(e,t)};e.fontFamily="Verdana, sans-serif";e.seriesThemeOverrides={};e.cartesianDefaults=__assign$t(__assign$t({},e.getChartDefaults()),{axes:{number:__assign$t({},e.getAxisDefaults()),log:__assign$t(__assign$t({},e.getAxisDefaults()),{base:10}),category:__assign$t(__assign$t({},e.getAxisDefaults()),{groupPaddingInner:.1,label:__assign$t(__assign$t({},e.getAxisDefaults().label),{autoRotate:true})}),groupedCategory:__assign$t({},e.getAxisDefaults()),time:__assign$t({},e.getAxisDefaults())},series:{column:__assign$t(__assign$t({},e.getBarSeriesDefaults()),{flipXY:false}),bar:__assign$t(__assign$t({},e.getBarSeriesDefaults()),{flipXY:true}),line:__assign$t(__assign$t({},e.getLineSeriesDefaults()),{title:undefined,xKey:"",xName:"",yKey:"",yName:"",strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:__assign$t(__assign$t({},e.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1}),label:{enabled:false,fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:e.fontFamily,color:"rgb(70, 70, 70)",formatter:undefined}}),scatter:__assign$t(__assign$t({},e.getScatterSeriesDefaults()),{title:undefined,xKey:"",yKey:"",sizeKey:undefined,labelKey:undefined,xName:"",yName:"",sizeName:"Size",labelName:"Label",marker:__assign$t({},e.getCartesianSeriesMarkerDefaults()),label:{enabled:false,fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:e.fontFamily,color:"rgb(70, 70, 70)"}}),area:__assign$t(__assign$t({},e.getAreaSeriesDefaults()),{xKey:"",xName:"",normalizedTo:undefined,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:false,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:__assign$t(__assign$t({},e.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1,enabled:false}),label:{enabled:false,fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:e.fontFamily,color:"rgb(70, 70, 70)",formatter:undefined}}),histogram:__assign$t(__assign$t({},e.getSeriesDefaults()),{xKey:"",yKey:"",xName:"",yName:"",strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:false,bins:undefined,aggregation:"sum",label:{enabled:false,fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:e.fontFamily,color:"rgb(70, 70, 70)",formatter:undefined},shadow:{enabled:true,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})},navigator:{enabled:false,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}});e.polarDefaults=__assign$t(__assign$t({},e.getChartDefaults()),{series:{pie:__assign$t(__assign$t({},e.getSeriesDefaults()),{title:{enabled:true,text:"",fontStyle:undefined,fontWeight:"bold",fontSize:14,fontFamily:e.fontFamily,color:"rgb(70, 70, 70)"},angleKey:"",angleName:"",radiusKey:undefined,radiusName:undefined,calloutLabelKey:undefined,calloutLabelName:undefined,sectorLabelKey:undefined,sectorLabelName:undefined,calloutLabel:{enabled:true,fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:e.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:0},sectorLabel:{enabled:true,fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:e.fontFamily,color:"rgb(70, 70, 70)",positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:false,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:e.fontFamily,color:"rgb(70, 70, 70)",margin:2}})}});e.hierarchyDefaults=__assign$t(__assign$t({},e.getChartDefaults()),{series:{treemap:__assign$t(__assign$t({},e.getSeriesDefaults()),{showInLegend:false,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],groupFill:"#272931",groupStroke:"black",groupStrokeWidth:1,tileStroke:"black",tileStrokeWidth:1,gradient:true,tileShadow:{enabled:false,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},labelShadow:{enabled:true,color:"rgba(0, 0, 0, 0.4)",xOffset:1.5,yOffset:1.5,blur:5},highlightGroups:true,nodePadding:2,title:{enabled:true,color:"white",fontStyle:undefined,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:15},subtitle:{enabled:true,color:"white",fontStyle:undefined,fontWeight:undefined,fontSize:9,fontFamily:"Verdana, sans-serif",padding:13},labels:{large:{enabled:true,fontStyle:undefined,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white"},medium:{enabled:true,fontStyle:undefined,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white"},small:{enabled:true,fontStyle:undefined,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white"},value:{style:{enabled:true,fontStyle:undefined,fontWeight:undefined,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}}})}});e.defaults={cartesian:e.cartesianDefaults,groupedCategory:e.cartesianDefaults,polar:e.polarDefaults,hierarchy:e.hierarchyDefaults};return e}();var __extends$1W=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$s=function(){__assign$s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$s.apply(this,arguments)};var DarkTheme=function(e){__extends$1W(t,e);function t(t){return e.call(this,t)||this}t.prototype.getDefaults=function(){var r=t.fontColor;var n=t.mutedFontColor;var i={title:{color:r},label:{color:r},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]};var o={label:{color:r}};var a={axes:{number:__assign$s({},i),category:__assign$s({},i),time:__assign$s({},i)}};var s={background:{fill:"rgb(34, 38, 41)"},title:{color:r},subtitle:{color:n},legend:{item:{label:{color:r}},pagination:{activeStyle:{fill:r},inactiveStyle:{fill:n},highlightStyle:{fill:r},label:{color:r}}}};var l=function(e){return e.reduce((function(e,r){if(Object.prototype.hasOwnProperty.call(t.seriesDarkThemeOverrides,r)){e[r]=t.seriesDarkThemeOverrides[r]({seriesLabelDefaults:t.seriesLabelDefaults})}return e}),{})};return this.mergeWithParentDefaults(e.prototype.getDefaults.call(this),{cartesian:__assign$s(__assign$s(__assign$s({},s),a),{series:__assign$s({bar:__assign$s({},o),column:__assign$s({},o),histogram:__assign$s({},o)},l(CHART_TYPES.cartesianTypes))}),groupedCategory:__assign$s(__assign$s(__assign$s({},s),a),{series:__assign$s({bar:__assign$s({},o),column:__assign$s({},o),histogram:__assign$s({},o)},l(CHART_TYPES.cartesianTypes))}),polar:__assign$s(__assign$s({},s),{series:__assign$s({pie:{calloutLabel:{color:r},sectorLabel:{color:r},title:{color:r},innerLabels:{color:r}}},l(CHART_TYPES.polarTypes))}),hierarchy:__assign$s(__assign$s({},s),{series:__assign$s({treemap:{tileStroke:"white",groupStroke:"white",title:{color:r},subtitle:{color:n},labels:{large:{color:r},medium:{color:r},small:{color:r},value:{style:{color:r}}}}},l(CHART_TYPES.hierarchyTypes))})})};t.fontColor="rgb(200, 200, 200)";t.mutedFontColor="rgb(150, 150, 150)";t.seriesLabelDefaults={label:{color:t.fontColor}};t.seriesDarkThemeOverrides={};return t}(ChartTheme);var __values$b=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var BaseModuleInstance=function(){function e(){this.destroyFns=[]}e.prototype.destroy=function(){var e,t;try{for(var r=__values$b(this.destroyFns),n=r.next();!n.done;n=r.next()){var i=n.value;i()}}catch(t){e={error:t}}finally{try{if(n&&!n.done&&(t=r.return))t.call(r)}finally{if(e)throw e.error}}};return e}();var REGISTERED_MODULES=[];function registerModule(e){var t=REGISTERED_MODULES.find((function(t){return e.type===t.type&&e.optionsKey===t.optionsKey}));if(t){if(e.packageType==="enterprise"&&t.packageType==="community"){var r=REGISTERED_MODULES.indexOf(t);REGISTERED_MODULES.splice(r,1,e)}}else{REGISTERED_MODULES.push(e)}}var __extends$1V=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1i=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var RangeHandle$1=function(e){__extends$1V(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._fill="#f2f2f2";t._stroke="#999999";t._strokeWidth=1;t._lineCap="square";t._centerX=0;t._centerY=0;t._width=8;t._gripLineGap=2;t._gripLineLength=8;t._height=16;return t}Object.defineProperty(t.prototype,"centerX",{get:function(){return this._centerX},set:function(e){if(this._centerX!==e){this._centerX=e;this.dirtyPath=true}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"centerY",{get:function(){return this._centerY},set:function(e){if(this._centerY!==e){this._centerY=e;this.dirtyPath=true}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){if(this._width!==e){this._width=e;this.dirtyPath=true}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"gripLineGap",{get:function(){return this._gripLineGap},set:function(e){if(this._gripLineGap!==e){this._gripLineGap=e;this.dirtyPath=true}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"gripLineLength",{get:function(){return this._gripLineLength},set:function(e){if(this._gripLineLength!==e){this._gripLineLength=e;this.dirtyPath=true}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){if(this._height!==e){this._height=e;this.dirtyPath=true}},enumerable:false,configurable:true});t.prototype.computeBBox=function(){var e=this,t=e.centerX,r=e.centerY,n=e.width,i=e.height;var o=t-n/2;var a=r-i/2;return new BBox(o,a,n,i)};t.prototype.isPointInPath=function(e,t){var r=this.transformPoint(e,t);var n=this.computeBBox();return n.containsPoint(r.x,r.y)};t.prototype.updatePath=function(){var e=this,t=e.path,r=e.centerX,n=e.centerY,i=e.width,o=e.height;t.clear();var a=r-i/2;var s=n-o/2;var l=this.align(a);var u=this.align(s);var c=l+this.align(a,i);var d=u+this.align(s,o);t.moveTo(l,u);t.lineTo(c,u);t.lineTo(c,d);t.lineTo(l,d);t.lineTo(l,u);var p=this.gripLineGap/2;var f=this.gripLineLength/2;t.moveTo(this.align(r-p),this.align(n-f));t.lineTo(this.align(r-p),this.align(n+f));t.moveTo(this.align(r+p),this.align(n-f));t.lineTo(this.align(r+p),this.align(n+f))};t.className="RangeHandle";__decorate$1i([Validate(COLOR_STRING)],t.prototype,"_fill",void 0);__decorate$1i([Validate(COLOR_STRING)],t.prototype,"_stroke",void 0);__decorate$1i([Validate(NUMBER(0))],t.prototype,"_strokeWidth",void 0);__decorate$1i([Validate(LINE_CAP)],t.prototype,"_lineCap",void 0);__decorate$1i([Validate(NUMBER(0))],t.prototype,"_width",void 0);__decorate$1i([Validate(NUMBER(0))],t.prototype,"_gripLineGap",void 0);__decorate$1i([Validate(NUMBER(0))],t.prototype,"_gripLineLength",void 0);__decorate$1i([Validate(NUMBER(0))],t.prototype,"_height",void 0);return t}(Path);var __extends$1U=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1h=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var RangeMask=function(e){__extends$1U(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._stroke="#999999";t._strokeWidth=1;t._fill="#999999";t._fillOpacity=.2;t._lineCap="square";t._x=0;t._y=0;t._width=200;t._height=30;t.minRange=.05;t._min=0;t._max=1;return t}Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){if(this._x!==e){this._x=e;this.dirtyPath=true}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){if(this._y!==e){this._y=e;this.dirtyPath=true}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){if(this._width!==e){this._width=e;this.dirtyPath=true}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){if(this._height!==e){this._height=e;this.dirtyPath=true}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){var t;e=Math.min(Math.max(e,0),this.max-this.minRange);if(isNaN(e)){return}if(this._min!==e){this._min=e;this.dirtyPath=true;(t=this.onRangeChange)===null||t===void 0?void 0:t.call(this)}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){var t;e=Math.max(Math.min(e,1),this.min+this.minRange);if(isNaN(e)){return}if(this._max!==e){this._max=e;this.dirtyPath=true;(t=this.onRangeChange)===null||t===void 0?void 0:t.call(this)}},enumerable:false,configurable:true});t.prototype.computeBBox=function(){var e=this,t=e.x,r=e.y,n=e.width,i=e.height;return new BBox(t,r,n,i)};t.prototype.computeVisibleRangeBBox=function(){var e=this,t=e.x,r=e.y,n=e.width,i=e.height,o=e.min,a=e.max;var s=t+n*o;var l=t+n*a;return new BBox(s,r,l-s,i)};t.prototype.updatePath=function(){var e=this,t=e.path,r=e.x,n=e.y,i=e.width,o=e.height,a=e.min,s=e.max;t.clear();var l=this.align(r);var u=this.align(n);var c=l+this.align(r,i);var d=u+this.align(n,o);t.moveTo(l,u);t.lineTo(c,u);t.lineTo(c,d);t.lineTo(l,d);t.lineTo(l,u);var p=this.align(r+i*a);var f=this.align(r+i*s);t.moveTo(p,u);t.lineTo(p,d);t.lineTo(f,d);t.lineTo(f,u);t.lineTo(p,u)};t.className="RangeMask";__decorate$1h([Validate(COLOR_STRING)],t.prototype,"_stroke",void 0);__decorate$1h([Validate(NUMBER(0))],t.prototype,"_strokeWidth",void 0);__decorate$1h([Validate(COLOR_STRING)],t.prototype,"_fill",void 0);__decorate$1h([Validate(NUMBER(0,1))],t.prototype,"_fillOpacity",void 0);__decorate$1h([Validate(LINE_CAP)],t.prototype,"_lineCap",void 0);__decorate$1h([Validate(NUMBER(0))],t.prototype,"_width",void 0);__decorate$1h([Validate(NUMBER(0))],t.prototype,"_height",void 0);__decorate$1h([Validate(NUMBER())],t.prototype,"_min",void 0);__decorate$1h([Validate(NUMBER())],t.prototype,"_max",void 0);return t}(Path);var __extends$1T=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$r=function(){__assign$r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$r.apply(this,arguments)};var RangeSelector=function(e){__extends$1T(t,e);function t(){var r=e.call(this,{name:"rangeSelectorGroup"})||this;r.minHandle=new RangeHandle$1;r.maxHandle=new RangeHandle$1;r.mask=function(){var e=t.defaults,n=e.x,i=e.y,o=e.width,a=e.height,s=e.min,l=e.max;var u=new RangeMask;u.x=n;u.y=i;u.width=o;u.height=a;u.min=s;u.max=l;var c=r,d=c.minHandle,p=c.maxHandle;d.centerX=n;p.centerX=n+o;d.centerY=p.centerY=i+a/2;r.append([u,d,p]);u.onRangeChange=function(){var e;r.updateHandles();(e=r.onRangeChange)===null||e===void 0?void 0:e.call(r)};return u}();r._x=t.defaults.x;r._y=t.defaults.y;r._width=t.defaults.width;r._height=t.defaults.height;r._min=t.defaults.min;r._max=t.defaults.max;r.isContainerNode=true;return r}Object.defineProperty(t.prototype,"x",{get:function(){return this.mask.x},set:function(e){this.mask.x=e;this.updateHandles()},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"y",{get:function(){return this.mask.y},set:function(e){this.mask.y=e;this.updateHandles()},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){return this.mask.width},set:function(e){this.mask.width=e;this.updateHandles()},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this.mask.height},set:function(e){this.mask.height=e;this.updateHandles()},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"min",{get:function(){return this.mask.min},set:function(e){this.mask.min=e},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"max",{get:function(){return this.mask.max},set:function(e){this.mask.max=e},enumerable:false,configurable:true});t.prototype.updateHandles=function(){var e=this,t=e.minHandle,r=e.maxHandle,n=e.x,i=e.y,o=e.width,a=e.height,s=e.mask;t.centerX=n+o*s.min;r.centerX=n+o*s.max;t.centerY=r.centerY=i+a/2};t.prototype.computeBBox=function(){return this.mask.computeBBox()};t.prototype.computeVisibleRangeBBox=function(){return this.mask.computeVisibleRangeBBox()};t.prototype.render=function(e){var t=e.ctx,r=e.forceRender,n=e.stats;if(this.dirty===RedrawType.NONE&&!r){if(n)n.nodesSkipped++;return}this.computeTransformMatrix();this.matrix.toContext(t);var i=this,o=i.mask,a=i.minHandle,s=i.maxHandle;[o,a,s].forEach((function(n){if(n.visible&&(r||n.dirty>RedrawType.NONE)){t.save();n.render(__assign$r(__assign$r({},e),{ctx:t,forceRender:r}));t.restore()}}));this.markClean({force:true});if(n)n.nodesRendered++};t.className="Range";t.defaults={x:0,y:0,width:200,height:30,min:0,max:1};return t}(Group);var NavigatorMask=function(){function e(e){this.rm=e}Object.defineProperty(e.prototype,"fill",{get:function(){return this.rm.fill},set:function(e){this.rm.fill=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"stroke",{get:function(){return this.rm.stroke},set:function(e){this.rm.stroke=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.rm.strokeWidth},set:function(e){this.rm.strokeWidth=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.rm.fillOpacity},set:function(e){this.rm.fillOpacity=e},enumerable:false,configurable:true});return e}();var NavigatorHandle=function(){function e(e){this.rh=e}Object.defineProperty(e.prototype,"fill",{get:function(){return this.rh.fill},set:function(e){this.rh.fill=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"stroke",{get:function(){return this.rh.stroke},set:function(e){this.rh.stroke=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.rh.strokeWidth},set:function(e){this.rh.strokeWidth=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){return this.rh.width},set:function(e){this.rh.width=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this.rh.height},set:function(e){this.rh.height=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"gripLineGap",{get:function(){return this.rh.gripLineGap},set:function(e){this.rh.gripLineGap=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"gripLineLength",{get:function(){return this.rh.gripLineLength},set:function(e){this.rh.gripLineLength=e},enumerable:false,configurable:true});return e}();var __extends$1S=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1g=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Navigator=function(e){__extends$1S(t,e);function t(t){var r=e.call(this)||this;r.ctx=t;r.rs=new RangeSelector;r.mask=new NavigatorMask(r.rs.mask);r.minHandle=new NavigatorHandle(r.rs.minHandle);r.maxHandle=new NavigatorHandle(r.rs.maxHandle);r.minHandleDragging=false;r.maxHandleDragging=false;r.panHandleOffset=NaN;r._enabled=false;r.margin=10;r._visible=true;r.rs.onRangeChange=function(){return r.ctx.zoomManager.updateZoom("navigator",{x:{min:r.rs.min,max:r.rs.max}})};[t.interactionManager.addListener("drag-start",(function(e){return r.onDragStart(e)})),t.interactionManager.addListener("drag",(function(e){return r.onDrag(e)})),t.interactionManager.addListener("hover",(function(e){return r.onDrag(e)})),t.interactionManager.addListener("drag-end",(function(){return r.onDragStop()}))].forEach((function(e){return r.destroyFns.push((function(){return t.interactionManager.removeListener(e)}))}));[t.layoutService.addListener("before-series",(function(e){return r.layout(e)})),t.layoutService.addListener("layout-complete",(function(e){return r.layoutComplete(e)}))].forEach((function(e){return r.destroyFns.push((function(){return t.layoutService.removeListener(e)}))}));t.scene.root.appendChild(r.rs);r.destroyFns.push((function(){var e;return(e=t.scene.root)===null||e===void 0?void 0:e.removeChild(r.rs)}));r.updateGroupVisibility();return r}Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e;this.updateGroupVisibility()},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){return this.rs.width},set:function(e){this.rs.width=e},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this.rs.height},set:function(e){this.rs.height=e},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"min",{get:function(){return this.rs.min},set:function(e){this.rs.min=e},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"max",{get:function(){return this.rs.max},set:function(e){this.rs.max=e},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e;this.updateGroupVisibility()},enumerable:false,configurable:true});t.prototype.updateGroupVisibility=function(){this.rs.visible=this.enabled&&this.visible};t.prototype.layout=function(e){var t=e.shrinkRect;if(this.enabled){var r=this.rs.height+this.margin;t.shrink(r,"bottom");this.rs.y=t.y+t.height+this.margin}return{shrinkRect:t}};t.prototype.layoutComplete=function(e){var t=e.series,r=t.rect,n=t.visible;if(this.enabled&&n){this.rs.x=r.x;this.rs.width=r.width}this.visible=n};t.prototype.update=function(){};t.prototype.onDragStart=function(e){if(!this.enabled){return}var t=e.offsetX,r=e.offsetY;var n=this.rs;var i=n.minHandle,o=n.maxHandle,a=n.x,s=n.width,l=n.min;var u=n.computeVisibleRangeBBox();if(!(this.minHandleDragging||this.maxHandleDragging)){if(i.containsPoint(t,r)){this.minHandleDragging=true}else if(o.containsPoint(t,r)){this.maxHandleDragging=true}else if(u.containsPoint(t,r)){this.panHandleOffset=(t-a)/s-l}}};t.prototype.onDrag=function(e){if(!this.enabled){return}var t=this,r=t.rs,n=t.panHandleOffset;var i=r.x,o=r.y,a=r.width,s=r.height,l=r.minHandle,u=r.maxHandle;var c=e.offsetX,d=e.offsetY;var p=i+a*r.min;var f=i+a*r.max;var h=new BBox(p,o,f-p,s);var v=function(){return Math.min(Math.max((c-i)/a,0),1)};if(l.containsPoint(c,d)||u.containsPoint(c,d)){this.ctx.cursorManager.updateCursor("navigator","ew-resize")}else if(h.containsPoint(c,d)){this.ctx.cursorManager.updateCursor("navigator","grab")}else{this.ctx.cursorManager.updateCursor("navigator")}if(this.minHandleDragging){r.min=v()}else if(this.maxHandleDragging){r.max=v()}else if(!isNaN(n)){var g=r.max-r.min;var y=Math.min(v()-n,1-g);if(y<=r.min){r.min=y;r.max=r.min+g}else{r.max=y+g;r.min=r.max-g}}};t.prototype.onDragStop=function(){this.stopHandleDragging()};t.prototype.stopHandleDragging=function(){this.minHandleDragging=this.maxHandleDragging=false;this.panHandleOffset=NaN};__decorate$1g([Validate(BOOLEAN)],t.prototype,"_enabled",void 0);__decorate$1g([Validate(NUMBER(0))],t.prototype,"margin",void 0);return t}(BaseModuleInstance);var CHART_NAVIGATOR_MODULE={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],initialiseModule:function(e){return{instance:new Navigator(e)}}};registerModule(CHART_NAVIGATOR_MODULE);var __extends$1R=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1f=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Background=function(e){__extends$1R(t,e);function t(t){var r;var n=e.call(this)||this;n.onLayoutComplete=function(e){var t=e.chart,r=t.width,i=t.height;n.rectNode.width=r;n.rectNode.height=i};n.node=new Group({name:"background"});n.node.zIndex=Layers.SERIES_BACKGROUND_ZINDEX;n.rectNode=new Rect;n.node.appendChild(n.rectNode);n.fill="white";n.visible=true;(r=t.scene.root)===null||r===void 0?void 0:r.appendChild(n.node);n.destroyFns.push((function(){var e;return(e=t.scene.root)===null||e===void 0?void 0:e.removeChild(n.node)}));var i=t.layoutService.addListener("layout-complete",n.onLayoutComplete);n.destroyFns.push((function(){return t.layoutService.removeListener(i)}));return n}t.prototype.update=function(){};__decorate$1f([Validate(BOOLEAN),ProxyPropertyOnWrite("node","visible")],t.prototype,"visible",void 0);__decorate$1f([Validate(OPT_COLOR_STRING),ProxyPropertyOnWrite("rectNode","fill")],t.prototype,"fill",void 0);return t}(BaseModuleInstance);var CHART_BACKGROUND_MODULE={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],initialiseModule:function(e){return{instance:new Background(e)}}};registerModule(CHART_BACKGROUND_MODULE);var builtinSeriesTypes={area:AreaSeries,bar:BarSeries,column:BarSeries,histogram:HistogramSeries,line:LineSeries,pie:PieSeries,scatter:ScatterSeries,treemap:TreemapSeries};var extraSeriesFactories={};var initialisedSeriesModules=new Map;function initialiseSeriesModules(){REGISTERED_MODULES.filter((function(e){return e.type==="series"})).filter((function(e){return!initialisedSeriesModules.has(e)})).forEach((function(e){return initialiseSeriesModule(e)}))}var seriesDefaults={};function initialiseSeriesModule(e){var t=e.optionsKey;var r=e.initialiseModule({seriesFactory:{add:function(e){extraSeriesFactories[t]=e},delete:function(){delete extraSeriesFactories[t]}},defaults:{add:function(e){seriesDefaults[t]=e},delete:function(){delete seriesDefaults[t]}},themes:{chartTheme:{add:function(e){ChartTheme.seriesThemeOverrides[t]=e},delete:function(){delete ChartTheme.seriesThemeOverrides[t]}},darkTheme:{add:function(e){DarkTheme.seriesDarkThemeOverrides[t]=e},delete:function(){delete DarkTheme.seriesDarkThemeOverrides[t]}}}});initialisedSeriesModules.set(e,r);var n=e.chartTypes[0];CHART_TYPES.add(t,n)}function getSeries(e){if(Object.prototype.hasOwnProperty.call(extraSeriesFactories,e)){var t=extraSeriesFactories[e];return t()}if(Object.prototype.hasOwnProperty.call(builtinSeriesTypes,e)){var r=builtinSeriesTypes[e];return new r}throw new Error("AG Charts - unknown series type: "+e)}var DEFAULT_CARTESIAN_CHART_OVERRIDES={axes:[{type:NumberAxis.type,position:"left"},{type:CategoryAxis.type,position:"bottom"}]};var DEFAULT_BAR_CHART_OVERRIDES={axes:[{type:"number",position:"bottom"},{type:"category",position:"left"}]};var DEFAULT_SCATTER_HISTOGRAM_CHART_OVERRIDES={axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]};var __assign$q=function(){__assign$q=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$q.apply(this,arguments)};function transform(e,t){var r={};for(var n in e){var i=t[n]||function(e){return e};r[n]=i(e[n],e)}return r}function is2dArray(e){return e!=null&&e instanceof Array&&e[0]instanceof Array}function yNamesMapping(e,t){if(e==null){return{}}if(!(e instanceof Array)){return e}var r=t.yKeys;if(r==null||is2dArray(r)){throw new Error("AG Charts - yNames and yKeys mismatching configuration.")}var n={};r.forEach((function(t,r){n[t]=e[r]}));return n}function yKeysMapping(e,t){if(e==null){return[[]]}if(is2dArray(e)){return e}return t.grouped?e.map((function(e){return[e]})):[e]}function barSeriesTransform(e){var t=__assign$q({},e);delete t["yKey"];delete t["yName"];return transform(t,{yNames:yNamesMapping,yKeys:yKeysMapping})}function identityTransform(e){return e}var SERIES_TRANSFORMS={area:identityTransform,bar:barSeriesTransform,column:barSeriesTransform,histogram:identityTransform,line:identityTransform,pie:identityTransform,scatter:identityTransform,treemap:identityTransform};function applySeriesTransform(e){var t=e.type||"line";var r=SERIES_TRANSFORMS[t];return(r!==null&&r!==void 0?r:identityTransform)(e)}var __extends$1Q=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var palette$7={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};var MaterialLight=function(e){__extends$1Q(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.getPalette=function(){return palette$7};return t}(ChartTheme);var __extends$1P=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var palette$6={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};var MaterialDark=function(e){__extends$1P(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.getPalette=function(){return palette$6};return t}(DarkTheme);var __extends$1O=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var palette$5={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};var PastelLight=function(e){__extends$1O(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.getPalette=function(){return palette$5};return t}(ChartTheme);var __extends$1N=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var palette$4={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};var PastelDark=function(e){__extends$1N(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.getPalette=function(){return palette$4};return t}(DarkTheme);var __extends$1M=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var palette$3={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};var SolarLight=function(e){__extends$1M(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.getPalette=function(){return palette$3};return t}(ChartTheme);var __extends$1L=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var palette$2={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};var SolarDark=function(e){__extends$1L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.getPalette=function(){return palette$2};return t}(DarkTheme);var __extends$1K=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var palette$1={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};var VividLight=function(e){__extends$1K(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.getPalette=function(){return palette$1};return t}(ChartTheme);var __extends$1J=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var palette={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};var VividDark=function(e){__extends$1J(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.getPalette=function(){return palette};return t}(DarkTheme);var __assign$p=function(){__assign$p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$p.apply(this,arguments)};var lightTheme=function(){return new ChartTheme};var darkTheme=function(){return new DarkTheme};var lightThemes={undefined:lightTheme,null:lightTheme,"ag-default":lightTheme,"ag-material":function(){return new MaterialLight},"ag-pastel":function(){return new PastelLight},"ag-solar":function(){return new SolarLight},"ag-vivid":function(){return new VividLight}};var darkThemes={undefined:darkTheme,null:darkTheme,"ag-default-dark":darkTheme,"ag-material-dark":function(){return new MaterialDark},"ag-pastel-dark":function(){return new PastelDark},"ag-solar-dark":function(){return new SolarDark},"ag-vivid-dark":function(){return new VividDark}};var themes$1=__assign$p(__assign$p({},darkThemes),lightThemes);function getChartTheme(e){var t;if(e instanceof ChartTheme){return e}var r=themes$1[e];if(r){return r()}e=e;var n=[];var i;while(typeof e==="object"){n.push((t=e.overrides)!==null&&t!==void 0?t:{});if(e.palette&&i==null){i=e.palette}e=e.baseTheme}n.reverse();var o=__assign$p({baseTheme:e,overrides:jsonMerge(n)},i?{palette:i}:{});if(o.baseTheme||o.overrides){var a=getChartTheme(o.baseTheme);return new a.constructor(o)}return lightTheme()}var __assign$o=function(){__assign$o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$o.apply(this,arguments)};var __values$a=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$q=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$e=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$q(arguments[t]));return e};function groupSeriesByType(e){var t,r;var n={};var i=[];try{for(var o=__values$a(e),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.type!=="column"&&s.type!=="bar"&&(s.type!=="area"||s.stacked!==true)){i.push([s]);continue}var l=s.type||"line";var u=s.stacked?"stacked":"grouped";var c=l+"-"+s.xKey+"-"+u;if(n[c]==null){n[c]=[];i.push(n[c])}n[c].push(s)}}catch(e){t={error:e}}finally{try{if(a&&!a.done&&(r=o.return))r.call(o)}finally{if(t)throw t.error}}return i}var FAIL=Symbol();var SKIP=Symbol();var ARRAY_REDUCER=function(e){return function(t,r){var n;return t.concat.apply(t,__spread$e((n=r[e])!==null&&n!==void 0?n:[]))}};var BOOLEAN_OR_REDUCER=function(e,t){return function(r,n){if(typeof n[e]==="boolean"){return(r!==null&&r!==void 0?r:false)||n[e]}return r!==null&&r!==void 0?r:t}};var DEFAULTING_ARRAY_REDUCER=function(e,t){return function(r,n,i,o){var a;var s=t===SKIP||t===FAIL;var l=(a=n[e])!==null&&a!==void 0?a:t;if(l===FAIL){throw new Error("AG Charts - missing value for property ["+e+"] on series config.")}else if(l===SKIP){return r}if(r.length===0&&!s){while(r.length<o){r=r.concat(t)}}if(!s){r[i]=l;return r}return r.concat(l)}};var YKEYS_REDUCER=function(e,t){return function(r,n){if(n[e]===t){return r.concat.apply(r,__spread$e(n.yKey?[n.yKey]:n.yKeys))}return r}};var STACK_GROUPS_REDUCER=function(){return function(e,t){var r;return __assign$o(__assign$o({},e),(r={},r[t.stackGroup]=__spread$e(e[t.stackGroup]||[],[t.yKey]),r))}};var REDUCE_CONFIG={hideInChart:{outputProp:"hideInChart",reducer:ARRAY_REDUCER("hideInChart"),start:[]},hideInLegend:{outputProp:"hideInLegend",reducer:ARRAY_REDUCER("hideInLegend"),start:[]},yKey:{outputProp:"yKeys",reducer:DEFAULTING_ARRAY_REDUCER("yKey",SKIP),start:[]},fill:{outputProp:"fills",reducer:DEFAULTING_ARRAY_REDUCER("fill",SKIP),start:[]},stroke:{outputProp:"strokes",reducer:DEFAULTING_ARRAY_REDUCER("stroke",SKIP),start:[]},yName:{outputProp:"yNames",reducer:DEFAULTING_ARRAY_REDUCER("yName",SKIP),start:[]},visible:{outputProp:"visibles",reducer:DEFAULTING_ARRAY_REDUCER("visible",true),start:[]},grouped:{outputProp:"grouped",reducer:BOOLEAN_OR_REDUCER("grouped"),seriesType:["bar","column"],start:undefined},showInLegend:{outputProp:"hideInLegend",reducer:YKEYS_REDUCER("showInLegend",false),seriesType:["bar","column"],start:[]},stackGroup:{outputProp:"stackGroups",reducer:STACK_GROUPS_REDUCER(),seriesType:["bar","column"],start:{}}};function reduceSeries(e){var t={};e.forEach((function(r,n){Object.keys(r).forEach((function(i){var o;var a=REDUCE_CONFIG[i];var s=function(){var e,n;t[i]=(n=(e=r[i])!==null&&e!==void 0?e:t[i])!==null&&n!==void 0?n:undefined};if(!a){s();return}var l=a.outputProp,u=a.reducer,c=a.start,d=c===void 0?undefined:c,p=a.seriesType,f=p===void 0?[r.type]:p;if(!f.includes(r.type)){s();return}var h=u((o=t[l])!==null&&o!==void 0?o:d,r,n,e.length);if(h!==undefined){t[l]=h}}))}));return t}function processSeriesOptions(e){var t,r;var n=[];var i=e.map((function(e){if((e.type==="bar"||e.type==="column")&&e.yKey!=null&&!e.stacked){return __assign$o(__assign$o({},e),{grouped:e.grouped!=null?e.grouped:true})}return e}));try{for(var o=__values$a(groupSeriesByType(i)),a=o.next();!a.done;a=o.next()){var s=a.value;switch(s[0].type){case"column":case"bar":case"area":n.push(reduceSeries(s));break;case"line":default:if(s.length>1){Logger.warn("unexpected grouping of series type: "+s[0].type)}n.push(s[0]);break}}}catch(e){t={error:e}}finally{try{if(a&&!a.done&&(r=o.return))r.call(o)}finally{if(t)throw t.error}}return n}var types={number:"number",time:"time",log:"log",category:"category",groupedCategory:"groupedCategory"};var CHART_AXES_TYPES={has:function(e){return Object.prototype.hasOwnProperty.call(types,e)},get axesTypes(){return Object.keys(types)}};var __assign$n=function(){__assign$n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$n.apply(this,arguments)};var __values$9=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$p=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$d=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$p(arguments[t]));return e};function optionsType(e){var t,r,n,i;return(i=(t=e.type)!==null&&t!==void 0?t:(n=(r=e.series)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.type)!==null&&i!==void 0?i:"line"}function isAgCartesianChartOptions(e){var t=optionsType(e);if(t==null){return true}if(t==="cartesian"){Logger.warnOnce("type '"+t+"' is deprecated, use a series type instead");return true}return CHART_TYPES.isCartesian(t)}function isAgHierarchyChartOptions(e){var t=optionsType(e);if(t==null){return false}if(t==="hierarchy"){Logger.warnOnce("type '"+t+"' is deprecated, use a series type instead");return true}return CHART_TYPES.isHierarchy(t)}function isAgPolarChartOptions(e){var t=optionsType(e);if(t==null){return false}if(t==="polar"){Logger.warnOnce("type '"+t+"' is deprecated, use a series type instead");return true}return CHART_TYPES.isPolar(t)}function isSeriesOptionType(e){if(e==null){return false}return CHART_TYPES.has(e)}function isAxisOptionType(e){if(e==null){return false}return CHART_AXES_TYPES.has(e)}function countArrayElements(e){var t,r;var n=0;try{for(var i=__values$9(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(a instanceof Array){n+=countArrayElements(a)}if(a!=null){n++}}}catch(e){t={error:e}}finally{try{if(o&&!o.done&&(r=i.return))r.call(i)}finally{if(t)throw t.error}}return n}function takeColours(e,t,r){var n=[];for(var i=0;i<r;i++){n.push(t[(i+e.colourIndex)%t.length])}return n}var noDataCloneMergeOptions={avoidDeepClone:["data"]};function prepareOptions(e,t,r){var n,i,o,a;var s,l,u,c;var d=jsonMerge([t,e],noDataCloneMergeOptions);sanityCheckOptions(d);var p=d.type;var f=optionsType(d);var h=((s=d.tooltip)===null||s===void 0?void 0:s.position)||{};var v=function(e){if(e!=null&&!(isSeriesOptionType(e)||(r===null||r===void 0?void 0:r[e]))){throw new Error("AG Charts - unknown series type: "+e+"; expected one of: "+CHART_TYPES.seriesTypes)}};v(f);try{for(var g=__values$9((l=d.series)!==null&&l!==void 0?l:[]),y=g.next();!y.done;y=g.next()){var m=y.value.type;if(m==null)continue;v(m)}}catch(e){n={error:e}}finally{try{if(y&&!y.done&&(i=g.return))i.call(g)}finally{if(n)throw n.error}}d=__assign$n(__assign$n({},d),{type:f});var _="line";if(isAgCartesianChartOptions(d)){_="line"}else if(isAgHierarchyChartOptions(d)){_="treemap"}else if(isAgPolarChartOptions(d)){_="pie"}var S={};if(r&&Object.prototype.hasOwnProperty.call(r,f)){S=r[f]}else if(f==="bar"){S=DEFAULT_BAR_CHART_OVERRIDES}else if(f==="scatter"||f==="histogram"){S=DEFAULT_SCATTER_HISTOGRAM_CHART_OVERRIDES}else if(isAgCartesianChartOptions(d)){S=DEFAULT_CARTESIAN_CHART_OVERRIDES}var b=prepareMainOptions(S,d),C=b.context,x=b.mergedOptions,w=b.axesThemes,O=b.seriesThemes;x.series=processSeriesOptions((x.series||[]).map((function(e){var t=_;if(e.type){t=e.type}else if(isSeriesOptionType(p)){t=p}var r=mergeSeriesOptions(e,t,O,h);if(t==="pie"){preparePieOptions(O.pie,e,r)}return r}))).map((function(e){return prepareSeries(C,e)}));var T=function(e){var t=isAxisOptionType(e);if(!t){Logger.warnOnce("AG Charts - unknown axis type: "+e+"; expected one of: "+CHART_AXES_TYPES.axesTypes+", ignoring.")}return t};if(isAgCartesianChartOptions(x)){var E=true;try{for(var P=__values$9((u=x.axes)!==null&&u!==void 0?u:[]),A=P.next();!A.done;A=P.next()){var R=A.value.type;if(!T(R)){E=false}}}catch(e){o={error:e}}finally{try{if(A&&!A.done&&(a=P.return))a.call(P)}finally{if(o)throw o.error}}if(!E){x.axes=S.axes}else{x.axes=(c=x.axes)===null||c===void 0?void 0:c.map((function(e){var t=e.type;var r=jsonMerge([w[t],w[t][e.position||"unknown"]||{}]);return prepareAxis(e,r)}))}}prepareEnabledOptions(d,x);return x}function sanityCheckOptions(e){var t={yKeys:"yKey",yNames:"yName"};Object.entries(t).forEach((function(t){var r;var n=__read$p(t,2),i=n[0],o=n[1];if((r=e.series)===null||r===void 0?void 0:r.some((function(e){return e[i]!=null}))){Logger.warnOnce("property [series."+i+"] is deprecated, please use [series."+o+"] and multiple series instead.")}}))}function mergeSeriesOptions(e,t,r,n){var i;var o=jsonMerge([__assign$n({},n),(i=e.tooltip)===null||i===void 0?void 0:i.position],noDataCloneMergeOptions);var a=jsonMerge([r[t]||{},__assign$n(__assign$n({},e),{type:t,tooltip:__assign$n(__assign$n({},e.tooltip),{position:o})})],noDataCloneMergeOptions);return a}function prepareMainOptions(e,t){var r=prepareTheme(t),n=r.theme,i=r.cleanedTheme,o=r.axesThemes,a=r.seriesThemes;var s={colourIndex:0,palette:n.palette};var l=jsonMerge([e,i,t],noDataCloneMergeOptions);return{context:s,mergedOptions:l,axesThemes:o,seriesThemes:a}}function prepareTheme(e){var t=getChartTheme(e.theme);var r=t.config[optionsType(e)||"cartesian"];var n=Object.entries(t.config).reduce((function(e,t){var r=__read$p(t,2),n=r[0],i=r[1].series;e[n]=i===null||i===void 0?void 0:i[n];return e}),{});return{theme:t,axesThemes:r["axes"]||{},seriesThemes:n,cleanedTheme:jsonMerge([r,{axes:DELETE,series:DELETE}])}}function prepareSeries(e,t){var r=[];for(var n=2;n<arguments.length;n++){r[n-2]=arguments[n]}var i=calculateSeriesPalette(e,t);var o={stacked:DELETE};var a=jsonMerge(__spread$d(r,[i,t,o]),noDataCloneMergeOptions);return applySeriesTransform(a)}function calculateSeriesPalette(e,t){var r={};var n=e.palette,i=n.fills,o=n.strokes;var a=t;var s=countArrayElements(a["yKeys"]||[])||1;switch(t.type){case"pie":s=Math.max(i.length,o.length);case"area":case"bar":case"column":r.fills=takeColours(e,i,s);r.strokes=takeColours(e,o,s);break;case"histogram":r.fill=takeColours(e,i,1)[0];r.stroke=takeColours(e,o,1)[0];break;case"scatter":r.marker={stroke:takeColours(e,o,1)[0],fill:takeColours(e,i,1)[0]};break;case"line":r.stroke=takeColours(e,i,1)[0];r.marker={stroke:takeColours(e,o,1)[0],fill:takeColours(e,i,1)[0]};break}e.colourIndex+=s;return r}function prepareAxis(e,t){var r={top:DELETE,bottom:DELETE,left:DELETE,right:DELETE};if(e.crossLines){if(!Array.isArray(e.crossLines)){Logger.warn("axis[].crossLines should be an array.");e.crossLines=[]}var n=t.crossLines;e.crossLines=e.crossLines.map((function(e){return jsonMerge([n,e])}))}var i={crossLines:DELETE};return jsonMerge([t,i,e,r],noDataCloneMergeOptions)}function prepareEnabledOptions(e,t){jsonWalk(e,(function(e,t,r){if(!r)return;var n=r._enabledFromTheme;if(n!=null){delete r._enabledFromTheme}if(!("enabled"in r))return;if(n)return;if(t.enabled==null){r.enabled=true}}),{skip:["data","theme"]},t);jsonWalk(t,(function(e,t){if(t._enabledFromTheme!=null){delete t._enabledFromTheme}}),{skip:["data","theme"]})}function preparePieOptions(e,t,r){if(Array.isArray(t.innerLabels)){r.innerLabels=t.innerLabels.map((function(t){return jsonMerge([e.innerLabels,t])}))}else{r.innerLabels=DELETE}}var horizontalCrosslineTranslationDirections={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}};var verticalCrossLineTranslationDirections={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};var calculateLabelTranslation=function(e){var t;var r=e.yDirection,n=e.padding,i=n===void 0?0:n,o=e.position,a=e.bbox;var s=r?horizontalCrosslineTranslationDirections:verticalCrossLineTranslationDirections;var l=(t=s[o])!==null&&t!==void 0?t:s["top"],u=l.xTranslationDirection,c=l.yTranslationDirection;var d=r?a.width:a.height;var p=r?a.height:a.width;var f=u*(i+d/2);var h=c*(i+p/2);return{xTranslation:f,yTranslation:h}};var POSITION_TOP_COORDINATES=function(e){var t=e.yDirection,r=e.xEnd,n=e.yStart,i=e.yEnd;if(t){return{x:r/2,y:n}}else{return{x:r,y:!isNaN(i)?(n+i)/2:n}}};var POSITION_LEFT_COORDINATES=function(e){var t=e.yDirection,r=e.xStart,n=e.xEnd,i=e.yStart,o=e.yEnd;if(t){return{x:r,y:!isNaN(o)?(i+o)/2:i}}else{return{x:n/2,y:i}}};var POSITION_RIGHT_COORDINATES=function(e){var t=e.yDirection,r=e.xEnd,n=e.yStart,i=e.yEnd;if(t){return{x:r,y:!isNaN(i)?(n+i)/2:n}}else{return{x:r/2,y:!isNaN(i)?i:n}}};var POSITION_BOTTOM_COORDINATES=function(e){var t=e.yDirection,r=e.xStart,n=e.xEnd,i=e.yStart,o=e.yEnd;if(t){return{x:n/2,y:!isNaN(o)?o:i}}else{return{x:r,y:!isNaN(o)?(i+o)/2:i}}};var POSITION_INSIDE_COORDINATES=function(e){var t=e.xEnd,r=e.yStart,n=e.yEnd;return{x:t/2,y:!isNaN(n)?(r+n)/2:r}};var POSITION_TOP_LEFT_COORDINATES=function(e){var t=e.yDirection,r=e.xStart,n=e.xEnd,i=e.yStart;if(t){return{x:r/2,y:i}}else{return{x:n,y:i}}};var POSITION_BOTTOM_LEFT_COORDINATES=function(e){var t=e.yDirection,r=e.xStart,n=e.yStart,i=e.yEnd;if(t){return{x:r,y:!isNaN(i)?i:n}}else{return{x:r,y:n}}};var POSITION_TOP_RIGHT_COORDINATES=function(e){var t=e.yDirection,r=e.xEnd,n=e.yStart,i=e.yEnd;if(t){return{x:r,y:n}}else{return{x:r,y:!isNaN(i)?i:n}}};var POSITION_BOTTOM_RIGHT_COORDINATES=function(e){var t=e.yDirection,r=e.xStart,n=e.xEnd,i=e.yStart,o=e.yEnd;if(t){return{x:n,y:!isNaN(o)?o:i}}else{return{x:r,y:!isNaN(o)?o:i}}};var labeldDirectionHandling={top:{c:POSITION_TOP_COORDINATES},bottom:{c:POSITION_BOTTOM_COORDINATES},left:{c:POSITION_LEFT_COORDINATES},right:{c:POSITION_RIGHT_COORDINATES},topLeft:{c:POSITION_TOP_LEFT_COORDINATES},topRight:{c:POSITION_TOP_RIGHT_COORDINATES},bottomLeft:{c:POSITION_BOTTOM_LEFT_COORDINATES},bottomRight:{c:POSITION_BOTTOM_RIGHT_COORDINATES},inside:{c:POSITION_INSIDE_COORDINATES},insideLeft:{c:POSITION_LEFT_COORDINATES},insideRight:{c:POSITION_RIGHT_COORDINATES},insideTop:{c:POSITION_TOP_COORDINATES},insideBottom:{c:POSITION_BOTTOM_COORDINATES},insideTopLeft:{c:POSITION_TOP_LEFT_COORDINATES},insideBottomLeft:{c:POSITION_BOTTOM_LEFT_COORDINATES},insideTopRight:{c:POSITION_TOP_RIGHT_COORDINATES},insideBottomRight:{c:POSITION_BOTTOM_RIGHT_COORDINATES}};var __extends$1I=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$m=function(){__assign$m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$m.apply(this,arguments)};var __decorate$1e=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Range=function(e){__extends$1I(t,e);function t(){var t=e.call(this)||this;t.x1=0;t.y1=0;t.x2=0;t.y2=0;t.startLine=false;t.endLine=false;t.isRange=false;t.restoreOwnStyles();return t}t.prototype.computeBBox=function(){return new BBox(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)};t.prototype.isPointInPath=function(e,t){return false};t.prototype.render=function(t){var r;var n=t.ctx,i=t.forceRender,o=t.stats;if(this.dirty===RedrawType.NONE&&!i){if(o)o.nodesSkipped+=this.nodeCount.count;return}this.computeTransformMatrix();this.matrix.toContext(n);var a=this,s=a.x1,l=a.y1,u=a.x2,c=a.y2;s=this.align(s);l=this.align(l);u=this.align(u);c=this.align(c);var d=this,p=d.fill,f=d.opacity,h=d.isRange;var v=!!(h&&p);if(v){var g=this.fillOpacity;n.fillStyle=p;n.globalAlpha=f*g;n.beginPath();n.moveTo(s,l);n.lineTo(u,l);n.lineTo(u,c);n.lineTo(s,c);n.closePath();n.fill()}var y=this,m=y.stroke,_=y.strokeWidth,S=y.startLine,b=y.endLine;var C=!!((S||b)&&m&&_);if(C){var x=this,w=x.strokeOpacity,O=x.lineDash,T=x.lineDashOffset,E=x.lineCap,P=x.lineJoin;n.strokeStyle=m;n.globalAlpha=f*w;n.lineWidth=_;if(O){n.setLineDash(O)}if(T){n.lineDashOffset=T}if(E){n.lineCap=E}if(P){n.lineJoin=P}n.beginPath();if(S){n.moveTo(s,l);n.lineTo(u,l)}if(b){n.moveTo(u,c);n.lineTo(s,c)}n.stroke()}(r=this.fillShadow)===null||r===void 0?void 0:r.markClean();e.prototype.render.call(this,t)};t.className="Range";t.defaultStyles=__assign$m(__assign$m({},Shape.defaultStyles),{strokeWidth:1});__decorate$1e([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"x1",void 0);__decorate$1e([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"y1",void 0);__decorate$1e([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"x2",void 0);__decorate$1e([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"y2",void 0);__decorate$1e([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"startLine",void 0);__decorate$1e([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"endLine",void 0);__decorate$1e([SceneChangeDetection({redraw:RedrawType.MINOR})],t.prototype,"isRange",void 0);return t}(Shape);var __decorate$1d=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$o=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$c=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$o(arguments[t]));return e};var CROSSLINE_LABEL_POSITIONS=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"];var OPT_CROSSLINE_LABEL_POSITION=predicateWithMessage((function(e,t){return OPTIONAL(e,t,(function(e){return CROSSLINE_LABEL_POSITIONS.includes(e)}))}),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'");var OPT_CROSSLINE_TYPE=predicateWithMessage((function(e,t){return OPTIONAL(e,t,(function(e){return e==="range"||e==="line"}))}),"expecting a crossLine type keyword such as 'range' or 'line'");var CrossLineLabel=function(){function e(){this.enabled=undefined;this.text=undefined;this.fontStyle=undefined;this.fontWeight=undefined;this.fontSize=14;this.fontFamily="Verdana, sans-serif";this.padding=5;this.color="rgba(87, 87, 87, 1)";this.position=undefined;this.rotation=undefined;this.parallel=undefined}__decorate$1d([Validate(OPT_BOOLEAN)],e.prototype,"enabled",void 0);__decorate$1d([Validate(OPT_STRING)],e.prototype,"text",void 0);__decorate$1d([Validate(OPT_FONT_STYLE)],e.prototype,"fontStyle",void 0);__decorate$1d([Validate(OPT_FONT_WEIGHT)],e.prototype,"fontWeight",void 0);__decorate$1d([Validate(NUMBER(0))],e.prototype,"fontSize",void 0);__decorate$1d([Validate(STRING)],e.prototype,"fontFamily",void 0);__decorate$1d([Validate(NUMBER(0))],e.prototype,"padding",void 0);__decorate$1d([Validate(OPT_COLOR_STRING)],e.prototype,"color",void 0);__decorate$1d([Validate(OPT_CROSSLINE_LABEL_POSITION)],e.prototype,"position",void 0);__decorate$1d([Validate(OPT_NUMBER(-360,360))],e.prototype,"rotation",void 0);__decorate$1d([Validate(OPT_BOOLEAN)],e.prototype,"parallel",void 0);return e}();var CrossLine=function(){function e(){this.id=createId$1(this);this.enabled=undefined;this.type=undefined;this.range=undefined;this.value=undefined;this.fill=undefined;this.fillOpacity=undefined;this.stroke=undefined;this.strokeWidth=undefined;this.strokeOpacity=undefined;this.lineDash=undefined;this.label=new CrossLineLabel;this.scale=undefined;this.clippedRange=[-Infinity,Infinity];this.gridLength=0;this.sideFlag=-1;this.parallelFlipRotation=0;this.regularFlipRotation=0;this.direction=ChartAxisDirection.X;this.group=new Group({name:""+this.id,layer:true,zIndex:e.LINE_LAYER_ZINDEX});this.crossLineRange=new Range;this.crossLineLabel=new Text;this.labelPoint=undefined;this.data=[];this.startLine=false;this.endLine=false;this.isRange=false;var t=this,r=t.group,n=t.crossLineRange,i=t.crossLineLabel;r.append([n,i]);n.pointerEvents=PointerEvents.None}e.prototype.update=function(e){if(!this.enabled){return}this.group.visible=e;if(!e){return}var t=this.createNodeData();if(!t){this.group.visible=false;return}this.updateNodes();this.group.zIndex=this.getZIndex(this.isRange)};e.prototype.updateNodes=function(){this.updateRangeNode();if(this.label.enabled){this.updateLabel();this.positionLabel()}};e.prototype.createNodeData=function(){var e,t,r;var n,i;var o=this,a=o.scale,s=o.gridLength,l=o.sideFlag,u=o.direction,c=o.label.position,d=c===void 0?"top":c,p=o.clippedRange,f=o.strokeWidth,h=f===void 0?0:f;if(!a){return false}var v=(n=a.bandwidth)!==null&&n!==void 0?n:0;var g=function(e){return Math.max(Math.min.apply(Math,__spread$c(p)),Math.min(Math.max.apply(Math,__spread$c(p)),e))};var y=__read$o([0,l*s],2),m=y[0],_=y[1];var S=__read$o(this.getRange(),2),b=S[0],C=S[1];var x=__read$o([Number(a.convert(b,{strict:false})),a.convert(C,{strict:false})+v],2),w=x[0],O=x[1];w=g(w);O=g(O);e=__read$o([Number(a.convert(b)),a.convert(C)+v],2),b=e[0],C=e[1];var T=!isNaN(w)&&!isNaN(O)&&(b===w||C===O||w!==O)&&Math.abs(O-w)>0;if(T){var E=w!==Math.min(w,O);if(E){t=__read$o([Math.min(w,O),Math.max(w,O)],2),w=t[0],O=t[1];r=__read$o([C,b],2),b=r[0],C=r[1]}}this.isRange=T;this.startLine=!isNaN(b)&&h>0&&b===w;this.endLine=!isNaN(C)&&h>0&&C===O;if(!T&&!this.startLine&&!this.endLine){return false}this.data=[w,O];if(this.label.enabled){var P=u===ChartAxisDirection.Y;var A=((i=labeldDirectionHandling[d])!==null&&i!==void 0?i:{}).c,R=A===void 0?POSITION_TOP_COORDINATES:A;var D=R({yDirection:P,xStart:m,xEnd:_,yStart:w,yEnd:O}),M=D.x,N=D.y;this.labelPoint={x:M,y:N}}return true};e.prototype.updateRangeNode=function(){var e;var t=this,r=t.crossLineRange,n=t.sideFlag,i=t.gridLength,o=t.data,a=t.startLine,s=t.endLine,l=t.isRange,u=t.fill,c=t.fillOpacity,d=t.stroke,p=t.strokeWidth,f=t.lineDash;r.x1=0;r.x2=n*i;r.y1=o[0];r.y2=o[1];r.startLine=a;r.endLine=s;r.isRange=l;r.fill=u;r.fillOpacity=c!==null&&c!==void 0?c:1;r.stroke=d;r.strokeWidth=p!==null&&p!==void 0?p:1;r.strokeOpacity=(e=this.strokeOpacity)!==null&&e!==void 0?e:1;r.lineDash=f};e.prototype.updateLabel=function(){var e=this,t=e.crossLineLabel,r=e.label;if(!r.text){return}t.fontStyle=r.fontStyle;t.fontWeight=r.fontWeight;t.fontSize=r.fontSize;t.fontFamily=r.fontFamily;t.fill=r.color;t.text=r.text};e.prototype.positionLabel=function(){var e=this,t=e.crossLineLabel,r=e.labelPoint,n=r===void 0?{}:r,i=n.x,o=i===void 0?undefined:i,a=n.y,s=a===void 0?undefined:a,l=e.label,u=l.parallel,c=l.rotation,d=l.position,p=d===void 0?"top":d,f=l.padding,h=f===void 0?0:f,v=e.direction,g=e.parallelFlipRotation,y=e.regularFlipRotation;if(o===undefined||s===undefined){return}var m=calculateLabelRotation({rotation:c,parallel:u,regularFlipRotation:y,parallelFlipRotation:g}),_=m.autoRotation,S=m.labelRotation;t.rotation=_+S;t.textBaseline="middle";t.textAlign="center";var b=this.computeLabelBBox();if(!b){return}var C=v===ChartAxisDirection.Y;var x=calculateLabelTranslation({yDirection:C,padding:h,position:p,bbox:b}),w=x.xTranslation,O=x.yTranslation;t.translationX=o+w;t.translationY=s+O};e.prototype.getZIndex=function(t){if(t===void 0){t=false}if(t){return e.RANGE_LAYER_ZINDEX}return e.LINE_LAYER_ZINDEX};e.prototype.getRange=function(){var e;var t=this,r=t.value,n=t.range,i=t.scale;var o=i instanceof ContinuousScale;var a=__read$o(n!==null&&n!==void 0?n:[r,undefined],2),s=a[0],l=a[1];if(!o&&l===undefined){l=s}e=__read$o([checkDatum(s,o),checkDatum(l,o)],2),s=e[0],l=e[1];if(o&&s===l){l=undefined}if(s===undefined&&l!==undefined){s=l;l=undefined}return[s,l]};e.prototype.computeLabelBBox=function(){return this.crossLineLabel.computeTransformedBBox()};e.prototype.calculatePadding=function(e,t){var r,n,i,o,a,s;var l=this,u=l.isRange,c=l.startLine,d=l.endLine;if(!u&&!c&&!d){return}var p=this.computeLabelBBox();var f=p===null||p===void 0?void 0:p.x;var h=p===null||p===void 0?void 0:p.y;if(f==undefined||h==undefined){return}var v=(r=p===null||p===void 0?void 0:p.width)!==null&&r!==void 0?r:0;var g=(n=p===null||p===void 0?void 0:p.height)!==null&&n!==void 0?n:0;if(v>t.width||g>t.height){return}if(f+v>=t.x+t.width){var y=f+v-(t.x+t.width);e.right=((i=e.right)!==null&&i!==void 0?i:0)>=y?e.right:y}else if(f<=t.x){var m=t.x-f;e.left=((o=e.left)!==null&&o!==void 0?o:0)>=m?e.left:m}if(h+g>=t.y+t.height){var _=h+g-(t.y+t.height);e.bottom=((a=e.bottom)!==null&&a!==void 0?a:0)>=_?e.bottom:_}else if(h<=t.y){var S=t.y-h;e.top=((s=e.top)!==null&&s!==void 0?s:0)>=S?e.top:S}};e.LINE_LAYER_ZINDEX=Layers.SERIES_CROSSLINE_LINE_ZINDEX;e.RANGE_LAYER_ZINDEX=Layers.SERIES_CROSSLINE_RANGE_ZINDEX;e.className="CrossLine";__decorate$1d([Validate(OPT_BOOLEAN)],e.prototype,"enabled",void 0);__decorate$1d([Validate(OPT_CROSSLINE_TYPE)],e.prototype,"type",void 0);__decorate$1d([Validate(OPT_ARRAY(2))],e.prototype,"range",void 0);__decorate$1d([Validate(OPT_COLOR_STRING)],e.prototype,"fill",void 0);__decorate$1d([Validate(OPT_NUMBER(0,1))],e.prototype,"fillOpacity",void 0);__decorate$1d([Validate(OPT_COLOR_STRING)],e.prototype,"stroke",void 0);__decorate$1d([Validate(OPT_NUMBER())],e.prototype,"strokeWidth",void 0);__decorate$1d([Validate(OPT_NUMBER(0,1))],e.prototype,"strokeOpacity",void 0);__decorate$1d([Validate(OPT_LINE_DASH)],e.prototype,"lineDash",void 0);return e}();var __extends$1H=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1c=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Image=function(e){__extends$1H(t,e);function t(t){var r=e.call(this)||this;r.x=0;r.y=0;r.width=0;r.height=0;r.opacity=1;r.sourceImage=t;return r}t.prototype.render=function(t){var r=t.ctx,n=t.forceRender,i=t.stats;if(this.dirty===RedrawType.NONE&&!n){if(i)i.nodesSkipped++;return}this.computeTransformMatrix();this.matrix.toContext(r);var o=this.sourceImage;r.globalAlpha=this.opacity;r.drawImage(o,0,0,o.width,o.height,this.x,this.y,this.width,this.height);e.prototype.render.call(this,t)};__decorate$1c([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"x",void 0);__decorate$1c([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"y",void 0);__decorate$1c([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"width",void 0);__decorate$1c([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"height",void 0);__decorate$1c([SceneChangeDetection({redraw:RedrawType.MAJOR})],t.prototype,"opacity",void 0);return t}(Node);var BackgroundImage=function(){function e(){var e=this;this._image=document.createElement("img");this.loadedSynchronously=true;this.left=undefined;this.top=undefined;this.right=undefined;this.bottom=undefined;this.width=undefined;this.height=undefined;this.opacity=1;this.containerWidth=0;this.containerHeight=0;this.onload=undefined;this.onImageLoad=function(){if(e.loadedSynchronously){return}e.node.visible=false;e.performLayout(e.containerWidth,e.containerHeight);if(e.onload){e.onload()}};this.node=new Image(this._image);this._image.onload=this.onImageLoad}Object.defineProperty(e.prototype,"url",{get:function(){return this._image.src},set:function(e){this._image.src=e;this.loadedSynchronously=this.complete},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"complete",{get:function(){return this._image.width>0&&this._image.height>0},enumerable:false,configurable:true});e.prototype.performLayout=function(e,t){this.containerWidth=e;this.containerHeight=t;if(!this.complete){this.node.visible=false;return}var r=this.calculatePosition(this._image.width,this._image.height);Object.assign(this.node,r);this.node.visible=true;this.node.opacity=this.opacity};e.prototype.calculatePosition=function(e,t){var r=this.left;var n=this.right;var i=this.width;var o=this.top;var a=this.bottom;var s=this.height;if(r!=null){if(n!=null){i=this.containerWidth-r-n}else if(i!=null){n=this.containerWidth-r+i}}else if(n!=null){if(i!=null){r=this.containerWidth-n-i}}if(o!=null){if(a!=null){s=this.containerHeight-a-o}else if(s!=null){a=this.containerHeight-o-s}}else if(a!=null){if(s!=null){o=this.containerHeight-a-s}}if(i==null){if(s==null){i=e;s=t}else{i=Math.ceil(e*s/t)}}else if(s==null){s=Math.ceil(t*i/e)}if(r==null){if(n==null){r=Math.floor((this.containerWidth-i)/2)}else{r=this.containerWidth-n-i}}if(o==null){if(a==null){o=Math.floor((this.containerHeight-s)/2)}else{o=this.containerHeight-s-a}}return{x:r,y:o,width:i,height:s}};return e}();var __assign$l=function(){__assign$l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$l.apply(this,arguments)};var __awaiter=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};var __generator=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __read$n=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$b=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$n(arguments[t]));return e};var __values$8=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function chartType(e){if(isAgCartesianChartOptions(e)){return"cartesian"}else if(isAgPolarChartOptions(e)){return"polar"}else if(isAgHierarchyChartOptions(e)){return"hierarchy"}throw new Error("AG Chart - unknown type of chart for options with type: "+e.type)}var AgChart=function(){function e(){}e.create=function(e){return AgChartInternal.createOrUpdate(e)};e.update=function(e,t){if(!AgChartInstanceProxy.isInstance(e)){throw new Error("AG Charts - invalid chart reference passed")}AgChartInternal.createOrUpdate(t,e)};e.updateDelta=function(e,t){if(!AgChartInstanceProxy.isInstance(e)){throw new Error("AG Charts - invalid chart reference passed")}return AgChartInternal.updateUserDelta(e,t)};e.download=function(e,t){if(!(e instanceof AgChartInstanceProxy)){throw new Error("AG Charts - invalid chart reference passed")}return AgChartInternal.download(e,t)};e.getImageDataURL=function(e,t){if(!(e instanceof AgChartInstanceProxy)){throw new Error("AG Charts - invalid chart reference passed")}return AgChartInternal.getImageDataURL(e,t)};return e}();var AgChartInstanceProxy=function(){function e(e){this.chart=e}e.isInstance=function(t){var r,n;if(t instanceof e){return true}if(((r=t.constructor)===null||r===void 0?void 0:r.name)==="AgChartInstanceProxy"&&t.chart!=null){return true}var i=Object.keys((n=t.constructor)===null||n===void 0?void 0:n.prototype);var o=Object.keys(e.prototype).every((function(e){return i.includes(e)}));if(o&&t.chart!=null){return true}return false};e.prototype.getOptions=function(){return this.chart.getOptions()};e.prototype.destroy=function(){this.chart.destroy()};return e}();var AgChartInternal=function(){function e(){}e.createOrUpdate=function(t,r){var n=this;debug(">>> createOrUpdate() user options",t);var i={};if(e.DEBUG()===true){i["debug"]=true}var o=t.overrideDevicePixelRatio;delete t["overrideDevicePixelRatio"];initialiseSeriesModules();var a=prepareOptions(t,i,seriesDefaults);var s=r===null||r===void 0?void 0:r.chart;if(s==null||chartType(t)!==chartType(s.processedOptions)){s=e.createChartInstance(a,o,s)}if(r==null){r=new AgChartInstanceProxy(s)}else{r.chart=s}var l=s;l.queuedUserOptions.push(t);var u=function(){var e=l.queuedUserOptions.indexOf(t);l.queuedUserOptions.splice(0,e)};l.requestFactoryUpdate((function(){return __awaiter(n,void 0,void 0,(function(){var r;return __generator(this,(function(n){switch(n.label){case 0:if(l.destroyed)return[2];r=jsonDiff(l.processedOptions,a);if(r==null){u();return[2]}return[4,e.updateDelta(l,r,t)];case 1:n.sent();u();return[2]}}))}))}));return r};e.updateUserDelta=function(t,r){var n;var i=t.chart,o=t.chart.queuedUserOptions;var a=(n=o[o.length-1])!==null&&n!==void 0?n:i.userOptions;var s=jsonMerge([a,r]);debug(">>> updateUserDelta() user delta",r);debug("base options",a);e.createOrUpdate(s,t)};e.download=function(t,r){var n=this;var i=function(){return __awaiter(n,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,e.prepareResizedChart(t,r)];case 1:n=o.sent();i=n.chart;i.scene.download(r===null||r===void 0?void 0:r.fileName,r===null||r===void 0?void 0:r.fileFormat);if(n!==t){n.destroy()}return[2]}}))}))};i()};e.getImageDataURL=function(t,r){return __awaiter(this,void 0,void 0,(function(){var n,i,o;return __generator(this,(function(a){switch(a.label){case 0:return[4,e.prepareResizedChart(t,r)];case 1:n=a.sent();i=n.chart;o=i.scene.canvas.getDataURL(r===null||r===void 0?void 0:r.fileFormat);if(n!==t){n.destroy()}return[2,o]}}))}))};e.prepareResizedChart=function(t,r){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,l,u,c,d;return __generator(this,(function(p){switch(p.label){case 0:n=t.chart;i=r||{},o=i.width,a=i.height;s=n.width;l=n.height;u=o===undefined&&a===undefined||n.scene.canvas.pixelRatio===1&&s===o&&l===a;if(u){return[2,t]}o=o!==null&&o!==void 0?o:s;a=a!==null&&a!==void 0?a:l;c=__assign$l(__assign$l({},n.userOptions),{container:document.createElement("div"),width:o,height:a,autoSize:false,overrideDevicePixelRatio:1});d=e.createOrUpdate(c);return[4,d.chart.waitForUpdate()];case 1:p.sent();return[2,d]}}))}))};e.createChartInstance=function(e,t,r){var n=r===null||r===void 0?void 0:r.destroy({keepTransferableResources:true});if(isAgCartesianChartOptions(e)){return new CartesianChart(document,t,n)}else if(isAgHierarchyChartOptions(e)){return new HierarchyChart(document,t,n)}else if(isAgPolarChartOptions(e)){return new PolarChart(document,t,n)}throw new Error("AG Charts - couldn't apply configuration, check type of options: "+e["type"])};e.updateDelta=function(e,t,r){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:if(t.type==null){t=__assign$l(__assign$l({},t),{type:e.processedOptions.type||optionsType(t)})}return[4,e.awaitUpdateCompletion()];case 1:n.sent();if(e.destroyed)return[2];debug("applying delta",t);applyChartOptions(e,t,r);return[2]}}))}))};e.DEBUG=function(){var e;return(e=windowValue("agChartsDebug"))!==null&&e!==void 0?e:false};return e}();function debug(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}if([true,"opts"].includes(AgChartInternal.DEBUG())){Logger.debug.apply(Logger,__spread$b([e],t))}}function applyChartOptions(e,t,r){var n,i,o,a;var s=jsonMerge([(n=e.processedOptions)!==null&&n!==void 0?n:{},t],noDataCloneMergeOptions);var l=applyModules(e,s);var u=["type","data","series","autoSize","listeners","theme","legend.listeners"];if(isAgCartesianChartOptions(t)){u.push("axes")}else if(isAgPolarChartOptions(t)||isAgHierarchyChartOptions(t));else{throw new Error("AG Charts - couldn't apply configuration, check type of options and chart: "+t["type"])}if(t.listeners){registerListeners(e,t.listeners)}applyOptionValues(e,t,{skip:u});var c=false;if(t.series&&t.series.length>0){applySeries(e,t);c=true}if(isAgCartesianChartOptions(t)&&t.axes){var d=applyAxes(e,t);if(d){c=true}}var p=t.series;var f=!!t.data||(p===null||p===void 0?void 0:p.some((function(e){return e.data!=null})));var h=t.legend||t.title||t.subtitle;c=c||f||!!h;if(t.data){e.data=t.data}if(t.autoSize!=null){e.autoSize=t.autoSize}if((i=t.legend)===null||i===void 0?void 0:i.listeners){Object.assign(e.legend.listeners,(o=t.legend.listeners)!==null&&o!==void 0?o:{})}if(t.listeners){e.updateAllSeriesListeners()}e.processedOptions=s;e.userOptions=jsonMerge([(a=e.userOptions)!==null&&a!==void 0?a:{},r],noDataCloneMergeOptions);var v=c||l;var g=v?ChartUpdateType.PROCESS_DATA:ChartUpdateType.PERFORM_LAYOUT;debug("chart update type",{updateType:ChartUpdateType[g]});e.update(g,{forceNodeDataRefresh:c})}function applyModules(e,t){var r,n;var i=function(t){return e instanceof CartesianChart&&t.chartTypes.includes("cartesian")||e instanceof PolarChart&&t.chartTypes.includes("polar")||e instanceof HierarchyChart&&t.chartTypes.includes("hierarchy")};var o=false;var a=REGISTERED_MODULES.filter((function(e){return e.type==="root"}));try{for(var s=__values$8(a),l=s.next();!l.done;l=s.next()){var u=l.value;var c=i(u)&&t[u.optionsKey]!=null;var d=e.isModuleEnabled(u);if(c===d)continue;o=true;if(c){e.addModule(u)}else{e.removeModule(u)}}}catch(e){r={error:e}}finally{try{if(l&&!l.done&&(n=s.return))n.call(s)}finally{if(r)throw r.error}}return o}function applySeries(e,t){var r=t.series;if(!r){return}var n=e.series.length===r.length&&e.series.every((function(e,t){var n;return e.type===((n=r[t])===null||n===void 0?void 0:n.type)}));if(n){e.series.forEach((function(t,n){var i,o;var a=((o=(i=e.processedOptions)===null||i===void 0?void 0:i.series)===null||o===void 0?void 0:o[n])||{};var s=jsonDiff(a,r[n]||{});if(!s){return}debug("applying series diff idx "+n,s);applySeriesValues(t,s,{path:"series["+n+"]",index:n});t.markNodeDataDirty()}));return}e.series=createSeries(r)}function applyAxes(e,t){var r=t.axes;if(!r){return false}var n=e.axes.length===r.length&&e.axes.every((function(e,t){return e.type===r[t].type}));if(n){var i=e.processedOptions;if(isAgCartesianChartOptions(i)){e.axes.forEach((function(e,t){var n;var o=((n=i.axes)===null||n===void 0?void 0:n[t])||{};var a=jsonDiff(o,r[t]);debug("applying axis diff idx "+t,a);var s="axes["+t+"]";var l=["axes[].type"];applyOptionValues(e,a,{path:s,skip:l})}));return true}}e.axes=createAxis(e,r);return true}function createSeries(e){var t,r;var n=[];var i=0;try{for(var o=__values$8(e||[]),a=o.next();!a.done;a=o.next()){var s=a.value;var l="series["+i+++"]";var u=getSeries(s.type);applySeriesValues(u,s,{path:l,index:i});n.push(u)}}catch(e){t={error:e}}finally{try{if(a&&!a.done&&(r=o.return))r.call(o)}finally{if(t)throw t.error}}return n}function createAxis(e,t){var r,n;var i=[];var o=["axes[].type"];var a=e.getModuleContext();var s=0;try{for(var l=__values$8(t||[]),u=l.next();!u.done;u=l.next()){var c=u.value;var d=void 0;switch(c.type){case"number":d=new NumberAxis(a);break;case LogAxis.type:d=new LogAxis(a);break;case CategoryAxis.type:d=new CategoryAxis(a);break;case GroupedCategoryAxis.type:d=new GroupedCategoryAxis(a);break;case TimeAxis.type:d=new TimeAxis(a);break;default:throw new Error("AG Charts - unknown axis type: "+c["type"])}var p="axes["+s+++"]";applyAxisModules(d,c);applyOptionValues(d,c,{path:p,skip:o});i.push(d)}}catch(e){r={error:e}}finally{try{if(u&&!u.done&&(n=l.return))n.call(l)}finally{if(r)throw r.error}}return i}function applyAxisModules(e,t){var r,n;var i=false;var o=REGISTERED_MODULES.filter((function(e){return e.type==="axis"}));try{for(var a=__values$8(o),s=a.next();!s.done;s=a.next()){var l=s.value;var u=t[l.optionsKey]!=null;var c=e.isModuleEnabled(l);if(u===c)continue;i=true;if(u){e.addModule(l)}else{e.removeModule(l)}}}catch(e){r={error:e}}finally{try{if(s&&!s.done&&(n=a.return))n.call(a)}finally{if(r)throw r.error}}return i}function registerListeners(e,t){e.clearEventListeners();for(var r in t){var n=t[r];if(typeof n!=="function")continue;e.addEventListener(r,n)}}var JSON_APPLY_OPTIONS={constructors:{title:Caption,subtitle:Caption,footnote:Caption,shadow:DropShadow,innerCircle:DoughnutInnerCircle,"axes[].crossLines[]":CrossLine,"series[].innerLabels[]":DoughnutInnerLabel,"background.image":BackgroundImage},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function applyOptionValues(e,t,r){var n=r===void 0?{}:r,i=n.skip,o=n.path;var a=__assign$l(__assign$l(__assign$l({},JSON_APPLY_OPTIONS),{skip:i}),o?{path:o}:{});return jsonApply(e,t,a)}function applySeriesValues(e,t,r){var n=r===void 0?{}:r,i=n.path,o=n.index;var a=["series[].listeners"];var s=(JSON_APPLY_OPTIONS===null||JSON_APPLY_OPTIONS===void 0?void 0:JSON_APPLY_OPTIONS.constructors)||{};var l={constructors:__assign$l(__assign$l({},s),{title:e.type==="pie"?PieTitle:s["title"]})};var u=__assign$l(__assign$l(__assign$l(__assign$l(__assign$l({},JSON_APPLY_OPTIONS),l),{skip:__spread$b(["series[].type"],a||[])}),i?{path:i}:{}),{idx:o!==null&&o!==void 0?o:-1});var c=jsonApply(e,t,u);var d=t===null||t===void 0?void 0:t.listeners;if(d!=null){registerListeners(e,d)}return c}var VERSION$b="7.3.0";var __read$m=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var themes=Object.entries(themes$1).reduce((function(e,t){var r=__read$m(t,2),n=r[0],i=r[1];e[n]=i();return e}),{});var __extends$1G=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1b=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ChartDatasource=function(e){__extends$1G(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.getData=function(e){if(e.crossFiltering){if(e.grouping){console.warn("AG Grid: crossing filtering with row grouping is not supported.");return{chartData:[],columnNames:{}}}if(!this.gridOptionsService.isRowModelType("clientSide")){console.warn("AG Grid: crossing filtering is only supported in the client side row model.");return{chartData:[],columnNames:{}}}}var t=this.gridOptionsService.isRowModelType("serverSide");if(t&&e.pivoting){this.updatePivotKeysForSSRM()}var r=this.extractRowsFromGridRowModel(e);r.chartData=this.aggregateRowsByDimension(e,r.chartData);return r};t.prototype.extractRowsFromGridRowModel=function(e){var r=this;var n=[];var i={};var o={};var a={};var s={};var l=[];var u;if(e.crossFiltering){s=this.getFilteredRowNodes();l=this.getAllRowNodes();u=l.length}else{var c=this.gridRowModel.getRowCount()-1;var d=e.endRow>=0?Math.min(e.endRow,c):c;u=d-e.startRow+1}var p=function(u){var c={};var d=e.crossFiltering?l[u]:f.gridRowModel.getRow(u+e.startRow);e.dimensionCols.forEach((function(n){var i=n.colId;var s=r.columnModel.getGridColumn(i);if(s){var l=r.valueService.getValue(s,d);if(e.grouping){var p=l&&l.toString?String(l.toString()):"";var f=t.getGroupLabels(d,p);c[i]={labels:f,toString:function(){return this.labels.filter((function(e){return!!e})).reverse().join(" - ")}};if(d.group){o[f.toString()]=u}var h=f.slice(1,f.length).toString();if(h){a[h]=o[h]}}else{c[i]=l}}else{c[ChartDataModel.DEFAULT_CATEGORY]=u+1}}));e.valueCols.forEach((function(t){var n=[];var o=t.getColDef().pivotKeys;if(o){n=o.slice()}var a=t.getColDef().headerName;if(a){n.push(a)}if(n.length>0){i[t.getId()]=n}var l=t.getColId();if(e.crossFiltering){var u=l+"-filtered-out";var p=r.valueService.getValue(t,d);var f=p!=null&&typeof p.toNumber==="function"?p.toNumber():p;if(s[d.id]){c[l]=f;c[u]=e.aggFunc||e.isScatter?undefined:0}else{c[l]=e.aggFunc||e.isScatter?undefined:0;c[u]=f}}else{var p=r.valueService.getValue(t,d);if(p&&p.hasOwnProperty("toString")){p=parseFloat(p.toString())}c[l]=p!=null&&typeof p.toNumber==="function"?p.toNumber():p}}));if(d.footer){c.footer=true}n.push(c)};var f=this;for(var h=0;h<u;h++){p(h)}if(e.grouping){var v=_.values(a);var g=function(e,t){return!e.footer&&!_.includes(v,t)};n=n.filter(g)}return{chartData:n,columnNames:i}};t.prototype.aggregateRowsByDimension=function(e,t){var r=this;var n=e.dimensionCols;if(!e.aggFunc||n.length===0){return t}var i=_.last(n);var o=i&&i.colId;var a={};var s=[];t.forEach((function(e){var t=a;n.forEach((function(r){var i=r.colId;var a=e[i];if(i===o){var l=t[a];if(!l){l={__children:[]};n.forEach((function(t){var r=t.colId;l[r]=e[r]}));t[a]=l;s.push(l)}l.__children.push(e)}else{if(!t[a]){t[a]={}}t=t[a]}}))}));if(ModuleRegistry.assertRegistered(ModuleNames.RowGroupingModule,"Charting Aggregation")){s.forEach((function(t){return e.valueCols.forEach((function(n){if(e.crossFiltering){e.valueCols.forEach((function(n){var i=n.getColId();var o=t.__children.filter((function(e){return typeof e[i]!=="undefined"})).map((function(e){return e[i]}));var a=r.aggregationStage.aggregateValues(o,e.aggFunc);t[n.getId()]=a&&typeof a.value!=="undefined"?a.value:a;var s=i+"-filtered-out";var l=t.__children.filter((function(e){return typeof e[s]!=="undefined"})).map((function(e){return e[s]}));var u=r.aggregationStage.aggregateValues(l,e.aggFunc);t[s]=u&&typeof u.value!=="undefined"?u.value:u}))}else{var i=t.__children.map((function(e){return e[n.getId()]}));var o=0;if(ModuleRegistry.assertRegistered(ModuleNames.RowGroupingModule,"Charting Aggregation")){o=r.aggregationStage.aggregateValues(i,e.aggFunc)}t[n.getId()]=o&&typeof o.value!=="undefined"?o.value:o}}))}))}return s};t.prototype.updatePivotKeysForSSRM=function(){var e=this.columnModel.getSecondaryColumns();if(!e){return}var t=this.extractPivotKeySeparator(e);e.forEach((function(e){if(t===""){e.getColDef().pivotKeys=[]}else{var r=e.getColId().split(t);e.getColDef().pivotKeys=r.slice(0,r.length-1)}}))};t.prototype.extractPivotKeySeparator=function(e){if(e.length===0){return""}var t=function(e,r){var n=e.getGroupId();if(!e.getParent()){return r.split(n)[1][0]}return t(e.getParent(),n)};var r=e[0];if(r.getParent()==null){return""}return t(r.getParent(),r.getColId())};t.getGroupLabels=function(e,t){var r=[t];while(e&&e.level!==0){e=e.parent;if(e){r.push(e.key)}}return r};t.prototype.getFilteredRowNodes=function(){var e={};this.gridRowModel.forEachNodeAfterFilterAndSort((function(t){e[t.id]=t}));return e};t.prototype.getAllRowNodes=function(){var e=[];this.gridRowModel.forEachNode((function(t){e.push(t)}));return this.sortRowNodes(e)};t.prototype.sortRowNodes=function(e){var t=this.sortController.getSortOptions();var r=!t||t.length==0;if(r)return e;return this.rowNodeSorter.doFullSort(e,t)};__decorate$1b([Autowired("rowModel")],t.prototype,"gridRowModel",void 0);__decorate$1b([Autowired("valueService")],t.prototype,"valueService",void 0);__decorate$1b([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$1b([Autowired("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0);__decorate$1b([Autowired("sortController")],t.prototype,"sortController",void 0);__decorate$1b([Optional("aggregationStage")],t.prototype,"aggregationStage",void 0);return t}(BeanStub);var __extends$1F=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$1a=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$l=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$a=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$l(arguments[t]));return e};var ChartDataModel=function(e){__extends$1F(t,e);function t(t){var r=e.call(this)||this;r.unlinked=false;r.chartData=[];r.valueColState=[];r.dimensionColState=[];r.columnNames={};r.grouping=false;r.crossFiltering=false;r.suppressComboChartWarnings=false;r.chartId=t.chartId;r.chartType=t.chartType;r.pivotChart=t.pivotChart;r.chartThemeName=t.chartThemeName;r.aggFunc=t.aggFunc;r.referenceCellRange=t.cellRange;r.suppliedCellRange=t.cellRange;r.suppressChartRanges=t.suppressChartRanges;r.unlinked=!!t.unlinkChart;r.crossFiltering=!!t.crossFiltering;r.seriesChartTypes=t.seriesChartTypes||[];r.initComboCharts(t);return r}t.prototype.initComboCharts=function(e){var t=this.seriesChartTypes&&this.seriesChartTypes.length>0;var r=e.chartType==="customCombo"||t;if(r){this.chartType="customCombo";this.savedCustomSeriesChartTypes=this.seriesChartTypes||[]}};t.prototype.init=function(){this.datasource=this.createManagedBean(new ChartDatasource);this.updateCellRanges()};t.prototype.updateCellRanges=function(e){if(this.valueCellRange){this.referenceCellRange=this.valueCellRange}var t=this.getAllChartColumns(),r=t.dimensionCols,n=t.valueCols;var i=this.getAllColumnsFromRanges();if(e){this.updateColumnState(e)}this.setDimensionCellRange(r,i,e);this.setValueCellRange(n,i,e);if(!e){this.resetColumnState();this.syncDimensionCellRange()}this.updateSeriesChartTypes();this.updateData()};t.prototype.updateSeriesChartTypes=function(){if(!this.isComboChart()){return}this.seriesChartTypes=this.seriesChartTypes.map((function(e){var t=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);e.secondaryAxis=t?false:e.secondaryAxis;return e}));if(this.chartType==="customCombo"){this.updateSeriesChartTypesForCustomCombo();return}this.updateChartSeriesTypesForBuiltInCombos()};t.prototype.updateSeriesChartTypesForCustomCombo=function(){var e=this;var r=this.seriesChartTypes&&this.seriesChartTypes.length>0;if(!r&&!this.suppressComboChartWarnings){console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified.")}this.seriesChartTypes=this.seriesChartTypes.map((function(e){if(!t.SUPPORTED_COMBO_CHART_TYPES.includes(e.chartType)){console.warn("AG Grid: invalid chartType '"+e.chartType+"' supplied in 'seriesChartTypes', converting to 'line' instead.");e.chartType="line"}return e}));var n=function(t){if(!e.savedCustomSeriesChartTypes||e.savedCustomSeriesChartTypes.length===0){e.savedCustomSeriesChartTypes=e.seriesChartTypes}var r=e.savedCustomSeriesChartTypes.find((function(e){return e.colId===t.colId}));if(!r){if(t.selected&&!e.suppressComboChartWarnings){console.warn("AG Grid: no 'seriesChartType' found for colId = '"+t.colId+"', defaulting to 'line'.")}return{colId:t.colId,chartType:"line",secondaryAxis:false}}return r};var i=this.valueColState.map(n);this.seriesChartTypes=i;this.savedCustomSeriesChartTypes=i;this.suppressComboChartWarnings=true};t.prototype.updateChartSeriesTypesForBuiltInCombos=function(){var e=this.chartType==="columnLineCombo"?"groupedColumn":"stackedArea";var t=this.chartType==="columnLineCombo"?"line":"groupedColumn";var r=this.valueColState.filter((function(e){return e.selected}));var n=Math.ceil(r.length/2);this.seriesChartTypes=r.map((function(r,i){var o=i>=n?t:e;return{colId:r.colId,chartType:o,secondaryAxis:false}}))};t.prototype.updateData=function(){var e=this.getRowIndexes(),t=e.startRow,r=e.endRow;if(this.pivotChart){this.resetColumnState()}this.grouping=this.isGrouping();var n={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:t,endRow:r,isScatter:_.includes(["scatter","bubble"],this.chartType)};var i=this.datasource.getData(n),o=i.chartData,a=i.columnNames;this.chartData=o;this.columnNames=a};t.prototype.isGrouping=function(){var e=this.gridOptionsService.isTreeData();var t=e?null:this.columnModel.getRowGroupColumns();var r=e||t&&t.length>0;var n=this.getSelectedDimension().colId;var i=this.columnModel.getGroupDisplayColumns();var o=i.map((function(e){return e.getColId()})).some((function(e){return e===n}));return!!r&&o};t.prototype.getSelectedValueCols=function(){return this.valueColState.filter((function(e){return e.selected})).map((function(e){return e.column}))};t.prototype.getSelectedDimension=function(){return this.dimensionColState.filter((function(e){return e.selected}))[0]};t.prototype.getColDisplayName=function(e){return this.columnModel.getDisplayNameForColumn(e,"chart")};t.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()};t.prototype.getChartDataType=function(e){var t=this.columnModel.getPrimaryColumn(e);return t?t.getColDef().chartDataType:undefined};t.prototype.isPivotActive=function(){return this.columnModel.isPivotActive()};t.prototype.createCellRange=function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:t,startColumn:e===CellRangeType.DIMENSION?t[0]:this.referenceCellRange.startColumn,type:e}};t.prototype.getAllColumnsFromRanges=function(){if(this.pivotChart){return _.convertToSet(this.columnModel.getAllDisplayedColumns())}var e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;if(this.dimensionCellRange){e.push.apply(e,__spread$a(this.dimensionCellRange.columns))}if(this.valueCellRange){e.push.apply(e,__spread$a(this.valueCellRange.columns))}return _.convertToSet(e)};t.prototype.getRowIndexes=function(){var e=0,t=0;var r=this.rangeService;var n=this.valueCellRange;if(r&&n){e=r.getRangeStartRow(n).rowIndex;var i=r.getRangeEndRow(n);t=i.rowPinned==="bottom"?-1:i.rowIndex}return{startRow:e,endRow:t}};t.prototype.getAllChartColumns=function(){var e=this;var t=this.columnModel.getAllDisplayedColumns();var r=new Set;var n=new Set;t.forEach((function(t){var i=t.getColDef();var o=i.chartDataType;if(o){switch(o){case"category":case"time":r.add(t);return;case"series":n.add(t);return;case"excluded":return;default:console.warn("AG Grid: unexpected chartDataType value '"+o+"' supplied, instead use 'category', 'series' or 'excluded'");break}}if(i.colId==="ag-Grid-AutoColumn"){r.add(t);return}if(!t.isPrimary()){n.add(t);return}(e.isNumberCol(t)?n:r).add(t)}));return{dimensionCols:r,valueCols:n}};t.prototype.isNumberCol=function(e){if(e.getColId()==="ag-Grid-AutoColumn"){return false}var t=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!t){return false}var r=this.valueService.getValue(e,t);if(r==null){r=this.extractLeafData(t,e)}if(r!=null&&typeof r.toNumber==="function"){r=r.toNumber()}return typeof r==="number"};t.prototype.extractLeafData=function(e,t){if(!e.allLeafChildren){return null}for(var r=0;r<e.allLeafChildren.length;r++){var n=e.allLeafChildren[r];var i=this.valueService.getValue(t,n);if(i!=null){return i}}return null};t.prototype.resetColumnState=function(){var e=this;var r=this.getAllChartColumns(),n=r.dimensionCols,i=r.valueCols;var o=this.getAllColumnsFromRanges();var a=this.valueColState.length<1;this.dimensionColState=[];this.valueColState=[];var s=false;var l=1;var u=this.suppliedCellRange.columns[0];n.forEach((function(t){var r=t.getColId()==="ag-Grid-AutoColumn";var n=false;if(e.crossFiltering&&e.aggFunc){if(u.getColId()===t.getColId()){n=true}}else{n=r?true:!s&&o.has(t)}e.dimensionColState.push({column:t,colId:t.getColId(),displayName:e.getColDisplayName(t),selected:n,order:l++});if(n){s=true}}));var c={colId:t.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!s,order:0};this.dimensionColState.unshift(c);var d=this.referenceCellRange.columns.filter((function(e){return i.has(e)}));i.forEach((function(t){if(a&&_.includes(e.referenceCellRange.columns,t)){t=d.shift()}e.valueColState.push({column:t,colId:t.getColId(),displayName:e.getColDisplayName(t),selected:o.has(t),order:l++})}))};t.prototype.updateColumnState=function(e){var t=function(t){return t.colId===e.colId};var r=this,n=r.dimensionColState,i=r.valueColState;if(n.filter(t).length>0){n.forEach((function(e){return e.selected=t(e)}))}else{i.filter(t).forEach((function(t){return t.selected=e.selected}))}var o=__spread$a(n,i);var a=[];o.forEach((function(t,r){if(r===e.order){a.push(e.colId)}if(t.colId!==e.colId){a.push(t.colId)}}));o.forEach((function(e){var t=a.indexOf(e.colId);e.order=t>=0?a.indexOf(e.colId):o.length-1}));this.reorderColState()};t.prototype.reorderColState=function(){var e=function(e,t){return e.order-t.order};this.dimensionColState.sort(e);this.valueColState.sort(e)};t.prototype.setDimensionCellRange=function(e,r,n){var i=this;this.dimensionCellRange=undefined;if(!n&&!this.dimensionColState.length){e.forEach((function(e){if(i.dimensionCellRange||!r.has(e)){return}i.dimensionCellRange=i.createCellRange(CellRangeType.DIMENSION,e)}));return}var o=n;if(this.crossFiltering&&this.aggFunc){var a=this.suppliedCellRange.columns[0];o=this.dimensionColState.filter((function(e){return e.colId===a.getColId()}))[0]}else if(!o||!e.has(o.column)){o=this.dimensionColState.filter((function(e){return e.selected}))[0]}if(o&&o.colId!==t.DEFAULT_CATEGORY){this.dimensionCellRange=this.createCellRange(CellRangeType.DIMENSION,o.column)}};t.prototype.setValueCellRange=function(e,t,r){this.valueCellRange=undefined;var n=[];e.forEach((function(e){if(r&&r.colId===e.getColId()){if(r.selected){n.push(r.column)}}else if(t.has(e)){n.push(e)}}));if(n.length>0){var i=[];if(this.valueColState.length>0){i=this.valueColState.map((function(e){return e.colId}))}else{t.forEach((function(e){return i.push(e.getColId())}))}n.sort((function(e,t){return i.indexOf(e.getColId())-i.indexOf(t.getColId())}));this.valueCellRange=this.createCellRange.apply(this,__spread$a([CellRangeType.VALUE],n))}};t.prototype.syncDimensionCellRange=function(){var e=this.getSelectedDimension();if(e&&e.column){this.dimensionCellRange=this.createCellRange(CellRangeType.DIMENSION,e.column)}};t.prototype.isComboChart=function(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)};t.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY";t.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"];__decorate$1a([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$1a([Autowired("valueService")],t.prototype,"valueService",void 0);__decorate$1a([Autowired("rangeService")],t.prototype,"rangeService",void 0);__decorate$1a([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0);__decorate$1a([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$1a([PostConstruct],t.prototype,"init",null);return t}(BeanStub);var VALID_SERIES_TYPES=["area","bar","column","histogram","line","pie","scatter"];function getSeriesType(e){switch(e){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"column";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"scatter":case"bubble":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}var ALL_AXIS_TYPES=["number","category","groupedCategory","log","time"];function getLegacyAxisType(e){switch(e){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","groupedCategory"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["groupedCategory","number"];case"scatter":case"bubble":return["number","number"];default:return undefined}}var __assign$k=function(){__assign$k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$k.apply(this,arguments)};function createAgChartTheme(e,t){var r;var n=e.chartOptionsToRestore,i=e.chartPaletteToRestore,o=e.chartThemeToRestore;var a=getSelectedTheme(e);var s=isStockTheme(a);var l=s?{baseTheme:a}:(r=lookupCustomChartTheme(e,a))!==null&&r!==void 0?r:{};var u=e.getGridOptionsChartThemeOverrides();var c=e.apiChartThemeOverrides;var d=getSeriesType(e.chartType);var p=d==="pie"?"polar":"cartesian";var f=e.crossFiltering?createCrossFilterThemeOverrides(t,e,p):undefined;var h=__assign$k({},n!==null&&n!==void 0?n:{});var v=function(){var e=function(e){if(!e){return false}return Object.keys(e).some((function(t){return _.get(e[t],"title.enabled",false)}))};return e(u)||e(c)};var g=[s?inbuiltStockThemeOverrides(e,v()):undefined,f,u,c,h];var y=g.filter((function(e){return!!e})).reduce((function(e,t){return{baseTheme:e,overrides:t}}),l);if(i&&a===o){var m=getChartTheme(l).palette;if(!isIdenticalPalette(i,m)){y.palette=i}}return y}function isIdenticalPalette(e,t){var r=function(e,t){if(e.length!==t.length)return false;return e.every((function(e,r){return e===t[r]}))};return r(e.fills,t.fills)&&r(e.strokes,t.strokes)}function isStockTheme(e){return _.includes(Object.keys(themes),e)}function createCrossFilterThemeOverrides(e,t,r){var n;var i={listeners:{legendItemClick:function(t){var r=e.getChart();r.series.forEach((function(e){e.toggleSeriesItem(t.itemId,t.enabled);e.toggleSeriesItem(t.itemId+"-filtered-out",t.enabled)}))}}};var o={};if(r==="polar"){o.pie={tooltip:{renderer:function(e){var t=e.angleName,r=e.datum,n=e.calloutLabelKey,i=e.radiusKey,o=e.angleValue;var a=t;var s=r[n];var l=r[i];var u=o;return{title:a,content:s+": "+u*l}}}}}return n={},n[r]={tooltip:{delay:500},legend:i,listeners:{click:function(e){return t.crossFilterCallback(e,true)}},series:o},n}var STATIC_INBUILT_STOCK_THEME_AXES_OVERRIDES=ALL_AXIS_TYPES.reduce((function(e,t){var r;return __assign$k(__assign$k({},e),(r={},r[t]={title:{_enabledFromTheme:true}},r))}),{});function inbuiltStockThemeOverrides(e,t){var r=e.getExtraPaddingDirections();return{common:{axes:STATIC_INBUILT_STOCK_THEME_AXES_OVERRIDES,padding:{top:!t&&r.includes("top")?40:20,right:r.includes("right")?30:20,bottom:r.includes("bottom")?40:20,left:r.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:true},calloutLabel:{_enabledFromTheme:true},sectorLabel:{enabled:false,_enabledFromTheme:true}}}}}function getSelectedTheme(e){var t=e.getChartThemeName();var r=e.getChartThemes();if(!_.includes(r,t)){t=r[0]}return t}function lookupCustomChartTheme(e,t){var r=e.customChartThemes;var n=r&&r[t];if(!n){console.warn("AG Grid: no stock theme exists with the name '"+t+"' and no "+"custom chart theme with that name was supplied to 'customChartThemes'")}return n}var __extends$1E=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$19=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var DEFAULT_THEMES=["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"];var ChartController=function(e){__extends$1E(t,e);function t(t){var r=e.call(this)||this;r.model=t;return r}t.prototype.init=function(){var e=this;this.setChartRange();this.addManagedListener(this.eventService,Events.EVENT_RANGE_SELECTION_CHANGED,(function(t){if(t.id&&t.id===e.model.chartId){e.updateForRangeChange()}}));if(this.model.unlinked){if(this.rangeService){this.rangeService.setCellRanges([])}}this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this));this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this));this.addManagedListener(this.eventService,Events.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))};t.prototype.updateForGridChange=function(){if(this.model.unlinked){return}this.model.updateCellRanges();this.setChartRange()};t.prototype.updateForDataChange=function(){if(this.model.unlinked){return}this.model.updateData();this.raiseChartModelUpdateEvent()};t.prototype.updateForRangeChange=function(){this.updateForGridChange();this.raiseChartRangeSelectionChangedEvent()};t.prototype.updateForPanelChange=function(e){this.model.updateCellRanges(e);this.setChartRange();this.raiseChartRangeSelectionChangedEvent()};t.prototype.getChartUpdateParams=function(){var e=this.getSelectedValueColState();var t=e.map((function(e){return{colId:e.colId,displayName:e.displayName}}));var r=this.getChartData();var n=this.getSelectedDimension();return{data:r,grouping:this.isGrouping(),category:{id:n.colId,name:n.displayName,chartDataType:this.model.getChartDataType(n.colId)},fields:t,chartId:this.getChartId(),getCrossFilteringContext:function(){return{lastSelectedChartId:"xxx"}},seriesChartTypes:this.getSeriesChartTypes()}};t.prototype.getChartModel=function(){var e=this.model.pivotChart?"pivot":"range";var t=this.isComboChart()?this.model.seriesChartTypes:undefined;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:t}};t.prototype.getChartId=function(){return this.model.chartId};t.prototype.getChartData=function(){return this.model.chartData};t.prototype.getChartType=function(){return this.model.chartType};t.prototype.setChartType=function(e){this.model.chartType=e;this.model.updateSeriesChartTypes();this.raiseChartModelUpdateEvent();this.raiseChartOptionsChangedEvent()};t.prototype.setChartThemeName=function(e){this.model.chartThemeName=e;this.raiseChartModelUpdateEvent();this.raiseChartOptionsChangedEvent()};t.prototype.getChartThemeName=function(){return this.model.chartThemeName};t.prototype.isPivotChart=function(){return this.model.pivotChart};t.prototype.isPivotMode=function(){return this.model.isPivotMode()};t.prototype.isGrouping=function(){return this.model.isGrouping()};t.prototype.getThemes=function(){return this.gridOptionsService.get("chartThemes")||DEFAULT_THEMES};t.prototype.getPalettes=function(){var e=this;var t=this.getThemes();return t.map((function(t){var r=isStockTheme(t);var n=r?t:e.chartProxy.lookupCustomChartTheme(t);return getChartTheme(n).palette}))};t.prototype.getValueColState=function(){return this.model.valueColState.map(this.displayNameMapper.bind(this))};t.prototype.getSelectedValueColState=function(){return this.getValueColState().filter((function(e){return e.selected}))};t.prototype.getDimensionColState=function(){return this.model.dimensionColState};t.prototype.getSelectedDimension=function(){return this.model.getSelectedDimension()};t.prototype.displayNameMapper=function(e){var t=this.model.columnNames[e.colId];e.displayName=t?t.join(" - "):this.model.getColDisplayName(e.column);return e};t.prototype.getColStateForMenu=function(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}};t.prototype.isDefaultCategorySelected=function(){return this.model.getSelectedDimension().colId===ChartDataModel.DEFAULT_CATEGORY};t.prototype.setChartRange=function(e){if(e===void 0){e=false}if(this.rangeService&&!this.model.suppressChartRanges&&!this.model.unlinked){this.rangeService.setCellRanges(this.getCellRanges())}if(!e){this.raiseChartModelUpdateEvent()}};t.prototype.detachChartRange=function(){this.model.unlinked=!this.model.unlinked;if(this.model.unlinked){if(this.rangeService){this.rangeService.setCellRanges([])}}else{this.updateForGridChange()}};t.prototype.setChartProxy=function(e){this.chartProxy=e};t.prototype.getChartProxy=function(){return this.chartProxy};t.prototype.isActiveXYChart=function(){return _.includes(["scatter","bubble"],this.getChartType())};t.prototype.isChartLinked=function(){return!this.model.unlinked};t.prototype.customComboExists=function(){return this.model.savedCustomSeriesChartTypes&&this.model.savedCustomSeriesChartTypes.length>0};t.prototype.getSeriesChartTypes=function(){return this.model.seriesChartTypes};t.prototype.isComboChart=function(){return this.model.isComboChart()};t.prototype.updateSeriesChartType=function(e,r,n){var i=this.model.seriesChartTypes.find((function(t){return t.colId===e}));if(i){var o=this.model.chartType!=="customCombo";if(o){this.model.chartType="customCombo"}var a=i.chartType;if(r!=null){i.chartType=r}if(n!=null){i.secondaryAxis=n}this.model.savedCustomSeriesChartTypes=this.model.seriesChartTypes;this.model.updateSeriesChartTypes();this.updateForDataChange();if(o){this.dispatchEvent({type:t.EVENT_CHART_TYPE_CHANGED})}if(a!==r){this.dispatchEvent({type:t.EVENT_CHART_SERIES_CHART_TYPE_CHANGED})}this.raiseChartOptionsChangedEvent()}};t.prototype.getActiveSeriesChartTypes=function(){var e=this.getSelectedValueColState().map((function(e){return e.colId}));return this.getSeriesChartTypes().filter((function(t){return e.includes(t.colId)}))};t.prototype.getChartSeriesTypes=function(){var e=["line","column","area"];return this.isComboChart()?e:[getSeriesType(this.getChartType())]};t.prototype.getCellRanges=function(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter((function(e){return e}))};t.prototype.getCellRangeParams=function(){var e=this.getCellRanges();var t=e[0];var r=t&&t.startRow||null;var n=t&&t.endRow||null;return{rowStartIndex:r&&r.rowIndex,rowStartPinned:r&&r.rowPinned,rowEndIndex:n&&n.rowIndex,rowEndPinned:n&&n.rowPinned,columns:e.reduce((function(e,t){return e.concat(t.columns.map((function(e){return e.getId()})))}),[])}};t.prototype.raiseChartModelUpdateEvent=function(){var e={type:t.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(e)};t.prototype.raiseChartUpdatedEvent=function(){var e={type:t.EVENT_CHART_UPDATED};this.dispatchEvent(e)};t.prototype.raiseChartOptionsChangedEvent=function(){var e=this.getChartModel(),t=e.chartId,r=e.chartType;var n={type:Events.EVENT_CHART_OPTIONS_CHANGED,chartId:t,chartType:r,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(n)};t.prototype.raiseChartRangeSelectionChangedEvent=function(){var e={type:Events.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(e)};t.prototype.destroy=function(){e.prototype.destroy.call(this);if(this.rangeService){this.rangeService.setCellRanges([])}};t.EVENT_CHART_UPDATED="chartUpdated";t.EVENT_CHART_MODEL_UPDATE="chartModelUpdate";t.EVENT_CHART_TYPE_CHANGED="chartTypeChanged";t.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged";__decorate$19([Autowired("rangeService")],t.prototype,"rangeService",void 0);__decorate$19([PostConstruct],t.prototype,"init",null);return t}(BeanStub);var __extends$1D=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$18=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$k=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$9=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$k(arguments[t]));return e};var __values$7=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var DefaultDataPanelDef={groups:[{type:"categories",isOpen:true},{type:"series",isOpen:true},{type:"seriesChartType",isOpen:true}]};var ChartDataPanel=function(e){__extends$1D(t,e);function t(r,n){var i=e.call(this,t.TEMPLATE)||this;i.chartController=r;i.chartOptionsService=n;i.columnComps=new Map;return i}t.prototype.init=function(){this.updatePanels();this.addManagedListener(this.chartController,ChartController.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this));this.createAutoScrollService()};t.prototype.destroy=function(){this.clearComponents();e.prototype.destroy.call(this)};t.prototype.updatePanels=function(){var e=this;var t,r;var n=this.chartType;var i=this.chartController.getColStateForMenu(),o=i.dimensionCols,a=i.valueCols;var s=o.map((function(e){return e.colId})).concat(a.map((function(e){return e.colId})));this.chartType=this.chartController.getChartType();var l=this.getGroupExpandedState();if(_.areEqual(_.keys(this.columnComps),s)&&this.chartType===n){__spread$9(o,a).forEach((function(t){e.columnComps.get(t.colId).setValue(t.selected,true)}));if(this.chartController.isActiveXYChart()){var u=this.generateGetSeriesLabel();a.forEach((function(t){e.columnComps.get(t.colId).setLabel(u(t))}))}_.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup"));this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp);var c=(t=this.getDataPanelDef().groups)===null||t===void 0?void 0:t.reduce((function(e,t,r){var n=t.type;if(n==="seriesChartType"){return r}return e}),-1);if(c!==-1){this.createSeriesChartTypeGroup(a,c)}}else{this.clearComponents();(r=this.getDataPanelDef().groups)===null||r===void 0?void 0:r.forEach((function(t){var r=t.type;if(r==="categories"){e.createCategoriesGroup(o)}else if(r==="series"){e.createSeriesGroup(a)}else if(r==="seriesChartType"){e.createSeriesChartTypeGroup(a)}else{console.warn("AG Grid: invalid charts data panel group name supplied: '"+r+"'")}}))}this.restoreGroupExpandedState(l)};t.prototype.getGroupExpandedState=function(){var e=this;var t=[{groupType:"categories",comp:this.categoriesGroupComp},{groupType:"series",comp:this.seriesGroupComp},{groupType:"seriesChartType",comp:this.seriesChartTypeGroupComp}];return t.map((function(t){var r,n;var i=t.groupType,o=t.comp;var a=Boolean((n=(r=e.getDataPanelDef().groups)===null||r===void 0?void 0:r.find((function(e){var t=e.type;return t===i})))===null||n===void 0?void 0:n.isOpen);return!o?a:o.isExpanded()}))};t.prototype.restoreGroupExpandedState=function(e){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach((function(t,r){if(!t){return}t.toggleGroupExpand(e[r])}))};t.prototype.createAutoScrollService=function(){var e=this.getGui();this.autoScrollService=new AutoScrollService({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(t){return e.scrollTop=t}})};t.prototype.createComponent=function(e,t){var r=document.createElement("div");r.id=t;r.className="ag-chart-data-section";r.appendChild(e.getGui());return r};t.prototype.addComponent=function(e,t,r){var n=this.createComponent(t,r);e.appendChild(n)};t.prototype.addComponentAtIndex=function(e,t,r,n){var i=this.createComponent(t,r);e.insertBefore(i,e.children[n])};t.prototype.addChangeListener=function(e,t){var r=this;this.addManagedListener(e,AgAbstractField.EVENT_CHANGED,(function(){t.selected=e.getValue();r.chartController.updateForPanelChange(t)}))};t.prototype.createCategoriesGroup=function(e){var t=this;this.categoriesGroupComp=this.createBean(new AgGroupComponent({title:this.getCategoryGroupTitle(),enabled:true,suppressEnabledCheckbox:true,suppressOpenCloseIcons:false,cssIdentifier:"charts-data"}));var r="chartDimension"+this.getCompId();e.forEach((function(e){var n=t.categoriesGroupComp.createManagedBean(new AgRadioButton);n.setLabel(_.escapeString(e.displayName));n.setValue(e.selected);n.setInputName(r);t.addChangeListener(n,e);t.categoriesGroupComp.addItem(n);t.columnComps.set(e.colId,n)}));this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")};t.prototype.createSeriesGroup=function(e){var t=this;this.seriesGroupComp=this.createManagedBean(new AgGroupComponent({title:this.getSeriesGroupTitle(),enabled:true,suppressEnabledCheckbox:true,suppressOpenCloseIcons:false,cssIdentifier:"charts-data"}));if(this.chartController.isActiveXYChart()){var r=this.seriesGroupComp.createManagedBean(new AgToggleButton);r.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getPairedMode()).onValueChange((function(e){t.chartOptionsService.setPairedMode(!!e);t.chartController.updateForGridChange()}));this.seriesGroupComp.addItem(r)}var n=this.generateGetSeriesLabel();e.forEach((function(e){var r=t.seriesGroupComp.createManagedBean(new AgCheckbox);r.addCssClass("ag-data-select-checkbox");var i=n(e);r.setLabel(i);r.setValue(e.selected);t.addChangeListener(r,e);t.seriesGroupComp.addItem(r);t.columnComps.set(e.colId,r);t.addDragHandle(r,e)}));var i=this.getGui();var o=this.seriesGroupComp.getGui();this.addComponent(i,this.seriesGroupComp,"seriesGroup");var a={getIconName:function(){return DragAndDropService.ICON_MOVE},getContainer:function(){return o},onDragging:function(e){return t.onDragging(e)},onDragLeave:function(){return t.onDragLeave()},isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:true};this.dragAndDropService.addDropTarget(a);this.addDestroyFunc((function(){return t.dragAndDropService.removeDropTarget(a)}))};t.prototype.createSeriesChartTypeGroup=function(e,t){var r=this;if(!this.chartController.isComboChart()){return}this.seriesChartTypeGroupComp=this.createManagedBean(new AgGroupComponent({title:this.chartTranslationService.translate("seriesChartType"),enabled:true,suppressEnabledCheckbox:true,suppressOpenCloseIcons:false,cssIdentifier:"charts-data"}));var n=this.chartController.getSeriesChartTypes();e.forEach((function(e){if(!e.selected){return}var t=n.filter((function(t){return t.colId===e.colId}))[0];if(!t){return}var i=r.seriesChartTypeGroupComp.createManagedBean(new AgGroupComponent({title:e.displayName,enabled:true,suppressEnabledCheckbox:true,suppressOpenCloseIcons:true,cssIdentifier:"charts-format-sub-level"}));var o=r.seriesChartTypeGroupComp.createManagedBean(new AgCheckbox).setLabel(r.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(t.chartType)).setValue(!!t.secondaryAxis).onValueChange((function(t){return r.chartController.updateSeriesChartType(e.colId,undefined,t)}));i.addItem(o);var a=function(e,t){return r.chartTranslationService.translate(e,t)};var s=[{value:"line",text:a("line","Line")},{value:"area",text:a("area","Area")},{value:"stackedArea",text:a("stackedArea","StackedArea")},{value:"groupedColumn",text:a("groupedColumn","Grouped Column")},{value:"stackedColumn",text:a("stackedColumn","Stacked Column")}];var l=i.createManagedBean(new AgSelect);l.setLabelAlignment("left").setLabelWidth("flex").addOptions(s).setValue(t.chartType).onValueChange((function(t){return r.chartController.updateSeriesChartType(e.colId,t)}));i.addItem(l);r.seriesChartTypeGroupComp.addItem(i)}));if(t===undefined){this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup")}else{this.addComponentAtIndex(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup",t)}};t.prototype.addDragHandle=function(e,t){var r=this;var n=_.createIconNoSpan("columnDrag",this.gridOptionsService);n.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle");e.getGui().insertAdjacentElement("beforeend",n);var i={type:DragSourceType.ChartPanel,eElement:n,dragItemName:t.displayName,getDragItem:function(){return{columns:[t.column]}},onDragStopped:function(){return r.onDragStop()}};this.dragAndDropService.addDragSource(i,true);this.addDestroyFunc((function(){return r.dragAndDropService.removeDragSource(i)}))};t.prototype.generateGetSeriesLabel=function(){if(!this.chartController.isActiveXYChart()){return function(e){return _.escapeString(e.displayName)}}var e=this.chartType==="bubble";var t=this.isInPairedMode();var r=0;var n=new Map;n.set(0,"X");n.set(1,"Y");n.set(2,"size");return function(i){var o=_.escapeString(i.displayName);if(!i.selected){return o}var a;if(t){a=n.get(r%(e?3:2))}else{if(r===0){a="X"}else{a=e&&r%2===0?"size":"Y"}}r++;return o+" ("+a+")"}};t.prototype.getCategoryGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")};t.prototype.getSeriesGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")};t.prototype.getDataPanelDef=function(){var e;var t=(e=this.gridOptionsService.get("chartToolPanelsDef"))===null||e===void 0?void 0:e.dataPanel;return t?t:DefaultDataPanelDef};t.prototype.isInPairedMode=function(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")};t.prototype.clearComponents=function(){_.clearElement(this.getGui());this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp);this.seriesGroupComp=this.destroyBean(this.seriesGroupComp);this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp);this.columnComps.clear()};t.prototype.onDragging=function(e){var t=this.checkHoveredItem(e);if(!t){return}this.lastDraggedColumn=e.dragItem.columns[0];var r=t.comp,n=t.position;var i=this.lastHoveredItem||{},o=i.comp,a=i.position;if(r===o&&n===a){return}this.autoScrollService.check(e.event);this.clearHoveredItems();this.lastHoveredItem={comp:r,position:n};var s=r.getGui();s.classList.add("ag-list-item-hovered","ag-item-highlight-"+n)};t.prototype.checkHoveredItem=function(e){var t,r;if(_.missing(e.vDirection)){return null}var n=e.event;try{for(var i=__values$7(this.columnComps.values()),o=i.next();!o.done;o=i.next()){var a=o.value;var s=a.getGui();if(!s.querySelector(".ag-chart-data-column-drag-handle")){continue}var l=s.getBoundingClientRect();var u=n.clientY>=l.top&&n.clientY<=l.bottom;if(u){var c=s.clientHeight;var d=n.clientY>l.top+c/2?"bottom":"top";return{comp:a,position:d}}}}catch(e){t={error:e}}finally{try{if(o&&!o.done&&(r=i.return))r.call(i)}finally{if(t)throw t.error}}return null};t.prototype.onDragLeave=function(){this.clearHoveredItems()};t.prototype.onDragStop=function(){var e=this;if(this.lastHoveredItem){var t=this.chartController.getColStateForMenu(),r=t.dimensionCols,n=t.valueCols;var i=__spread$9(r,n).find((function(t){return t.column===e.lastDraggedColumn}));if(i){var o=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);if(this.lastHoveredItem.position==="bottom"){o++}i.order=o;this.chartController.updateForPanelChange(i)}}this.clearHoveredItems();this.lastDraggedColumn=undefined;this.autoScrollService.ensureCleared()};t.prototype.clearHoveredItems=function(){this.columnComps.forEach((function(e){e.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}));this.lastHoveredItem=undefined};t.prototype.isInterestedIn=function(e){return e===DragSourceType.ChartPanel};t.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>';__decorate$18([Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0);__decorate$18([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$18([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1C=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$17=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var FontPanel=function(e){__extends$1C(t,e);function t(t){var r=e.call(this)||this;r.activeComps=[];r.params=t;return r}t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:true};this.setTemplate(t.TEMPLATE,{fontGroup:e});this.initGroup();this.initFontFamilySelect();this.initFontWeightStyleSelect();this.initFontSizeSelect();this.initFontColorPicker()};t.prototype.addCompToPanel=function(e){this.fontGroup.addItem(e);this.activeComps.push(e)};t.prototype.setEnabled=function(e){this.fontGroup.setEnabled(e)};t.prototype.initGroup=function(){var e=this;this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(true).onEnableChange((function(t){if(e.params.setEnabled){e.params.setEnabled(t)}}))};t.prototype.initFontFamilySelect=function(){var e=this;var t=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"];var r=this.params.initialFont.family;var n=t[0];if(r){var i=t.map((function(e){return e.toLowerCase()}));var o=i.indexOf(r.toLowerCase());if(o>=0){n=t[o]}else{var a=_.capitalise(r);t.push(a);n=a}}var s=t.sort().map((function(e){return{value:e,text:e}}));this.familySelect.addOptions(s).setInputWidth("flex").setValue(""+n).onValueChange((function(t){return e.params.setFont({family:t})}))};t.prototype.initFontSizeSelect=function(){var e=this;var t=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36];var r=this.params.initialFont.size;if(!_.includes(t,r)){t.push(r)}var n=t.sort((function(e,t){return e-t})).map((function(e){return{value:""+e,text:""+e}}));this.sizeSelect.addOptions(n).setInputWidth("flex").setValue(""+r).onValueChange((function(t){return e.params.setFont({size:parseInt(t,10)})}));this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))};t.prototype.initFontWeightStyleSelect=function(){var e=this;var t=this.params.initialFont,r=t.weight,n=r===void 0?"normal":r,i=t.style,o=i===void 0?"normal":i;var a=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}];var s=a.find((function(e){return e.weight===n&&e.style===o}));if(!s){s={name:"predefined",weight:n,style:o};a.unshift(s)}var l=a.map((function(t){return{value:t.name,text:e.chartTranslationService.translate(t.name)}}));this.weightStyleSelect.addOptions(l).setInputWidth("flex").setValue(s.name).onValueChange((function(t){var r=a.find((function(e){return e.name===t}));e.params.setFont({weight:r.weight,style:r.style})}))};t.prototype.initFontColorPicker=function(){var e=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth(45).setValue(""+this.params.initialFont.color).onValueChange((function(t){return e.params.setFont({color:t})}))};t.prototype.addItemToPanel=function(e){this.fontGroup.addItem(e);this.activeComps.push(e)};t.prototype.destroyActiveComps=function(){var e=this;this.activeComps.forEach((function(t){_.removeFromParent(t.getGui());e.destroyBean(t)}))};t.prototype.destroy=function(){this.destroyActiveComps();e.prototype.destroy.call(this)};t.TEMPLATE='<div class="ag-font-panel">\n            <ag-group-component ref="fontGroup">\n                <ag-select ref="familySelect"></ag-select>\n                <ag-select ref="weightStyleSelect"></ag-select>\n                <div class="ag-charts-font-size-color">\n                    <ag-select ref="sizeSelect"></ag-select>\n                    <ag-color-picker ref="colorPicker"></ag-color-picker>\n                </div>\n            </ag-group-component>\n        </div>';__decorate$17([RefSelector("fontGroup")],t.prototype,"fontGroup",void 0);__decorate$17([RefSelector("familySelect")],t.prototype,"familySelect",void 0);__decorate$17([RefSelector("weightStyleSelect")],t.prototype,"weightStyleSelect",void 0);__decorate$17([RefSelector("sizeSelect")],t.prototype,"sizeSelect",void 0);__decorate$17([RefSelector("colorPicker")],t.prototype,"colorPicker",void 0);__decorate$17([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$17([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1B=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$16=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var LegendPanel=function(e){__extends$1B(t,e);function t(t){var r=t.chartOptionsService,n=t.isExpandedOnInit,i=n===void 0?false:n;var o=e.call(this)||this;o.activePanels=[];o.chartOptionsService=r;o.isExpandedOnInit=i;return o}t.prototype.init=function(){var e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{legendGroup:e});this.initLegendGroup();this.initLegendPosition();this.initLegendPadding();this.initLegendItems();this.initLabelPanel()};t.prototype.initLegendGroup=function(){var e=this;this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(false).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||false).toggleGroupExpand(this.isExpandedOnInit).onEnableChange((function(t){e.chartOptionsService.setChartOption("legend.enabled",t);e.legendGroup.toggleGroupExpand(true)}))};t.prototype.initLegendPosition=function(){var e=this;var t=["top","right","bottom","left"];this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth(80).addOptions(t.map((function(t){return{value:t,text:e.chartTranslationService.translate(t)}}))).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange((function(t){return e.chartOptionsService.setChartOption("legend.position",t)}))};t.prototype.initLegendPadding=function(){var e=this;var t=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(getMaxValue(t,200)).setValue(""+t).setTextFieldWidth(45).onValueChange((function(t){return e.chartOptionsService.setChartOption("legend.spacing",t)}))};t.prototype.initLegendItems=function(){var e=this;var t=function(t,r,n,i){var o=e.chartOptionsService.getChartOption("legend."+t);n.setLabel(e.chartTranslationService.translate(r)).setMaxValue(getMaxValue(o,i)).setValue(""+o).setTextFieldWidth(45).onValueChange((function(r){e.chartOptionsService.setChartOption("legend."+t,r)}))};t("item.marker.size","markerSize",this.markerSizeSlider,40);t("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10);t("item.marker.padding","itemSpacing",this.markerPaddingSlider,20);t("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50);t("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)};t.prototype.initLabelPanel=function(){var e=this;var t=this.chartOptionsService;var r={family:t.getChartOption("legend.item.label.fontFamily"),style:t.getChartOption("legend.item.label.fontStyle"),weight:t.getChartOption("legend.item.label.fontWeight"),size:t.getChartOption("legend.item.label.fontSize"),color:t.getChartOption("legend.item.label.color")};var n=function(t){var r=e.chartOptionsService;if(t.family){r.setChartOption("legend.item.label.fontFamily",t.family)}if(t.weight){r.setChartOption("legend.item.label.fontWeight",t.weight)}if(t.style){r.setChartOption("legend.item.label.fontStyle",t.style)}if(t.size){r.setChartOption("legend.item.label.fontSize",t.size)}if(t.color){r.setChartOption("legend.item.label.color",t.color)}};var i={enabled:true,suppressEnabledCheckbox:true,initialFont:r,setFont:n};var o=this.createBean(new FontPanel(i));this.legendGroup.addItem(o);this.activePanels.push(o)};t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach((function(t){_.removeFromParent(t.getGui());e.destroyBean(t)}))};t.prototype.destroy=function(){this.destroyActivePanels();e.prototype.destroy.call(this)};t.TEMPLATE='<div>\n            <ag-group-component ref="legendGroup">\n                <ag-select ref="legendPositionSelect"></ag-select>\n                <ag-slider ref="legendPaddingSlider"></ag-slider>\n                <ag-slider ref="markerSizeSlider"></ag-slider>\n                <ag-slider ref="markerStrokeSlider"></ag-slider>\n                <ag-slider ref="markerPaddingSlider"></ag-slider>\n                <ag-slider ref="itemPaddingXSlider"></ag-slider>\n                <ag-slider ref="itemPaddingYSlider"></ag-slider>\n            </ag-group-component>\n        </div>';__decorate$16([RefSelector("legendGroup")],t.prototype,"legendGroup",void 0);__decorate$16([RefSelector("legendPositionSelect")],t.prototype,"legendPositionSelect",void 0);__decorate$16([RefSelector("legendPaddingSlider")],t.prototype,"legendPaddingSlider",void 0);__decorate$16([RefSelector("markerSizeSlider")],t.prototype,"markerSizeSlider",void 0);__decorate$16([RefSelector("markerStrokeSlider")],t.prototype,"markerStrokeSlider",void 0);__decorate$16([RefSelector("markerPaddingSlider")],t.prototype,"markerPaddingSlider",void 0);__decorate$16([RefSelector("itemPaddingXSlider")],t.prototype,"itemPaddingXSlider",void 0);__decorate$16([RefSelector("itemPaddingYSlider")],t.prototype,"itemPaddingYSlider",void 0);__decorate$16([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$16([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1A=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$15=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var AxisTicksPanel=function(e){__extends$1A(t,e);function t(t){var r=e.call(this)||this;r.chartOptionsService=t;return r}t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:true};this.setTemplate(t.TEMPLATE,{axisTicksGroup:e});this.initAxisTicks()};t.prototype.initAxisTicks=function(){var e=this;this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(true).hideEnabledCheckbox(true);this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange((function(t){return e.chartOptionsService.setAxisProperty("tick.color",t)}));var t=function(t,r,n,i){var o=e.chartOptionsService.getAxisProperty(t);r.setLabel(n).setMaxValue(getMaxValue(o,i)).setValue(""+o).setTextFieldWidth(45).onValueChange((function(r){return e.chartOptionsService.setAxisProperty(t,r)}))};t("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10);t("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)};t.TEMPLATE='<div>\n            <ag-group-component ref="axisTicksGroup">\n                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>';__decorate$15([RefSelector("axisTicksGroup")],t.prototype,"axisTicksGroup",void 0);__decorate$15([RefSelector("axisTicksColorPicker")],t.prototype,"axisTicksColorPicker",void 0);__decorate$15([RefSelector("axisTicksWidthSlider")],t.prototype,"axisTicksWidthSlider",void 0);__decorate$15([RefSelector("axisTicksSizeSlider")],t.prototype,"axisTicksSizeSlider",void 0);__decorate$15([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$15([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1z=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$14=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var AgAngleSelect=function(e){__extends$1z(t,e);function t(r){var n=e.call(this,r,t.TEMPLATE)||this;n.radius=0;n.offsetX=0;n.offsetY=0;return n}t.prototype.postConstruct=function(){var t=this;e.prototype.postConstruct.call(this);this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(e){t.parentCircleRect=t.eParentCircle.getBoundingClientRect()},onDragging:function(e){return t.calculateAngleDrag(e)},onDragStop:function(){}};this.dragService.addDragSource(this.dragListener);this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(""+this.degrees).onValueChange((function(e){if(e==null||e===""){e="0"}e=t.eAngleValue.normalizeValue(e);var r=parseFloat(e);if(r>180){r=r-360}t.setValue(r)}));this.updateNumberInput();if(_.exists(this.getValue())){this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString())}this.addManagedListener(this,AgAbstractField.EVENT_CHANGED,(function(){var e=t.gridOptionsService.getDocument();if(t.eAngleValue.getInputElement().contains(e.activeElement)){return}t.updateNumberInput()}))};t.prototype.updateNumberInput=function(){var e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())};t.prototype.positionChildCircle=function(e){var t=this.parentCircleRect||{width:24,height:24};var r=this.eChildCircle;var n=t.width/2;var i=t.height/2;r.style.left=n+Math.cos(e)*8+"px";r.style.top=i+Math.sin(e)*8+"px"};t.prototype.calculatePolar=function(){var e=this.offsetX;var t=this.offsetY;var r=Math.atan2(t,e);this.degrees=this.toDegrees(r);this.radius=Math.sqrt(e*e+t*t);this.positionChildCircle(r)};t.prototype.calculateCartesian=function(){var e=this.toRadians(this.getValue());var t=this.getRadius();this.setOffsetX(Math.cos(e)*t).setOffsetY(Math.sin(e)*t)};t.prototype.setOffsetX=function(e){if(this.offsetX!==e){this.offsetX=e;this.calculatePolar()}return this};t.prototype.setOffsetY=function(e){if(this.offsetY!==e){this.offsetY=e;this.calculatePolar()}return this};t.prototype.calculateAngleDrag=function(e){var t=this.parentCircleRect;var r=t.width/2;var n=t.height/2;var i=e.clientX-t.left;var o=e.clientY-t.top;var a=i-r;var s=o-n;var l=Math.atan2(s,a);this.setValue(l,true)};t.prototype.toDegrees=function(e){return e/Math.PI*180};t.prototype.toRadians=function(e){return e/180*Math.PI};t.prototype.normalizeNegativeValue=function(e){return e<0?360+e:e};t.prototype.normalizeAngle180=function(e){e%=Math.PI*2;if(e<-Math.PI){e+=Math.PI*2}else if(e>=Math.PI){e-=Math.PI*2}return e};t.prototype.getRadius=function(){return this.radius};t.prototype.setRadius=function(e){if(this.radius===e){return this}this.radius=e;this.calculateCartesian();return this};t.prototype.onValueChange=function(e){var t=this;this.addManagedListener(this,AgAbstractField.EVENT_CHANGED,(function(){e(t.degrees)}));return this};t.prototype.getValue=function(e){return e?this.toRadians(this.degrees):this.degrees};t.prototype.setValue=function(e,t){var r;if(!t){r=this.normalizeAngle180(this.toRadians(e))}else{r=e}e=this.toDegrees(r);if(this.degrees!==e){this.degrees=Math.floor(e);this.calculateCartesian();this.positionChildCircle(r);this.dispatchEvent({type:AgAbstractField.EVENT_CHANGED})}return this};t.prototype.setWidth=function(e){_.setFixedWidth(this.getGui(),e);return this};t.prototype.setDisabled=function(t){e.prototype.setDisabled.call(this,t);this.eAngleValue.setDisabled(t);return this};t.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener);e.prototype.destroy.call(this)};t.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>';__decorate$14([RefSelector("eLabel")],t.prototype,"eLabel",void 0);__decorate$14([RefSelector("eParentCircle")],t.prototype,"eParentCircle",void 0);__decorate$14([RefSelector("eChildCircle")],t.prototype,"eChildCircle",void 0);__decorate$14([RefSelector("eAngleValue")],t.prototype,"eAngleValue",void 0);__decorate$14([Autowired("dragService")],t.prototype,"dragService",void 0);return t}(AgAbstractLabel);var __extends$1y=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$13=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var AxisPanel=function(e){__extends$1y(t,e);function t(t){var r=t.chartController,n=t.chartOptionsService,i=t.isExpandedOnInit,o=i===void 0?false:i;var a=e.call(this)||this;a.activePanels=[];a.axisLabelUpdateFuncs=[];a.prevXRotation=0;a.prevYRotation=0;a.chartController=r;a.chartOptionsService=n;a.isExpandedOnInit=o;return a}t.prototype.init=function(){var e=this;var r={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{axisGroup:r});this.initAxis();this.initAxisTicks();this.initAxisLabels();var n=function(){return e.axisLabelUpdateFuncs.forEach((function(e){return e()}))};this.addManagedListener(this.chartController,ChartController.EVENT_CHART_UPDATED,n)};t.prototype.initAxis=function(){var e=this;this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(true);this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange((function(t){return e.chartOptionsService.setAxisProperty("line.color",t)}));var t=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(getMaxValue(t,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue(""+t).onValueChange((function(t){return e.chartOptionsService.setAxisProperty("line.width",t)}))};t.prototype.initAxisTicks=function(){var e=this.createBean(new AxisTicksPanel(this.chartOptionsService));this.axisGroup.addItem(e);this.activePanels.push(e)};t.prototype.initAxisLabels=function(){var e=this;var t={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")};var r=function(t){if(t.family){e.chartOptionsService.setAxisProperty("label.fontFamily",t.family)}if(t.weight){e.chartOptionsService.setAxisProperty("label.fontWeight",t.weight)}if(t.style){e.chartOptionsService.setAxisProperty("label.fontStyle",t.style)}if(t.size){e.chartOptionsService.setAxisProperty("label.fontSize",t.size)}if(t.color){e.chartOptionsService.setAxisProperty("label.color",t.color)}};var n={name:this.translate("labels"),enabled:true,suppressEnabledCheckbox:true,initialFont:t,setFont:r};var i=this.createBean(new FontPanel(n));this.axisGroup.addItem(i);this.activePanels.push(i);this.addAdditionalLabelComps(i)};t.prototype.addAdditionalLabelComps=function(e){this.addLabelPadding(e);var t=this.createRotationWidgets(),r=t.xRotationComp,n=t.yRotationComp;var i=this.initLabelRotations(r,n);e.addCompToPanel(i);e.addCompToPanel(r);e.addCompToPanel(n)};t.prototype.initLabelRotations=function(e,t){var r=this;var n=function(e){return r.chartOptionsService.getLabelRotation(e)};var i=function(e,t){r.chartOptionsService.setLabelRotation(e,t)};var o=function(o){r.chartOptionsService.setAxisProperty("label.autoRotate",o);if(o){r.prevXRotation=n("xAxis");r.prevYRotation=n("yAxis");i("xAxis",undefined);i("yAxis",undefined)}else{i("xAxis",r.prevXRotation);i("yAxis",r.prevYRotation)}e.setDisabled(o);t.setDisabled(o)};var a=function(){var e=n("xAxis");var t=n("yAxis");if(e==undefined&&t==undefined){return r.chartOptionsService.getAxisProperty("label.autoRotate")}return false};var s=a();var l=this.createBean(new AgCheckbox).setLabel(this.translate("autoRotate")).setValue(s).onValueChange(o);e.setDisabled(s);t.setDisabled(s);return l};t.prototype.createRotationWidgets=function(){var e=this;var t=String.fromCharCode(176);var r=function(r,n){var i=e.chartTranslationService.translate(r)+" "+t;var o=e.chartOptionsService.getLabelRotation(n);var a=(new AgAngleSelect).setLabel(i).setLabelWidth("flex").setValue(o||0).onValueChange((function(t){return e.chartOptionsService.setLabelRotation(n,t)}));e.axisLabelUpdateFuncs.push((function(){var t=e.chartOptionsService.getLabelRotation(n);a.setValue(t||0)}));return e.createBean(a)};return{xRotationComp:r("xRotation","xAxis"),yRotationComp:r("yRotation","yAxis")}};t.prototype.addLabelPadding=function(e){var t=this;var r=this.createBean(new AgSlider);var n=this.chartOptionsService.getAxisProperty("label.padding");r.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(getMaxValue(n,30)).setValue(""+n).setTextFieldWidth(45).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("label.padding",e)}));e.addCompToPanel(r)};t.prototype.translate=function(e,t){return this.chartTranslationService.translate(e,t)};t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach((function(t){_.removeFromParent(t.getGui());e.destroyBean(t)}))};t.prototype.destroy=function(){this.destroyActivePanels();e.prototype.destroy.call(this)};t.TEMPLATE='<div>\n            <ag-group-component ref="axisGroup">\n                <ag-color-picker ref="axisColorInput"></ag-color-picker>\n                <ag-slider ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>';__decorate$13([RefSelector("axisGroup")],t.prototype,"axisGroup",void 0);__decorate$13([RefSelector("axisColorInput")],t.prototype,"axisColorInput",void 0);__decorate$13([RefSelector("axisLineWidthSlider")],t.prototype,"axisLineWidthSlider",void 0);__decorate$13([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$13([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1x=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$12=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var NavigatorPanel=function(e){__extends$1x(t,e);function t(t){var r=t.chartOptionsService,n=t.isExpandedOnInit,i=n===void 0?false:n;var o=e.call(this)||this;o.chartOptionsService=r;o.isExpandedOnInit=i;return o}t.prototype.init=function(){var e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{navigatorGroup:e});this.initNavigator()};t.prototype.initNavigator=function(){var e=this;var t=this.chartTranslationService;this.navigatorGroup.setTitle(t.translate("navigator")).hideEnabledCheckbox(false).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||false).onEnableChange((function(t){e.chartOptionsService.setChartOption("navigator.enabled",t);e.navigatorGroup.toggleGroupExpand(true)})).toggleGroupExpand(this.isExpandedOnInit);var r=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(t.translate("height")).setMinValue(10).setMaxValue(getMaxValue(r,60)).setTextFieldWidth(45).setValue(""+(r||30)).onValueChange((function(t){return e.chartOptionsService.setChartOption("navigator.height",t)}))};t.prototype.destroy=function(){e.prototype.destroy.call(this)};t.TEMPLATE='<div>\n            <ag-group-component ref="navigatorGroup">\n                <ag-slider ref="navigatorHeightSlider"></ag-slider>\n            </ag-group-component>\n        </div>';__decorate$12([RefSelector("navigatorGroup")],t.prototype,"navigatorGroup",void 0);__decorate$12([RefSelector("navigatorHeightSlider")],t.prototype,"navigatorHeightSlider",void 0);__decorate$12([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$12([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1w=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$11=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var PaddingPanel=function(e){__extends$1w(t,e);function t(t,r){var n=e.call(this)||this;n.chartOptionsService=t;n.chartController=r;return n}t.prototype.init=function(){var e=this;var r={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:true};this.setTemplate(t.TEMPLATE,{chartPaddingGroup:r});this.addManagedListener(this.eventService,Events.EVENT_CHART_OPTIONS_CHANGED,(function(t){e.updateTopPadding(t.chartOptions)}));this.initGroup();this.initChartPaddingItems()};t.prototype.initGroup=function(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(true).hideEnabledCheckbox(true)};t.prototype.initChartPaddingItems=function(){var e=this;var t=function(t,r){var n=e.chartOptionsService.getChartOption("padding."+t);r.setLabel(e.chartTranslationService.translate(t)).setMaxValue(getMaxValue(n,200)).setValue(""+n).setTextFieldWidth(45).onValueChange((function(r){return e.chartOptionsService.setChartOption("padding."+t,r)}))};t("top",this.paddingTopSlider);t("right",this.paddingRightSlider);t("bottom",this.paddingBottomSlider);t("left",this.paddingLeftSlider)};t.prototype.updateTopPadding=function(e){var t,r;var n=this.chartController.getChartSeriesTypes()[0];var i=(r=(t=e[n])===null||t===void 0?void 0:t.padding)===null||r===void 0?void 0:r.top;if(i!=null){this.paddingTopSlider.setValue(i)}};t.TEMPLATE='<div>\n            <ag-group-component ref="chartPaddingGroup">\n                <ag-slider ref="paddingTopSlider"></ag-slider>\n                <ag-slider ref="paddingRightSlider"></ag-slider>\n                <ag-slider ref="paddingBottomSlider"></ag-slider>\n                <ag-slider ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>';__decorate$11([RefSelector("chartPaddingGroup")],t.prototype,"chartPaddingGroup",void 0);__decorate$11([RefSelector("paddingTopSlider")],t.prototype,"paddingTopSlider",void 0);__decorate$11([RefSelector("paddingRightSlider")],t.prototype,"paddingRightSlider",void 0);__decorate$11([RefSelector("paddingBottomSlider")],t.prototype,"paddingBottomSlider",void 0);__decorate$11([RefSelector("paddingLeftSlider")],t.prototype,"paddingLeftSlider",void 0);__decorate$11([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$11([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1v=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$10=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var BackgroundPanel=function(e){__extends$1v(t,e);function t(t){var r=e.call(this)||this;r.chartOptionsService=t;return r}t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:true};this.setTemplate(t.TEMPLATE,{chartBackgroundGroup:e});this.initGroup();this.initColorPicker()};t.prototype.initGroup=function(){var e=this;this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(true).hideEnabledCheckbox(false).onEnableChange((function(t){return e.chartOptionsService.setChartOption("background.visible",t)}))};t.prototype.initColorPicker=function(){var e=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange((function(t){return e.chartOptionsService.setChartOption("background.fill",t)}))};t.TEMPLATE='<div>\n            <ag-group-component ref="chartBackgroundGroup">\n                <ag-color-picker ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>';__decorate$10([RefSelector("chartBackgroundGroup")],t.prototype,"group",void 0);__decorate$10([RefSelector("colorPicker")],t.prototype,"colorPicker",void 0);__decorate$10([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$10([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1u=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$$=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var TitlePanel=function(e){__extends$1u(t,e);function t(r){var n=e.call(this,t.TEMPLATE)||this;n.chartOptionsService=r;n.activePanels=[];return n}t.prototype.init=function(){this.initFontPanel();this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")};t.prototype.hasTitle=function(){var e=this.getOption("title");return e&&e.enabled&&e.text&&e.text.length>0};t.prototype.initFontPanel=function(){var e=this;var t=this.hasTitle();var r=function(t,r){if(t.family){e.setOption("title.fontFamily",t.family,r)}if(t.weight){e.setOption("title.fontWeight",t.weight,r)}if(t.style){e.setOption("title.fontStyle",t.style,r)}if(t.size){e.setOption("title.fontSize",t.size,r)}if(t.color){e.setOption("title.color",t.color,r)}};var n={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};if(!t){r(n,true)}var i={name:this.chartTranslationService.translate("title"),enabled:t,suppressEnabledCheckbox:false,initialFont:n,setFont:r,setEnabled:function(t){if(e.toolbarExists()){var r=e.getOption("padding.top");e.setOption("padding.top",t?r-20:r+20)}e.setOption("title.enabled",t);var n=e.getOption("title.text");var i=n==="Title"||(n===null||n===void 0?void 0:n.trim().length)===0;if(t&&i){e.setOption("title.text",e.titlePlaceholder)}}};var o=this.createBean(new FontPanel(i));o.addItemToPanel(this.createSpacingSlicer());this.getGui().appendChild(o.getGui());this.activePanels.push(o);this.addManagedListener(this.eventService,"chartTitleEdit",(function(){o.setEnabled(e.hasTitle())}))};t.prototype.createSpacingSlicer=function(){var e=this;var t=this.createBean(new AgSlider);var r=this.chartOptionsService.getChartOption("title.spacing");t.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Math.max(r,100)).setValue(""+r).setTextFieldWidth(45).onValueChange((function(t){return e.chartOptionsService.setChartOption("title.spacing",t)}));return t};t.prototype.toolbarExists=function(){var e=this.gridOptionsService.getCallback("getChartToolbarItems");if(!e){return true}var t={defaultItems:["chartUnlink","chartDownload"]};var r=["chartLink","chartUnlink","chartDownload"];return r.some((function(r){var n;return(n=e&&e(t))===null||n===void 0?void 0:n.includes(r)}))};t.prototype.getOption=function(e){return this.chartOptionsService.getChartOption(e)};t.prototype.setOption=function(e,t,r){this.chartOptionsService.setChartOption(e,t,r)};t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach((function(t){_.removeFromParent(t.getGui());e.destroyBean(t)}))};t.prototype.destroy=function(){this.destroyActivePanels();e.prototype.destroy.call(this)};t.TEMPLATE="<div></div>";__decorate$$([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$$([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1t=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$_=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ChartPanel=function(e){__extends$1t(t,e);function t(t){var r=t.chartController,n=t.chartOptionsService,i=t.isExpandedOnInit,o=i===void 0?false:i;var a=e.call(this)||this;a.activePanels=[];a.chartController=r;a.chartOptionsService=n;a.isExpandedOnInit=o;return a}t.prototype.init=function(){var e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{chartGroup:e});this.initGroup();this.initTitles();this.initPaddingPanel();this.initBackgroundPanel()};t.prototype.initGroup=function(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(true)};t.prototype.initTitles=function(){var e=this.createBean(new TitlePanel(this.chartOptionsService));this.chartGroup.addItem(e);this.activePanels.push(e)};t.prototype.initPaddingPanel=function(){var e=this.createBean(new PaddingPanel(this.chartOptionsService,this.chartController));this.chartGroup.addItem(e);this.activePanels.push(e)};t.prototype.initBackgroundPanel=function(){var e=this.createBean(new BackgroundPanel(this.chartOptionsService));this.chartGroup.addItem(e);this.activePanels.push(e)};t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach((function(t){_.removeFromParent(t.getGui());e.destroyBean(t)}))};t.prototype.destroy=function(){this.destroyActivePanels();e.prototype.destroy.call(this)};t.TEMPLATE='<div>\n            <ag-group-component ref="chartGroup"></ag-group-component>\n        </div>';__decorate$_([RefSelector("chartGroup")],t.prototype,"chartGroup",void 0);__decorate$_([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$_([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1s=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$Z=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ShadowPanel=function(e){__extends$1s(t,e);function t(t,r){var n=e.call(this)||this;n.chartOptionsService=t;n.getSelectedSeries=r;return n}t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:true};this.setTemplate(t.TEMPLATE,{shadowGroup:e});this.shadowBlurSlider.setTextFieldWidth(45);this.shadowXOffsetSlider.setTextFieldWidth(45);this.shadowYOffsetSlider.setTextFieldWidth(45);this.initSeriesShadow()};t.prototype.initSeriesShadow=function(){var e=this;this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(true).hideEnabledCheckbox(false).onEnableChange((function(t){return e.chartOptionsService.setSeriesOption("shadow.enabled",t,e.getSelectedSeries())}));this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange((function(t){return e.chartOptionsService.setSeriesOption("shadow.color",t,e.getSelectedSeries())}));var t=function(t,r,n,i){var o=e.chartOptionsService.getSeriesOption("shadow."+r,e.getSelectedSeries());t.setLabel(e.chartTranslationService.translate(r)).setMinValue(n).setMaxValue(getMaxValue(o,i)).setValue(""+o).onValueChange((function(t){return e.chartOptionsService.setSeriesOption("shadow."+r,t,e.getSelectedSeries())}))};t(this.shadowBlurSlider,"blur",0,20);t(this.shadowXOffsetSlider,"xOffset",-10,10);t(this.shadowYOffsetSlider,"yOffset",-10,10)};t.TEMPLATE='<div>\n            <ag-group-component ref="shadowGroup">\n                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider ref="shadowBlurSlider"></ag-slider>\n                <ag-slider ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>';__decorate$Z([RefSelector("shadowGroup")],t.prototype,"shadowGroup",void 0);__decorate$Z([RefSelector("shadowColorPicker")],t.prototype,"shadowColorPicker",void 0);__decorate$Z([RefSelector("shadowBlurSlider")],t.prototype,"shadowBlurSlider",void 0);__decorate$Z([RefSelector("shadowXOffsetSlider")],t.prototype,"shadowXOffsetSlider",void 0);__decorate$Z([RefSelector("shadowYOffsetSlider")],t.prototype,"shadowYOffsetSlider",void 0);__decorate$Z([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$Z([PostConstruct],t.prototype,"init",null);return t}(Component);function initFontPanelParams(e){var t=e.labelName,r=e.chartOptionsService,n=e.getSelectedSeries,i=e.seriesOptionLabelProperty;var o=function(e){return i+"."+e};var a=function(e){var t=o(e);return r.getSeriesOption(t,n())};var s=function(e,t){var i=o(e);r.setSeriesOption(i,t,n())};var l={family:a("fontFamily"),style:a("fontStyle"),weight:a("fontWeight"),size:a("fontSize"),color:a("color")};var u=function(e){if(e.family){s("fontFamily",e.family)}if(e.weight){s("fontWeight",e.weight)}if(e.style){s("fontStyle",e.style)}if(e.size){s("fontSize",e.size)}if(e.color){s("color",e.color)}};var c={name:t,enabled:a("enabled")||false,setEnabled:function(e){return s("enabled",e)},suppressEnabledCheckbox:false,initialFont:l,setFont:u};return c}var __extends$1r=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$Y=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var MarkersPanel=function(e){__extends$1r(t,e);function t(t,r){var n=e.call(this)||this;n.chartOptionsService=t;n.getSelectedSeries=r;return n}t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{seriesMarkersGroup:e});this.initMarkers()};t.prototype.initMarkers=function(){var e=this;var t=[{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}];this.seriesMarkerShapeSelect.addOptions(t).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange((function(t){return e.setSeriesOption("marker.shape",t)}));var r=this.chartOptionsService.getChartType();var n=_.includes(["scatter","bubble"],r);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(n).setEnabled(this.getSeriesOption("marker.enabled")||false).hideOpenCloseIcons(true).onEnableChange((function(t){return e.setSeriesOption("marker.enabled",t)}));var i=function(t,r,n,i){var o=e.getSeriesOption(t);r.setLabel(e.chartTranslationService.translate(n)).setMaxValue(getMaxValue(o,i)).setValue(""+o).setTextFieldWidth(45).onValueChange((function(r){return e.setSeriesOption(t,r)}))};if(r==="bubble"){i("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60);i("marker.size",this.seriesMarkerSizeSlider,"minSize",60)}else{this.seriesMarkerMinSizeSlider.setDisplayed(false);i("marker.size",this.seriesMarkerSizeSlider,"size",60)}i("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)};t.prototype.getSeriesOption=function(e){return this.chartOptionsService.getSeriesOption(e,this.getSelectedSeries())};t.prototype.setSeriesOption=function(e,t){this.chartOptionsService.setSeriesOption(e,t,this.getSelectedSeries())};t.TEMPLATE='<div>\n            <ag-group-component ref="seriesMarkersGroup">\n                <ag-select ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>';__decorate$Y([RefSelector("seriesMarkersGroup")],t.prototype,"seriesMarkersGroup",void 0);__decorate$Y([RefSelector("seriesMarkerShapeSelect")],t.prototype,"seriesMarkerShapeSelect",void 0);__decorate$Y([RefSelector("seriesMarkerSizeSlider")],t.prototype,"seriesMarkerSizeSlider",void 0);__decorate$Y([RefSelector("seriesMarkerMinSizeSlider")],t.prototype,"seriesMarkerMinSizeSlider",void 0);__decorate$Y([RefSelector("seriesMarkerStrokeWidthSlider")],t.prototype,"seriesMarkerStrokeWidthSlider",void 0);__decorate$Y([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$Y([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1q=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$X=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var CalloutPanel=function(e){__extends$1q(t,e);function t(t,r){var n=e.call(this)||this;n.chartOptionsService=t;n.getSelectedSeries=r;return n}t.prototype.init=function(){var e={cssIdentifier:"charts-format-sub-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{calloutGroup:e});this.initCalloutOptions()};t.prototype.initCalloutOptions=function(){var e=this;this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(true).hideOpenCloseIcons(true).hideEnabledCheckbox(true);var t=function(t,r,n,i){var o=e.chartOptionsService.getSeriesOption(t,e.getSelectedSeries());r.setLabel(e.chartTranslationService.translate(n)).setMaxValue(getMaxValue(o,i)).setValue(""+o).setTextFieldWidth(45).onValueChange((function(r){return e.chartOptionsService.setSeriesOption(t,r,e.getSelectedSeries())}))};t("calloutLine.length",this.calloutLengthSlider,"length",40);t("calloutLine.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10);t("calloutLabel.offset",this.labelOffsetSlider,"offset",30)};t.TEMPLATE='<div>\n            <ag-group-component ref="calloutGroup">\n                <ag-slider ref="calloutLengthSlider"></ag-slider>\n                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>';__decorate$X([RefSelector("calloutGroup")],t.prototype,"calloutGroup",void 0);__decorate$X([RefSelector("calloutLengthSlider")],t.prototype,"calloutLengthSlider",void 0);__decorate$X([RefSelector("calloutStrokeWidthSlider")],t.prototype,"calloutStrokeWidthSlider",void 0);__decorate$X([RefSelector("labelOffsetSlider")],t.prototype,"labelOffsetSlider",void 0);__decorate$X([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$X([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1p=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$W=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var SeriesPanel=function(e){__extends$1p(t,e);function t(t){var r=t.chartController,n=t.chartOptionsService,i=t.seriesType,o=t.isExpandedOnInit,a=o===void 0?false:o;var s=e.call(this)||this;s.activePanels=[];s.widgetFuncs={lineWidth:function(){return s.initLineWidth()},strokeWidth:function(){return s.initStrokeWidth()},lineDash:function(){return s.initLineDash()},lineOpacity:function(){return s.initLineOpacity()},fillOpacity:function(){return s.initFillOpacity()},markers:function(){return s.initMarkers()},labels:function(){return s.initLabels()},shadow:function(){return s.initShadow()},tooltips:function(){return s.initTooltips()},bins:function(){return s.initBins()}};s.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]};s.chartController=r;s.chartOptionsService=n;s.seriesType=i||s.getChartSeriesType();s.isExpandedOnInit=a;return s}t.prototype.init=function(){var e={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(t.TEMPLATE,{seriesGroup:e});this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(true);this.addManagedListener(this.chartController,ChartController.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this));this.refreshWidgets()};t.prototype.refreshWidgets=function(){var e=this;this.destroyActivePanels();var t=this.chartController.getChartProxy().getChart();t.waitForUpdate().then((function(){if(e.chartController.isComboChart()){e.updateSeriesType();e.initSeriesSelect()}e.seriesWidgetMappings[e.seriesType].forEach((function(t){return e.widgetFuncs[t]()}))}))};t.prototype.initSeriesSelect=function(){var e=this;var t=this.seriesGroup.createManagedBean(new AgSelect);t.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(100).addOptions(this.getSeriesSelectOptions()).setValue(""+this.seriesType).onValueChange((function(t){e.seriesType=t;e.refreshWidgets()}));this.seriesGroup.addItem(t);this.activePanels.push(t)};t.prototype.initTooltips=function(){var e=this;var t=this.createBean(new AgToggleButton);t.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.getSeriesOption("tooltip.enabled")||false).onValueChange((function(t){return e.setSeriesOption("tooltip.enabled",t)}));this.addWidget(t)};t.prototype.initStrokeWidth=function(){var e=this;var t=this.getSeriesOption("strokeWidth");var r=this.createBean(new AgSlider);r.setLabel(this.translate("strokeWidth")).setMaxValue(getMaxValue(t,10)).setTextFieldWidth(45).setValue(""+t).onValueChange((function(t){return e.setSeriesOption("strokeWidth",t)}));this.addWidget(r)};t.prototype.initLineWidth=function(){var e=this;var t=this.getSeriesOption("strokeWidth");var r=this.createBean(new AgSlider);r.setLabel(this.translate("lineWidth")).setMaxValue(getMaxValue(t,10)).setTextFieldWidth(45).setValue(""+t).onValueChange((function(t){return e.setSeriesOption("strokeWidth",t)}));this.addWidget(r)};t.prototype.initLineDash=function(){var e=this;var t=this.getSeriesOption("lineDash");var r=t?t[0]:0;var n=this.createBean(new AgSlider);n.setLabel(this.translate("lineDash")).setMaxValue(getMaxValue(r,30)).setTextFieldWidth(45).setValue(""+r).onValueChange((function(t){return e.setSeriesOption("lineDash",[t])}));this.addWidget(n)};t.prototype.initLineOpacity=function(){var e=this;var t=this.getSeriesOption("strokeOpacity");var r=this.createBean(new AgSlider);r.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(getMaxValue(t,1)).setTextFieldWidth(45).setValue(""+t).onValueChange((function(t){return e.setSeriesOption("strokeOpacity",t)}));this.addWidget(r)};t.prototype.initFillOpacity=function(){var e=this;var t=this.getSeriesOption("fillOpacity");var r=this.createBean(new AgSlider);r.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(getMaxValue(t,1)).setTextFieldWidth(45).setValue(""+t).onValueChange((function(t){return e.setSeriesOption("fillOpacity",t)}));this.addWidget(r)};t.prototype.initLabels=function(){var e=this;var t=this.seriesType==="pie"?"calloutLabel":"label";var r=this.seriesType==="pie"?this.chartTranslationService.translate("calloutLabels"):this.chartTranslationService.translate("labels");var n=initFontPanelParams({labelName:r,chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return e.seriesType},seriesOptionLabelProperty:t});var i=this.createBean(new FontPanel(n));if(this.seriesType==="pie"){var o=this.createBean(new CalloutPanel(this.chartOptionsService,(function(){return e.seriesType})));i.addCompToPanel(o);this.activePanels.push(o)}this.addWidget(i);if(this.seriesType==="pie"){var a=initFontPanelParams({labelName:this.chartTranslationService.translate("sectorLabels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return e.seriesType},seriesOptionLabelProperty:"sectorLabel"});var s=this.createBean(new FontPanel(a));var l=this.getSectorLabelPositionRatio();s.addCompToPanel(l);this.addWidget(s)}};t.prototype.getSectorLabelPositionRatio=function(){var e=this;var t="sectorLabel.positionRatio";var r=this.chartOptionsService.getSeriesOption(t,this.seriesType);var n=this.createBean(new AgSlider);return n.setLabel(this.translate("positionRatio")).setStep(.05).setMaxValue(getMaxValue(r,1)).setTextFieldWidth(45).setValue(""+r).onValueChange((function(r){return e.chartOptionsService.setSeriesOption(t,r,e.seriesType)}))};t.prototype.initShadow=function(){var e=this;var t=this.createBean(new ShadowPanel(this.chartOptionsService,(function(){return e.seriesType})));this.addWidget(t)};t.prototype.initMarkers=function(){var e=this;var t=this.createBean(new MarkersPanel(this.chartOptionsService,(function(){return e.seriesType})));this.addWidget(t)};t.prototype.initBins=function(){var e=this;var t=this.getSeriesOption("bins").length;var r=this.createBean(new AgSlider);r.setLabel(this.translate("histogramBinCount")).setMinValue(0).setMaxValue(getMaxValue(t,20)).setTextFieldWidth(45).setValue(""+t).onValueChange((function(t){return e.setSeriesOption("binCount",t)}));this.addWidget(r)};t.prototype.addWidget=function(e){this.seriesGroup.addItem(e);this.activePanels.push(e)};t.prototype.getSeriesOption=function(e){return this.chartOptionsService.getSeriesOption(e,this.seriesType)};t.prototype.setSeriesOption=function(e,t){this.chartOptionsService.setSeriesOption(e,t,this.seriesType)};t.prototype.getChartSeriesType=function(){if(this.chartController.getSeriesChartTypes().length===0){return"column"}var e=this.chartController.getSeriesChartTypes()[0].chartType;return e==="columnLineCombo"?"column":e==="areaColumnCombo"?"area":getSeriesType(e)};t.prototype.getSeriesSelectOptions=function(){var e=this;if(!this.seriesSelectOptions){this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]])}var t=new Set;this.chartController.getActiveSeriesChartTypes().forEach((function(r){var n=getSeriesType(r.chartType);t.add(e.seriesSelectOptions.get(n))}));return Array.from(t)};t.prototype.updateSeriesType=function(){var e=this.chartController.getActiveSeriesChartTypes().map((function(e){return getSeriesType(e.chartType)}));var t=!e.includes(this.seriesType);if(t&&e.length>0){this.seriesType=e[0]}};t.prototype.translate=function(e,t){return this.chartTranslationService.translate(e,t)};t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach((function(t){_.removeFromParent(t.getGui());e.destroyBean(t)}))};t.prototype.destroy=function(){this.destroyActivePanels();e.prototype.destroy.call(this)};t.TEMPLATE='<div>\n            <ag-group-component ref="seriesGroup">\n            </ag-group-component>\n        </div>';__decorate$W([RefSelector("seriesGroup")],t.prototype,"seriesGroup",void 0);__decorate$W([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$W([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1o=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$V=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};function getMaxValue(e,t){return Math.max(e,t)}var DefaultFormatPanelDef={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"},{type:"navigator"}]};var FormatPanel=function(e){__extends$1o(t,e);function t(r,n){var i=e.call(this,t.TEMPLATE)||this;i.chartController=r;i.chartOptionsService=n;i.panels=[];i.isGroupPanelShownInSeries=function(e,t){var r=["chart","legend","series"];if(r.includes(e)){return true}var n=["axis","navigator"];var i=["bar","column","line","area","scatter","histogram","cartesian"];return!!(n.includes(e)&&i.includes(t))};return i}t.prototype.init=function(){this.createPanels();this.addManagedListener(this.chartController,ChartController.EVENT_CHART_UPDATED,this.createPanels.bind(this))};t.prototype.createPanels=function(){var e=this;var t;var r=this.chartController.getChartType();var n=this.chartController.isGrouping();var i=getSeriesType(r);if(r===this.chartType&&n===this.isGrouping){return}this.destroyPanels();(t=this.getFormatPanelDef().groups)===null||t===void 0?void 0:t.forEach((function(t){var r=t.type;if(!e.isGroupPanelShownInSeries(r,i)){return}var n={chartController:e.chartController,chartOptionsService:e.chartOptionsService,isExpandedOnInit:t.isOpen,seriesType:i};if(r==="chart"){e.addComponent(new ChartPanel(n))}else if(r==="legend"){e.addComponent(new LegendPanel(n))}else if(r==="axis"){e.addComponent(new AxisPanel(n))}else if(r==="series"){e.addComponent(new SeriesPanel(n))}else if(r==="navigator"){e.addComponent(new NavigatorPanel(n))}else{console.warn("AG Grid: invalid charts format panel group name supplied: '"+t.type+"'")}}));this.chartType=r;this.isGrouping=n};t.prototype.getFormatPanelDef=function(){var e;var t=(e=this.gridOptionsService.get("chartToolPanelsDef"))===null||e===void 0?void 0:e.formatPanel;return t?t:DefaultFormatPanelDef};t.prototype.addComponent=function(e){this.createBean(e);this.panels.push(e);e.addCssClass("ag-chart-format-section");this.getGui().appendChild(e.getGui())};t.prototype.destroyPanels=function(){var e=this;this.panels.forEach((function(t){_.removeFromParent(t.getGui());e.destroyBean(t)}))};t.prototype.destroy=function(){this.destroyPanels();e.prototype.destroy.call(this)};t.TEMPLATE='<div class="ag-chart-format-wrapper"></div>';__decorate$V([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1n=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$U=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var MiniChart=function(e){__extends$1n(t,e);function t(t,r){var n=e.call(this)||this;n.size=58;n.padding=5;n.root=new Group;var i=new Scene({document:window.document,width:n.size,height:n.size});i.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas");i.root=n.root;i.container=t;n.scene=i;n.tooltipName=r;return n}t.prototype.init=function(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName);this.scene.render()};__decorate$U([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$U([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$1m=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$T=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var MiniChartWithAxes=function(e){__extends$1m(t,e);function t(t,r){var n=e.call(this,t,r)||this;n.stroke="gray";n.axisOvershoot=3;return n}t.prototype.addAxes=function(){var e=this.size;var t=this.padding;var r=new Line;r.x1=t;r.y1=t;r.x2=t;r.y2=e-t+this.axisOvershoot;r.stroke=this.stroke;var n=new Line;n.x1=t-this.axisOvershoot+1;n.y1=e-t;n.x2=e-t+1;n.y2=e-t;n.stroke=this.stroke;var i=this.root;i.append(r);i.append(n)};__decorate$T([PostConstruct],t.prototype,"addAxes",null);return t}(MiniChart);function createColumnRects(e){var t=e.stacked,r=e.size,n=e.padding,i=e.xScalePadding,o=e.xScaleDomain,a=e.yScaleDomain;var s=new BandScale$5;s.domain=o;s.range=[n,r-n];s.paddingInner=i;s.paddingOuter=i;var l=new LinearScale$1;l.domain=a;l.range=[r-n,n];var u=function(e,t,r){return e.map((function(e,n){var i=r.convert(e);var o=new Rect;o.x=t.convert(n);o.y=i;o.width=t.bandwidth;o.height=r.convert(0)-i;o.strokeWidth=1;o.crisp=true;return o}))};if(t){return e.data.map((function(e){return u(e,s,l)}))}return u(e.data,s,l)}function createLinePaths(e,t,r,n){var i=new LinearScale$1;i.domain=[0,4];i.range=[n,r-n];var o=new LinearScale$1;o.domain=[0,10];o.range=[r-n,n];var a=t.map((function(e){var t=new Path;t.strokeWidth=3;t.lineCap="round";t.fill=undefined;e.forEach((function(e,r){t.path[r>0?"lineTo":"moveTo"](i.convert(r),o.convert(e))}));return t}));var s=new Group;s.setClipRectInGroupCoordinateSpace(new BBox(n,n,r-n*2,r-n*2));s.append(a);e.append(s);return a}var __extends$1l=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniColumn=function(e){__extends$1l(t,e);function t(t,r,n){var i=e.call(this,t,"groupedColumnTooltip")||this;i.columnData=[2,3,4];var o=i,a=o.root,s=o.columnData,l=o.size,u=o.padding;i.columns=createColumnRects({stacked:false,root:a,data:s,size:l,padding:u,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3});a.append(i.columns);i.updateColors(r,n);return i}t.prototype.updateColors=function(e,t){this.columns.forEach((function(r,n){r.fill=e[n];r.stroke=t[n]}))};t.chartType="groupedColumn";return t}(MiniChartWithAxes);var __extends$1k=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniStackedColumn=function(e){__extends$1k(t,e);function t(r,n,i,o,a,s){if(o===void 0){o=t.data}if(a===void 0){a=[0,16]}if(s===void 0){s="stackedColumnTooltip"}var l=e.call(this,r,s)||this;var u=l,c=u.root,d=u.size,p=u.padding;l.stackedColumns=createColumnRects({stacked:true,root:c,data:o,size:d,padding:p,xScaleDomain:[0,1,2],yScaleDomain:a,xScalePadding:.3});c.append([].concat.apply([],l.stackedColumns));l.updateColors(n,i);return l}t.prototype.updateColors=function(e,t){this.stackedColumns.forEach((function(r,n){return r.forEach((function(r){r.fill=e[n];r.stroke=t[n]}))}))};t.chartType="stackedColumn";t.data=[[8,12,16],[6,9,12],[2,3,4]];return t}(MiniChartWithAxes);var __extends$1j=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniNormalizedColumn=function(e){__extends$1j(t,e);function t(r,n,i){return e.call(this,r,n,i,t.data,[0,10],"normalizedColumnTooltip")||this}t.chartType="normalizedColumn";t.data=[[10,10,10],[6,7,8],[2,4,6]];return t}(MiniStackedColumn);var __extends$1i=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniBar=function(e){__extends$1i(t,e);function t(t,r,n){var i=e.call(this,t,"groupedBarTooltip")||this;var o=i.padding;var a=i.size;var s=[2,3,4];var l=new BandScale$5;l.domain=[0,1,2];l.range=[o,a-o];l.paddingInner=.3;l.paddingOuter=.3;var u=new LinearScale$1;u.domain=[0,4];u.range=[a-o,o];var c=u.convert(0);var d=l.bandwidth;i.bars=s.map((function(e,t){var r=new Rect;r.x=o;r.y=l.convert(t);r.width=c-u.convert(e);r.height=d;r.strokeWidth=1;r.crisp=true;return r}));i.updateColors(r,n);i.root.append(i.bars);return i}t.prototype.updateColors=function(e,t){this.bars.forEach((function(r,n){r.fill=e[n];r.stroke=t[n]}))};t.chartType="groupedBar";return t}(MiniChartWithAxes);var __extends$1h=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniStackedBar=function(e){__extends$1h(t,e);function t(r,n,i,o,a,s){if(o===void 0){o=t.data}if(a===void 0){a=[0,16]}if(s===void 0){s="stackedBarTooltip"}var l=e.call(this,r,s)||this;var u=l.size;var c=l.padding;var d=new BandScale$5;d.domain=[0,1,2];d.range=[c,u-c];d.paddingInner=.3;d.paddingOuter=.3;var p=new LinearScale$1;p.domain=a;p.range=[u-c,c];var f=p.convert(0);var h=d.bandwidth;l.bars=o.map((function(e){return e.map((function(e,t){var r=new Rect;r.x=c;r.y=d.convert(t);r.width=f-p.convert(e);r.height=h;r.strokeWidth=1;r.crisp=true;return r}))}));l.updateColors(n,i);l.root.append([].concat.apply([],l.bars));return l}t.prototype.updateColors=function(e,t){this.bars.forEach((function(r,n){return r.forEach((function(r){r.fill=e[n];r.stroke=t[n]}))}))};t.chartType="stackedBar";t.data=[[8,12,16],[6,9,12],[2,3,4]];return t}(MiniChartWithAxes);var __extends$1g=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniNormalizedBar=function(e){__extends$1g(t,e);function t(r,n,i){return e.call(this,r,n,i,t.data,[0,10],"normalizedBarTooltip")||this}t.chartType="normalizedBar";t.data=[[10,10,10],[6,7,8],[2,4,6]];return t}(MiniStackedBar);var __extends$1f=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __read$j=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var toRadians=toRadians$1;var MiniDoughnut=function(e){__extends$1f(t,e);function t(t,r,n,i,o){if(i===void 0){i=.6}if(o===void 0){o="doughnutTooltip"}var a=e.call(this,t,o)||this;var s=(a.size-a.padding*2)/2;var l=s+a.padding;var u=[[toRadians(-90),toRadians(30)],[toRadians(30),toRadians(120)],[toRadians(120),toRadians(180)],[toRadians(180),toRadians(210)],[toRadians(210),toRadians(240)],[toRadians(240),toRadians(270)]];a.sectors=u.map((function(e){var t=__read$j(e,2),r=t[0],n=t[1];var o=new Sector;o.centerX=l;o.centerY=l;o.innerRadius=s*i;o.outerRadius=s;o.startAngle=r;o.endAngle=n;o.stroke=undefined;o.strokeWidth=1;return o}));a.updateColors(r,n);a.root.append(a.sectors);return a}t.prototype.updateColors=function(e,t){this.sectors.forEach((function(r,n){r.fill=e[n%e.length];r.stroke=t[n%t.length]}))};t.chartType="doughnut";return t}(MiniChart);var __extends$1e=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniPie=function(e){__extends$1e(t,e);function t(t,r,n){return e.call(this,t,r,n,0,"pieTooltip")||this}t.chartType="pie";return t}(MiniDoughnut);var __extends$1d=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniLine=function(e){__extends$1d(t,e);function t(t,r,n){var i=e.call(this,t,"lineTooltip")||this;i.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]];i.lines=createLinePaths(i.root,i.data,i.size,i.padding);i.updateColors(r,n);return i}t.prototype.updateColors=function(e,t){this.lines.forEach((function(t,r){t.stroke=e[r]}))};t.chartType="line";return t}(MiniChartWithAxes);var __extends$1c=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __read$i=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var MiniScatter=function(e){__extends$1c(t,e);function t(t,r,n){var i=e.call(this,t,"scatterTooltip")||this;var o=i.size;var a=i.padding;var s=[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]];var l=new LinearScale$1;l.domain=[-.5,4];l.range=[a*2,o-a];var u=new LinearScale$1;u.domain=[-.5,3.5];u.range=[o-a,a];var c=[];s.forEach((function(e){e.forEach((function(e){var t=__read$i(e,2),r=t[0],n=t[1];var i=new Arc;i.strokeWidth=1;i.centerX=l.convert(r);i.centerY=u.convert(n);i.radius=2.5;c.push(i)}))}));i.points=c;i.updateColors(r,n);var d=new Group;d.setClipRectInGroupCoordinateSpace(new BBox(a,a,o-a*2,o-a*2));d.append(i.points);i.root.append(d);return i}t.prototype.updateColors=function(e,t){this.points.forEach((function(r,n){r.stroke=t[n%t.length];r.fill=e[n%e.length]}))};t.chartType="scatter";return t}(MiniChartWithAxes);var __extends$1b=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __read$h=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var MiniBubble=function(e){__extends$1b(t,e);function t(t,r,n){var i=e.call(this,t,"bubbleTooltip")||this;var o=i.size;var a=i.padding;var s=[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]];var l=new LinearScale$1;l.domain=[0,1];l.range=[a*2,o-a];var u=new LinearScale$1;u.domain=[0,1];u.range=[o-a,a];var c=[];s.forEach((function(e){e.forEach((function(e){var t=__read$h(e,3),r=t[0],n=t[1],i=t[2];var o=new Arc;o.strokeWidth=1;o.centerX=l.convert(r);o.centerY=u.convert(n);o.radius=i;o.fillOpacity=.7;c.push(o)}))}));i.points=c;i.updateColors(r,n);var d=new Group;d.setClipRectInGroupCoordinateSpace(new BBox(a,a,o-a*2,o-a*2));d.append(i.points);i.root.append(d);return i}t.prototype.updateColors=function(e,t){this.points.forEach((function(r,n){r.stroke=t[n%t.length];r.fill=e[n%e.length]}))};t.chartType="bubble";return t}(MiniChartWithAxes);var __extends$1a=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniArea=function(e){__extends$1a(t,e);function t(r,n,i,o){if(o===void 0){o=t.data}var a=e.call(this,r,"groupedAreaTooltip")||this;var s=a.size;var l=a.padding;var u=new BandScale$5;u.domain=[0,1,2];u.paddingInner=1;u.paddingOuter=0;u.range=[l+.5,s-l-.5];var c=new LinearScale$1;c.domain=[0,6];c.range=[s-l+.5,l];var d=o.length;var p=d*2-1;var f=[];var h=c.convert(0);o.forEach((function(e,t){var r=u.convert(t);e.forEach((function(e,n){var i=c.convert(e);var o=f[n]||(f[n]=[]);o[t]={x:r,y:i};o[p-t]={x:r,y:h}}))}));a.areas=f.reverse().map((function(e){var t=new Path;t.strokeWidth=1;t.fillOpacity=.7;var r=t.path;r.clear();e.forEach((function(e,t){return r[t>0?"lineTo":"moveTo"](e.x,e.y)}));r.closePath();return t}));a.updateColors(n,i);a.root.append(a.areas);return a}t.prototype.updateColors=function(e,t){this.areas.forEach((function(r,n){r.fill=e[n];r.stroke=t[n]}))};t.chartType="area";t.data=[[1,3,5],[2,6,4],[5,3,1]];return t}(MiniChartWithAxes);var __extends$19=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniStackedArea=function(e){__extends$19(t,e);function t(r,n,i,o,a){if(o===void 0){o=t.data}if(a===void 0){a="stackedAreaTooltip"}var s=e.call(this,r,a)||this;var l=s.size;var u=s.padding;var c=new BandScale$5;c.domain=[0,1,2];c.paddingInner=1;c.paddingOuter=0;c.range=[u+.5,l-u-.5];var d=new LinearScale$1;d.domain=[0,16];d.range=[l-u+.5,u+.5];var p=o.length;var f=p*2-1;var h=[];o.forEach((function(e,t){var r=c.convert(t);var n=0;e.forEach((function(e,i){var o=d.convert(n+e);var a=h[i]||(h[i]=[]);a[t]={x:r,y:o};a[f-t]={x:r,y:d.convert(n)};n+=e}))}));s.areas=h.map((function(e){var t=new Path;t.strokeWidth=1;var r=t.path;r.clear();e.forEach((function(e,t){return r[t>0?"lineTo":"moveTo"](e.x,e.y)}));r.closePath();return t}));s.updateColors(n,i);s.root.append(s.areas);return s}t.prototype.updateColors=function(e,t){this.areas.forEach((function(r,n){r.fill=e[n];r.stroke=t[n]}))};t.chartType="stackedArea";t.data=[[2,3,2],[3,6,5],[6,2,2]];return t}(MiniChartWithAxes);var __extends$18=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniNormalizedArea=function(e){__extends$18(t,e);function t(r,n,i,o){if(o===void 0){o=t.data}return e.call(this,r,n,i,o,"normalizedAreaTooltip")||this}t.chartType="normalizedArea";t.data=MiniStackedArea.data.map((function(e){var t=e.reduce((function(e,t){return e+t}),0);return e.map((function(e){return e/t*16}))}));return t}(MiniStackedArea);var __extends$17=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __read$g=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var MiniHistogram=function(e){__extends$17(t,e);function t(t,r,n){var i=e.call(this,t,"histogramTooltip")||this;var o=i.padding;var a=i.size;var s=[2,5,11,13,10,6,1];var l=new LinearScale$1;l.domain=[0,s.length];l.range=[o,a-o];var u=new LinearScale$1;u.domain=[0,s.reduce((function(e,t){return Math.max(e,t)}),0)];u.range=[a-o,o];var c=u.convert(0);i.bars=s.map((function(e,t){var r=u.convert(e);var n=l.convert(t);var i=l.convert(t+1);var o=new Rect;o.x=n;o.y=r;o.width=i-n;o.height=c-r;o.strokeWidth=1;o.crisp=true;return o}));i.updateColors(r,n);i.root.append(i.bars);return i}t.prototype.updateColors=function(e,t){var r=__read$g(e,1),n=r[0];var i=__read$g(t,1),o=i[0];this.bars.forEach((function(e){e.fill=n;e.stroke=o}))};t.chartType="histogram";return t}(MiniChartWithAxes);var __extends$16=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniColumnLineCombo=function(e){__extends$16(t,e);function t(t,r,n){var i=e.call(this,t,"columnLineComboTooltip")||this;i.columnData=[3,4];i.lineData=[[5,4,6,5,4]];var o=i,a=o.root,s=o.columnData,l=o.lineData,u=o.size,c=o.padding;i.columns=createColumnRects({stacked:false,root:a,data:s,size:u,padding:c,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5});a.append(i.columns);i.lines=createLinePaths(a,l,u,c);i.updateColors(r,n);return i}t.prototype.updateColors=function(e,t){this.columns.forEach((function(r,n){r.fill=e[n];r.stroke=t[n]}));this.lines.forEach((function(t,r){t.stroke=e[r+2]}))};t.chartType="columnLineCombo";return t}(MiniChartWithAxes);var __extends$15=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniAreaColumnCombo=function(e){__extends$15(t,e);function t(t,r,n){var i=e.call(this,t,"areaColumnComboTooltip")||this;i.columnData=[3,4.5];i.areaData=[[5,4,6,5,4]];var o=i,a=o.root,s=o.columnData,l=o.areaData,u=o.size,c=o.padding;i.columns=createColumnRects({stacked:false,root:a,data:s,size:u,padding:c,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});var d=new BandScale$5;d.range=[c,u-c];d.domain=[0,1,2,3,4];d.paddingInner=1;d.paddingOuter=0;var p=new LinearScale$1;p.range=[u-c,c];p.domain=[0,6];var f=[];var h=p.convert(0);var v=d.convert(0);l.forEach((function(e,t){var r=f[t]||(f[t]=[]);e.forEach((function(e,t){var n=e;var i=t;var o=d.convert(i);var a=p.convert(n);r[t]={x:o,y:a}}));var n=d.convert(e.length-1);f[t].push({x:n,y:h},{x:v,y:h})}));i.areas=f.map((function(e){var t=new Path;t.strokeWidth=1;t.fillOpacity=.8;var r=t.path;e.forEach((function(e,t){return r[t>0?"lineTo":"moveTo"](e.x,e.y)}));return t}));a.append(i.areas);a.append([].concat.apply([],i.columns));i.updateColors(r,n);return i}t.prototype.updateColors=function(e,t){this.areas.forEach((function(r,n){r.fill=e[n];r.stroke=t[n]}));this.columns.forEach((function(r,n){r.fill=e[n+1];r.stroke=t[n+1]}))};t.chartType="areaColumnCombo";return t}(MiniChartWithAxes);var __extends$14=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var MiniCustomCombo=function(e){__extends$14(t,e);function t(t,r,n){var i=e.call(this,t,"customComboTooltip")||this;i.columnData=[3,4];i.lineData=[[5,4,6,5,4]];var o=i,a=o.root,s=o.columnData,l=o.lineData,u=o.size,c=o.padding;i.columns=createColumnRects({stacked:false,root:a,data:s,size:u,padding:c,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5});a.append(i.columns);i.lines=createLinePaths(a,l,u,c);var d="grey";var p=3;var f=new Line;f.x1=c;f.y1=c;f.x2=c;f.y2=u-c+p;f.stroke=d;var h=new Line;h.x1=c-p+1;h.y1=u-c;h.x2=u-c+1;h.y2=u-c;h.stroke=d;var v=new Path;i.buildPenIconPath(v);v.fill="whitesmoke";v.stroke="darkslategrey";v.strokeWidth=1;a.append([h,f,v]);i.updateColors(r,n);return i}t.prototype.updateColors=function(e,t){this.columns.forEach((function(r,n){r.fill=e[n];r.stroke=t[n]}));this.lines.forEach((function(t,r){t.stroke=e[r+2]}))};t.prototype.buildPenIconPath=function(e){var t=e.path;t.moveTo(25.76,43.46);t.lineTo(31.27,48.53);t.moveTo(49.86,22);t.lineTo(49.86,22);t.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41);t.lineTo(46.86,21.41);t.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55);t.lineTo(25.51,43.8);t.lineTo(25.43,43.89);t.lineTo(23.01,51.89);t.lineTo(22.83,52.46);t.lineTo(31.02,48.86);t.lineTo(49.02,28.52);t.lineTo(49.02,28.52);t.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93);t.lineTo(50.75,24.93);t.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22);t.closePath();t.moveTo(41.76,25.5);t.lineTo(47.34,30.5);t.moveTo(40.74,26.65);t.lineTo(46.25,31.71)};t.chartType="customCombo";return t}(MiniChart);var __extends$13=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$j=function(){__assign$j=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$j.apply(this,arguments)};var __decorate$S=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var miniChartMapping={columnGroup:{column:MiniColumn,stackedColumn:MiniStackedColumn,normalizedColumn:MiniNormalizedColumn},barGroup:{bar:MiniBar,stackedBar:MiniStackedBar,normalizedBar:MiniNormalizedBar},pieGroup:{pie:MiniPie,doughnut:MiniDoughnut},lineGroup:{line:MiniLine},scatterGroup:{scatter:MiniScatter,bubble:MiniBubble},areaGroup:{area:MiniArea,stackedArea:MiniStackedArea,normalizedArea:MiniNormalizedArea},histogramGroup:{histogram:MiniHistogram},combinationGroup:{columnLineCombo:MiniColumnLineCombo,areaColumnCombo:MiniAreaColumnCombo,customCombo:MiniCustomCombo}};var MiniChartsContainer=function(e){__extends$13(t,e);function t(r,n,i,o){if(o===void 0){o=DEFAULT_CHART_GROUPS}var a=e.call(this,t.TEMPLATE)||this;a.wrappers={};a.chartController=r;a.fills=n;a.strokes=i;a.chartGroups=__assign$j({},o);return a}t.prototype.init=function(){var e=this;if(!this.chartController.customComboExists()&&this.chartGroups.combinationGroup){this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter((function(e){return e!=="customCombo"}))}var t=this.getGui();Object.keys(this.chartGroups).forEach((function(r){var n=e.chartGroups[r];var i=e.createBean(new AgGroupComponent({title:e.chartTranslationService.translate(r),suppressEnabledCheckbox:true,enabled:true,suppressOpenCloseIcons:true,cssIdentifier:"charts-settings",direction:"horizontal"}));n.forEach((function(t){var n;var o=(n=miniChartMapping[r])===null||n===void 0?void 0:n[t];if(!o){if(miniChartMapping[r]){_.doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+r+"."+t+"'")}),"invalid_chartGroupsDef"+t+"_"+r)}else{_.doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+r+"'")}),"invalid_chartGroupsDef"+r)}return}var a=document.createElement("div");a.classList.add("ag-chart-mini-thumbnail");var s=o.chartType;e.addManagedListener(a,"click",(function(){e.chartController.setChartType(s);e.updateSelectedMiniChart()}));e.wrappers[s]=a;e.createBean(new o(a,e.fills,e.strokes));i.addItem(a)}));t.appendChild(i.getGui())}));this.updateSelectedMiniChart()};t.prototype.updateSelectedMiniChart=function(){var e=this.chartController.getChartType();for(var t in this.wrappers){var r=this.wrappers[t];var n=t===e;r.classList.toggle("ag-selected",n)}};t.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>';__decorate$S([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$S([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$12=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$R=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ChartSettingsPanel=function(e){__extends$12(t,e);function t(r){var n=e.call(this,t.TEMPLATE)||this;n.miniChartsContainers=[];n.cardItems=[];n.activePaletteIndex=0;n.palettes=[];n.themes=[];n.chartController=r;return n}t.prototype.postConstruct=function(){var e=this;this.resetPalettes();this.ePrevBtn.insertAdjacentElement("afterbegin",_.createIconNoSpan("previous",this.gridOptionsService));this.eNextBtn.insertAdjacentElement("afterbegin",_.createIconNoSpan("next",this.gridOptionsService));this.addManagedListener(this.ePrevBtn,"click",(function(){return e.setActivePalette(e.getPrev(),"left")}));this.addManagedListener(this.eNextBtn,"click",(function(){return e.setActivePalette(e.getNext(),"right")}));this.addManagedListener(this.chartController,ChartController.EVENT_CHART_TYPE_CHANGED,(function(){return e.resetPalettes(true)}));this.scrollSelectedIntoView()};t.prototype.scrollSelectedIntoView=function(){var e=this;setTimeout((function(){var t=function(e){return!e.getGui().classList.contains("ag-hidden")};var r=e.miniChartsContainers.find(t);var n=r.getGui().querySelector(".ag-selected");if(n){var i=n.offsetParent;if(i){e.eMiniChartsContainer.scrollTo(0,i.offsetTop)}}}),250)};t.prototype.resetPalettes=function(e){var t=this;var r,n;var i=this.chartController.getPalettes();var o=(n=(r=this.gridOptionsService.get("chartToolPanelsDef"))===null||r===void 0?void 0:r.settingsPanel)===null||n===void 0?void 0:n.chartGroupsDef;if(_.shallowCompare(i,this.palettes)&&!e||this.isAnimating){return}this.palettes=i;this.themes=this.chartController.getThemes();this.activePaletteIndex=this.themes.findIndex((function(e){return e===t.chartController.getChartThemeName()}));this.cardItems=[];_.clearElement(this.eCardSelector);this.destroyMiniCharts();this.palettes.forEach((function(e,r){var n=t.activePaletteIndex===r;var i=e.fills,a=e.strokes;var s=t.createBean(new MiniChartsContainer(t.chartController,i,a,o));t.miniChartsContainers.push(s);t.eMiniChartsContainer.appendChild(s.getGui());t.addCardLink(r);if(n){s.updateSelectedMiniChart()}else{s.setDisplayed(false)}}));_.setDisplayed(this.eNavBar,this.palettes.length>1);_.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected")};t.prototype.addCardLink=function(e){var t=this;var r=document.createElement("div");r.classList.add("ag-chart-settings-card-item");this.addManagedListener(r,"click",(function(){t.setActivePalette(e,e<t.activePaletteIndex?"left":"right")}));this.eCardSelector.appendChild(r);this.cardItems.push(r)};t.prototype.getPrev=function(){var e=this.activePaletteIndex-1;if(e<0){e=this.palettes.length-1}return e};t.prototype.getNext=function(){var e=this.activePaletteIndex+1;if(e>=this.palettes.length){e=0}return e};t.prototype.setActivePalette=function(e,t){var r=this;if(this.isAnimating||this.activePaletteIndex===e){return}_.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");var n=this.miniChartsContainers[this.activePaletteIndex];var i=n.getGui();var o=this.miniChartsContainers[e];var a=o.getGui();n.updateSelectedMiniChart();o.updateSelectedMiniChart();var s=t==="left"?-1:1;var l=a.style.left=_.getAbsoluteWidth(this.getGui())*s+"px";this.activePaletteIndex=e;this.isAnimating=true;var u="ag-animating";o.setDisplayed(true);n.addCssClass(u);o.addCssClass(u);this.chartController.setChartThemeName(this.themes[e]);window.setTimeout((function(){i.style.left=-parseFloat(l)+"px";a.style.left="0px"}),0);window.setTimeout((function(){r.isAnimating=false;n.removeCssClass(u);o.removeCssClass(u);n.setDisplayed(false)}),300)};t.prototype.destroyMiniCharts=function(){_.clearElement(this.eMiniChartsContainer);this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)};t.prototype.destroy=function(){this.destroyMiniCharts();e.prototype.destroy.call(this)};t.TEMPLATE='<div class="ag-chart-settings-wrapper">\n            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-chart-settings-prev-button"></button>\n                </div>\n                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>';__decorate$R([Autowired("resizeObserverService")],t.prototype,"resizeObserverService",void 0);__decorate$R([RefSelector("eMiniChartsContainer")],t.prototype,"eMiniChartsContainer",void 0);__decorate$R([RefSelector("eNavBar")],t.prototype,"eNavBar",void 0);__decorate$R([RefSelector("eCardSelector")],t.prototype,"eCardSelector",void 0);__decorate$R([RefSelector("ePrevBtn")],t.prototype,"ePrevBtn",void 0);__decorate$R([RefSelector("eNextBtn")],t.prototype,"eNextBtn",void 0);__decorate$R([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var __extends$11=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$Q=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var TabbedChartMenu=function(e){__extends$11(t,e);function t(t){var r=e.call(this)||this;r.tabs=[];var n=t.controller,i=t.panels,o=t.chartOptionsService;r.chartController=n;r.chartOptionsService=o;r.panels=i;return r}t.prototype.init=function(){var e=this;this.panels.forEach((function(t){var r=t.replace("chart","").toLowerCase();var n=e.createTab(t,r,e.getPanelClass(r)),i=n.comp,o=n.tab;e.tabs.push(o);e.addDestroyFunc((function(){return e.destroyBean(i)}))}));this.tabbedLayout=new TabbedLayout({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:true});this.getContext().createBean(this.tabbedLayout)};t.prototype.createTab=function(e,t,r){var n=document.createElement("div");n.classList.add("ag-chart-tab","ag-chart-"+t);var i=new r(this.chartController,this.chartOptionsService);this.getContext().createBean(i);n.appendChild(i.getGui());var o=document.createElement("div");var a=this.chartTranslationService.translate(t);o.innerText=a;return{comp:i,tab:{title:o,titleLabel:a,bodyPromise:AgPromise.resolve(n),getScrollableContainer:function(){var e=n.querySelector(".ag-scrollable-container");return e||n},name:e}}};t.prototype.showTab=function(e){var t=this.tabs[e];this.tabbedLayout.showItem(t)};t.prototype.getGui=function(){return this.tabbedLayout&&this.tabbedLayout.getGui()};t.prototype.destroy=function(){if(this.parentComponent&&this.parentComponent.isAlive()){this.destroyBean(this.parentComponent)}e.prototype.destroy.call(this)};t.prototype.getPanelClass=function(e){switch(e){case t.TAB_DATA:return ChartDataPanel;case t.TAB_FORMAT:return FormatPanel;default:return ChartSettingsPanel}};t.TAB_DATA="data";t.TAB_FORMAT="format";__decorate$Q([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$Q([PostConstruct],t.prototype,"init",null);return t}(Component);var __extends$10=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$P=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$f=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$8=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$f(arguments[t]));return e};var ChartMenu=function(e){__extends$10(t,e);function t(r,n,i,o){var a=e.call(this,t.TEMPLATE)||this;a.eChartContainer=r;a.eMenuPanelContainer=n;a.chartController=i;a.chartOptionsService=o;a.buttons={chartSettings:["menu",function(){return a.showMenu(a.defaultPanel)}],chartData:["menu",function(){return a.showMenu("chartData")}],chartFormat:["menu",function(){return a.showMenu("chartFormat")}],chartLink:["linked",function(e){return a.toggleDetached(e)}],chartUnlink:["unlinked",function(e){return a.toggleDetached(e)}],chartDownload:["save",function(){return a.saveChart()}]};a.panels=[];a.menuVisible=false;return a}t.prototype.postConstruct=function(){var e=this;this.createButtons();this.addManagedListener(this.eventService,Events.EVENT_CHART_CREATED,(function(t){var r;if(t.chartId===e.chartController.getChartId()){var n=Boolean((r=e.gridOptionsService.get("chartToolPanelsDef"))===null||r===void 0?void 0:r.defaultToolPanel);if(n){e.showMenu(e.defaultPanel,false)}}}));this.refreshMenuClasses();if(!this.gridOptionsService.is("suppressChartToolPanelsButton")&&this.panels.length>0){this.getGui().classList.add("ag-chart-tool-panel-button-enable");this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))}};t.prototype.isVisible=function(){return this.menuVisible};t.prototype.getExtraPaddingDirections=function(){var e=this;var t=["chartLink","chartUnlink","chartDownload"];var r=["chartSettings","chartData","chartFormat"];var n=[];if(t.some((function(t){return e.chartToolbarOptions.includes(t)}))){n.push("top")}if(r.some((function(t){return e.chartToolbarOptions.includes(t)}))){n.push(this.gridOptionsService.is("enableRtl")?"left":"right")}return n};t.prototype.getToolbarOptions=function(){var e=this;var t,r,n;var i=Boolean(this.gridOptionsService.get("chartToolPanelsDef"));if(i){var o=[this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];var a=this.gridOptionsService.getCallback("getChartToolbarItems");var s={defaultItems:o};var l=a?a(s).filter((function(e){if(!CHART_TOOLBAR_ALLOW_LIST.includes(e)){var t=CHART_TOOL_PANEL_ALLOW_LIST.includes(e)?"AG Grid: '"+e+"' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead":"AG Grid: '"+e+"' is not a valid Chart Toolbar Option";console.warn(t);return false}return true})):o;var u=(r=(t=this.gridOptionsService.get("chartToolPanelsDef"))===null||t===void 0?void 0:t.panels)===null||r===void 0?void 0:r.map((function(e){var t=CHART_TOOL_PANEL_MENU_OPTIONS[e];if(!t){console.warn("AG Grid - invalid panel in chartToolPanelsDef.panels: '"+e+"'")}return t})).filter((function(e){return Boolean(e)}));this.panels=u?u:Object.values(CHART_TOOL_PANEL_MENU_OPTIONS);if(this.chartController.isPivotChart()){this.panels=this.panels.filter((function(e){return e!=="chartData"}))}var c=(n=this.gridOptionsService.get("chartToolPanelsDef"))===null||n===void 0?void 0:n.defaultToolPanel;this.defaultPanel=c&&CHART_TOOL_PANEL_MENU_OPTIONS[c]||this.panels[0];return this.panels.length>0?__spread$8([this.panels[0]],l):l}else{var d=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];var a=this.gridOptionsService.getCallback("getChartToolbarItems");if(a){var p=this.gridOptionsService.is("suppressChartToolPanelsButton");var s={defaultItems:p?d:CHART_TOOLBAR_ALLOW_LIST};d=a(s).filter((function(t){if(!e.buttons[t]){console.warn("AG Grid: '"+t+"' is not a valid Chart Toolbar Option");return false}else if(!p&&CHART_TOOL_PANEL_ALLOW_LIST.includes(t)){var r="AG Grid: '"+t+"' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead";console.warn(r);return false}return true}));if(!p){d=d.concat(CHART_TOOL_PANEL_ALLOW_LIST)}}if(this.chartController.isPivotChart()){d=d.filter((function(e){return e!=="chartData"}))}var f=["chartUnlink","chartLink","chartDownload"];this.panels=d.filter((function(e){return f.indexOf(e)===-1}));this.defaultPanel=this.panels[0];return d.filter((function(t){return f.indexOf(t)!==-1||e.panels.length&&t===e.panels[0]}))}};t.prototype.toggleDetached=function(e){var t=e.target;var r=t.classList.contains("ag-icon-linked");t.classList.toggle("ag-icon-linked",!r);t.classList.toggle("ag-icon-unlinked",r);var n=r?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip";var i=this.chartTranslationService.translate(n);if(i){t.title=i}this.chartController.detachChartRange()};t.prototype.createButtons=function(){var e=this;this.chartToolbarOptions=this.getToolbarOptions();var t=this.eMenu;this.chartToolbarOptions.forEach((function(r){var n=e.buttons[r];var i=__read$f(n,2),o=i[0],a=i[1];var s=_.createIconNoSpan(o,e.gridOptionsService,undefined,true);s.classList.add("ag-chart-menu-icon");var l=e.chartTranslationService.translate(r+"ToolbarTooltip");if(l&&s instanceof HTMLElement){s.title=l}e.addManagedListener(s,"click",a);t.appendChild(s)}))};t.prototype.saveChart=function(){var e={type:t.EVENT_DOWNLOAD_CHART};this.dispatchEvent(e)};t.prototype.createMenuPanel=function(e){var t=this;var r=this.environment.chartMenuPanelWidth();var n=this.menuPanel=this.createBean(new AgPanel({minWidth:r,width:r,height:"100%",closable:true,hideTitleBar:true,cssIdentifier:"chart-menu"}));n.setParentComponent(this);this.eMenuPanelContainer.appendChild(n.getGui());this.tabbedMenu=this.createBean(new TabbedChartMenu({controller:this.chartController,type:this.chartController.getChartType(),panels:this.panels,chartOptionsService:this.chartOptionsService}));this.addManagedListener(n,Component.EVENT_DESTROYED,(function(){return t.destroyBean(t.tabbedMenu)}));return new AgPromise((function(r){window.setTimeout((function(){n.setBodyComponent(t.tabbedMenu);t.tabbedMenu.showTab(e);r(n);t.addManagedListener(t.eChartContainer,"click",(function(e){if(t.getGui().contains(e.target)){return}if(t.menuVisible){t.hideMenu()}}))}),100)}))};t.prototype.showContainer=function(){if(!this.menuPanel){return}this.menuVisible=true;this.showParent(this.menuPanel.getWidth());this.refreshMenuClasses()};t.prototype.toggleMenu=function(){this.menuVisible?this.hideMenu():this.showMenu()};t.prototype.showMenu=function(e,t){var r=this;if(t===void 0){t=true}if(!t){this.eMenuPanelContainer.classList.add("ag-no-transition")}if(this.menuPanel&&!e){this.showContainer()}else{var n=e||this.defaultPanel;var i=this.panels.indexOf(n);if(i<0){console.warn("AG Grid: '"+e+"' is not a valid Chart Tool Panel name");i=this.panels.indexOf(this.defaultPanel)}if(this.menuPanel){this.tabbedMenu.showTab(i);this.showContainer()}else{this.createMenuPanel(i).then(this.showContainer.bind(this))}}if(!t){setTimeout((function(){if(!r.isAlive()){return}r.eMenuPanelContainer.classList.remove("ag-no-transition")}),500)}};t.prototype.hideMenu=function(){var e=this;this.hideParent();window.setTimeout((function(){e.menuVisible=false;e.refreshMenuClasses()}),500)};t.prototype.refreshMenuClasses=function(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible);this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible);if(!this.gridOptionsService.is("suppressChartToolPanelsButton")){this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible);this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible)}};t.prototype.showParent=function(e){this.eMenuPanelContainer.style.minWidth=e+"px"};t.prototype.hideParent=function(){this.eMenuPanelContainer.style.minWidth="0"};t.prototype.destroy=function(){e.prototype.destroy.call(this);if(this.menuPanel&&this.menuPanel.isAlive()){this.destroyBean(this.menuPanel)}if(this.tabbedMenu&&this.tabbedMenu.isAlive()){this.destroyBean(this.tabbedMenu)}};t.EVENT_DOWNLOAD_CHART="downloadChart";t.TEMPLATE='<div>\n        <div class="ag-chart-menu" ref="eMenu"></div>\n        <button class="ag-chart-menu-close" ref="eHideButton">\n            <span class="ag-icon ag-icon-contracted" ref="eHideButtonIcon"></span>\n        </button>\n    </div>';__decorate$P([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$P([RefSelector("eMenu")],t.prototype,"eMenu",void 0);__decorate$P([RefSelector("eHideButton")],t.prototype,"eHideButton",void 0);__decorate$P([RefSelector("eHideButtonIcon")],t.prototype,"eHideButtonIcon",void 0);__decorate$P([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var __extends$$=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$i=function(){__assign$i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$i.apply(this,arguments)};var __decorate$O=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __values$6=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var TitleEdit=function(e){__extends$$(t,e);function t(r){var n=e.call(this,t.TEMPLATE)||this;n.chartMenu=r;n.destroyableChartListeners=[];n.editing=false;return n}t.prototype.init=function(){var e=this;this.addManagedListener(this.getGui(),"keypress",(function(t){if(e.editing&&t.key==="Enter"&&!t.shiftKey){e.handleEndEditing();t.preventDefault()}}));this.addManagedListener(this.getGui(),"input",(function(){if(e.editing){e.updateHeight()}}));this.addManagedListener(this.getGui(),"blur",(function(){return e.endEditing()}))};t.prototype.refreshTitle=function(e,t){var r,n;var i=this;this.chartController=e;this.chartOptionsService=t;try{for(var o=__values$6(this.destroyableChartListeners),a=o.next();!a.done;a=o.next()){var s=a.value;s()}}catch(e){r={error:e}}finally{try{if(a&&!a.done&&(n=o.return))n.call(o)}finally{if(r)throw r.error}}this.destroyableChartListeners=[];var l=this.chartController.getChartProxy();var u=l.getChart();var c=u.scene.canvas.element;var d=this.addManagedListener(c,"dblclick",(function(e){var t=u.title;if(t&&t.node.containsPoint(e.offsetX,e.offsetY)){var r=t.node.computeBBox();var n=t.node.inverseTransformPoint(r.x,r.y);i.startEditing(__assign$i(__assign$i({},r),n),c.width)}}));var p=false;var f=this.addManagedListener(c,"mousemove",(function(e){var t=u.title;var r=!!(t&&t.enabled&&t.node.containsPoint(e.offsetX,e.offsetY));if(p!==r){c.style.cursor=r?"pointer":""}p=r}));this.destroyableChartListeners=[d,f]};t.prototype.startEditing=function(e,t){if(this.chartMenu&&this.chartMenu.isVisible()){return}if(this.editing){return}this.editing=true;var r=300;var n=Math.max(Math.min(e.width+20,t),r);var i=this.getGui();i.classList.add("currently-editing");var o=i.style;o.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily");o.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight");o.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle");o.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px";o.color=this.chartOptionsService.getChartOption("title.color");var a=this.chartOptionsService.getChartOption("title.text");var s=a===this.chartTranslationService.translate("titlePlaceholder");i.value=s?"":a;var l=a.split(/\r?\n/g).length;o.left=Math.round(e.x+e.width/2-n/2-1)+"px";o.top=Math.round(e.y+e.height/2-l*this.getLineHeight()/2-2)+"px";o.width=Math.round(n)+"px";o.lineHeight=this.getLineHeight()+"px";this.updateHeight();i.focus()};t.prototype.updateHeight=function(){var e=this.getGui();var t=this.chartOptionsService.getChartOption("title.text").split(/\r?\n/g).length;var r=e.value.split(/\r?\n/g).length;e.style.height=Math.round(Math.max(t,r)*this.getLineHeight())+4+"px"};t.prototype.getLineHeight=function(){var e=this.chartOptionsService.getChartOption("title.lineHeight");if(e){return parseInt(e)}return Math.round(parseInt(this.chartOptionsService.getChartOption("title.fontSize"))*1.2)};t.prototype.handleEndEditing=function(){var e=this;var t=this.chartOptionsService.getChartOption("title.color");var r="rgba(0, 0, 0, 0)";this.chartOptionsService.setChartOption("title.color",r);this.chartOptionsService.awaitChartOptionUpdate((function(){return e.endEditing()}));this.chartOptionsService.awaitChartOptionUpdate((function(){e.chartOptionsService.setChartOption("title.color",t)}))};t.prototype.endEditing=function(){var e=this;if(!this.editing){return}this.editing=false;var t=this.getGui().value;if(t&&t.trim()!==""){this.chartOptionsService.setChartOption("title.text",t);this.chartOptionsService.setChartOption("title.enabled",true)}else{this.chartOptionsService.setChartOption("title.text","");this.chartOptionsService.setChartOption("title.enabled",false)}this.getGui().classList.remove("currently-editing");this.chartOptionsService.awaitChartOptionUpdate((function(){e.eventService.dispatchEvent({type:"chartTitleEdit"})}))};t.TEMPLATE='<textarea\n             class="ag-chart-title-edit"\n             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />\n        ';__decorate$O([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$O([PostConstruct],t.prototype,"init",null);return t}(Component);function deproxy(e){if(e.chart!=null){return e.chart}return e}var __assign$h=function(){__assign$h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$h.apply(this,arguments)};var ChartProxy=function(){function e(e){this.chartProxyParams=e;this.clearThemeOverrides=false;this.chart=e.chartInstance;this.chartType=e.chartType;this.crossFiltering=e.crossFiltering;this.crossFilterCallback=e.crossFilterCallback;this.standaloneChartType=getSeriesType(this.chartType);if(this.chart==null){this.chart=AgChart.create(this.getCommonChartOptions())}else{this.clearThemeOverrides=true}}e.prototype.getChart=function(){return deproxy(this.chart)};e.prototype.getChartRef=function(){return this.chart};e.prototype.downloadChart=function(e,t,r){var n=this.chart;var i=deproxy(n);var o=t||(i.title?i.title.text:"chart");var a=e||{},s=a.width,l=a.height;AgChart.download(n,{width:s,height:l,fileName:o,fileFormat:r})};e.prototype.getChartImageDataURL=function(e){return this.getChart().scene.getDataURL(e)};e.prototype.getChartOptions=function(){return this.chart.getOptions()};e.prototype.getChartThemeOverrides=function(){var e;var t=this.getChartOptions().theme;return(e=t.overrides)!==null&&e!==void 0?e:{}};e.prototype.getChartPalette=function(){return getChartTheme(this.getChartOptions().theme).palette};e.prototype.setPaired=function(e){var t;var r=getSeriesType(this.chartProxyParams.chartType);AgChart.updateDelta(this.chart,{theme:{overrides:(t={},t[r]={paired:e},t)}})};e.prototype.isPaired=function(){var e=getSeriesType(this.chartProxyParams.chartType);return _.get(this.getChartThemeOverrides(),e+".paired",true)};e.prototype.lookupCustomChartTheme=function(e){return lookupCustomChartTheme(this.chartProxyParams,e)};e.prototype.transformData=function(e,t,r){if(r){return e.map((function(e,r){var n=e[t];var i=n&&n.toString?n.toString():"";var o=__assign$h({},e);o[t]={id:r,value:n,toString:function(){return i}};return o}))}return e};e.prototype.getCommonChartOptions=function(){var e,t;var r=this.clearThemeOverrides?{}:(t=(e=this.chart)===null||e===void 0?void 0:e.getOptions())!==null&&t!==void 0?t:{};var n=this.chart!=null?{overrides:this.getActiveFormattingPanelOverrides()}:{};this.clearThemeOverrides=false;return __assign$h(__assign$h({},r),{theme:__assign$h(__assign$h({},createAgChartTheme(this.chartProxyParams,this)),n),container:this.chartProxyParams.parentElement,mode:"integrated"})};e.prototype.getActiveFormattingPanelOverrides=function(){var e,t;if(this.clearThemeOverrides){return{}}var r=(e=this.chart)===null||e===void 0?void 0:e.getOptions().theme;var n=(t=r===null||r===void 0?void 0:r.overrides)!==null&&t!==void 0?t:{};return n};e.prototype.destroy=function(e){var t=(e===void 0?{}:e).keepChartInstance,r=t===void 0?false:t;if(r){return this.chart}this.destroyChart()};e.prototype.destroyChart=function(){if(this.chart){this.chart.destroy();this.chart=undefined}};return e}();var __extends$_=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$g=function(){__assign$g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$g.apply(this,arguments)};var CartesianChartProxy=function(e){__extends$_(t,e);function t(t){var r=e.call(this,t)||this;r.crossFilteringAllPoints=new Set;r.crossFilteringSelectedPoints=[];return r}t.prototype.update=function(e){var t=this.getAxes(e);var r=__assign$g(__assign$g({},this.getCommonChartOptions()),{data:this.getData(e,t),axes:t,series:this.getSeries(e)});AgChart.update(this.getChartRef(),r)};t.prototype.getData=function(e,t){var r;var n=["area","line"].includes(this.standaloneChartType);var i=this.standaloneChartType==="bar"?"left":"bottom";var o=((r=t.find((function(e){return e.position===i})))===null||r===void 0?void 0:r.type)==="category";return this.crossFiltering&&n?this.getCrossFilterData(e):this.getDataTransformedData(e,o)};t.prototype.getDataTransformedData=function(e,t){return this.transformData(e.data,e.category.id,t)};t.prototype.getXAxisType=function(e){if(e.grouping){return"groupedCategory"}else if(t.isTimeAxis(e)){return"time"}return"category"};t.isTimeAxis=function(e){if(e.category&&e.category.chartDataType){return e.category.chartDataType==="time"}var t=e.data[0];return(t&&t[e.category.id])instanceof Date};t.prototype.crossFilteringReset=function(){this.crossFilteringSelectedPoints=[];this.crossFilteringAllPoints.clear()};t.prototype.crossFilteringPointSelected=function(e){return this.crossFilteringSelectedPoints.length==0||this.crossFilteringSelectedPoints.includes(e)};t.prototype.crossFilteringDeselectedPoints=function(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length};t.prototype.extractLineAreaCrossFilterSeries=function(e,t){var r=this;var n=function(e){if(r.standaloneChartType==="area"){var n=t.getCrossFilteringContext().lastSelectedChartId;return n===t.chartId?e+"-total":e}return e+"-total"};return e.map((function(e){e.yKey=n(e.yKey);e.listeners={nodeClick:function(t){var n=t.datum[e.xKey];var i=t.event.metaKey||t.event.ctrlKey;r.crossFilteringAddSelectedPoint(i,n);r.crossFilterCallback(t)}};e.marker={formatter:function(e){var n=e.datum[t.category.id];return{fill:e.highlighted?"yellow":e.fill,size:e.highlighted?14:r.crossFilteringPointSelected(n)?8:0}}};if(r.standaloneChartType==="area"){e.fillOpacity=r.crossFilteringDeselectedPoints()?.3:1}if(r.standaloneChartType==="line"){e.strokeOpacity=r.crossFilteringDeselectedPoints()?.3:1}return e}))};t.prototype.getCrossFilterData=function(e){var t=this;this.crossFilteringAllPoints.clear();var r=e.fields[0].colId;var n=r+"-filtered-out";var i=e.getCrossFilteringContext().lastSelectedChartId;return e.data.map((function(o){var a=o[e.category.id];t.crossFilteringAllPoints.add(a);var s=t.crossFilteringPointSelected(a);if(t.standaloneChartType==="area"&&i===e.chartId){o[r+"-total"]=s?o[r]:o[r]+o[n]}if(t.standaloneChartType==="line"){o[r+"-total"]=s?o[r]:o[r]+o[n]}return o}))};t.prototype.crossFilteringAddSelectedPoint=function(e,t){e?this.crossFilteringSelectedPoints.push(t):this.crossFilteringSelectedPoints=[t]};return t}(ChartProxy);function emptyTarget(e){return Array.isArray(e)?[]:{}}function cloneUnlessOtherwiseSpecified(e,t){return t.clone!==false&&t.isMergeableObject(e)?deepMerge(emptyTarget(e),e,t):e}function defaultArrayMerge(e,t,r){return e.concat(t).map((function(e){return cloneUnlessOtherwiseSpecified(e,r)}))}function getMergeFunction(e,t){if(!t.customMerge){return deepMerge}var r=t.customMerge(e);return typeof r==="function"?r:deepMerge}function getEnumerableOwnPropertySymbols(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}function getKeys(e){return Object.keys(e).concat(getEnumerableOwnPropertySymbols(e))}function propertyIsOnObject(e,t){try{return t in e}catch(e){return false}}function propertyIsUnsafe(e,t){return propertyIsOnObject(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function mergeObject(e,t,r){if(e===void 0){e={}}if(t===void 0){t={}}var n={};if(r.isMergeableObject(e)){getKeys(e).forEach((function(t){n[t]=cloneUnlessOtherwiseSpecified(e[t],r)}))}getKeys(t).forEach((function(i){if(propertyIsUnsafe(e,i)){return}if(propertyIsOnObject(e,i)&&r.isMergeableObject(t[i])){n[i]=getMergeFunction(i,r)(e[i],t[i],r)}else{n[i]=cloneUnlessOtherwiseSpecified(t[i],r)}}));return n}function defaultIsMergeableObject(e){return isNonNullObject(e)&&!isSpecial(e)}function isNonNullObject(e){return!!e&&typeof e==="object"}function isSpecial(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"}function deepMerge(e,t,r){r=r||{};r.arrayMerge=r.arrayMerge||defaultArrayMerge;r.isMergeableObject=r.isMergeableObject||defaultIsMergeableObject;r.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var n=Array.isArray(t);var i=Array.isArray(e);var o=n===i;if(!o){return cloneUnlessOtherwiseSpecified(t,r)}else if(n){return r.arrayMerge(e,t,r)}else{return mergeObject(e,t,r)}}function hexToRGBA(e,t){var r=parseInt(e.slice(1,3),16);var n=parseInt(e.slice(3,5),16);var i=parseInt(e.slice(5,7),16);return t?"rgba("+r+", "+n+", "+i+", "+t+")":"rgba("+r+", "+n+", "+i+")"}function changeOpacity(e,t){return e.map((function(e){var r=Color.fromString(e);return new Color(r.r,r.g,r.b,t).toHexString()}))}var __extends$Z=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$f=function(){__assign$f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$f.apply(this,arguments)};var BarChartProxy=function(e){__extends$Z(t,e);function t(t){return e.call(this,t)||this}t.prototype.getAxes=function(e){var t=this.standaloneChartType==="bar";var r=[{type:this.getXAxisType(e),position:t?"left":"bottom"},{type:"number",position:t?"bottom":"left"}];if(this.isNormalised()){var n=r[1];n.label=__assign$f(__assign$f({},n.label),{formatter:function(e){return Math.round(e.value)+"%"}})}return r};t.prototype.getSeries=function(e){var t=this;var r=["groupedColumn","groupedBar"];var n=!this.crossFiltering&&_.includes(r,this.chartType);var i=e.fields.map((function(r){return{type:t.standaloneChartType,grouped:n,normalizedTo:t.isNormalised()?100:undefined,xKey:e.category.id,xName:e.category.name,yKey:r.colId,yName:r.displayName}}));return this.crossFiltering?this.extractCrossFilterSeries(i):i};t.prototype.extractCrossFilterSeries=function(e){var t=this;var r=this.getChartPalette();var n=function(e,n){return __assign$f(__assign$f({},e),{highlightStyle:{item:{fill:undefined}},fill:r===null||r===void 0?void 0:r.fills[n],stroke:r===null||r===void 0?void 0:r.strokes[n],listeners:{nodeClick:t.crossFilterCallback}})};var i=function(e){var t=e.yKey+"-filtered-out";return __assign$f(__assign$f({},deepMerge({},e)),{yKey:t,fill:hexToRGBA(e.fill,"0.3"),stroke:hexToRGBA(e.stroke,"0.3"),hideInLegend:[t]})};var o=[];for(var a=0;a<e.length;a++){var s=n(e[a],a);o.push(s);o.push(i(s))}return o};t.prototype.isNormalised=function(){var e=["normalizedColumn","normalizedBar"];return!this.crossFiltering&&_.includes(e,this.chartType)};return t}(CartesianChartProxy);var __extends$Y=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$e=function(){__assign$e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$e.apply(this,arguments)};var AreaChartProxy=function(e){__extends$Y(t,e);function t(t){return e.call(this,t)||this}t.prototype.getAxes=function(e){var t=[{type:this.getXAxisType(e),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){var r=t[1];r.label=__assign$e(__assign$e({},r.label),{formatter:function(e){return Math.round(e.value)+"%"}})}return t};t.prototype.getSeries=function(e){var t=this;var r=e.fields.map((function(r){return{type:t.standaloneChartType,xKey:e.category.id,xName:e.category.name,yKey:r.colId,yName:r.displayName,normalizedTo:t.chartType==="normalizedArea"?100:undefined,stacked:["normalizedArea","stackedArea"].includes(t.chartType)}}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(r,e):r};t.prototype.isNormalised=function(){return!this.crossFiltering&&this.chartType==="normalizedArea"};return t}(CartesianChartProxy);var __extends$X=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var LineChartProxy=function(e){__extends$X(t,e);function t(t){return e.call(this,t)||this}t.prototype.getAxes=function(e){return[{type:this.getXAxisType(e),position:"bottom"},{type:"number",position:"left"}]};t.prototype.getSeries=function(e){var t=this;var r=e.fields.map((function(r){return{type:t.standaloneChartType,xKey:e.category.id,xName:e.category.name,yKey:r.colId,yName:r.displayName}}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(r,e):r};return t}(CartesianChartProxy);var __extends$W=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$d=function(){__assign$d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$d.apply(this,arguments)};var PieChartProxy=function(e){__extends$W(t,e);function t(t){return e.call(this,t)||this}t.prototype.update=function(e){var t=e.data,r=e.category;var n=__assign$d(__assign$d({},this.getCommonChartOptions()),{data:this.crossFiltering?this.getCrossFilterData(e):this.transformData(t,r.id),series:this.getSeries(e)});AgChart.update(this.getChartRef(),n)};t.prototype.getSeries=function(e){var r=this;var n=e.fields.length;var i={currentOffset:0,offsetAmount:n>1?20:40};var o=this.getFields(e).map((function(o){var a;var s={type:r.standaloneChartType,angleKey:o.colId,angleName:o.displayName,sectorLabelKey:o.colId,calloutLabelKey:e.category.id,calloutLabelName:e.category.name};if(r.chartType==="doughnut"){var l=t.calculateOffsets(i),u=l.outerRadiusOffset,c=l.innerRadiusOffset;var d=o.displayName?{title:{text:o.displayName,showInLegend:n>1}}:undefined;return __assign$d(__assign$d(__assign$d(__assign$d({},s),{outerRadiusOffset:u,innerRadiusOffset:c}),d),{calloutLine:{colors:(a=r.getChartPalette())===null||a===void 0?void 0:a.strokes}})}return s}));return this.crossFiltering?this.extractCrossFilterSeries(o):o};t.prototype.getCrossFilterData=function(e){var t=e.fields[0].colId;var r=t+"-filtered-out";return e.data.map((function(e){var n=e[t]+e[r];e[t+"-total"]=n;e[r]=1;e[t]=e[t]/n;return e}))};t.prototype.extractCrossFilterSeries=function(e){var t=this;var r=this.getChartPalette();var n=function(e){return __assign$d(__assign$d({},e),{calloutLabel:{enabled:false},highlightStyle:{item:{fill:undefined}},radiusKey:e.angleKey,angleKey:e.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:t.crossFilterCallback}})};var i=function(e,t){var n,i;return __assign$d(__assign$d({},deepMerge({},s)),{radiusKey:t+"-filtered-out",fills:changeOpacity((n=e.fills)!==null&&n!==void 0?n:r.fills,.3),strokes:changeOpacity((i=e.strokes)!==null&&i!==void 0?i:r.strokes,.3),showInLegend:false})};var o=e[0];var a=o.angleKey;var s=n(o);return[i(o,a),s]};t.calculateOffsets=function(e){var t=e.currentOffset;e.currentOffset-=e.offsetAmount;var r=e.currentOffset;e.currentOffset-=e.offsetAmount;return{outerRadiusOffset:t,innerRadiusOffset:r}};t.prototype.getFields=function(e){return this.chartType==="pie"?e.fields.slice(0,1):e.fields};t.prototype.crossFilteringReset=function(){};return t}(ChartProxy);var __extends$V=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$c=function(){__assign$c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$c.apply(this,arguments)};var __values$5=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var __read$e=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$7=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$e(arguments[t]));return e};var ScatterChartProxy=function(e){__extends$V(t,e);function t(t){return e.call(this,t)||this}t.prototype.getAxes=function(e){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]};t.prototype.getSeries=function(e){var t=this;var r=this.isPaired();var n=this.getSeriesDefinitions(e.fields,r);var i=e.category.id===ChartDataModel.DEFAULT_CATEGORY?undefined:e.category;var o=n.map((function(e){return{type:t.standaloneChartType,xKey:e.xField.colId,xName:e.xField.displayName,yKey:e.yField.colId,yName:e.yField.displayName,title:e.yField.displayName+" vs "+e.xField.displayName,sizeKey:e.sizeField?e.sizeField.colId:undefined,sizeName:e.sizeField?e.sizeField.displayName:undefined,labelKey:i?i.id:e.yField.colId,labelName:i?i.name:undefined}}));return this.crossFiltering?this.extractCrossFilterSeries(o,e):o};t.prototype.extractCrossFilterSeries=function(e,t){var r=this;var n=t.data;var i=this.getChartPalette();var o=function(e){return e+"-filtered-out"};var a=function(e,t){var r,n;var i;var a=[Infinity,-Infinity];if(t!=null){try{for(var s=__values$5(e),l=s.next();!l.done;l=s.next()){var u=l.value;var c=(i=u[t])!==null&&i!==void 0?i:u[o(t)];if(c<a[0]){a[0]=c}if(c>a[1]){a[1]=c}}}catch(e){r={error:e}}finally{try{if(l&&!l.done&&(n=s.return))n.call(s)}finally{if(r)throw r.error}}}if(a[0]<=a[1]){return a}return undefined};var s=function(e,t){var o=e.sizeKey;var s=i===null||i===void 0?void 0:i.fills[t];var l=i===null||i===void 0?void 0:i.strokes[t];var u=a(n,o);var c=__assign$c(__assign$c({},e.marker),{fill:s,stroke:l,domain:u});return __assign$c(__assign$c({},e),{marker:c,highlightStyle:{item:{fill:"yellow"}},listeners:__assign$c(__assign$c({},e.listeners),{nodeClick:r.crossFilterCallback})})};var l=function(e){var t=e.sizeKey,n=e.yKey,i=e.xKey;if(t!=null){t=o(t)}return __assign$c(__assign$c({},e),{yKey:o(n),xKey:o(i),marker:__assign$c(__assign$c({},e.marker),{fillOpacity:.3,strokeOpacity:.3}),sizeKey:t,showInLegend:false,listeners:__assign$c(__assign$c({},e.listeners),{nodeClick:function(e){var t;var n=e.datum[o(i)];var a=__assign$c(__assign$c({},e),{xKey:i,datum:__assign$c(__assign$c({},e.datum),(t={},t[i]=n,t))});r.crossFilterCallback(a)}})})};var u=e.map(s);return __spread$7(u,u.map(l))};t.prototype.getSeriesDefinitions=function(e,t){if(e.length<2){return[]}var r=this.chartType==="bubble";if(t){if(r){return e.map((function(t,r){return r%3===0?{xField:t,yField:e[r+1],sizeField:e[r+2]}:null})).filter((function(e){return e&&e.yField&&e.sizeField}))}return e.map((function(t,r){return r%2===0?{xField:t,yField:e[r+1]}:null})).filter((function(e){return e&&e.yField}))}var n=e[0];if(r){return e.map((function(t,r){return r%2===1?{xField:n,yField:t,sizeField:e[r+1]}:null})).filter((function(e){return e&&e.sizeField}))}return e.filter((function(e,t){return t>0})).map((function(e){return{xField:n,yField:e}}))};return t}(CartesianChartProxy);var __extends$U=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var HistogramChartProxy=function(e){__extends$U(t,e);function t(t){return e.call(this,t)||this}t.prototype.getSeries=function(e){var t=e.fields[0];return[{type:this.standaloneChartType,xKey:t.colId,xName:t.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:false}]};t.prototype.getAxes=function(e){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]};return t}(CartesianChartProxy);var __extends$T=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var ChartOptionsService=function(e){__extends$T(t,e);function t(t){var r=e.call(this)||this;r.chartController=t;return r}t.prototype.getChartOption=function(e){return _.get(this.getChart(),e,undefined)};t.prototype.setChartOption=function(e,t,r){var n=this;var i=this.chartController.getChartSeriesTypes();if(this.chartController.isComboChart()){i.push("cartesian")}var o={};i.forEach((function(r){o=deepMerge(o,n.createChartOptions({seriesType:r,expression:e,value:t}))}));this.updateChart(o);if(!r){this.raiseChartOptionsChangedEvent()}};t.prototype.awaitChartOptionUpdate=function(e){var t=this.chartController.getChartProxy().getChart();t.waitForUpdate().then((function(){return e()}))};t.prototype.getAxisProperty=function(e){var t;return _.get((t=this.getChart().axes)===null||t===void 0?void 0:t[0],e,undefined)};t.prototype.setAxisProperty=function(e,t){var r=this;var n;var i=this.getChart();var o={};(n=i.axes)===null||n===void 0?void 0:n.forEach((function(n){o=deepMerge(o,r.getUpdateAxisOptions(n,e,t))}));this.updateChart(o);this.raiseChartOptionsChangedEvent()};t.prototype.getLabelRotation=function(e){var t=this.getAxis(e);return _.get(t,"label.rotation",undefined)};t.prototype.setLabelRotation=function(e,t){var r=this.getAxis(e);if(r){var n=this.getUpdateAxisOptions(r,"label.rotation",t);this.updateChart(n);this.raiseChartOptionsChangedEvent()}};t.prototype.getSeriesOption=function(e,r){var n=this.getChart().series.find((function(e){return t.isMatchingSeries(r,e)}));return _.get(n,e,undefined)};t.prototype.setSeriesOption=function(e,t,r){var n=this.createChartOptions({seriesType:r,expression:"series."+e,value:t});this.updateChart(n);this.raiseChartOptionsChangedEvent()};t.prototype.getPairedMode=function(){return this.chartController.getChartProxy().isPaired()};t.prototype.setPairedMode=function(e){this.chartController.getChartProxy().setPaired(e)};t.prototype.getAxis=function(e){var t=this.getChart();if(!t.axes||t.axes.length<1){return undefined}if(e==="xAxis"){return t.axes&&t.axes[0].direction==="x"?t.axes[0]:t.axes[1]}return t.axes&&t.axes[1].direction==="y"?t.axes[1]:t.axes[0]};t.prototype.getUpdateAxisOptions=function(e,t,r){var n=getSeriesType(this.getChartType());var i=["number","category","time","groupedCategory"];if(!i.includes(e.type)){return{}}return this.createChartOptions({seriesType:n,expression:"axes."+e.type+"."+t,value:r})};t.prototype.getChartType=function(){return this.chartController.getChartType()};t.prototype.getChart=function(){return this.chartController.getChartProxy().getChart()};t.prototype.updateChart=function(e){var t=this.chartController.getChartProxy().getChartRef();AgChart.updateDelta(t,e)};t.prototype.createChartOptions=function(e){var t=e.seriesType,r=e.expression,n=e.value;var i={};var o={theme:{overrides:i}};_.set(i,t+"."+r,n);return o};t.prototype.raiseChartOptionsChangedEvent=function(){var e=this.chartController.getChartModel();var t={type:Events.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions};this.eventService.dispatchEvent(t)};t.isMatchingSeries=function(e,t){var r=function(e){return e==="column"?"bar":e};return VALID_SERIES_TYPES.includes(e)&&t.type===r(e)};t.prototype.destroy=function(){e.prototype.destroy.call(this)};return t}(BeanStub);var __extends$S=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var ComboChartProxy=function(e){__extends$S(t,e);function t(t){return e.call(this,t)||this}t.prototype.getAxes=function(e){var t=e?e.fields:[];var r=new Map(t.map((function(e){return[e.colId,e]})));var n=this.getYKeys(t,e.seriesChartTypes),i=n.primaryYKeys,o=n.secondaryYKeys;var a=[{type:this.getXAxisType(e),position:"bottom",gridStyle:[{stroke:undefined}]}];if(i.length>0){a.push({type:"number",keys:i,position:"left",title:{text:i.map((function(e){var t=r.get(e);return t?t.displayName:e})).join(" / ")}})}if(o.length>0){o.forEach((function(e,t){var n=r.get(e);var s=n&&n.colId===e;if(!s){return}var l={type:"number",keys:[e],position:"right",title:{text:n?n.displayName:e}};var u=i.some((function(e){return!!r.get(e)}));var c=t===o.length-1;if(!u&&c);else{l.gridStyle=[{stroke:undefined}]}a.push(l)}))}return a};t.prototype.getSeries=function(e){var t=e.fields,r=e.category,n=e.seriesChartTypes;return t.map((function(e){var t=n.find((function(t){return t.colId===e.colId}));if(t){var i=t.chartType;return{type:getSeriesType(i),xKey:r.id,yKey:e.colId,yName:e.displayName,grouped:["groupedColumn","groupedBar","groupedArea"].includes(i),stacked:["stackedArea","stackedColumn"].includes(i)}}}))};t.prototype.getYKeys=function(e,t){var r=[];var n=[];e.forEach((function(e){var i=e.colId;var o=t.find((function(e){return e.colId===i}));if(o){o.secondaryAxis?n.push(i):r.push(i)}}));return{primaryYKeys:r,secondaryYKeys:n}};return t}(CartesianChartProxy);var __extends$R=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$N=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var GridChartComp=function(e){__extends$R(t,e);function t(r){var n=e.call(this,t.TEMPLATE)||this;n.params=r;return n}t.prototype.init=function(){var e=this;var t=this.gridOptionsService.get("chartThemes")||DEFAULT_THEMES;if(t.length<1){throw new Error("Cannot create chart: no chart themes are available to be used.")}var r=this.params.chartThemeName;if(!_.includes(t,r)){r=t[0]}var n={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName:r,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes};var i=this.gridOptionsService.is("enableRtl");this.addCssClass(i?"ag-rtl":"ag-ltr");var o=this.createBean(new ChartDataModel(n));this.chartController=this.createManagedBean(new ChartController(o));this.validateCustomThemes();this.createChart();if(this.params.insideDialog){this.addDialog()}this.addMenu();this.addTitleEditComp();this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this));this.addManagedListener(this.chartController,ChartController.EVENT_CHART_MODEL_UPDATE,this.update.bind(this));if(this.chartMenu){this.addManagedListener(this.chartMenu,ChartMenu.EVENT_DOWNLOAD_CHART,(function(){return e.downloadChart()}))}this.update();this.raiseChartCreatedEvent()};t.prototype.validateCustomThemes=function(){var e=this.getChartThemes();var t=this.gridOptionsService.get("customChartThemes");if(t){_.getAllKeysInObjects([t]).forEach((function(t){if(!_.includes(e,t)){console.warn("AG Grid: a custom chart theme with the name '"+t+"' has been "+"supplied but not added to the 'chartThemes' list")}}))}};t.prototype.createChart=function(){var e=this;var r=undefined;if(this.chartProxy){r=this.chartProxy.destroy({keepChartInstance:true})}var n=function(t,r){var n=e.params.crossFilteringContext;n.lastSelectedChartId=r?"":e.chartController.getChartId();if(r){e.params.crossFilteringResetCallback()}e.crossFilterService.filter(t,r)};var i=this.chartController.getChartType();var o={chartType:i,chartInstance:r,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:function(){return e.getGridOptionsChartThemeOverrides()},getExtraPaddingDirections:function(){var t,r;return(r=(t=e.chartMenu)===null||t===void 0?void 0:t.getExtraPaddingDirections())!==null&&r!==void 0?r:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:n,parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:function(t,r){return e.chartTranslationService.translate(t,r)}};this.params.chartOptionsToRestore=undefined;this.chartType=i;this.chartThemeName=this.chartController.getChartThemeName();this.chartProxy=t.createChartProxy(o);if(!this.chartProxy){console.warn("AG Grid: invalid chart type supplied: ",o.chartType);return}var a=this.eChart.querySelector("canvas");if(a){a.classList.add("ag-charts-canvas")}this.chartController.setChartProxy(this.chartProxy);this.chartOptionsService=this.createBean(new ChartOptionsService(this.chartController));this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)};t.prototype.getChartThemeName=function(){return this.chartController.getChartThemeName()};t.prototype.getChartThemes=function(){return this.chartController.getThemes()};t.prototype.getGridOptionsChartThemeOverrides=function(){return this.gridOptionsService.get("chartThemeOverrides")};t.createChartProxy=function(e){switch(e.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new BarChartProxy(e);case"pie":case"doughnut":return new PieChartProxy(e);case"area":case"stackedArea":case"normalizedArea":return new AreaChartProxy(e);case"line":return new LineChartProxy(e);case"scatter":case"bubble":return new ScatterChartProxy(e);case"histogram":return new HistogramChartProxy(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new ComboChartProxy(e);default:throw"AG Grid: Unable to create chart as an invalid chartType = '"+e.chartType+"' was supplied."}};t.prototype.addDialog=function(){var e=this;var t=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle");var r=this.getBestDialogSize(),n=r.width,i=r.height;this.chartDialog=new AgDialog({resizable:true,movable:true,maximizable:true,title:t,width:n,height:i,component:this,centered:true,closable:true});this.getContext().createBean(this.chartDialog);this.chartDialog.addEventListener(AgDialog.EVENT_DESTROYED,(function(){return e.destroy()}))};t.prototype.getBestDialogSize=function(){var e=this.popupService.getPopupParent();var t=_.getAbsoluteWidth(e)*.75;var r=_.getAbsoluteHeight(e)*.75;var n=.553;var i=this.chartProxy.getChart();var o=this.params.insideDialog?850:i.width;var a=this.params.insideDialog?470:i.height;if(o>t||a>r){o=Math.min(o,t);a=Math.round(o*n);if(a>r){a=r;o=Math.min(o,Math.round(a/n))}}return{width:o,height:a}};t.prototype.addMenu=function(){if(!this.params.crossFiltering){this.chartMenu=this.createBean(new ChartMenu(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService));this.eChartContainer.appendChild(this.chartMenu.getGui())}};t.prototype.addTitleEditComp=function(){this.titleEdit=this.createBean(new TitleEdit(this.chartMenu));this.eTitleEditContainer.appendChild(this.titleEdit.getGui());if(this.chartProxy){this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}};t.prototype.update=function(){if(this.shouldRecreateChart()){this.createChart()}this.updateChart()};t.prototype.shouldRecreateChart=function(){return this.chartType!==this.chartController.getChartType()||this.chartThemeName!==this.chartController.getChartThemeName()};t.prototype.getCurrentChartType=function(){return this.chartType};t.prototype.getChartModel=function(){return this.chartController.getChartModel()};t.prototype.getChartImageDataURL=function(e){return this.chartProxy.getChartImageDataURL(e)};t.prototype.updateChart=function(){var e=this;var t=this.chartProxy;var r=this.chartController.getSelectedValueColState();var n=r.map((function(e){return{colId:e.colId,displayName:e.displayName}}));var i=this.chartController.getChartData();var o=this.handleEmptyChart(i,n);if(o){return}var a=this.chartController.getChartUpdateParams();t.update(a);this.chartProxy.getChart().waitForUpdate().then((function(){e.chartController.raiseChartUpdatedEvent()}));this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)};t.prototype.handleEmptyChart=function(e,t){var r=this.chartController.isPivotChart()&&!this.chartController.isPivotMode();var n=1;if(this.chartController.isActiveXYChart()){n=this.chartController.getChartType()==="bubble"?3:2}var i=t.length<n||e.length===0;if(this.eChart){var o=r||i;_.setDisplayed(this.eChart,!o);_.setDisplayed(this.eEmpty,o)}if(r){this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode");return true}if(i){this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart");return true}return false};t.prototype.downloadChart=function(e,t,r){this.chartProxy.downloadChart(e,t,r)};t.prototype.openChartToolPanel=function(e){var t=e?CHART_TOOL_PANEL_MENU_OPTIONS[e]:e;this.chartMenu.showMenu(t)};t.prototype.closeChartToolPanel=function(){this.chartMenu.hideMenu()};t.prototype.getChartId=function(){return this.chartController.getChartId()};t.prototype.getUnderlyingChart=function(){return this.chartProxy.getChartRef()};t.prototype.crossFilteringReset=function(){this.chartProxy.crossFilteringReset()};t.prototype.setActiveChartCellRange=function(e){if(this.getGui().contains(e.relatedTarget)){return}this.chartController.setChartRange(true);this.gridApi.focusService.clearFocusedCell()};t.prototype.raiseChartCreatedEvent=function(){var e=this;var t={type:Events.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then((function(){e.eventService.dispatchEvent(t)}))};t.prototype.raiseChartDestroyedEvent=function(){var e={type:Events.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(e)};t.prototype.destroy=function(){e.prototype.destroy.call(this);if(this.chartProxy){this.chartProxy.destroy()}this.destroyBean(this.chartMenu);this.destroyBean(this.titleEdit);if(this.chartDialog&&this.chartDialog.isAlive()){this.destroyBean(this.chartDialog)}var t=this.getGui();_.clearElement(t);_.removeFromParent(t);this.raiseChartDestroyedEvent()};t.TEMPLATE='<div class="ag-chart" tabindex="-1">\n            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">\n                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n            </div>\n            <div ref="eTitleEditContainer"></div>\n            <div ref="eMenuContainer" class="ag-chart-docked-container"></div>\n        </div>';__decorate$N([RefSelector("eChart")],t.prototype,"eChart",void 0);__decorate$N([RefSelector("eChartContainer")],t.prototype,"eChartContainer",void 0);__decorate$N([RefSelector("eMenuContainer")],t.prototype,"eMenuContainer",void 0);__decorate$N([RefSelector("eEmpty")],t.prototype,"eEmpty",void 0);__decorate$N([RefSelector("eTitleEditContainer")],t.prototype,"eTitleEditContainer",void 0);__decorate$N([Autowired("chartCrossFilterService")],t.prototype,"crossFilterService",void 0);__decorate$N([Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0);__decorate$N([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$N([Autowired("popupService")],t.prototype,"popupService",void 0);__decorate$N([PostConstruct],t.prototype,"init",null);return t}(Component);var VERSION$a="29.3.5";var __assign$b=function(){__assign$b=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$b.apply(this,arguments)};var __rest=function(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r};var __read$d=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __values$4=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function upgradeChartModel(e){e.version;if(e.version==null){e.version=heuristicVersionDetection(e)}e=migrateIfBefore("23.0.0",e,migrateV23);e=migrateIfBefore("24.0.0",e,migrateV24);e=migrateIfBefore("25.1.0",e,migrateV25_1);e=migrateIfBefore("26.0.0",e,migrateV26);e=migrateIfBefore("26.1.0",e,migrateV26_1);e=migrateIfBefore("26.2.0",e,migrateV26_2);e=migrateIfBefore("28.0.0",e,migrateV28);e=migrateIfBefore("28.2.0",e,migrateV28_2);e=migrateIfBefore("29.0.0",e,migrateV29);e=cleanup(e);e=migrateIfBefore(VERSION$a,e,(function(e){return e}));return e}function migrateV23(e){e=jsonRename("chartOptions.legend.item.marker.type","shape",e);e=jsonRename("chartOptions.seriesDefaults.marker.type","shape",e);e=jsonRename("chartOptions.legend.padding","spacing",e);return e}function migrateV24(e){var t;e=jsonDelete("chartOptions.seriesDefaults.marker.minSize",e);var r=e,n=r.chartType,i=r.chartPalette,o=r.chartOptions,a=o.xAxis,s=o.yAxis,l=__rest(o,["xAxis","yAxis"]),u=__rest(r,["chartType","chartPalette","chartOptions"]);var c=getLegacyAxisType(n);var d=c===null||c===void 0?void 0:c.map((function(e,t){return __assign$b({type:e},t===0?a:s)}));return __assign$b({chartType:n,chartThemeName:(t=LEGACY_PALETTES[i])!==null&&t!==void 0?t:"ag-default",chartOptions:__assign$b(__assign$b({},l),{axes:d,xAxis:a,yAxis:s})},u)}function migrateV25_1(e){e=jsonRename("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",e);return e}function migrateV26(e){var t=function(e){var t=e.dimOpacity,r=__rest(e,["dimOpacity"]);return __assign$b(__assign$b({},r),t!=null?{series:{dimOpacity:t}}:{})};e=jsonMutate("chartOptions.seriesDefaults.highlightStyle",e,t);e=jsonDelete("chart",e);e=jsonDelete("chartOptions.seriesDefaults.tooltipClass",e);e=jsonDelete("chartOptions.seriesDefaults.tooltipTracking",e);e=jsonDeleteDefault("chartOptions.axes[].label.rotation",0,e);e=jsonDeleteDefault("chartOptions.axes[].label.rotation",335,e);return e}function migrateV26_1(e){var t=function(e){var t=e.item,r=e.series,n=__rest(e,["item","series"]);return __assign$b({item:__assign$b(__assign$b({},n),t)},r?{series:r}:{})};e=jsonMutate("chartOptions.seriesDefaults.highlightStyle",e,t);e=jsonMutate("chartOptions.series[].highlightStyle",e,t);return e}function migrateV26_2(e){e=jsonMove("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",e);e=jsonMove("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",e);e=jsonMove("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",e);e=jsonDelete("chartOptions.seriesDefaults.fill",e);e=jsonDelete("chartOptions.seriesDefaults.stroke",e);e=jsonDelete("chartOptions.seriesDefaults.callout.colors",e);e=jsonDelete("chartOptions.xAxis",e);e=jsonDelete("chartOptions.yAxis",e);var t=e,r=t.chartType,n=t.chartOptions,i=n.axes;n.series;var o=n.seriesDefaults,a=__rest(n,["axes","series","seriesDefaults"]),s=__rest(t,["chartType","chartOptions"]);var l=[getSeriesType(r)];var u={};if(!l.includes("pie")){var c={top:{},bottom:{},left:{},right:{}};var d=i.map((function(e){var t;var r=e.type,n=__rest(e,["type"]);return t={},t[r]=__assign$b(__assign$b({},c),n),t})).reduce(merge,{});ALL_AXIS_TYPES.filter((function(e){return d[e]==null})).forEach((function(e){d[e]=__assign$b({},c)}));u.axes=d}var p=l.map((function(e){var t;return t={},t[e]=__assign$b(__assign$b(__assign$b({},u),{series:o}),a),t})).reduce(merge,{});e=__assign$b(__assign$b({},s),{chartType:r,chartOptions:p});return e}function migrateV28(e){e=jsonDelete("chartOptions.*.title.padding",e);e=jsonDelete("chartOptions.*.subtitle.padding",e);e=jsonDelete("chartOptions.*.axes.*.title.padding",e);e=jsonBackfill("chartOptions.*.axes.*.title.enabled",false,e);return e}function migrateV28_2(e){e=jsonRename("chartOptions.pie.series.callout","calloutLine",e);e=jsonRename("chartOptions.pie.series.label","calloutLabel",e);return e}function migrateV29(e){e=jsonMoveIfMissing("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",e);e=jsonMoveIfMissing("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",e);e=jsonMoveIfMissing("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",e);e=jsonMoveIfMissing("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",e);e=jsonMoveIfMissing("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",e);e=jsonMove("chartOptions.scatter.series.paired","chartOptions.scatter.paired",e);return e}function cleanup(e){e=jsonDelete("chartOptions.*.width",e);e=jsonDelete("chartOptions.*.height",e);e=jsonBackfill("chartOptions.*.axes.category.label.autoRotate",true,e);return e}function heuristicVersionDetection(e){var t,r;var n=e;if(e.version!=null){return e.version}var i=function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}return Object.keys(e||{}).some((function(e){return t.includes(e)}))};var o=n.chartOptions;var a=i(o,"seriesDefaults")?o===null||o===void 0?void 0:o.seriesDefaults:o===null||o===void 0?void 0:o[Object.keys(o)[0]];var s={"27.0.0":i(n,"seriesChartTypes"),"26.2.0":!i(o,"seriesDefaults"),"26.1.0":i(a===null||a===void 0?void 0:a.highlightStyle,"item"),"26.0.0":i(a===null||a===void 0?void 0:a.highlightStyle,"series"),"25.1.0":i(a===null||a===void 0?void 0:a.label,"minAngle"),"25.0.0":i(n,"modelType","aggFunc","unlinkChart","suppressChartRanges")||i(a,"lineDash","lineDashOffset"),"24.0.0":i(n,"chartThemeName","chart")||i(o,"series"),"23.2.0":i(o,"navigator"),"23.0.0":i((r=(t=o===null||o===void 0?void 0:o.legend)===null||t===void 0?void 0:t.item)===null||r===void 0?void 0:r.marker,"shape"),"22.1.0":i(n,"chartPalette","chartType")};var l="27.1.0";var u=Object.entries(s).filter((function(e){var t=__read$d(e,2);t[0];var r=t[1];return r}));var c=__read$d(u[0],1),d=c[0],p=d===void 0?l:d;return p}function migrateIfBefore(e,t,r){if(versionNumber(e)>versionNumber(t.version)){var n=r(t);n.version=e;return n}return t}function versionParts(e){var t=typeof e==="string"?e.split(".").map((function(e){return Number(e)})):[];if(t.length!==3||t.some((function(e){return isNaN(e)}))){throw new Error("AG Grid - Illegal version string: "+e)}return{major:t[0],minor:t[1],patch:t[2]}}function versionNumber(e){var t=versionParts(e),r=t.major,n=t.minor,i=t.patch;return r*1e4+n*100+i}function jsonDeleteDefault(e,t,r){return jsonMutateProperty(e,true,r,(function(e,r){if(e[r]===t){delete e[r]}}))}function jsonBackfill(e,t,r){return jsonMutateProperty(e,false,r,(function(e,r){if(e[r]==null){e[r]=t}}))}function jsonMove(e,t,r){var n=undefined;var i=false;r=jsonMutateProperty(e,true,r,(function(e,t){i=true;n=e[t];delete e[t]}));if(!i){return r}return jsonMutateProperty(t,false,r,(function(e,t){e[t]=n}))}function jsonMoveIfMissing(e,t,r){var n=undefined;var i=false;r=jsonMutateProperty(e,true,r,(function(e,t){i=true;n=e[t];delete e[t]}));if(!i){return r}return jsonMutateProperty(t,false,r,(function(e,t){if(e[t]===undefined){e[t]=n}}))}function jsonRename(e,t,r){return jsonMutateProperty(e,true,r,(function(e,r){e[t]=e[r];delete e[r]}))}function jsonDelete(e,t){return jsonMutateProperty(e,true,t,(function(e,t){return delete e[t]}))}function jsonMutateProperty(e,t,r,n){var i=e instanceof Array?e:e.split(".");var o=i.slice(0,i.length-1);var a=i[i.length-1];return jsonMutate(o,r,(function(e){var r=Object.keys(e).includes(a);if(t&&!r){return e}var i=__assign$b({},e);n(i,a);return i}))}function jsonMutate(e,t,r){var n,i;var o=e instanceof Array?e:e.split(".");t=__assign$b({},t);if(o.length===0){return r(t)}else if(o[0].startsWith("{")){var a=o[0].substring(1,o[0].lastIndexOf("}")).split(",");try{for(var s=__values$4(a),l=s.next();!l.done;l=s.next()){var u=l.value;if(t[u]!=null){t[u]=jsonMutate(o.slice(1),t[u],r)}}}catch(e){n={error:e}}finally{try{if(l&&!l.done&&(i=s.return))i.call(s)}finally{if(n)throw n.error}}}else if(o[0].endsWith("[]")){var c=o[0].substring(0,e[0].indexOf("["));if(t[c]instanceof Array){t[c]=t[c].map((function(e){return jsonMutate(o.slice(1),e,r)}))}}else if(o[0]==="*"){for(var d in t){t[d]=jsonMutate(o.slice(1),t[d],r)}}else if(t[o[0]]!=null){t[o[0]]=jsonMutate(o.slice(1),t[o[0]],r)}return t}var merge=function(e,t){return __assign$b(__assign$b({},e),t)};var LEGACY_PALETTES={borneo:"ag-default",material:"ag-material",pastel:"ag-pastel",bright:"ag-vivid",flat:"ag-solar"};var __extends$Q=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$a=function(){__assign$a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$a.apply(this,arguments)};var __decorate$M=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ChartService=function(e){__extends$Q(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.activeCharts=new Set;t.activeChartComps=new Set;t.crossFilteringContext={lastSelectedChartId:""};return t}t.prototype.getChartModels=function(){var e=[];var t=function(e){return __assign$a(__assign$a({},e),{version:VERSION$a})};this.activeChartComps.forEach((function(r){return e.push(t(r.getChartModel()))}));return e};t.prototype.getChartRef=function(e){var t;this.activeCharts.forEach((function(r){if(r.chartId===e){t=r}}));return t};t.prototype.getChartImageDataURL=function(e){var t;this.activeChartComps.forEach((function(r){if(r.getChartId()===e.chartId){t=r.getChartImageDataURL(e.fileFormat)}}));return t};t.prototype.downloadChart=function(e){var t=Array.from(this.activeChartComps).find((function(t){return t.getChartId()===e.chartId}));t===null||t===void 0?void 0:t.downloadChart(e.dimensions,e.fileName,e.fileFormat)};t.prototype.openChartToolPanel=function(e){var t=Array.from(this.activeChartComps).find((function(t){return t.getChartId()===e.chartId}));t===null||t===void 0?void 0:t.openChartToolPanel(e.panel)};t.prototype.closeChartToolPanel=function(e){var t=Array.from(this.activeChartComps).find((function(t){return t.getChartId()===e}));t===null||t===void 0?void 0:t.closeChartToolPanel()};t.prototype.createChartFromCurrentRange=function(e){if(e===void 0){e="groupedColumn"}var t=this.getSelectedRange();return this.createChart(t,e)};t.prototype.restoreChart=function(e,t){var r=this;if(!e){console.warn("AG Grid - unable to restore chart as no chart model is provided");return}if(e.version!==VERSION$a){e=upgradeChartModel(e)}var n={cellRange:e.cellRange,chartType:e.chartType,chartThemeName:e.chartThemeName,chartContainer:t,suppressChartRanges:e.suppressChartRanges,aggFunc:e.aggFunc,unlinkChart:e.unlinkChart,seriesChartTypes:e.seriesChartTypes};var i=function(e){return r.rangeService?r.rangeService.createCellRangeFromCellRangeParams(e):undefined};if(e.modelType==="pivot"){if(!this.columnModel.isPivotMode()){this.columnModel.setPivotMode(true,"pivotChart")}var o=this.columnModel.getAllDisplayedColumns().map((function(e){return e.getColId()}));var a={rowStartIndex:null,rowStartPinned:undefined,rowEndIndex:null,rowEndPinned:undefined,columns:o};var s=i(a);if(!s){console.warn("AG Grid - unable to create chart as there are no columns in the grid.");return}return this.createChart(s,n.chartType,n.chartThemeName,true,true,n.chartContainer,undefined,undefined,n.unlinkChart,false,e.chartOptions)}var l=i(n.cellRange);if(!l){console.warn("AG Grid - unable to create chart as no range is selected");return}return this.createChart(l,n.chartType,n.chartThemeName,false,n.suppressChartRanges,n.chartContainer,n.aggFunc,undefined,n.unlinkChart,false,e.chartOptions,e.chartPalette,n.seriesChartTypes)};t.prototype.createRangeChart=function(e){var t=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e.cellRange):undefined;if(!t){console.warn("AG Grid - unable to create chart as no range is selected");return}return this.createChart(t,e.chartType,e.chartThemeName,false,e.suppressChartRanges,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,undefined,undefined,undefined,e.seriesChartTypes)};t.prototype.createPivotChart=function(e){if(!this.columnModel.isPivotMode()){this.columnModel.setPivotMode(true,"pivotChart")}var t={rowStartIndex:null,rowStartPinned:undefined,rowEndIndex:null,rowEndPinned:undefined,columns:this.columnModel.getAllDisplayedColumns().map((function(e){return e.getColId()}))};var r=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(t):undefined;if(!r){console.warn("AG Grid - unable to create chart as there are no columns in the grid.");return}return this.createChart(r,e.chartType,e.chartThemeName,true,true,e.chartContainer,undefined,e.chartThemeOverrides,e.unlinkChart)};t.prototype.createCrossFilterChart=function(e){var t=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e.cellRange):undefined;if(!t){console.warn("AG Grid - unable to create chart as no range is selected");return}var r=true;var n=typeof e.suppressChartRanges!=="undefined"&&e.suppressChartRanges!==null;var i=n?e.suppressChartRanges:true;return this.createChart(t,e.chartType,e.chartThemeName,false,i,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,r)};t.prototype.createChart=function(e,t,r,n,i,o,a,s,l,u,c,d,p){var f=this;if(n===void 0){n=false}if(i===void 0){i=false}if(l===void 0){l=false}if(u===void 0){u=false}var h=this.gridOptionsService.getCallback("createChartContainer");var v={chartId:this.generateId(),pivotChart:n,cellRange:e,chartType:t,chartThemeName:r,insideDialog:!(o||h),suppressChartRanges:i,aggFunc:a,chartThemeOverrides:s,unlinkChart:l,crossFiltering:u,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:c,chartPaletteToRestore:d,seriesChartTypes:p,crossFilteringResetCallback:function(){return f.activeChartComps.forEach((function(e){return e.crossFilteringReset()}))}};var g=new GridChartComp(v);this.context.createBean(g);var y=this.createChartRef(g);if(o){o.appendChild(g.getGui());var m=this.environment.getTheme();if(m.el&&!m.el.contains(o)){o.classList.add(m.theme)}}else if(h){h(y)}else{g.addEventListener(GridChartComp.EVENT_DESTROYED,(function(){f.activeChartComps.delete(g);f.activeCharts.delete(y)}))}return y};t.prototype.createChartRef=function(e){var t=this;var r={destroyChart:function(){if(t.activeCharts.has(r)){t.context.destroyBean(e);t.activeChartComps.delete(e);t.activeCharts.delete(r)}},chartElement:e.getGui(),chart:e.getUnderlyingChart(),chartId:e.getChartModel().chartId};this.activeCharts.add(r);this.activeChartComps.add(e);return r};t.prototype.getSelectedRange=function(){var e=this.rangeService.getCellRanges();return e.length>0?e[0]:{}};t.prototype.generateId=function(){return"id-"+Math.random().toString(36).substr(2,16)};t.prototype.destroyAllActiveCharts=function(){this.activeCharts.forEach((function(e){return e.destroyChart()}))};t.CHARTS_VERSION=VERSION$b;__decorate$M([Optional("rangeService")],t.prototype,"rangeService",void 0);__decorate$M([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$M([PreDestroy],t.prototype,"destroyAllActiveCharts",null);t=__decorate$M([Bean("chartService")],t);return t}(BeanStub);var __extends$P=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$L=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ChartTranslationService=function(e){__extends$P(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}r=t;t.prototype.translate=function(e,t){var n=this.localeService.getLocaleTextFunc();var i=r.DEFAULT_TRANSLATIONS[e]||t;return n(e,i)};var r;t.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",autoRotate:"Auto Rotate",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"};t=r=__decorate$L([Bean("chartTranslationService")],t);return t}(BeanStub);var __extends$O=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$K=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ChartCrossFilterService=function(e){__extends$O(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}r=t;t.prototype.filter=function(e,t){if(t===void 0){t=false}var n=this.gridApi.getFilterModel();if(t){this.resetFilters(n);return}var i=r.extractFilterColId(e);if(this.isValidColumnFilter(i)){this.updateFilters(n,e,i)}else{console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' "+"to be defined on the column with id: '"+i+"'")}};t.prototype.resetFilters=function(e){var t=Object.keys(e).length>0;if(t){this.gridApi.setFilterModel(null);this.gridApi.onFilterChanged()}};t.prototype.updateFilters=function(e,t,n){var i;var o=r.extractFilterColId(t);var a=t.datum[o];if(a===undefined){return}var s=a.toString();if(t.event.metaKey||t.event.ctrlKey){var l=this.getCurrentGridValuesForCategory(n);var u=_.includes(l,s);var c=void 0;if(u){c=l.filter((function(e){return e!==s}))}else{c=l;c.push(s)}e[n]=this.getUpdatedFilterModel(n,c)}else{var c=[s];e=(i={},i[n]=this.getUpdatedFilterModel(n,c),i)}this.gridApi.setFilterModel(e)};t.prototype.getUpdatedFilterModel=function(e,t){var r=this.getColumnFilterType(e);if(r==="agMultiColumnFilter"){return{filterType:"multi",filterModels:[null,{filterType:"set",values:t}]}}return{filterType:"set",values:t}};t.prototype.getCurrentGridValuesForCategory=function(e){var t=this;var r=[];var n=this.getColumnById(e);this.gridApi.forEachNodeAfterFilter((function(e){if(n&&!e.group){var i=t.valueService.getValue(n,e)+"";if(!r.includes(i)){r.push(i)}}}));return r};t.extractFilterColId=function(e){return e.xKey||e.calloutLabelKey};t.prototype.isValidColumnFilter=function(e){if(e.indexOf("-filtered-out")){e=e.replace("-filtered-out","")}var t=this.getColumnFilterType(e);if(typeof t==="boolean"){return t}return _.includes(["agSetColumnFilter","agMultiColumnFilter"],t)};t.prototype.getColumnFilterType=function(e){var t=this.getColumnById(e);if(t){var r=t.getColDef();return r.filter!=null?r.filter:r.filterFramework}};t.prototype.getColumnById=function(e){return this.columnModel.getGridColumn(e)};var r;__decorate$K([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$K([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$K([Autowired("valueService")],t.prototype,"valueService",void 0);t=r=__decorate$K([Bean("chartCrossFilterService")],t);return t}(BeanStub);var __extends$N=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$9=function(){__assign$9=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$9.apply(this,arguments)};var __decorate$J=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$c=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$6=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$c(arguments[t]));return e};var __values$3=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var RangeService=function(e){__extends$N(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.cellRanges=[];t.bodyScrollListener=t.onBodyScroll.bind(t);t.dragging=false;t.intersectionRange=false;return t}t.prototype.init=function(){var e=this;this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,(function(){return e.onColumnsChanged()}));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){return e.removeAllCellRanges()}));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return e.removeAllCellRanges()}));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,(function(){return e.removeAllCellRanges()}));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this));this.ctrlsService.whenReady((function(){var t=e.ctrlsService.getGridBodyCtrl();e.autoScrollService=new AutoScrollService({scrollContainer:t.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:function(){return t.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(e){return t.getScrollFeature().setVerticalScrollPosition(e)},getHorizontalPosition:function(){return t.getScrollFeature().getHScrollPosition().left},setHorizontalPosition:function(e){return t.getScrollFeature().setHorizontalScrollPosition(e)},shouldSkipVerticalScroll:function(){return!e.gridOptionsService.isDomLayout("normal")},shouldSkipHorizontalScroll:function(){return!t.getScrollFeature().isHorizontalScrollShowing()}})}))};t.prototype.onColumnsChanged=function(){var e=this;this.refreshLastRangeStart();var t=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach((function(r){var n=r.columns;r.columns=r.columns.filter((function(e){return e.isVisible()&&t.indexOf(e)!==-1}));var i=!_.areEqual(n,r.columns);if(i){e.dispatchChangedEvent(false,true,r.id)}}));var r=this.cellRanges.length;this.cellRanges=this.cellRanges.filter((function(e){return e.columns.length>0}));if(r>this.cellRanges.length){this.dispatchChangedEvent(false,true)}};t.prototype.refreshLastRangeStart=function(){var e=_.last(this.cellRanges);if(!e){return}this.refreshRangeStart(e)};t.prototype.isContiguousRange=function(e){var t=e.columns;if(!t.length){return false}var r=this.columnModel.getAllDisplayedColumns();var n=t.map((function(e){return r.indexOf(e)})).sort((function(e,t){return e-t}));return _.last(n)-n[0]+1===t.length};t.prototype.getRangeStartRow=function(e){if(e.startRow&&e.endRow){return this.rowPositionUtils.before(e.startRow,e.endRow)?e.startRow:e.endRow}var t=this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null;return{rowIndex:0,rowPinned:t}};t.prototype.getRangeEndRow=function(e){if(e.startRow&&e.endRow){return this.rowPositionUtils.before(e.startRow,e.endRow)?e.endRow:e.startRow}var t=this.pinnedRowModel.getPinnedBottomRowCount();var r=t>0;if(r){return{rowIndex:t-1,rowPinned:"bottom"}}return{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}};t.prototype.setRangeToCell=function(e,t){if(t===void 0){t=false}if(!this.gridOptionsService.isEnableRangeSelection()){return}var r=this.calculateColumnsBetween(e.column,e.column);if(!r){return}var n=this.gridOptionsService.is("suppressMultiRangeSelection");if(n||!t||_.missing(this.cellRanges)){this.removeAllCellRanges(true)}var i={rowIndex:e.rowIndex,rowPinned:e.rowPinned};var o={startRow:i,endRow:i,columns:r,startColumn:e.column};this.cellRanges.push(o);this.setNewestRangeStartCell(e);this.onDragStop();this.dispatchChangedEvent(true,true)};t.prototype.extendLatestRangeToCell=function(e){if(this.isEmpty()||!this.newestRangeStartCell){return}var t=_.last(this.cellRanges);this.updateRangeEnd(t,e)};t.prototype.updateRangeEnd=function(e,t,r){if(r===void 0){r=false}var n=t.column;var i=this.calculateColumnsBetween(e.startColumn,n);if(!i||this.isLastCellOfRange(e,t)){return}e.columns=i;e.endRow={rowIndex:t.rowIndex,rowPinned:t.rowPinned};if(!r){this.dispatchChangedEvent(true,true,e.id)}};t.prototype.refreshRangeStart=function(e){var t=e.startColumn,r=e.columns;var n=function(t,r){var n=e.columns.filter((function(e){return e!==t}));if(t){e.startColumn=t;e.columns=r?__spread$6([t],n):__spread$6(n,[t])}else{e.columns=n}};var i=this.getRangeEdgeColumns(e),o=i.left,a=i.right;var s=t===r[0]&&t!==o;if(s){n(o,true);return}var l=t===_.last(r)&&t===a;if(l){n(a,false);return}};t.prototype.getRangeEdgeColumns=function(e){var t=this.columnModel.getAllDisplayedColumns();var r=e.columns.map((function(e){return t.indexOf(e)})).filter((function(e){return e>-1})).sort((function(e,t){return e-t}));return{left:t[r[0]],right:t[_.last(r)]}};t.prototype.extendLatestRangeInDirection=function(e){if(this.isEmpty()||!this.newestRangeStartCell){return}var t=e.key;var r=e.ctrlKey||e.metaKey;var n=_.last(this.cellRanges);var i=this.newestRangeStartCell;var o=n.columns[0];var a=_.last(n.columns);var s=n.endRow.rowIndex;var l=n.endRow.rowPinned;var u=i.column===o?a:o;var c={column:u,rowIndex:s,rowPinned:l};var d=this.cellNavigationService.getNextCellToFocus(t,c,r);if(!d){return}this.setCellRange({rowStartIndex:i.rowIndex,rowStartPinned:i.rowPinned,rowEndIndex:d.rowIndex,rowEndPinned:d.rowPinned,columnStart:i.column,columnEnd:d.column});return d};t.prototype.setCellRange=function(e){if(!this.gridOptionsService.isEnableRangeSelection()){return}this.removeAllCellRanges(true);this.addCellRange(e)};t.prototype.setCellRanges=function(e){var t=this;if(_.shallowCompare(this.cellRanges,e)){return}this.removeAllCellRanges(true);e.forEach((function(e){if(e.columns&&e.startRow){t.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.columns[0]})}t.cellRanges.push(e)}));this.dispatchChangedEvent(false,true)};t.prototype.setNewestRangeStartCell=function(e){this.newestRangeStartCell=e};t.prototype.clearCellRangeCellValues=function(e,t){var r=this;if(t===void 0){t="rangeService"}if(!e){e=this.cellRanges}e.forEach((function(e){r.forEachRowInRange(e,(function(n){var i=r.rowPositionUtils.getRowNode(n);if(!i){return}for(var o=0;o<e.columns.length;o++){var a=r.columnModel.getGridColumn(e.columns[o]);if(!a||!a.isCellEditable(i)){return}i.setDataValue(a,null,t)}}))}))};t.prototype.createCellRangeFromCellRangeParams=function(e){var t=this;var r;var n=false;if(e.columns){r=e.columns.map((function(e){return t.columnModel.getColumnWithValidation(e)})).filter((function(e){return e}))}else{var i=this.columnModel.getColumnWithValidation(e.columnStart);var o=this.columnModel.getColumnWithValidation(e.columnEnd);if(!i||!o){return}r=this.calculateColumnsBetween(i,o);if(r&&r.length){n=r[0]!==i}}if(!r){return}var a=e.rowStartIndex!=null?{rowIndex:e.rowStartIndex,rowPinned:e.rowStartPinned||null}:undefined;var s=e.rowEndIndex!=null?{rowIndex:e.rowEndIndex,rowPinned:e.rowEndPinned||null}:undefined;return{startRow:a,endRow:s,columns:r,startColumn:n?_.last(r):r[0]}};t.prototype.addCellRange=function(e){if(!this.gridOptionsService.isEnableRangeSelection()){return}var t=this.createCellRangeFromCellRangeParams(e);if(t){if(t.startRow){this.setNewestRangeStartCell({rowIndex:t.startRow.rowIndex,rowPinned:t.startRow.rowPinned,column:t.startColumn})}this.cellRanges.push(t);this.dispatchChangedEvent(false,true,t.id)}};t.prototype.getCellRanges=function(){return this.cellRanges};t.prototype.isEmpty=function(){return this.cellRanges.length===0};t.prototype.isMoreThanOneCell=function(){var e=this.cellRanges.length;if(e===0){return false}if(e>1){return true}var t=this.cellRanges[0];var r=this.getRangeStartRow(t);var n=this.getRangeEndRow(t);return r.rowPinned!==n.rowPinned||r.rowIndex!==n.rowIndex||t.columns.length!==1};t.prototype.areAllRangesAbleToMerge=function(){var e,t;var r=this;var n=new Map;var i=this.cellRanges.length;if(i<=1)return true;this.cellRanges.forEach((function(e){r.forEachRowInRange(e,(function(t){var r=(t.rowPinned||"normal")+"_"+t.rowIndex;var i=n.get(r);var o=e.columns.map((function(e){return e.getId()}));if(i){var a=o.filter((function(e){return i.indexOf(e)===-1}));i.push.apply(i,__spread$6(a))}else{n.set(r,o)}}))}));var o;try{for(var a=__values$3(n.values()),s=a.next();!s.done;s=a.next()){var l=s.value;var u=l.sort().join();if(o===undefined){o=u;continue}if(o!==u){return false}}}catch(t){e={error:t}}finally{try{if(s&&!s.done&&(t=a.return))t.call(a)}finally{if(e)throw e.error}}return true};t.prototype.forEachRowInRange=function(e,t){var r=this.getRangeStartRow(e);var n=this.getRangeEndRow(e);var i=r;while(i){t(i);if(this.rowPositionUtils.sameRow(i,n)){break}i=this.cellNavigationService.getRowBelow(i)}};t.prototype.removeAllCellRanges=function(e){if(this.isEmpty()){return}this.onDragStop();this.cellRanges.length=0;if(!e){this.dispatchChangedEvent(false,true)}};t.prototype.onBodyScroll=function(){if(this.dragging&&this.lastMouseEvent){this.onDragging(this.lastMouseEvent)}};t.prototype.isCellInAnyRange=function(e){return this.getCellRangeCount(e)>0};t.prototype.isCellInSpecificRange=function(e,t){var r=t.columns!==null&&_.includes(t.columns,e.column);var n=this.isRowInRange(e.rowIndex,e.rowPinned,t);return r&&n};t.prototype.isLastCellOfRange=function(e,t){var r=e.startRow,n=e.endRow;var i=this.rowPositionUtils.before(r,n)?n:r;var o=t.rowIndex===i.rowIndex&&t.rowPinned===i.rowPinned;var a=e.columns[0];var s=_.last(e.columns);var l=e.startColumn===a?s:a;var u=t.column===l;return u&&o};t.prototype.isBottomRightCell=function(e,t){var r=this.columnModel.getAllDisplayedColumns();var n=e.columns.map((function(e){return r.indexOf(e)})).sort((function(e,t){return e-t}));var i=e.startRow,o=e.endRow;var a=this.rowPositionUtils.before(i,o)?o:i;var s=r.indexOf(t.column)===_.last(n);var l=t.rowIndex===a.rowIndex&&_.makeNull(t.rowPinned)===_.makeNull(a.rowPinned);return s&&l};t.prototype.getCellRangeCount=function(e){var t=this;if(this.isEmpty()){return 0}return this.cellRanges.filter((function(r){return t.isCellInSpecificRange(e,r)})).length};t.prototype.isRowInRange=function(e,t,r){var n=this.getRangeStartRow(r);var i=this.getRangeEndRow(r);var o={rowIndex:e,rowPinned:t||null};var a=o.rowIndex===n.rowIndex&&o.rowPinned==n.rowPinned;var s=o.rowIndex===i.rowIndex&&o.rowPinned==i.rowPinned;if(a||s){return true}var l=!this.rowPositionUtils.before(o,n);var u=this.rowPositionUtils.before(o,i);return l&&u};t.prototype.getDraggingRange=function(){return this.draggingRange};t.prototype.onDragStart=function(e){if(!this.gridOptionsService.isEnableRangeSelection()){return}var t=e.ctrlKey,r=e.metaKey,n=e.shiftKey;var i=t||r;var o=!this.gridOptionsService.is("suppressMultiRangeSelection");var a=o?i:false;var s=n&&_.existsAndNotEmpty(this.cellRanges);if(!a&&(!s||_.exists(_.last(this.cellRanges).type))){this.removeAllCellRanges(true)}var l=this.dragService.getStartTarget();if(l){this.updateValuesOnMove(l)}if(!this.lastCellHovered){return}this.dragging=true;this.lastMouseEvent=e;this.intersectionRange=a&&this.getCellRangeCount(this.lastCellHovered)>1;if(!s){this.setNewestRangeStartCell(this.lastCellHovered)}if(this.cellRanges.length>0){this.draggingRange=_.last(this.cellRanges)}else{var u={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:u,endRow:u,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column};this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener);this.dispatchChangedEvent(true,false,this.draggingRange.id)};t.prototype.intersectLastRange=function(e){var t=this;if(e&&this.dragging){return}if(this.gridOptionsService.is("suppressMultiRangeSelection")){return}if(this.isEmpty()){return}var r=_.last(this.cellRanges);var n=this.getRangeStartRow(r);var i=this.getRangeEndRow(r);var o=[];this.cellRanges.slice(0,-1).forEach((function(e){var a=t.getRangeStartRow(e);var s=t.getRangeEndRow(e);var l=e.columns;var u=l.filter((function(e){return r.columns.indexOf(e)===-1}));if(u.length===l.length){o.push(e);return}if(t.rowPositionUtils.before(i,a)||t.rowPositionUtils.before(s,n)){o.push(e);return}var c=o.length;if(t.rowPositionUtils.before(a,n)){var d={columns:__spread$6(l),startColumn:r.startColumn,startRow:__assign$9({},a),endRow:t.cellNavigationService.getRowAbove(n)};o.push(d)}if(u.length>0){var p={columns:u,startColumn:_.includes(u,r.startColumn)?r.startColumn:u[0],startRow:t.rowPositionUtils.rowMax([__assign$9({},n),__assign$9({},a)]),endRow:t.rowPositionUtils.rowMin([__assign$9({},i),__assign$9({},s)])};o.push(p)}if(t.rowPositionUtils.before(i,s)){o.push({columns:__spread$6(l),startColumn:r.startColumn,startRow:t.cellNavigationService.getRowBelow(i),endRow:__assign$9({},s)})}if(o.length-c===1){o[o.length-1].id=e.id}}));this.cellRanges=o;if(e){this.dispatchChangedEvent(false,true)}};t.prototype.updateValuesOnMove=function(e){var t=_.getCtrlForEventTarget(this.gridOptionsService,e,CellCtrl.DOM_DATA_KEY_CELL_CTRL);var r=t===null||t===void 0?void 0:t.getCellPosition();this.cellHasChanged=false;if(!r||this.lastCellHovered&&this.cellPositionUtils.equals(r,this.lastCellHovered)){return}if(this.lastCellHovered){this.cellHasChanged=true}this.lastCellHovered=r};t.prototype.onDragging=function(e){var t=this;if(!this.dragging||!e){return}this.updateValuesOnMove(e.target);this.lastMouseEvent=e;var r=this.lastCellHovered;var n=function(e){return r&&r.rowPinned===e&&t.newestRangeStartCell.rowPinned===e};var i=n("top")||n("bottom");this.autoScrollService.check(e,i);if(!this.cellHasChanged){return}var o=this.calculateColumnsBetween(this.newestRangeStartCell.column,r.column);if(!o){return}this.draggingRange.endRow={rowIndex:r.rowIndex,rowPinned:r.rowPinned};this.draggingRange.columns=o;this.dispatchChangedEvent(false,false,this.draggingRange.id)};t.prototype.onDragStop=function(){if(!this.dragging){return}var e=this.draggingRange.id;this.autoScrollService.ensureCleared();this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener);this.lastMouseEvent=null;this.dragging=false;this.draggingRange=undefined;this.lastCellHovered=undefined;if(this.intersectionRange){this.intersectionRange=false;this.intersectLastRange()}this.dispatchChangedEvent(false,true,e)};t.prototype.dispatchChangedEvent=function(e,t,r){var n={type:Events.EVENT_RANGE_SELECTION_CHANGED,started:e,finished:t,id:r};this.eventService.dispatchEvent(n)};t.prototype.calculateColumnsBetween=function(e,t){var r=this.columnModel.getAllDisplayedColumns();var n=e===t;var i=r.indexOf(e);if(i<0){console.warn("AG Grid: column "+e.getId()+" is not visible");return}var o=n?i:r.indexOf(t);if(o<0){console.warn("AG Grid: column "+t.getId()+" is not visible");return}if(n){return[e]}var a=Math.min(i,o);var s=a===i?o:i;var l=[];for(var u=a;u<=s;u++){l.push(r[u])}return l};__decorate$J([Autowired("rowModel")],t.prototype,"rowModel",void 0);__decorate$J([Autowired("dragService")],t.prototype,"dragService",void 0);__decorate$J([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$J([Autowired("cellNavigationService")],t.prototype,"cellNavigationService",void 0);__decorate$J([Autowired("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0);__decorate$J([Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0);__decorate$J([Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0);__decorate$J([Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0);__decorate$J([PostConstruct],t.prototype,"init",null);t=__decorate$J([Bean("rangeService")],t);return t}(BeanStub);var __extends$M=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$I=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var AbstractSelectionHandle=function(e){__extends$M(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.changedCalculatedValues=false;t.dragging=false;t.shouldDestroyOnEndDragging=false;return t}t.prototype.init=function(){var e=this;this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:function(t){e.dragging=true;e.rangeService.autoScrollService.check(t);if(e.changedCalculatedValues){e.onDrag(t);e.changedCalculatedValues=false}},onDragStop:function(t){e.dragging=false;e.onDragEnd(t);e.clearValues();e.rangeService.autoScrollService.ensureCleared();document.body.classList.remove(e.getDraggingCssClass());if(e.shouldDestroyOnEndDragging){e.destroy()}}});this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))};t.prototype.isDragging=function(){return this.dragging};t.prototype.getCellCtrl=function(){return this.cellCtrl};t.prototype.setCellCtrl=function(e){this.cellCtrl=e};t.prototype.getCellRange=function(){return this.cellRange};t.prototype.setCellRange=function(e){this.cellRange=e};t.prototype.getRangeStartRow=function(){return this.rangeStartRow};t.prototype.setRangeStartRow=function(e){this.rangeStartRow=e};t.prototype.getRangeEndRow=function(){return this.rangeEndRow};t.prototype.setRangeEndRow=function(e){this.rangeEndRow=e};t.prototype.getLastCellHovered=function(){return this.lastCellHovered};t.prototype.preventRangeExtension=function(e){e.stopPropagation()};t.prototype.onDragStart=function(e){this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this));document.body.classList.add(this.getDraggingCssClass())};t.prototype.getDraggingCssClass=function(){return"ag-dragging-"+(this.type===SelectionHandleType.FILL?"fill":"range")+"-handle"};t.prototype.updateValuesOnMove=function(e){var t=this.mouseEventService.getCellPositionForEvent(e);if(!t||this.lastCellHovered&&this.cellPositionUtils.equals(t,this.lastCellHovered)){return}this.lastCellHovered=t;this.changedCalculatedValues=true};t.prototype.getType=function(){return this.type};t.prototype.refresh=function(e){var t=this.getCellCtrl();var r=this.getGui();var n=_.last(this.rangeService.getCellRanges());var i=n.startRow;var o=n.endRow;if(i&&o){var a=this.rowPositionUtils.before(o,i);if(a){this.setRangeStartRow(o);this.setRangeEndRow(i)}else{this.setRangeStartRow(i);this.setRangeEndRow(o)}}if(t!==e||!_.isVisible(r)){this.setCellCtrl(e);var s=e.getComp().getParentOfValue();if(s){s.appendChild(r)}}this.setCellRange(n)};t.prototype.clearValues=function(){this.lastCellHovered=undefined;this.removeListeners()};t.prototype.removeListeners=function(){if(this.cellHoverListener){this.cellHoverListener();this.cellHoverListener=undefined}};t.prototype.destroy=function(){if(!this.shouldDestroyOnEndDragging&&this.isDragging()){_.setDisplayed(this.getGui(),false);this.shouldDestroyOnEndDragging=true;return}this.shouldDestroyOnEndDragging=false;e.prototype.destroy.call(this);this.removeListeners();var t=this.getGui();if(t.parentElement){t.parentElement.removeChild(t)}};__decorate$I([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0);__decorate$I([Autowired("dragService")],t.prototype,"dragService",void 0);__decorate$I([Autowired("rangeService")],t.prototype,"rangeService",void 0);__decorate$I([Autowired("mouseEventService")],t.prototype,"mouseEventService",void 0);__decorate$I([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$I([Autowired("cellNavigationService")],t.prototype,"cellNavigationService",void 0);__decorate$I([Autowired("navigationService")],t.prototype,"navigationService",void 0);__decorate$I([Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0);__decorate$I([Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0);__decorate$I([Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0);__decorate$I([PostConstruct],t.prototype,"init",null);return t}(Component);function findLineByLeastSquares(e){var t=e.length;var r=0;if(t<=1){return e}for(var n=0;n<e.length;n++){var i=e[n];var o=i.toString().split("e-");if(o.length>1){r=Math.max(r,parseInt(o[1],10));continue}if(Math.floor(i)===i){continue}r=Math.max(r,i.toString().split(".")[1].length)}var a=0;var s=0;var l=0;var u=0;var c=0;for(var d=0;d<t;d++){c=e[d];a+=d;s+=c;u+=d*d;l+=d*c}var p=(t*l-a*s)/(t*u-a*a);var f=s/t-p*a/t;var h=[];for(var d=0;d<=t;d++){h.push(parseFloat((d*p+f).toFixed(r)))}return h}var __extends$L=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$8=function(){__assign$8=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$8.apply(this,arguments)};var __decorate$H=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$b=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$5=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$b(arguments[t]));return e};var FillHandle=function(e){__extends$L(t,e);function t(){var r=e.call(this,t.TEMPLATE)||this;r.markedCells=[];r.cellValues=[];r.isUp=false;r.isLeft=false;r.isReduce=false;r.type=SelectionHandleType.FILL;return r}t.prototype.updateValuesOnMove=function(t){e.prototype.updateValuesOnMove.call(this,t);if(!this.initialXY){this.initialXY=this.mouseEventService.getNormalisedPosition(t)}var r=this.initialXY,n=r.x,i=r.y;var o=this.mouseEventService.getNormalisedPosition(t),a=o.x,s=o.y;var l=Math.abs(n-a);var u=Math.abs(i-s);var c=this.getFillHandleDirection();var d;if(c==="xy"){d=l>u?"x":"y"}else{d=c}if(d!==this.dragAxis){this.dragAxis=d;this.changedCalculatedValues=true}};t.prototype.onDrag=function(e){if(!this.initialPosition){var t=this.getCellCtrl();if(!t){return}this.initialPosition=t.getCellPosition()}var r=this.getLastCellHovered();if(r){this.markPathFrom(this.initialPosition,r)}};t.prototype.onDragEnd=function(e){this.initialXY=null;if(!this.markedCells.length){return}var t=this.dragAxis==="x";var r=this.getCellRange();var n=r.columns.length;var i=this.getRangeStartRow();var o=this.getRangeEndRow();var a;if(!this.isUp&&!this.isLeft){a=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:i.rowIndex,rowStartPinned:i.rowPinned,columnStart:r.columns[0],rowEndIndex:t?o.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:t?o.rowPinned:this.lastCellMarked.rowPinned,columnEnd:t?this.lastCellMarked.column:r.columns[n-1]})}else{var s=t?i:this.lastCellMarked;a=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,columnStart:t?this.lastCellMarked.column:r.columns[0],rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnEnd:r.columns[n-1]})}if(a){this.raiseFillStartEvent();this.handleValueChanged(r,a,e);this.rangeService.setCellRanges([a]);this.raiseFillEndEvent(r,a)}};t.prototype.getFillHandleDirection=function(){var e=this.gridOptionsService.get("fillHandleDirection");if(!e){return"xy"}if(e!=="x"&&e!=="y"&&e!=="xy"){_.doOnce((function(){return console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.")}),"warn invalid fill direction");return"xy"}return e};t.prototype.raiseFillStartEvent=function(){var e={type:Events.EVENT_FILL_START};this.eventService.dispatchEvent(e)};t.prototype.raiseFillEndEvent=function(e,t){var r={type:Events.EVENT_FILL_END,initialRange:e,finalRange:t};this.eventService.dispatchEvent(r)};t.prototype.handleValueChanged=function(e,t,r){var n=this;var i=this.rangeService.getRangeEndRow(e);var o=this.rangeService.getRangeStartRow(e);var a=this.rangeService.getRangeEndRow(t);var s=this.rangeService.getRangeStartRow(t);var l=this.dragAxis==="y";if(this.isReduce&&!this.gridOptionsService.is("suppressClearOnFillReduction")){var u=l?e.columns:e.columns.filter((function(e){return t.columns.indexOf(e)<0}));var c=l?this.cellNavigationService.getRowBelow(a):s;if(c){this.clearCellsInRange(c,i,u)}return}var d=true;var p=[];var f=[];var h=0;var v=function(){p.length=0;f.length=0;h=0};var g=function(t,r){var u=n.isUp?i:o;var c=false;if(l){d=true;v()}var f=function(){var f=n.rowPositionUtils.getRowNode(u);if(!f){return"break"}if(l&&t){y(p,t,f,(function(){return!n.rowPositionUtils.sameRow(u,n.isUp?o:i)}))}else if(r){d=true;v();r.forEach((function(t){return y(p,t,f,(function(){return t!==(n.isLeft?e.columns[0]:_.last(e.columns))}))}))}c=n.rowPositionUtils.sameRow(u,n.isUp?s:a);u=n.isUp?n.cellNavigationService.getRowAbove(u):n.cellNavigationService.getRowBelow(u)};while(!c&&u){var h=f();if(h==="break")break}};var y=function(e,t,i,o){var a;var s=false;if(d){a=n.valueService.getValue(t,i);f.push(a);d=o()}else{var l=n.processValues(r,e,f,t,i,h++),u=l.value,c=l.fromUserFunction;a=u;if(t.isCellEditable(i)){var p=n.valueService.getValue(t,i);if(!c||p!==a){i.setDataValue(t,a,"rangeService")}else{s=true}}}if(!s){e.push(a)}};if(l){e.columns.forEach((function(e){g(e)}))}else{var u=this.isLeft?__spread$5(t.columns).reverse():t.columns;g(undefined,u)}};t.prototype.clearCellsInRange=function(e,t,r){var n={startRow:e,endRow:t,columns:r,startColumn:r[0]};this.rangeService.clearCellRangeCellValues([n])};t.prototype.processValues=function(e,t,r,n,i,o){var a=this.gridOptionsService.getCallback("fillOperation");var s=this.dragAxis==="y";var l;if(s){l=this.isUp?"up":"down"}else{l=this.isLeft?"left":"right"}if(a){var u={event:e,values:t,initialValues:r,currentIndex:o,currentCellValue:this.valueService.getValue(n,i),direction:l,column:n,rowNode:i};var c=a(u);if(c!==false){return{value:c,fromUserFunction:true}}}var d=!t.some((function(e){var t=parseFloat(e);return isNaN(t)||t.toString()!==e.toString()}));if(e.altKey||!d){if(d&&r.length===1){var p=this.isUp||this.isLeft?-1:1;return{value:parseFloat(_.last(t))+1*p,fromUserFunction:false}}return{value:t[o%t.length],fromUserFunction:false}}return{value:_.last(findLineByLeastSquares(t.map(Number))),fromUserFunction:false}};t.prototype.clearValues=function(){this.clearMarkedPath();this.clearCellValues();this.lastCellMarked=undefined;e.prototype.clearValues.call(this)};t.prototype.clearMarkedPath=function(){this.markedCells.forEach((function(e){if(!e.isAlive()){return}var t=e.getComp();t.addOrRemoveCssClass("ag-selection-fill-top",false);t.addOrRemoveCssClass("ag-selection-fill-right",false);t.addOrRemoveCssClass("ag-selection-fill-bottom",false);t.addOrRemoveCssClass("ag-selection-fill-left",false)}));this.markedCells.length=0;this.isUp=false;this.isLeft=false;this.isReduce=false};t.prototype.clearCellValues=function(){this.cellValues.length=0};t.prototype.markPathFrom=function(e,t){this.clearMarkedPath();this.clearCellValues();if(this.dragAxis==="y"){if(this.rowPositionUtils.sameRow(t,e)){return}var r=this.rowPositionUtils.before(t,e);var n=this.getRangeStartRow();var i=this.getRangeEndRow();if(r&&(t.rowPinned==n.rowPinned&&t.rowIndex>=n.rowIndex||n.rowPinned!=i.rowPinned&&t.rowPinned==i.rowPinned&&t.rowIndex<=i.rowIndex)){this.reduceVertical(e,t);this.isReduce=true}else{this.extendVertical(e,t,r);this.isReduce=false}}else{var o=e.column;var a=t.column;if(o===a){return}var s=this.columnModel.getAllDisplayedColumns();var l=s.indexOf(o);var u=s.indexOf(a);if(u<=l&&u>=s.indexOf(this.getCellRange().columns[0])){this.reduceHorizontal(e,t);this.isReduce=true}else{this.extendHorizontal(e,t,u<l);this.isReduce=false}}this.lastCellMarked=t};t.prototype.extendVertical=function(e,t,r){var n=this,i=n.navigationService,o=n.rangeService;var a=e;do{var s=this.getCellRange();var l=s.columns.length;for(var u=0;u<l;u++){var c=s.columns[u];var d={rowIndex:a.rowIndex,rowPinned:a.rowPinned};var p=__assign$8(__assign$8({},d),{column:c});var f=o.isCellInSpecificRange(p,s);var h=this.rowPositionUtils.sameRow(a,e);if(r){this.isUp=true}if(!h){var v=i.getCellByPosition(p);if(v){this.markedCells.push(v);var g=v.getComp();if(!f){g.addOrRemoveCssClass("ag-selection-fill-left",u===0);g.addOrRemoveCssClass("ag-selection-fill-right",u===l-1)}g.addOrRemoveCssClass(r?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(a,t))}}}if(this.rowPositionUtils.sameRow(a,t)){break}}while(a=r?this.cellNavigationService.getRowAbove(a):this.cellNavigationService.getRowBelow(a))};t.prototype.reduceVertical=function(e,t){var r=e;do{var n=this.getCellRange();var i=n.columns.length;var o=this.rowPositionUtils.sameRow(r,t);for(var a=0;a<i;a++){var s={rowIndex:r.rowIndex,rowPinned:r.rowPinned};var l=__assign$8(__assign$8({},s),{column:n.columns[a]});var u=this.navigationService.getCellByPosition(l);if(u){this.markedCells.push(u);var c=u.getComp();c.addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(r,t))}}if(o){break}}while(r=this.cellNavigationService.getRowAbove(r))};t.prototype.extendHorizontal=function(e,t,r){var n=this;var i=this.columnModel.getAllDisplayedColumns();var o=i.indexOf(r?t.column:e.column);var a=i.indexOf(r?this.getCellRange().columns[0]:t.column);var s=r?0:1;var l=i.slice(o+s,a+s);var u=this.getRangeStartRow();var c=this.getRangeEndRow();l.forEach((function(e){var t=u;var i=false;do{i=n.rowPositionUtils.sameRow(t,c);var o=n.navigationService.getCellByPosition({rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:e});if(o){n.markedCells.push(o);var a=o.getComp();a.addOrRemoveCssClass("ag-selection-fill-top",n.rowPositionUtils.sameRow(t,u));a.addOrRemoveCssClass("ag-selection-fill-bottom",n.rowPositionUtils.sameRow(t,c));if(r){n.isLeft=true;a.addOrRemoveCssClass("ag-selection-fill-left",e===l[0])}else{a.addOrRemoveCssClass("ag-selection-fill-right",e===_.last(l))}}t=n.cellNavigationService.getRowBelow(t)}while(!i)}))};t.prototype.reduceHorizontal=function(e,t){var r=this;var n=this.columnModel.getAllDisplayedColumns();var i=n.indexOf(t.column);var o=n.indexOf(e.column);var a=n.slice(i,o);var s=this.getRangeStartRow();var l=this.getRangeEndRow();a.forEach((function(e){var t=s;var n=false;do{n=r.rowPositionUtils.sameRow(t,l);var i=r.navigationService.getCellByPosition({rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:e});if(i){r.markedCells.push(i);var o=i.getComp();o.addOrRemoveCssClass("ag-selection-fill-right",e===a[0])}t=r.cellNavigationService.getRowBelow(t)}while(!n)}))};t.prototype.refresh=function(t){var r=this.rangeService.getCellRanges()[0];var n=!r.startRow||!r.endRow;if(n){this.destroy();return}e.prototype.refresh.call(this,t)};t.TEMPLATE='<div class="ag-fill-handle"></div>';__decorate$H([Autowired("valueService")],t.prototype,"valueService",void 0);return t}(AbstractSelectionHandle);var __extends$K=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$7=function(){__assign$7=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$7.apply(this,arguments)};var RangeHandle=function(e){__extends$K(t,e);function t(){var r=e.call(this,t.TEMPLATE)||this;r.type=SelectionHandleType.RANGE;r.rangeFixed=false;return r}t.prototype.onDrag=function(e){var t=this.getLastCellHovered();if(!t){return}var r=this.rangeService.getCellRanges();var n=_.last(r);if(!this.rangeFixed){this.fixRangeStartEnd(n);this.rangeFixed=true}this.endPosition={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column};if(r.length===2&&r[0].type===CellRangeType.DIMENSION&&n.type===CellRangeType.VALUE){var i=!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(n));if(i){this.rangeService.updateRangeEnd(r[0],__assign$7(__assign$7({},this.endPosition),{column:r[0].columns[0]}),true)}}this.rangeService.extendLatestRangeToCell(this.endPosition)};t.prototype.onDragEnd=function(e){var t=_.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(t);this.rangeFixed=false};t.prototype.fixRangeStartEnd=function(e){var t=this.rangeService.getRangeStartRow(e);var r=this.rangeService.getRangeEndRow(e);var n=e.columns[0];e.startRow=t;e.endRow=r;e.startColumn=n};t.TEMPLATE='<div class="ag-range-handle"></div>';return t}(AbstractSelectionHandle);var __extends$J=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$G=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var SelectionHandleFactory=function(e){__extends$J(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.createSelectionHandle=function(e){return this.createBean(e===SelectionHandleType.RANGE?new RangeHandle:new FillHandle)};t=__decorate$G([Bean("selectionHandleFactory")],t);return t}(BeanStub);var VERSION$9="29.3.5";var RangeSelectionModule={version:VERSION$9,moduleName:ModuleNames.RangeSelectionModule,beans:[RangeService,SelectionHandleFactory],agStackComponents:[{componentName:"AgFillHandle",componentClass:FillHandle},{componentName:"AgRangeHandle",componentClass:RangeHandle}],dependantModules:[EnterpriseCoreModule]};var __extends$I=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$F=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$a=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var AgColorPanel=function(e){__extends$I(t,e);function t(r){var n=e.call(this,t.TEMPLATE)||this;n.H=1;n.S=1;n.B=1;n.A=1;n.isSpectrumDragging=false;n.isSpectrumHueDragging=false;n.isSpectrumAlphaDragging=false;n.colorChanged=false;n.picker=r.picker;return n}t.prototype.postConstruct=function(){var e=this.getGui();this.initRecentColors();this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this));this.addManagedListener(e,"mousemove",this.onSpectrumDraggerMove.bind(this));this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this));this.addManagedListener(e,"mousemove",this.onSpectrumHueMove.bind(this));this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this));this.addManagedListener(e,"mousemove",this.onSpectrumAlphaMove.bind(this));this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this));this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this))};t.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()};t.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()};t.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()};t.prototype.onSpectrumDraggerDown=function(e){this.refreshSpectrumRect();this.isSpectrumDragging=true;this.moveDragger(e)};t.prototype.onSpectrumDraggerMove=function(e){if(this.isSpectrumDragging){this.moveDragger(e)}};t.prototype.onSpectrumHueDown=function(e){this.refreshHueRect();this.isSpectrumHueDragging=true;this.moveHueSlider(e)};t.prototype.onSpectrumHueMove=function(e){if(this.isSpectrumHueDragging){this.moveHueSlider(e)}};t.prototype.onSpectrumAlphaDown=function(e){this.refreshAlphaRect();this.isSpectrumAlphaDragging=true;this.moveAlphaSlider(e)};t.prototype.onSpectrumAlphaMove=function(e){if(this.isSpectrumAlphaDragging){this.moveAlphaSlider(e)}};t.prototype.onMouseUp=function(){this.isSpectrumDragging=false;this.isSpectrumHueDragging=false;this.isSpectrumAlphaDragging=false};t.prototype.moveDragger=function(e){var t=this.spectrumValRect;if(t){var r=e.clientX-t.left;var n=e.clientY-t.top;r=Math.max(r,0);r=Math.min(r,t.width);n=Math.max(n,0);n=Math.min(n,t.height);this.setSpectrumValue(r/t.width,1-n/t.height)}};t.prototype.moveHueSlider=function(e){var t=this.spectrumHueRect;if(t){var r=this.spectrumHueSlider;var n=r.getBoundingClientRect();var i=e.clientX-t.left;i=Math.max(i,0);i=Math.min(i,t.width);this.H=1-i/t.width;r.style.left=i+n.width/2+"px";this.update()}};t.prototype.moveAlphaSlider=function(e){var t=this.spectrumAlphaRect;if(t){var r=this.spectrumAlphaSlider;var n=r.getBoundingClientRect();var i=e.clientX-t.left;i=Math.max(i,0);i=Math.min(i,t.width);this.A=i/t.width;r.style.left=i+n.width/2+"px";this.update()}};t.prototype.update=function(){var e=Color.fromHSB(this.H*360,this.S,this.B,this.A);var t=Color.fromHSB(this.H*360,1,1);var r=e.toRgbaString();var n=this.picker;var i=Color.fromString(n.getValue());if(i.toRgbaString()!==r){this.colorChanged=true}n.setValue(r);this.spectrumColor.style.backgroundColor=t.toRgbaString();this.spectrumDragger.style.backgroundColor=r};t.prototype.setSpectrumValue=function(e,t){var r=this.spectrumValRect||this.refreshSpectrumRect();if(r){var n=this.spectrumDragger;var i=n.getBoundingClientRect();e=Math.max(0,e);e=Math.min(1,e);t=Math.max(0,t);t=Math.min(1,t);this.S=e;this.B=t;n.style.left=e*r.width-i.width/2+"px";n.style.top=(1-t)*r.height-i.height/2+"px";this.update()}};t.prototype.initRecentColors=function(){var e=t.recentColors;var r=e.map((function(e,t){return'<div class="ag-recent-color" id='+t+' style="background-color: '+e+'; width: 15px; height: 15px;" recent-color="'+e+'"></div>'}));this.recentColors.innerHTML=r.join("")};t.prototype.setValue=function(e){var t=Color.fromString(e);var r=__read$a(t.toHSB(),3),n=r[0],i=r[1],o=r[2];this.H=(isNaN(n)?0:n)/360;this.A=t.a;var a=this.spectrumHueRect||this.refreshHueRect();var s=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-a.width+"px";this.spectrumAlphaSlider.style.left=this.A*s.width+"px";this.setSpectrumValue(i,o)};t.prototype.onRecentColorClick=function(e){var r=e.target;if(!_.exists(r.id)){return}var n=parseInt(r.id,10);this.setValue(t.recentColors[n]);this.destroy()};t.prototype.addRecentColor=function(){var e=Color.fromHSB(this.H*360,this.S,this.B,this.A);var r=e.toRgbaString();var n=t.recentColors;if(!this.colorChanged||n[0]===r){return}n=n.filter((function(e){return e!=r}));n=[r].concat(n);if(n.length>t.maxRecentColors){n=n.slice(0,t.maxRecentColors)}t.recentColors=n};t.prototype.destroy=function(){this.addRecentColor();e.prototype.destroy.call(this)};t.maxRecentColors=8;t.recentColors=[];t.TEMPLATE='<div class="ag-color-panel">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>';__decorate$F([RefSelector("spectrumColor")],t.prototype,"spectrumColor",void 0);__decorate$F([RefSelector("spectrumVal")],t.prototype,"spectrumVal",void 0);__decorate$F([RefSelector("spectrumDragger")],t.prototype,"spectrumDragger",void 0);__decorate$F([RefSelector("spectrumHue")],t.prototype,"spectrumHue",void 0);__decorate$F([RefSelector("spectrumHueSlider")],t.prototype,"spectrumHueSlider",void 0);__decorate$F([RefSelector("spectrumAlpha")],t.prototype,"spectrumAlpha",void 0);__decorate$F([RefSelector("spectrumAlphaSlider")],t.prototype,"spectrumAlphaSlider",void 0);__decorate$F([RefSelector("recentColors")],t.prototype,"recentColors",void 0);__decorate$F([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var __extends$H=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var AgColorPicker=function(e){__extends$H(t,e);function t(t){var r=e.call(this,t,"ag-color-picker","colorPicker")||this;if(t&&t.color){r.value=t.color}return r}t.prototype.postConstruct=function(){e.prototype.postConstruct.call(this);if(this.value){this.setValue(this.value)}};t.prototype.showPicker=function(){var e=this;var t=this.getGui().getBoundingClientRect();var r=this.createBean(new AgDialog({closable:false,modal:true,hideTitleBar:true,minWidth:190,width:190,height:250,x:t.right-190,y:t.top-250}));this.isPickerDisplayed=true;r.addCssClass("ag-color-dialog");_.setAriaExpanded(this.eWrapper,true);var n=this.createBean(new AgColorPanel({picker:this}));n.addDestroyFunc((function(){if(r.isAlive()){e.destroyBean(r)}}));r.setParentComponent(this);r.setBodyComponent(n);n.setValue(this.getValue());r.addDestroyFunc((function(){if(!e.isDestroyingPicker){e.isDestroyingPicker=true;if(n.isAlive()){e.destroyBean(n)}}else{e.isDestroyingPicker=false}if(e.isAlive()){_.setAriaExpanded(e.eWrapper,false);e.getFocusableElement().focus()}e.isPickerDisplayed=false}));return r};t.prototype.setValue=function(t){if(this.value===t){return this}this.eDisplayField.style.backgroundColor=t;return e.prototype.setValue.call(this,t)};t.prototype.getValue=function(){return this.value};return t}(AgPickerField);var __read$9=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var VERSION_CHECKING_FIRST_GRID_MAJOR_VERSION=28;var VERSION_CHECKING_FIRST_CHARTS_MAJOR_VERSION=6;function isValidVersion(e){return e&&e.match(/\d+\.\d+\.\d+/)}function isValidMajorVersion(e){var t=e.gridMajorVersion,r=e.chartsMajorVersion;var n=parseInt(t,10);var i=parseInt(r,10);var o=n-VERSION_CHECKING_FIRST_GRID_MAJOR_VERSION;var a=i-VERSION_CHECKING_FIRST_CHARTS_MAJOR_VERSION;var s=o>=0;return o===a&&s}function gridChartVersion(e){if(!e||!isValidVersion(e)){return undefined}var t=__read$9(e.split(".")||[],2),r=t[0],n=t[1];var i=r+"."+n+".x";var o=parseInt(r,10);var a=o-VERSION_CHECKING_FIRST_GRID_MAJOR_VERSION+VERSION_CHECKING_FIRST_CHARTS_MAJOR_VERSION;if(a<0){return undefined}var s=n;var l=a+"."+s+".x";return{gridMajorMinor:i,chartsMajorMinor:l}}function validGridChartsVersionErrorMessage(e){var t=e.type,r=e.gridVersion,n=e.chartsVersion;var i="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!r){return i}var o=gridChartVersion(r);if(!o){return i}var a=o.gridMajorMinor,s=o.chartsMajorMinor;if(t==="incompatible"){return"AG Grid version "+r+" and AG Charts version "+n+" is not supported. AG Grid version "+a+" should be used with AG Chart "+s+". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information."}else if(t==="invalidCharts"){return"AG Grid version "+a+" should be used with AG Chart "+s+". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information."}return i}function validGridChartsVersion(e){var t=e.gridVersion,r=e.chartsVersion;if(!isValidVersion(r)){return{isValid:false,message:validGridChartsVersionErrorMessage({type:"invalidCharts",gridVersion:t,chartsVersion:r})}}if(!isValidVersion(t)){return{isValid:false,message:validGridChartsVersionErrorMessage({type:"invalidGrid",gridVersion:t,chartsVersion:r})}}var n=__read$9(t.split(".")||[],2),i=n[0],o=n[1];var a=__read$9(r.split(".")||[],2),s=a[0],l=a[1];var u=isValidMajorVersion({gridMajorVersion:i,chartsMajorVersion:s});if(u&&o===l){return{isValid:true}}else if(!u||o!==l){return{isValid:false,message:validGridChartsVersionErrorMessage({type:"incompatible",gridVersion:t,chartsVersion:r})}}return{isValid:false,message:validGridChartsVersionErrorMessage({type:"invalid",gridVersion:t,chartsVersion:r})}}var GridChartsModule={version:VERSION$a,validate:function(){return validGridChartsVersion({gridVersion:VERSION$a,chartsVersion:ChartService.CHARTS_VERSION})},moduleName:ModuleNames.GridChartsModule,beans:[ChartService,ChartTranslationService,ChartCrossFilterService],agStackComponents:[{componentName:"AgColorPicker",componentClass:AgColorPicker},{componentName:"AgAngleSelect",componentClass:AgAngleSelect}],dependantModules:[RangeSelectionModule,EnterpriseCoreModule]};var __FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT=0;var agCharts={time:time,AgChart:AgChart};var __extends$G=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$6=function(){__assign$6=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$6.apply(this,arguments)};var __decorate$E=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var DetailCellRendererCtrl=function(e){__extends$G(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.loadRowDataVersion=0;t.needRefresh=false;return t}t.prototype.init=function(e,t){var r=this;this.params=t;this.comp=e;var n=t.pinned!=null;if(n){return}this.setAutoHeightClasses();this.setupRefreshStrategy();this.addThemeToDetailGrid();this.createDetailGrid();this.loadRowData();this.addManagedListener(t.node.parent,RowNode.EVENT_DATA_CHANGED,(function(){r.needRefresh=true}));this.addManagedListener(this.eventService,Events.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this))};t.prototype.onFullWidthRowFocused=function(e){var t=this.params;var r={rowIndex:t.node.rowIndex,rowPinned:t.node.rowPinned};var n={rowIndex:e.rowIndex,rowPinned:e.rowPinned};var i=this.rowPositionUtils.sameRow(r,n);if(!i){return}this.focusService.focusInto(this.comp.getGui(),e.fromBelow)};t.prototype.setAutoHeightClasses=function(){var e=this.gridOptionsService.is("detailRowAutoHeight");var t=e?"ag-details-row-auto-height":"ag-details-row-fixed-height";var r=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(t,true);this.comp.addOrRemoveDetailGridCssClass(r,true)};t.prototype.setupRefreshStrategy=function(){var e=this.params.refreshStrategy;var t=e=="everything"||e=="nothing"||e=="rows";if(t){this.refreshStrategy=e;return}if(e!=null){console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+e+"' supplied, defaulting to refreshStrategy = 'rows'.")}this.refreshStrategy="rows"};t.prototype.addThemeToDetailGrid=function(){var e=this.environment.getTheme().theme;if(e){this.comp.addOrRemoveDetailGridCssClass(e,true)}};t.prototype.createDetailGrid=function(){if(_.missing(this.params.detailGridOptions)){console.warn("AG Grid: could not find detail grid options for master detail, "+"please set gridOptions.detailCellRendererParams.detailGridOptions");return}var e=this.gridOptionsService.is("detailRowAutoHeight");var t=__assign$6({},this.params.detailGridOptions);if(e){t.domLayout="autoHeight"}this.comp.setDetailGrid(t)};t.prototype.registerDetailWithMaster=function(e,t){var r=this.params.node.id;var n=this.params.api;var i={id:r,api:e,columnApi:t};var o=this.params.node;n.addDetailGridInfo(r,i);o.detailGridInfo=i;this.addDestroyFunc((function(){if(o.detailGridInfo!==i){return}n.removeDetailGridInfo(r);o.detailGridInfo=null}))};t.prototype.loadRowData=function(){var e=this;this.loadRowDataVersion++;var t=this.loadRowDataVersion;var r=this.params.getDetailRowData;if(!r){console.warn("AG Grid: could not find getDetailRowData for master / detail, "+"please set gridOptions.detailCellRendererParams.getDetailRowData");return}var n=function(r){var n=e.loadRowDataVersion===t;if(n){e.comp.setRowData(r)}};var i={node:this.params.node,data:this.params.node.data,successCallback:n,context:this.gridOptionsService.context};r(i)};t.prototype.refresh=function(){var e=false;var t=true;var r=!this.needRefresh||this.refreshStrategy==="nothing";if(r){return t}this.needRefresh=false;if(this.refreshStrategy==="everything"){return e}else{this.loadRowData();return t}};__decorate$E([Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0);__decorate$E([Autowired("focusService")],t.prototype,"focusService",void 0);return t}(BeanStub);var __extends$F=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$D=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var DetailCellRenderer=function(e){__extends$F(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.init=function(e){var t=this;this.params=e;this.selectAndSetTemplate();var r={addOrRemoveCssClass:function(e,r){return t.addOrRemoveCssClass(e,r)},addOrRemoveDetailGridCssClass:function(e,r){return t.eDetailGrid.classList.toggle(e,r)},setDetailGrid:function(e){return t.setDetailGrid(e)},setRowData:function(e){return t.setRowData(e)},getGui:function(){return t.eDetailGrid}};this.ctrl=this.createManagedBean(new DetailCellRendererCtrl);this.ctrl.init(r,e)};t.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()};t.prototype.destroy=function(){e.prototype.destroy.call(this)};t.prototype.selectAndSetTemplate=function(){var e=this;if(this.params.pinned){this.setTemplate('<div class="ag-details-row"></div>');return}var r=function(){e.setTemplate(t.TEMPLATE)};if(_.missing(this.params.template)){r()}else{if(typeof this.params.template==="string"){this.setTemplate(this.params.template)}else if(typeof this.params.template==="function"){var n=this.params.template;var i=n(this.params);this.setTemplate(i)}else{console.warn("AG Grid: detailCellRendererParams.template should be function or string");r()}}if(this.eDetailGrid==null){console.warn("AG Grid: reference to eDetailGrid was missing from the details template. "+'Please add ref="eDetailGrid" to the template.')}};t.prototype.setDetailGrid=function(e){if(!this.eDetailGrid){return}var t=this.context.getBean("agGridReact");var r=t?_.cloneObject(t):undefined;var n=this.context.getBean("frameworkComponentWrapper");var i=this.getFrameworkOverrides();new Grid(this.eDetailGrid,e,{frameworkOverrides:i,providedBeanInstances:{agGridReact:r,frameworkComponentWrapper:n}});this.detailApi=e.api;this.ctrl.registerDetailWithMaster(e.api,e.columnApi);this.addDestroyFunc((function(){if(e.api){e.api.destroy()}}))};t.prototype.setRowData=function(e){this.detailApi&&this.detailApi.setRowData(e)};t.TEMPLATE='<div class="ag-details-row" role="gridcell">\n            <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>\n        </div>';__decorate$D([RefSelector("eDetailGrid")],t.prototype,"eDetailGrid",void 0);return t}(Component);var VERSION$8="29.3.5";var MasterDetailModule={version:VERSION$8,moduleName:ModuleNames.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:DetailCellRenderer}],controllers:[{controllerName:"detailCellRenderer",controllerClass:DetailCellRendererCtrl}],dependantModules:[EnterpriseCoreModule]};var __extends$E=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$C=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var EnterpriseMenuFactory=function(e){__extends$E(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)};t.prototype.showMenuAfterMouseEvent=function(e,t,r){var n=this;this.showMenu(e,(function(i){var o=i.getGui();n.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:e,mouseEvent:t,ePopup:o});if(r){i.showTab(r)}}),"columnMenu",r,undefined,t.target)};t.prototype.showMenuAfterButtonClick=function(e,t,r,n,i){var o=this;var a=-1;var s="left";if(this.gridOptionsService.is("enableRtl")){a=1;s="right"}this.showMenu(e,(function(i){var l=i.getGui();o.popupService.positionPopupByComponent({type:r,column:e,eventSource:t,ePopup:l,alignSide:s,nudgeX:9*a,nudgeY:-23,position:"under",keepWithinBounds:true});if(n){i.showTab(n)}}),r,n,i,t)};t.prototype.showMenu=function(e,t,r,n,i,o){var a=this;var s=this.getMenuParams(e,i,o),l=s.menu,u=s.eMenuGui,c=s.currentHeaderPosition,d=s.currentColumnIndex,p=s.anchorToElement;var f=[];f.push(this.getClosedCallback(e,l,c,d,o));var h=this.localeService.getLocaleTextFunc();var v=this.popupService.addPopup({modal:true,eChild:u,closeOnEsc:true,closedCallback:function(e){f.forEach((function(t){return t(e)}))},afterGuiAttached:function(e){return l.afterGuiAttached(Object.assign({},{container:r},e))},positionCallback:!!n?function(){return t(l)}:undefined,anchorToElement:p,ariaLabel:h("ariaLabelColumnMenu","Column Menu")});this.addStopAnchoring(v===null||v===void 0?void 0:v.stopAnchoringPromise,e,f);if(!n){l.showTabBasedOnPreviousSelection();t(l)}l.addEventListener(EnterpriseMenu.EVENT_TAB_SELECTED,(function(e){a.lastSelectedTab=e.key}));e.setMenuVisible(true,"contextMenu");this.activeMenu=l;l.addEventListener(BeanStub.EVENT_DESTROYED,(function(){if(a.activeMenu===l){a.activeMenu=null}}))};t.prototype.getClosedCallback=function(e,t,r,n,i){var o=this;return function(a){o.destroyBean(t);e.setMenuVisible(false,"contextMenu");var s=a instanceof KeyboardEvent;if(!s||!i){return}if(_.isVisible(i)){var l=o.focusService.findTabbableParent(i);if(l){if(e){o.headerNavigationService.scrollToColumn(e)}l.focus()}}else if(r&&n!==-1){var u=o.columnModel.getAllDisplayedColumns();var c=u[n]||_.last(u);if(c){o.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:r.headerRowIndex,column:c}})}}}};t.prototype.addStopAnchoring=function(e,t,r){if(!e){return}e.then((function(e){t.addEventListener("leftChanged",e);t.addEventListener("visibleChanged",e);r.push((function(){t.removeEventListener("leftChanged",e);t.removeEventListener("visibleChanged",e)}))}))};t.prototype.getMenuParams=function(e,t,r){var n=this.createBean(new EnterpriseMenu(e,this.lastSelectedTab,t));return{menu:n,eMenuGui:n.getGui(),currentHeaderPosition:this.focusService.getFocusedHeader(),currentColumnIndex:this.columnModel.getAllDisplayedColumns().indexOf(e),anchorToElement:r||this.ctrlsService.getGridBodyCtrl().getGui()}};t.prototype.isMenuEnabled=function(e){return e.getMenuTabs(EnterpriseMenu.TABS_DEFAULT).length>0};__decorate$C([Autowired("popupService")],t.prototype,"popupService",void 0);__decorate$C([Autowired("focusService")],t.prototype,"focusService",void 0);__decorate$C([Autowired("headerNavigationService")],t.prototype,"headerNavigationService",void 0);__decorate$C([Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0);__decorate$C([Autowired("columnModel")],t.prototype,"columnModel",void 0);t=__decorate$C([Bean("menuFactory")],t);return t}(BeanStub);var EnterpriseMenu=function(e){__extends$E(t,e);function t(r,n,i){var o=e.call(this)||this;o.tabFactories={};o.includeChecks={};o.column=r;o.initialSelection=n;o.tabFactories[t.TAB_GENERAL]=o.createMainPanel.bind(o);o.tabFactories[t.TAB_FILTER]=o.createFilterPanel.bind(o);o.tabFactories[t.TAB_COLUMNS]=o.createColumnsPanel.bind(o);o.includeChecks[t.TAB_GENERAL]=function(){return true};o.includeChecks[t.TAB_FILTER]=function(){return o.filterManager.isFilterAllowed(r)};o.includeChecks[t.TAB_COLUMNS]=function(){return true};o.restrictTo=i;return o}t.prototype.init=function(){var e=this;var t=this.getTabsToCreate().map((function(t){return e.createTab(t)}));this.tabbedLayout=new TabbedLayout({items:t,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)});this.createBean(this.tabbedLayout);if(this.mainMenuList){this.mainMenuList.setParentComponent(this.tabbedLayout)}this.addDestroyFunc((function(){return e.destroyBean(e.tabbedLayout)}))};t.prototype.getTabsToCreate=function(){var e=this;if(this.restrictTo){return this.restrictTo}return this.column.getMenuTabs(t.TABS_DEFAULT).filter((function(t){return e.isValidMenuTabItem(t)})).filter((function(t){return e.isNotSuppressed(t)})).filter((function(t){return e.isModuleLoaded(t)}))};t.prototype.isModuleLoaded=function(e){if(e===t.TAB_COLUMNS){return ModuleRegistry.isRegistered(ModuleNames.ColumnsToolPanelModule)}return true};t.prototype.isValidMenuTabItem=function(e){var r=true;var n=t.TABS_DEFAULT;if(this.restrictTo!=null){r=this.restrictTo.indexOf(e)>-1;n=this.restrictTo}r=r&&t.TABS_DEFAULT.indexOf(e)>-1;if(!r){console.warn("AG Grid: Trying to render an invalid menu item '"+e+"'. Check that your 'menuTabs' contains one of ["+n+"]")}return r};t.prototype.isNotSuppressed=function(e){return this.includeChecks[e]()};t.prototype.createTab=function(e){return this.tabFactories[e]()};t.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)};t.prototype.showTab=function(e){if(this.tabItemColumns&&e===t.TAB_COLUMNS){this.tabbedLayout.showItem(this.tabItemColumns)}else if(this.tabItemFilter&&e===t.TAB_FILTER){this.tabbedLayout.showItem(this.tabItemFilter)}else if(this.tabItemGeneral&&e===t.TAB_GENERAL){this.tabbedLayout.showItem(this.tabItemGeneral)}else{this.tabbedLayout.showFirstItem()}};t.prototype.onTabItemClicked=function(e){var r=null;switch(e.item){case this.tabItemColumns:r=t.TAB_COLUMNS;break;case this.tabItemFilter:r=t.TAB_FILTER;break;case this.tabItemGeneral:r=t.TAB_GENERAL;break}if(r){this.activateTab(r)}};t.prototype.activateTab=function(e){var r={type:t.EVENT_TAB_SELECTED,key:e};this.dispatchEvent(r)};t.prototype.getMenuItems=function(){var e=this.getDefaultMenuOptions();var r;var n=this.gridOptionsService.getCallback("getMainMenuItems");if(n){r=n({column:this.column,defaultItems:e})}else{r=e}_.removeRepeatsFromArray(r,t.MENU_ITEM_SEPARATOR);return r};t.prototype.getDefaultMenuOptions=function(){var e=[];var r=!this.column.getColDef().lockPinned;var n=this.columnModel.getRowGroupColumns().length;var i=n>0;var o=this.columnModel.getRowGroupColumns().indexOf(this.column)>=0;var a=this.column.isAllowValue();var s=this.column.isAllowRowGroup();var l=this.column.isPrimary();var u=this.columnModel.isPivotMode();var c=this.rowModel.getType()==="clientSide";var d=this.gridOptionsService.isTreeData();var p=l&&i&&a||!l;if(r){e.push("pinSubMenu")}if(p){e.push("valueAggSubMenu")}if(r||p){e.push(t.MENU_ITEM_SEPARATOR)}e.push("autoSizeThis");e.push("autoSizeAll");e.push(t.MENU_ITEM_SEPARATOR);if(s&&this.column.isPrimary()){if(o){e.push("rowUnGroup")}else{e.push("rowGroup")}}e.push(t.MENU_ITEM_SEPARATOR);e.push("resetColumns");var f=c&&(d||n>(u?1:0));if(f){e.push("expandAll");e.push("contractAll")}return e};t.prototype.createMainPanel=function(){this.mainMenuList=this.createManagedBean(new AgMenuList);var e=this.getMenuItems();var r=this.menuItemMapper.mapWithStockItems(e,this.column);this.mainMenuList.addMenuItems(r);this.mainMenuList.addEventListener(AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this));this.tabItemGeneral={title:_.createIconNoSpan("menu",this.gridOptionsService,this.column),titleLabel:t.TAB_GENERAL.replace("MenuTab",""),bodyPromise:AgPromise.resolve(this.mainMenuList.getGui()),name:t.TAB_GENERAL};return this.tabItemGeneral};t.prototype.onHidePopup=function(e){var t;if(e&&e.event&&e.event instanceof KeyboardEvent){t=e.event}this.hidePopupFunc(t&&{keyboardEvent:t});var r=this.focusService.getFocusedCell();var n=this.gridOptionsService.getDocument();if(n.activeElement===n.body&&r){var i=r.rowIndex,o=r.rowPinned,a=r.column;this.focusService.setFocusedCell({rowIndex:i,column:a,rowPinned:o,forceBrowserFocus:true,preventScrollOnBrowserFocus:true})}};t.prototype.createFilterPanel=function(){var e=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!e){throw new Error("AG Grid - Unable to instantiate filter")}var r=function(t){if(!(e===null||e===void 0?void 0:e.filterPromise)){return}e.filterPromise.then((function(e){if(e&&e.afterGuiAttached){e.afterGuiAttached(t)}}))};var n=function(){var t;return(t=e===null||e===void 0?void 0:e.filterPromise)===null||t===void 0?void 0:t.then((function(e){var t;return(t=e===null||e===void 0?void 0:e.afterGuiDetached)===null||t===void 0?void 0:t.call(e)}))};this.tabItemFilter={title:_.createIconNoSpan("filter",this.gridOptionsService,this.column),titleLabel:t.TAB_FILTER.replace("MenuTab",""),bodyPromise:e===null||e===void 0?void 0:e.guiPromise,afterAttachedCallback:r,afterDetachedCallback:n,name:t.TAB_FILTER};return this.tabItemFilter};t.prototype.createColumnsPanel=function(){var e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");var r=this.createManagedBean(new PrimaryColsPanel);var n=this.column.getColDef().columnsMenuParams;if(!n){n={}}var i=n.contractColumnSelection,o=n.suppressColumnExpandAll,a=n.suppressColumnFilter,s=n.suppressColumnSelectAll,l=n.suppressSyncLayoutWithGrid,u=n.columnLayout;r.init(false,{suppressColumnMove:false,suppressValues:false,suppressPivots:false,suppressRowGroups:false,suppressPivotMode:false,contractColumnSelection:!!i,suppressColumnExpandAll:!!o,suppressColumnFilter:!!a,suppressColumnSelectAll:!!s,suppressSyncLayoutWithGrid:!!u||!!l,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context},"columnMenu");if(u){r.setColumnLayout(u)}var c=r.getGui();c.classList.add("ag-menu-column-select");e.appendChild(c);this.tabItemColumns={title:_.createIconNoSpan("columns",this.gridOptionsService,this.column),titleLabel:t.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:AgPromise.resolve(e),name:t.TAB_COLUMNS};return this.tabItemColumns};t.prototype.afterGuiAttached=function(e){var t=e.container,r=e.hidePopup;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:r});if(r){this.hidePopupFunc=r;this.addDestroyFunc(r)}};t.prototype.getGui=function(){return this.tabbedLayout.getGui()};t.EVENT_TAB_SELECTED="tabSelected";t.TAB_FILTER="filterMenuTab";t.TAB_GENERAL="generalMenuTab";t.TAB_COLUMNS="columnsMenuTab";t.TABS_DEFAULT=[t.TAB_GENERAL,t.TAB_FILTER,t.TAB_COLUMNS];t.MENU_ITEM_SEPARATOR="separator";__decorate$C([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$C([Autowired("filterManager")],t.prototype,"filterManager",void 0);__decorate$C([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$C([Autowired("columnApi")],t.prototype,"columnApi",void 0);__decorate$C([Autowired("menuItemMapper")],t.prototype,"menuItemMapper",void 0);__decorate$C([Autowired("rowModel")],t.prototype,"rowModel",void 0);__decorate$C([Autowired("focusService")],t.prototype,"focusService",void 0);__decorate$C([PostConstruct],t.prototype,"init",null);return t}(BeanStub);var __extends$D=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$5=function(){__assign$5=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$5.apply(this,arguments)};var __decorate$B=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var CSS_MENU="ag-menu";var CSS_CONTEXT_MENU_OPEN="ag-context-menu-open";var ContextMenuFactory=function(e){__extends$D(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)};t.prototype.getMenuItems=function(e,t,r){var n=[];if(_.exists(e)&&ModuleRegistry.isRegistered(ModuleNames.ClipboardModule)){if(t){if(!this.gridOptionsService.is("suppressCutToClipboard")){n.push("cut")}n.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")}}if(this.gridOptionsService.is("enableCharts")&&ModuleRegistry.isRegistered(ModuleNames.GridChartsModule)){if(this.columnModel.isPivotMode()){n.push("pivotChart")}if(this.rangeService&&!this.rangeService.isEmpty()){n.push("chartRange")}}if(_.exists(e)){var i=!ModuleRegistry.isRegistered(ModuleNames.CsvExportModule);var o=!ModuleRegistry.isRegistered(ModuleNames.ExcelExportModule);var a=this.gridOptionsService.is("suppressExcelExport")||o;var s=this.gridOptionsService.is("suppressCsvExport")||i;var l=_.isIOSUserAgent();var u=!l&&(!a||!s);if(u){n.push("export")}}var c=this.gridOptionsService.getCallback("getContextMenuItems");if(c){var d={node:e,column:t,value:r,defaultItems:n.length?n:undefined};return c(d)}return n};t.prototype.onContextMenu=function(e,t,r,n,i,o){if(!this.gridOptionsService.is("allowContextMenuWithControlKey")){if(e&&(e.ctrlKey||e.metaKey)){return}}if(e){this.blockMiddleClickScrollsIfNeeded(e)}if(this.gridOptionsService.is("suppressContextMenu")){return}var a=e?e:t.touches[0];if(this.showMenu(r,n,i,a,o)){var s=e?e:t;s.preventDefault()}};t.prototype.blockMiddleClickScrollsIfNeeded=function(e){var t=this.gridOptionsService;var r=e.which;if(t.is("suppressMiddleClickScrolls")&&r===2){e.preventDefault()}};t.prototype.showMenu=function(e,t,r,n,i){var o=this;var a=this.getMenuItems(e,t,r);var s=this.ctrlsService.getGridBodyCtrl().getGui();if(a===undefined||_.missingOrEmpty(a)){return false}var l=new ContextMenu(a);this.createBean(l);var u=l.getGui();var c={column:t,rowNode:e,type:"contextMenu",mouseEvent:n,ePopup:u,nudgeY:1};var d=this.localeService.getLocaleTextFunc();var p=this.popupService.addPopup({modal:true,eChild:u,closeOnEsc:true,closedCallback:function(){s.classList.remove(CSS_CONTEXT_MENU_OPEN);o.destroyBean(l)},click:n,positionCallback:function(){var e=o.gridOptionsService.is("enableRtl");o.popupService.positionPopupUnderMouseEvent(__assign$5(__assign$5({},c),{nudgeX:e?(u.offsetWidth+1)*-1:1}))},anchorToElement:i,ariaLabel:d("ariaLabelContextMenu","Context Menu")});if(p){s.classList.add(CSS_CONTEXT_MENU_OPEN);l.afterGuiAttached({container:"contextMenu",hidePopup:p.hideFunc})}if(this.activeMenu){this.hideActiveMenu()}this.activeMenu=l;l.addEventListener(BeanStub.EVENT_DESTROYED,(function(){if(o.activeMenu===l){o.activeMenu=null}}));if(p){l.addEventListener(AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,p.hideFunc)}return true};__decorate$B([Autowired("popupService")],t.prototype,"popupService",void 0);__decorate$B([Optional("rangeService")],t.prototype,"rangeService",void 0);__decorate$B([Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0);__decorate$B([Autowired("columnModel")],t.prototype,"columnModel",void 0);t=__decorate$B([Bean("contextMenuFactory")],t);return t}(BeanStub);var ContextMenu=function(e){__extends$D(t,e);function t(t){var r=e.call(this,'<div class="'+CSS_MENU+'" role="presentation"></div>')||this;r.menuList=null;r.focusedCell=null;r.menuItems=t;return r}t.prototype.addMenuItems=function(){var e=this;var t=this.createManagedBean(new AgMenuList);var r=this.menuItemMapper.mapWithStockItems(this.menuItems,null);t.addMenuItems(r);this.appendChild(t);this.menuList=t;t.addEventListener(AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,(function(t){return e.dispatchEvent(t)}))};t.prototype.afterGuiAttached=function(e){if(e.hidePopup){this.addDestroyFunc(e.hidePopup)}this.focusedCell=this.focusService.getFocusedCell();if(this.menuList){this.focusService.focusInto(this.menuList.getGui())}};t.prototype.restoreFocusedCell=function(){var e=this.focusService.getFocusedCell();if(e&&this.focusedCell&&this.cellPositionUtils.equals(e,this.focusedCell)){var t=this.focusedCell,r=t.rowIndex,n=t.rowPinned,i=t.column;var o=this.gridOptionsService.getDocument();if(o.activeElement===o.body){this.focusService.setFocusedCell({rowIndex:r,column:i,rowPinned:n,forceBrowserFocus:true})}}};t.prototype.destroy=function(){this.restoreFocusedCell();e.prototype.destroy.call(this)};__decorate$B([Autowired("menuItemMapper")],t.prototype,"menuItemMapper",void 0);__decorate$B([Autowired("focusService")],t.prototype,"focusService",void 0);__decorate$B([Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0);__decorate$B([PostConstruct],t.prototype,"addMenuItems",null);return t}(Component);var __extends$C=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$4=function(){__assign$4=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$4.apply(this,arguments)};var __decorate$A=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var MenuItemMapper=function(e){__extends$C(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.mapWithStockItems=function(e,t){var r=this;if(!e){return[]}var n=[];e.forEach((function(e){var i;if(typeof e==="string"){i=r.getStockMenuItem(e,t)}else{i=__assign$4({},e)}if(!i){return}var o=i;var a=o.subMenu;if(a&&a instanceof Array){o.subMenu=r.mapWithStockItems(a,t)}if(i!=null){n.push(i)}}));return n};t.prototype.getStockMenuItem=function(e,t){var r=this;var n;var i=this.localeService.getLocaleTextFunc();var o=this.gridOptionsService.is("skipHeaderOnAutoSize");switch(e){case"pinSubMenu":return{name:i("pinColumn","Pin Column"),icon:_.createIconNoSpan("menuPin",this.gridOptionsService,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:i("pinLeft","Pin Left"),action:function(){return r.columnModel.setColumnPinned(t,"left","contextMenu")},checked:!!t&&t.isPinnedLeft()};case"pinRight":return{name:i("pinRight","Pin Right"),action:function(){return r.columnModel.setColumnPinned(t,"right","contextMenu")},checked:!!t&&t.isPinnedRight()};case"clearPinned":return{name:i("noPin","No Pin"),action:function(){return r.columnModel.setColumnPinned(t,null,"contextMenu")},checked:!!t&&!t.isPinned()};case"valueAggSubMenu":if(ModuleRegistry.assertRegistered(ModuleNames.RowGroupingModule,"Aggregation from Menu")){if(!(t===null||t===void 0?void 0:t.isPrimary())&&!(t===null||t===void 0?void 0:t.getColDef().pivotValueColumn)){return null}return{name:i("valueAggregation","Value Aggregation"),icon:_.createIconNoSpan("menuValue",this.gridOptionsService,null),subMenu:this.createAggregationSubMenu(t)}}else{return null}case"autoSizeThis":return{name:i("autosizeThiscolumn","Autosize This Column"),action:function(){return r.columnModel.autoSizeColumn(t,o,"contextMenu")}};case"autoSizeAll":return{name:i("autosizeAllColumns","Autosize All Columns"),action:function(){return r.columnModel.autoSizeAllColumns(o,"contextMenu")}};case"rowGroup":return{name:i("groupBy","Group by")+" "+_.escapeString(this.columnModel.getDisplayNameForColumn(t,"header")),action:function(){return r.columnModel.addRowGroupColumn(t,"contextMenu")},icon:_.createIconNoSpan("menuAddRowGroup",this.gridOptionsService,null)};case"rowUnGroup":return{name:i("ungroupBy","Un-Group by")+" "+_.escapeString(this.columnModel.getDisplayNameForColumn(t,"header")),action:function(){return r.columnModel.removeRowGroupColumn(t,"contextMenu")},icon:_.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsService,null)};case"resetColumns":return{name:i("resetColumns","Reset Columns"),action:function(){return r.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:i("expandAll","Expand All"),action:function(){return r.gridApi.expandAll()}};case"contractAll":return{name:i("collapseAll","Collapse All"),action:function(){return r.gridApi.collapseAll()}};case"copy":if(ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"Copy from Menu")){return{name:i("copy","Copy"),shortcut:i("ctrlC","Ctrl+C"),icon:_.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return r.clipboardService.copyToClipboard()}}}else{return null}case"copyWithHeaders":if(ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"Copy with Headers from Menu")){return{name:i("copyWithHeaders","Copy with Headers"),icon:_.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return r.clipboardService.copyToClipboard({includeHeaders:true})}}}else{return null}case"copyWithGroupHeaders":if(ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"Copy with Group Headers from Menu")){return{name:i("copyWithGroupHeaders","Copy with Group Headers"),icon:_.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return r.clipboardService.copyToClipboard({includeHeaders:true,includeGroupHeaders:true})}}}else{return null}case"cut":if(ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"Cut from Menu")){var a=this.focusService.getFocusedCell();var s=a?this.rowPositionUtils.getRowNode(a):null;var l=s?a===null||a===void 0?void 0:a.column.isCellEditable(s):false;return{name:i("cut","Cut"),shortcut:i("ctrlX","Ctrl+X"),icon:_.createIconNoSpan("clipboardCut",this.gridOptionsService,null),disabled:!l||this.gridOptionsService.is("suppressCutToClipboard"),action:function(){return r.clipboardService.cutToClipboard()}}}else{return null}case"paste":if(ModuleRegistry.assertRegistered(ModuleNames.ClipboardModule,"Paste from Clipboard")){return{name:i("paste","Paste"),shortcut:i("ctrlV","Ctrl+V"),disabled:true,icon:_.createIconNoSpan("clipboardPaste",this.gridOptionsService,null),action:function(){return r.clipboardService.pasteFromClipboard()}}}else{return null}case"export":var u=[];var c=ModuleRegistry.isRegistered(ModuleNames.CsvExportModule);var d=ModuleRegistry.isRegistered(ModuleNames.ExcelExportModule);if(!this.gridOptionsService.is("suppressCsvExport")&&c){u.push("csvExport")}if(!this.gridOptionsService.is("suppressExcelExport")&&d){u.push("excelExport")}return{name:i("export","Export"),subMenu:u,icon:_.createIconNoSpan("save",this.gridOptionsService,null)};case"csvExport":return{name:i("csvExport","CSV Export"),icon:_.createIconNoSpan("csvExport",this.gridOptionsService,null),action:function(){return r.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:i("excelExport","Excel Export"),icon:_.createIconNoSpan("excelExport",this.gridOptionsService,null),action:function(){return r.gridApi.exportDataAsExcel()}};case"separator":return"separator";case"pivotChart":case"chartRange":return(n=this.chartMenuItemMapper.getChartItems(e))!==null&&n!==void 0?n:null;default:{console.warn("AG Grid: unknown menu item type "+e);return null}}};t.prototype.createAggregationSubMenu=function(e){var t=this;var r=this.localeService.getLocaleTextFunc();var n;if(e.isPrimary()){n=e}else{var i=e.getColDef().pivotValueColumn;n=_.exists(i)?i:undefined}var o=[];if(n){var a=n.isValueActive();var s=this.aggFuncService.getFuncNames(n);o.push({name:r("noAggregation","None"),action:function(){t.columnModel.removeValueColumn(n,"contextMenu");t.columnModel.setColumnAggFunc(n,undefined,"contextMenu")},checked:!a});s.forEach((function(e){o.push({name:r(e,_.capitalise(e)),action:function(){t.columnModel.setColumnAggFunc(n,e,"contextMenu");t.columnModel.addValueColumn(n,"contextMenu")},checked:a&&n.getAggFunc()===e})}))}return o};__decorate$A([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$A([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$A([Optional("clipboardService")],t.prototype,"clipboardService",void 0);__decorate$A([Optional("aggFuncService")],t.prototype,"aggFuncService",void 0);__decorate$A([Autowired("focusService")],t.prototype,"focusService",void 0);__decorate$A([Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0);__decorate$A([Autowired("chartMenuItemMapper")],t.prototype,"chartMenuItemMapper",void 0);t=__decorate$A([Bean("menuItemMapper")],t);return t}(BeanStub);var VERSION$7="29.3.5";var __extends$B=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$3=function(){__assign$3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$3.apply(this,arguments)};var __decorate$z=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$8=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var ChartMenuItemMapper=function(e){__extends$B(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}r=t;t.prototype.getChartItems=function(e){var t,n;if(!this.chartService){ModuleRegistry.assertRegistered(ModuleNames.GridChartsModule,'the Context Menu key "'+e+'"');return undefined}var i=e==="pivotChart"?new PivotMenuItemMapper(this.gridOptionsService,this.chartService,this.localeService):new RangeMenuItemMapper(this.gridOptionsService,this.chartService,this.localeService);var o=i.getMenuItem();var a=(n=(t=this.gridOptionsService.get("chartToolPanelsDef"))===null||t===void 0?void 0:t.settingsPanel)===null||n===void 0?void 0:n.chartGroupsDef;if(a){o=r.filterAndOrderChartMenu(o,a,i.getConfigLookup())}return this.cleanInternals(o)};t.prototype.cleanInternals=function(e){if(!e){return e}var t=function(e){var r;e===null||e===void 0?true:delete e._key;(r=e===null||e===void 0?void 0:e.subMenu)===null||r===void 0?void 0:r.forEach((function(e){return t(e)}));return e};return t(e)};t.buildLookup=function(e){var t={};var r=function(e){t[e._key]=e;if(e.subMenu){e.subMenu.forEach((function(e){return r(e)}))}};r(e);return t};t.filterAndOrderChartMenu=function(e,t,r){var n;var i=this.buildLookup(e);var o=__assign$3(__assign$3({},e),{subMenu:[]});Object.entries(t).forEach((function(e){var t,n;var a=__read$8(e,2),s=a[0],l=a[1];var u=r[s];if(u==undefined){_.doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+s+"'")}),"invalid_chartGroupsDef"+s);return undefined}var c=i[u._key];if(c){if(c.subMenu){var d=l.map((function(e){var t=u[e];if(t==undefined){_.doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+s+"."+e+"'")}),"invalid_chartGroupsDef"+e+"_"+s);return undefined}return i[t]})).filter((function(e){return e!==undefined}));if(d.length>0){c.subMenu=d;(t=o.subMenu)===null||t===void 0?void 0:t.push(c)}}else{(n=o.subMenu)===null||n===void 0?void 0:n.push(c)}}}));if(((n=o.subMenu)===null||n===void 0?void 0:n.length)==0){return undefined}return o};var r;__decorate$z([Optional("chartService")],t.prototype,"chartService",void 0);t=r=__decorate$z([Bean("chartMenuItemMapper")],t);return t}(BeanStub);var PivotMenuItemMapper=function(){function e(e,t,r){this.gridOptionsService=e;this.chartService=t;this.localeService=r}e.prototype.getMenuItem=function(){var e=this;var t=this.localeService.getLocaleTextFunc();var r=function(r,n,i,o){return{name:t(r,n),action:function(){return e.chartService.createPivotChart({chartType:i})},_key:o}};return{name:t("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:t("columnChart","Column"),subMenu:[r("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),r("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),r("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:t("barChart","Bar"),subMenu:[r("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),r("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),r("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:t("pieChart","Pie"),subMenu:[r("pie","Pie&lrm;","pie","pivotPie"),r("doughnut","Doughnut&lrm;","doughnut","pivotDoughnut")]},r("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:t("xyChart","X Y (Scatter)"),subMenu:[r("scatter","Scatter&lrm;","scatter","pivotScatter"),r("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:t("areaChart","Area"),subMenu:[r("area","Area&lrm;","area","pivotArea"),r("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),r("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},r("histogramChart","Histogram&lrm;","histogram","pivotHistogramChart"),{_key:"pivotCombinationChart",name:t("combinationChart","Combination"),subMenu:[r("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),r("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:_.createIconNoSpan("chart",this.gridOptionsService,undefined)}};e.prototype.getConfigLookup=function(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",doughnut:"pivotDoughnut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},histogramGroup:{_key:"pivotHistogramChart",histogram:"pivotHistogramChart"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:""}}};return e}();var RangeMenuItemMapper=function(){function e(e,t,r){this.gridOptionsService=e;this.chartService=t;this.localeService=r}e.prototype.getMenuItem=function(){var e=this;var t=this.localeService.getLocaleTextFunc();var r=function(r,n,i,o){return{name:t(r,n),action:function(){return e.chartService.createChartFromCurrentRange(i)},_key:o}};return{name:t("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:t("columnChart","Column"),subMenu:[r("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),r("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),r("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:t("barChart","Bar"),subMenu:[r("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),r("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),r("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:t("pieChart","Pie"),subMenu:[r("pie","Pie&lrm;","pie","rangePie"),r("doughnut","Doughnut&lrm;","doughnut","rangeDoughnut")],_key:"rangePieChart"},r("line","Line&lrm;","line","rangeLineChart"),{name:t("xyChart","X Y (Scatter)"),subMenu:[r("scatter","Scatter&lrm;","scatter","rangeScatter"),r("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:t("areaChart","Area"),subMenu:[r("area","Area&lrm;","area","rangeArea"),r("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),r("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},r("histogramChart","Histogram&lrm;","histogram","rangeHistogramChart"),{name:t("combinationChart","Combination"),subMenu:[r("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),r("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:_.createIconNoSpan("chart",this.gridOptionsService,undefined)}};e.prototype.getConfigLookup=function(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",doughnut:"rangeDoughnut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},histogramGroup:{_key:"rangeHistogramChart",histogram:"rangeHistogramChart"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:""}}};return e}();var MenuModule={version:VERSION$7,moduleName:ModuleNames.MenuModule,beans:[EnterpriseMenuFactory,ContextMenuFactory,MenuItemMapper,ChartMenuItemMapper],dependantModules:[EnterpriseCoreModule]};var __extends$A=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$2=function(){__assign$2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$2.apply(this,arguments)};var __decorate$y=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var MultiFilter=function(e){__extends$A(t,e);function t(){var t=e.call(this,'<div class="ag-multi-filter ag-menu-list-compact"></div>')||this;t.filterDefs=[];t.filters=[];t.guiDestroyFuncs=[];t.activeFilterIndices=[];t.lastActivatedMenuItem=null;t.afterFiltersReadyFuncs=[];return t}t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onFocusIn:function(t){return e.onFocusIn(t)}})};t.getFilterDefs=function(e){var t=e.filters;return t&&t.length>0?t:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]};t.prototype.init=function(e){var r=this;this.params=e;this.filterDefs=t.getFilterDefs(e);var n=e.column,i=e.filterChangedCallback;this.column=n;this.filterChangedCallback=i;var o=[];this.filterDefs.forEach((function(e,t){var n=r.createFilter(e,t);if(n!=null){o.push(n)}}));return AgPromise.all(o).then((function(e){r.filters=e;r.refreshGui("columnMenu");r.afterFiltersReadyFuncs.forEach((function(e){return e()}));r.afterFiltersReadyFuncs.length=0}))};t.prototype.refreshGui=function(e){var t=this;if(e===this.lastOpenedInContainer){return}this.removeAllChildrenExceptTabGuards();this.destroyChildren();this.filters.forEach((function(r,n){if(n>0){t.appendChild(_.loadTemplate('<div class="ag-filter-separator"></div>'))}var i=t.filterDefs[n];var o=t.getFilterTitle(r,i);var a;if(i.display==="subMenu"&&e!=="toolPanel"){var s=t.insertFilterMenu(r,o);a=s.getGui()}else if(i.display==="subMenu"||i.display==="accordion"){var l=t.insertFilterGroup(r,o);a=l.getGui()}else{a=r.getGui()}t.appendChild(a)}));this.lastOpenedInContainer=e};t.prototype.getFilterTitle=function(e,t){if(t.title!=null){return t.title}var r=e;return typeof r.getFilterTitle==="function"?r.getFilterTitle():"Filter"};t.prototype.destroyChildren=function(){this.guiDestroyFuncs.forEach((function(e){return e()}));this.guiDestroyFuncs.length=0};t.prototype.insertFilterMenu=function(e,t){var r=this;var n=this.createBean(new AgMenuItemComponent({name:t,subMenu:e,cssClasses:["ag-multi-filter-menu-item"],isCompact:true,isAnotherSubMenuOpen:function(){return false}}));n.setParentComponent(this);this.guiDestroyFuncs.push((function(){return r.destroyBean(n)}));this.addManagedListener(n,AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED,(function(e){if(r.lastActivatedMenuItem&&r.lastActivatedMenuItem!==e.menuItem){r.lastActivatedMenuItem.deactivate()}r.lastActivatedMenuItem=e.menuItem}));n.addGuiEventListener("focusin",(function(){return n.activate()}));n.addGuiEventListener("focusout",(function(){if(!n.isSubMenuOpen()){n.deactivate()}}));return n};t.prototype.insertFilterGroup=function(e,t){var r=this;var n=this.createBean(new AgGroupComponent({title:t,cssIdentifier:"multi-filter"}));this.guiDestroyFuncs.push((function(){return r.destroyBean(n)}));n.addItem(e.getGui());n.toggleGroupExpand(false);if(e.afterGuiAttached){var i={container:this.lastOpenedInContainer,suppressFocus:true};n.addManagedListener(n,AgGroupComponent.EVENT_EXPANDED,(function(){return e.afterGuiAttached(i)}))}return n};t.prototype.isFilterActive=function(){return this.filters.some((function(e){return e.isFilterActive()}))};t.prototype.getLastActiveFilterIndex=function(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null};t.prototype.doesFilterPass=function(e,t){var r=true;this.filters.forEach((function(n){if(!r||n===t||!n.isFilterActive()){return}r=n.doesFilterPass(e)}));return r};t.prototype.getFilterType=function(){return"multi"};t.prototype.getModelFromUi=function(){var e={filterType:this.getFilterType(),filterModels:this.filters.map((function(e){var t=e;if(typeof t.getModelFromUi==="function"){return t.getModelFromUi()}return null}))};return e};t.prototype.getModel=function(){if(!this.isFilterActive()){return null}var e={filterType:this.getFilterType(),filterModels:this.filters.map((function(e){if(e.isFilterActive()){return e.getModel()}return null}))};return e};t.prototype.setModel=function(e){var t=this;var r=function(e,t){return new AgPromise((function(r){var n=e.setModel(t);n?n.then((function(){return r()})):r()}))};var n=[];if(e==null){n=this.filters.map((function(e,n){var i=r(e,null).then((function(){t.updateActiveList(n)}));return i}))}else{this.filters.forEach((function(i,o){var a=e.filterModels.length>o?e.filterModels[o]:null;var s=r(i,a).then((function(){t.updateActiveList(o)}));n.push(s)}))}return AgPromise.all(n).then((function(){}))};t.prototype.applyModel=function(e){if(e===void 0){e="api"}var t=false;this.filters.forEach((function(r){if(r instanceof ProvidedFilter){t=r.applyModel(e)||t}}));return t};t.prototype.getChildFilterInstance=function(e){return this.filters[e]};t.prototype.afterGuiAttached=function(e){if(e){this.refreshGui(e.container)}var t=this.params.filters;var r=t&&t.some((function(e){return e.display&&e.display!=="inline"}));this.executeFunctionIfExists("afterGuiAttached",__assign$2(__assign$2({},e||{}),{suppressFocus:r}));var n=this.gridOptionsService.getDocument();var i=n.activeElement;if(r&&(i===n.body||this.getGui().contains(i))){this.forceFocusOutOfContainer(true)}};t.prototype.afterGuiDetached=function(){this.executeFunctionIfExists("afterGuiDetached")};t.prototype.onAnyFilterChanged=function(){this.executeFunctionIfExists("onAnyFilterChanged")};t.prototype.onNewRowsLoaded=function(){this.executeFunctionIfExists("onNewRowsLoaded")};t.prototype.destroy=function(){var t=this;this.filters.forEach((function(e){e.setModel(null);t.destroyBean(e)}));this.filters.length=0;this.destroyChildren();e.prototype.destroy.call(this)};t.prototype.executeFunctionIfExists=function(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}_.forEachReverse(this.filters,(function(r){var n=r[e];if(typeof n==="function"){n.apply(r,t)}}))};t.prototype.createFilter=function(e,t){var r=this;var n=this.params,i=n.filterModifiedCallback,o=n.doesRowPassOtherFilter;var a;var s=__assign$2(__assign$2({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:i,filterChangedCallback:function(e){r.executeWhenAllFiltersReady((function(){return r.filterChanged(t,e)}))},doesRowPassOtherFilter:function(e){return o(e)&&r.doesFilterPass({node:e,data:e.data},a)}});var l=this.userComponentFactory.getFilterDetails(e,s,"agTextColumnFilter");if(!l){return null}var u=l.newAgStackInstance();if(u){u.then((function(e){return a=e}))}return u};t.prototype.executeWhenAllFiltersReady=function(e){if(this.filters&&this.filters.length>0){e()}else{this.afterFiltersReadyFuncs.push(e)}};t.prototype.updateActiveList=function(e){var t=this.filters[e];_.removeFromArray(this.activeFilterIndices,e);if(t.isFilterActive()){this.activeFilterIndices.push(e)}};t.prototype.filterChanged=function(e,t){this.updateActiveList(e);this.filterChangedCallback(t);var r=this.filters[e];this.filters.forEach((function(e){if(e===r){return}if(typeof e.onAnyFilterChanged==="function"){e.onAnyFilterChanged()}}))};t.prototype.onFocusIn=function(e){if(this.lastActivatedMenuItem!=null&&!this.lastActivatedMenuItem.getGui().contains(e.target)){this.lastActivatedMenuItem.deactivate();this.lastActivatedMenuItem=null}return true};t.prototype.getModelAsString=function(e){var t,r,n,i;if(!this.filters||!((t=e===null||e===void 0?void 0:e.filterModels)===null||t===void 0?void 0:t.length)){return""}var o=(r=this.getLastActiveFilterIndex())!==null&&r!==void 0?r:0;var a=this.filters[o];return(i=(n=a.getModelAsString)===null||n===void 0?void 0:n.call(a,e.filterModels[o]))!==null&&i!==void 0?i:""};__decorate$y([Autowired("filterManager")],t.prototype,"filterManager",void 0);__decorate$y([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0);__decorate$y([PostConstruct],t.prototype,"postConstruct",null);return t}(TabGuardComp);var __extends$z=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign$1=function(){__assign$1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign$1.apply(this,arguments)};var __decorate$x=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var MultiFloatingFilterComp=function(e){__extends$z(t,e);function t(){var t=e.call(this,'<div class="ag-multi-floating-filter ag-floating-filter-input"></div>')||this;t.floatingFilters=[];return t}t.prototype.init=function(e){var t=this;this.params=e;var r=e.filterParams;var n=[];MultiFilter.getFilterDefs(r).forEach((function(r,i){var o=__assign$1(__assign$1({},e),{parentFilterInstance:function(e){t.parentMultiFilterInstance((function(t){var r=t.getChildFilterInstance(i);if(r==null){return}e(r)}))}});_.mergeDeep(o.filterParams,r.filterParams);var a=t.createFloatingFilter(r,o);if(a!=null){n.push(a)}}));return AgPromise.all(n).then((function(e){e.forEach((function(e,r){t.floatingFilters.push(e);var n=e.getGui();t.appendChild(n);if(r>0){_.setDisplayed(n,false)}}))}))};t.prototype.onParentModelChanged=function(e,t){var r=this;if(t&&t.afterFloatingFilter){return}this.parentMultiFilterInstance((function(n){if(e==null){r.floatingFilters.forEach((function(e,r){e.onParentModelChanged(null,t);_.setDisplayed(e.getGui(),r===0)}))}else{var i=n.getLastActiveFilterIndex();r.floatingFilters.forEach((function(r,n){var o=e.filterModels.length>n?e.filterModels[n]:null;r.onParentModelChanged(o,t);var a=i==null?n===0:n===i;_.setDisplayed(r.getGui(),a)}))}}))};t.prototype.destroy=function(){this.destroyBeans(this.floatingFilters);this.floatingFilters.length=0;e.prototype.destroy.call(this)};t.prototype.createFloatingFilter=function(e,t){var r;var n=(r=this.userComponentFactory.getDefaultFloatingFilterType(e))!==null&&r!==void 0?r:"agReadOnlyFloatingFilter";var i=this.userComponentFactory.getFloatingFilterCompDetails(e,t,n);return i?i.newAgStackInstance():null};t.prototype.parentMultiFilterInstance=function(e){this.params.parentFilterInstance((function(t){if(!(t instanceof MultiFilter)){throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as its parent")}e(t)}))};__decorate$x([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0);return t}(Component);var VERSION$6="29.3.5";var MultiFilterModule={version:VERSION$6,moduleName:ModuleNames.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:MultiFilter},{componentName:"agMultiColumnFloatingFilter",componentClass:MultiFloatingFilterComp}],dependantModules:[EnterpriseCoreModule]};function bindCellRendererToHtmlElement(e,t){e.then((function(e){var r=e.getGui();if(r!=null){if(typeof r==="object"){t.appendChild(r)}else{t.innerHTML=r}}}))}var __extends$y=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$w=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var RichSelectRow=function(e){__extends$y(t,e);function t(t){var r=e.call(this,'<div class="ag-rich-select-row" role="presentation"></div>')||this;r.params=t;return r}t.prototype.setState=function(e,t,r){var n=this.populateWithRenderer(e,t);if(!n){this.populateWithoutRenderer(e,t)}this.updateSelected(r)};t.prototype.updateSelected=function(e){this.addOrRemoveCssClass("ag-rich-select-row-selected",e)};t.prototype.populateWithoutRenderer=function(e,t){var r=t!==null&&t!==undefined;var n=r?t:e;if(_.exists(n)&&n!==""){this.getGui().textContent=n.toString()}else{this.getGui().innerHTML="&nbsp;"}};t.prototype.populateWithRenderer=function(e,t){var r=this;var n={value:e,valueFormatted:t,api:this.gridOptionsService.api};var i=this.userComponentFactory.getCellRendererDetails(this.params,n);var o=i?i.newAgStackInstance():undefined;if(o!=null){bindCellRendererToHtmlElement(o,this.getGui())}else{this.getGui().innerText=n.valueFormatted!=null?n.valueFormatted:n.value}if(o){o.then((function(e){r.addDestroyFunc((function(){r.getContext().destroyBean(e)}))}));return true}return false};__decorate$w([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0);return t}(Component);var __extends$x=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$v=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var RichSelectCellEditor=function(e){__extends$x(t,e);function t(){var r=e.call(this,t.TEMPLATE)||this;r.selectionConfirmed=false;r.searchString="";return r}t.prototype.init=function(e){this.params=e;this.selectedValue=e.value;this.originalSelectedValue=e.value;this.focusAfterAttached=e.cellStartedEdit;var t=_.createIconNoSpan("smallDown",this.gridOptionsService);t.classList.add("ag-rich-select-value-icon");this.eValue.appendChild(t);this.virtualList=this.createManagedBean(new VirtualList("rich-select"));this.virtualList.setComponentCreator(this.createRowComponent.bind(this));this.eList.appendChild(this.virtualList.getGui());if(_.exists(this.params.cellHeight)){this.virtualList.setRowHeight(this.params.cellHeight)}this.renderSelectedValue();if(_.missing(e.values)){console.warn("AG Grid: richSelectCellEditor requires values for it to work");return}var r=e.values;this.virtualList.setModel({getRowCount:function(){return r.length},getRow:function(e){return r[e]}});this.addGuiEventListener("keydown",this.onKeyDown.bind(this));var n=this.virtualList.getGui();this.addManagedListener(n,"click",this.onClick.bind(this));this.addManagedListener(n,"mousemove",this.onMouseMove.bind(this));var i=_.exists(e.searchDebounceDelay)?e.searchDebounceDelay:300;this.clearSearchString=_.debounce(this.clearSearchString,i);if(_.exists(e.charPress)){this.searchText(e.charPress)}};t.prototype.onKeyDown=function(e){var t=e.key;e.preventDefault();switch(t){case KeyCode.ENTER:this.onEnterKeyDown();break;case KeyCode.TAB:this.confirmSelection();break;case KeyCode.DOWN:case KeyCode.UP:this.onNavigationKeyPressed(e,t);break;default:this.searchText(e)}};t.prototype.confirmSelection=function(){this.selectionConfirmed=true};t.prototype.onEnterKeyDown=function(){this.confirmSelection();this.params.stopEditing()};t.prototype.onNavigationKeyPressed=function(e,t){e.preventDefault();var r=this.params.values.indexOf(this.selectedValue);var n=t===KeyCode.UP?r-1:r+1;if(n>=0&&n<this.params.values.length){var i=this.params.values[n];this.setSelectedValue(i)}};t.prototype.searchText=function(e){if(typeof e!=="string"){var t=e.key;if(t===KeyCode.BACKSPACE){this.searchString=this.searchString.slice(0,-1);t=""}else if(!_.isEventFromPrintableCharacter(e)){return}this.searchText(t);return}this.searchString+=e;this.runSearch();this.clearSearchString()};t.prototype.runSearch=function(){var e=this;var t=this.params.values;var r;if(typeof t[0]==="number"||typeof t[0]==="string"){r=t.map((function(t){return e.params.formatValue(t)}))}if(typeof t[0]==="object"&&this.params.colDef.keyCreator){r=t.map((function(t){var r={value:t,colDef:e.params.colDef,column:e.params.column,node:e.params.node,data:e.params.data,api:e.gridOptionsService.api,columnApi:e.gridOptionsService.columnApi,context:e.gridOptionsService.context};return e.params.colDef.keyCreator(r)}))}if(!r){return}var n=_.fuzzySuggestions(this.searchString,r,true)[0];if(!n){return}var i=r.indexOf(n);var o=t[i];this.setSelectedValue(o)};t.prototype.clearSearchString=function(){this.searchString=""};t.prototype.renderSelectedValue=function(){var e=this;var t=this.params.formatValue(this.selectedValue);var r=this.eValue;var n={value:this.selectedValue,valueFormatted:t,api:this.gridOptionsService.api};var i=this.userComponentFactory.getCellRendererDetails(this.params,n);var o=i?i.newAgStackInstance():undefined;if(o){bindCellRendererToHtmlElement(o,r);o.then((function(t){e.addDestroyFunc((function(){return e.getContext().destroyBean(t)}))}))}else{if(_.exists(this.selectedValue)){r.innerText=t}else{_.clearElement(r)}}};t.prototype.setSelectedValue=function(e){if(this.selectedValue===e){return}var t=this.params.values.indexOf(e);if(t===-1){return}this.selectedValue=e;this.virtualList.ensureIndexVisible(t);this.virtualList.forEachRenderedRow((function(e,r){e.updateSelected(t===r)}));this.virtualList.focusRow(t)};t.prototype.createRowComponent=function(e){var t=this.params.formatValue(e);var r=new RichSelectRow(this.params);this.getContext().createBean(r);r.setState(e,t,e===this.selectedValue);return r};t.prototype.onMouseMove=function(e){var t=this.virtualList.getGui().getBoundingClientRect();var r=this.virtualList.getScrollTop();var n=e.clientY-t.top+r;var i=Math.floor(n/this.virtualList.getRowHeight());var o=this.params.values[i];if(o!==undefined){this.setSelectedValue(o)}};t.prototype.onClick=function(){this.confirmSelection();this.params.stopEditing()};t.prototype.afterGuiAttached=function(){var e=this.params.values.indexOf(this.selectedValue);this.virtualList.refresh();if(e>=0){this.virtualList.ensureIndexVisible(e)}this.virtualList.refresh();if(this.focusAfterAttached){var t=e!==-1?e:0;if(this.params.values.length){this.virtualList.focusRow(t)}else{this.getGui().focus()}}};t.prototype.getValue=function(){return this.selectionConfirmed?this.selectedValue:this.originalSelectedValue};t.TEMPLATE='<div class="ag-rich-select" tabindex="-1">\n            <div ref="eValue" class="ag-rich-select-value"></div>\n            <div ref="eList" class="ag-rich-select-list"></div>\n        </div>';__decorate$v([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0);__decorate$v([RefSelector("eValue")],t.prototype,"eValue",void 0);__decorate$v([RefSelector("eList")],t.prototype,"eList",void 0);return t}(PopupComponent);var VERSION$5="29.3.5";var RichSelectModule={version:VERSION$5,moduleName:ModuleNames.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:RichSelectCellEditor},{componentName:"agRichSelectCellEditor",componentClass:RichSelectCellEditor}],dependantModules:[EnterpriseCoreModule]};var __extends$w=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$u=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var FullStore=function(e){__extends$w(t,e);function t(t,r,n){var i=e.call(this,0)||this;i.nodeIdSequence=new NumberSequence;i.info={};i.ssrmParams=t;i.parentRowNode=n;i.level=n.level+1;i.groupLevel=t.rowGroupCols?i.level<t.rowGroupCols.length:undefined;i.leafGroup=t.rowGroupCols?i.level===t.rowGroupCols.length-1:false;return i}t.prototype.postConstruct=function(){var e=this;this.usingTreeData=this.gridOptionsService.isTreeData();this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode);if(!this.usingTreeData&&this.groupLevel){var t=this.ssrmParams.rowGroupCols[this.level];this.groupField=t.field;this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}var r=1;var n=this.parentRowNode.level===-1;var i=this.storeUtils.getServerSideInitialRowCount();if(n&&i!==undefined){r=i}this.initialiseRowNodes(r);this.rowNodeBlockLoader.addBlock(this);this.addDestroyFunc((function(){return e.rowNodeBlockLoader.removeBlock(e)}))};t.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.allRowNodes);this.allRowNodes=[];this.nodesAfterSort=[];this.nodesAfterFilter=[];this.allNodesMap={}};t.prototype.initialiseRowNodes=function(e,t){if(t===void 0){t=false}this.destroyRowNodes();for(var r=0;r<e;r++){var n=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});if(t){n.failedLoad=true}this.allRowNodes.push(n);this.nodesAfterFilter.push(n);this.nodesAfterSort.push(n)}};t.prototype.getBlockStateJson=function(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}};t.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:undefined,endRow:undefined,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})};t.prototype.getStartRow=function(){return 0};t.prototype.getEndRow=function(){return this.nodesAfterSort.length};t.prototype.createDataNode=function(e,t){var r=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});if(t!=null){_.insertIntoArray(this.allRowNodes,r,t)}else{this.allRowNodes.push(r)}var n=this.prefixId(this.nodeIdSequence.next());this.blockUtils.setDataIntoRowNode(r,e,n,undefined);this.nodeManager.addRowNode(r);this.blockUtils.checkOpenByDefault(r);this.allNodesMap[r.id]=r;return r};t.prototype.prefixId=function(e){if(this.nodeIdPrefix){return this.nodeIdPrefix+"-"+e}else{return e.toString()}};t.prototype.processServerFail=function(){this.initialiseRowNodes(1,true);this.fireStoreUpdatedEvent();this.flushAsyncTransactions()};t.prototype.processServerResult=function(e){if(!this.isAlive()){return}var t=e.storeInfo||e.groupLevelInfo;if(t){Object.assign(this.info,t)}var r=this.allRowNodes.length>0?this.allNodesMap:undefined;this.allRowNodes=[];this.nodesAfterSort=[];this.nodesAfterFilter=[];this.allNodesMap={};if(!e.rowData){var n='AG Grid: "params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.';_.doOnce((function(){return console.warn(n,e)}),"FullStore.noData")}this.createOrRecycleNodes(r,e.rowData);if(r){this.blockUtils.destroyRowNodes(_.getAllValuesInObject(r))}this.filterAndSortNodes();this.fireStoreUpdatedEvent();this.flushAsyncTransactions()};t.prototype.createOrRecycleNodes=function(e,t){var r=this;if(!t){return}var n=function(t){if(!e){return undefined}var n=r.gridOptionsService.getRowIdFunc();if(!n){return undefined}var i=r.parentRowNode.getGroupKeys();var o=r.level;var a=n({data:t,parentKeys:i.length>0?i:undefined,level:o});var s=e[a];if(!s){return undefined}delete e[a];return s};var i=function(e,t){r.allNodesMap[e.id]=e;r.blockUtils.updateDataIntoRowNode(e,t);r.allRowNodes.push(e)};t.forEach((function(e){var t=n(e);if(t){i(t,e)}else{r.createDataNode(e)}}))};t.prototype.flushAsyncTransactions=function(){var e=this;window.setTimeout((function(){return e.transactionManager.flushAsyncTransactions()}),0)};t.prototype.filterAndSortNodes=function(){this.filterRowNodes();this.sortRowNodes()};t.prototype.sortRowNodes=function(){var e=this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerSideSortOnServer();var t=this.sortController.getSortOptions();var r=!t||t.length==0;if(e||r){this.nodesAfterSort=this.nodesAfterFilter;return}this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,t)};t.prototype.filterRowNodes=function(){var e=this;var t=this.storeUtils.isServerSideFilterAllLevels()||this.storeUtils.isServerSideFilterOnServer();var r=this.groupLevel;if(t||r){this.nodesAfterFilter=this.allRowNodes;return}this.nodesAfterFilter=this.allRowNodes.filter((function(t){return e.filterManager.doesRowPassFilter({rowNode:t})}))};t.prototype.clearDisplayIndexes=function(){var e=this;this.displayIndexStart=undefined;this.displayIndexEnd=undefined;this.allRowNodes.forEach((function(t){return e.blockUtils.clearDisplayIndex(t)}))};t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd};t.prototype.isDisplayIndexInStore=function(e){if(this.getRowCount()===0){return false}return e>=this.displayIndexStart&&e<this.displayIndexEnd};t.prototype.setDisplayIndexes=function(e,t){var r=this;this.displayIndexStart=e.peek();this.topPx=t.value;var n={};this.nodesAfterSort.forEach((function(i){r.blockUtils.setDisplayIndex(i,e,t);n[i.id]=true}));this.allRowNodes.forEach((function(e){if(!n[e.id]){r.blockUtils.clearDisplayIndex(e)}}));this.displayIndexEnd=e.peek();this.heightPx=t.value-this.topPx};t.prototype.forEachStoreDeep=function(e,t){if(t===void 0){t=new NumberSequence}e(this,t.next());this.allRowNodes.forEach((function(r){var n=r.childStore;if(n){n.forEachStoreDeep(e,t)}}))};t.prototype.forEachNodeDeep=function(e,t){if(t===void 0){t=new NumberSequence}this.allRowNodes.forEach((function(r){e(r,t.next());var n=r.childStore;if(n){n.forEachNodeDeep(e,t)}}))};t.prototype.forEachNodeDeepAfterFilterAndSort=function(e,t){if(t===void 0){t=new NumberSequence}this.nodesAfterSort.forEach((function(r){e(r,t.next());var n=r.childStore;if(n){n.forEachNodeDeepAfterFilterAndSort(e,t)}}))};t.prototype.getRowUsingDisplayIndex=function(e){if(!this.isDisplayIndexInStore(e)){return undefined}var t=this.blockUtils.binarySearchForDisplayIndex(e,this.nodesAfterSort);return t};t.prototype.getRowBounds=function(e){for(var t=0;t<this.nodesAfterSort.length;t++){var r=this.nodesAfterSort[t];var n=this.blockUtils.extractRowBounds(r,e);if(n){return n}}return null};t.prototype.isPixelInRange=function(e){return e>=this.topPx&&e<this.topPx+this.heightPx};t.prototype.getRowIndexAtPixel=function(e){var t=this;var r=e<=this.topPx;if(r){var n=this.nodesAfterSort[0];return n.rowIndex}var i=e>=this.topPx+this.heightPx;if(i){var o=this.nodesAfterSort[this.nodesAfterSort.length-1];var a=o.rowTop+o.rowHeight;if(e>=a&&o.expanded){if(o.childStore&&o.childStore.getRowCount()>0){return o.childStore.getRowIndexAtPixel(e)}if(o.detailNode){return o.detailNode.rowIndex}}return o.rowIndex}var s=null;this.nodesAfterSort.forEach((function(r){var n=t.blockUtils.getIndexAtPixel(r,e);if(n!=null){s=n}}));var l=s==null;if(l){return this.displayIndexEnd-1}return s};t.prototype.getChildStore=function(e){var t=this;return this.storeUtils.getChildStore(e,this,(function(e){var r=t.allRowNodes.find((function(t){return t.key==e}));return r}))};t.prototype.forEachChildStoreShallow=function(e){this.allRowNodes.forEach((function(t){var r=t.childStore;if(r){e(r)}}))};t.prototype.refreshAfterFilter=function(e){var t=this.storeUtils.isServerSideFilterOnServer();var r=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e);var n=this.storeUtils.isServerSideFilterAllLevels();if(n||t&&r){this.refreshStore(true);this.sortRowNodes();return}this.filterRowNodes();this.sortRowNodes();this.forEachChildStoreShallow((function(t){return t.refreshAfterFilter(e)}))};t.prototype.refreshAfterSort=function(e){var t=this.storeUtils.isServerSideSortOnServer();var r=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e);var n=this.storeUtils.isServerSideSortAllLevels();if(n||t&&r){this.refreshStore(true);this.filterRowNodes();return}this.filterRowNodes();this.sortRowNodes();this.forEachChildStoreShallow((function(t){return t.refreshAfterSort(e)}))};t.prototype.applyTransaction=function(e){switch(this.getState()){case RowNodeBlock.STATE_FAILED:return{status:ServerSideTransactionResultStatus.StoreLoadingFailed};case RowNodeBlock.STATE_LOADING:return{status:ServerSideTransactionResultStatus.StoreLoading};case RowNodeBlock.STATE_WAITING_TO_LOAD:return{status:ServerSideTransactionResultStatus.StoreWaitingToLoad}}var t=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(t){var r={transaction:e,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info};var n=t(r);if(!n){return{status:ServerSideTransactionResultStatus.Cancelled}}}var i={status:ServerSideTransactionResultStatus.Applied,remove:[],update:[],add:[]};var o=[];this.executeAdd(e,i);this.executeRemove(e,i,o);this.executeUpdate(e,i,o);this.filterAndSortNodes();this.updateSelection(o);return i};t.prototype.updateSelection=function(e){var t=e.length>0;if(t){e.forEach((function(e){e.setSelected(false,false,true,"rowDataChanged")}));var r={type:Events.EVENT_SELECTION_CHANGED,source:"rowDataChanged"};this.eventService.dispatchEvent(r)}};t.prototype.executeAdd=function(e,t){var r=this;var n=e.add,i=e.addIndex;if(_.missingOrEmpty(n)){return}var o=typeof i==="number"&&i>=0;if(o){n.reverse().forEach((function(e){var n=r.createDataNode(e,i);t.add.push(n)}))}else{n.forEach((function(e){var n=r.createDataNode(e);t.add.push(n)}))}};t.prototype.executeRemove=function(e,t,r){var n=this;var i=e.remove;if(i==null){return}var o={};i.forEach((function(e){var i=n.lookupRowNode(e);if(!i){return}if(i.isSelected()){r.push(i)}i.clearRowTopAndRowIndex();o[i.id]=true;delete n.allNodesMap[i.id];t.remove.push(i);n.nodeManager.removeNode(i)}));this.allRowNodes=this.allRowNodes.filter((function(e){return!o[e.id]}))};t.prototype.executeUpdate=function(e,t,r){var n=this;var i=e.update;if(i==null){return}i.forEach((function(e){var i=n.lookupRowNode(e);if(!i){return}n.blockUtils.updateDataIntoRowNode(i,e);if(!i.selectable&&i.isSelected()){r.push(i)}t.update.push(i)}))};t.prototype.lookupRowNode=function(e){var t=this.gridOptionsService.getRowIdFunc();var r;if(t!=null){var n=this.level;var i=this.parentRowNode.getGroupKeys();var o=t({data:e,parentKeys:i.length>0?i:undefined,level:n});r=this.allNodesMap[o];if(!r){console.error("AG Grid: could not find row id="+o+", data item was not found for this id");return null}}else{r=this.allRowNodes.find((function(t){return t.data===e}));if(!r){console.error("AG Grid: could not find data item as object was not found",e);return null}}return r};t.prototype.addStoreStates=function(e){e.push({suppressInfiniteScroll:true,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info});this.forEachChildStoreShallow((function(t){return t.addStoreStates(e)}))};t.prototype.refreshStore=function(e){if(e){var t=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(t)}this.scheduleLoad();this.fireStoreUpdatedEvent()};t.prototype.retryLoads=function(){if(this.getState()===RowNodeBlock.STATE_FAILED){this.initialiseRowNodes(1);this.scheduleLoad()}this.forEachChildStoreShallow((function(e){return e.retryLoads()}))};t.prototype.scheduleLoad=function(){this.setStateWaitingToLoad();this.rowNodeBlockLoader.checkBlockToLoad()};t.prototype.fireStoreUpdatedEvent=function(){var e={type:Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)};t.prototype.getRowCount=function(){return this.nodesAfterSort.length};t.prototype.getTopLevelRowDisplayedIndex=function(e){var t=this.nodesAfterSort[e];return t.rowIndex};t.prototype.isLastRowIndexKnown=function(){return this.getState()==RowNodeBlock.STATE_LOADED};t.prototype.getRowNodesInRange=function(e,t){var r=[];var n=false;if(_.missing(e)){n=true}this.nodesAfterSort.forEach((function(i){var o=i===e||i===t;if(n||o){r.push(i)}if(o){n=!n}}));var i=n;return i?[]:r};t.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}};__decorate$u([Autowired("ssrmStoreUtils")],t.prototype,"storeUtils",void 0);__decorate$u([Autowired("ssrmBlockUtils")],t.prototype,"blockUtils",void 0);__decorate$u([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$u([Autowired("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0);__decorate$u([Autowired("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0);__decorate$u([Autowired("sortController")],t.prototype,"sortController",void 0);__decorate$u([Autowired("ssrmNodeManager")],t.prototype,"nodeManager",void 0);__decorate$u([Autowired("filterManager")],t.prototype,"filterManager",void 0);__decorate$u([Autowired("ssrmTransactionManager")],t.prototype,"transactionManager",void 0);__decorate$u([PostConstruct],t.prototype,"postConstruct",null);__decorate$u([PreDestroy],t.prototype,"destroyRowNodes",null);return t}(RowNodeBlock);var __extends$v=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$t=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$7=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var LazyBlockLoader=function(e){__extends$v(t,e);function t(t,r,n){var i=e.call(this)||this;i.loadingNodes=new Set;i.checkForLoadQueued=false;i.loaderTimeout=undefined;i.nextBlockToLoad=undefined;i.parentNode=r;i.cache=t;i.storeParams=n;return i}t.prototype.init=function(){var e=this;this.addManagedListener(this.rowNodeBlockLoader,RowNodeBlockLoader.BLOCK_LOADED_EVENT,(function(){return e.queueLoadAction()}))};t.prototype.isRowLoading=function(e){return this.loadingNodes.has(e)};t.prototype.getBlockToLoad=function(){var e;var t=this.api.getFirstDisplayedRow();var r=this.api.getLastDisplayedRow();for(var n=t;n<=r;n++){var i=this.cache.getNodeCachedByDisplayIndex(n);if(!i){continue}var o=this.cache.getNodes().getBy("node",i);if(!o){continue}if(this.isRowLoading(o.index)){continue}if(i.__needsRefreshWhenVisible||i.stub&&!i.failedLoad){return this.getBlockStartIndexForIndex(o.index)}}var a=this.cache.getNodesToRefresh();var s=null;var l=Number.MAX_SAFE_INTEGER;a.forEach((function(e){if(e.rowIndex==null){s=e;return}var n=Math.abs(t-e.rowIndex);var i=Math.abs(e.rowIndex-r);if(n<l){s=e;l=n}if(i<l){s=e;l=i}}));var u=(e=this.cache.getNodes().getBy("node",s))===null||e===void 0?void 0:e.index;return u==null?undefined:this.getBlockStartIndexForIndex(u)};t.prototype.reset=function(){this.loadingNodes.clear();clearTimeout(this.loaderTimeout);this.loaderTimeout=undefined};t.prototype.executeLoad=function(e,t){var r=this;var n;var i=this.cache.getSsrmParams();var o={startRow:e,endRow:t,rowGroupCols:i.rowGroupCols,valueCols:i.valueCols,pivotCols:i.pivotCols,pivotMode:i.pivotMode,groupKeys:this.parentNode.getGroupKeys(),filterModel:i.filterModel,sortModel:i.sortModel};var a=function(){for(var n=0;n<t-e;n++){r.loadingNodes.delete(e+n)}};var s=function(){for(var n=0;n<t-e;n++){r.loadingNodes.add(e+n)}};var l=function(n){r.rowNodeBlockLoader.loadComplete();r.cache.onLoadSuccess(e,t-e,n);a();r.queueLoadAction()};var u=function(){r.rowNodeBlockLoader.loadComplete();r.cache.onLoadFailed(e,t-e);a();r.queueLoadAction()};var c={request:o,successCallback:function(e,t){return l({rowData:e,rowCount:t})},success:l,failCallback:u,fail:u,parentNode:this.parentNode,api:this.api,columnApi:this.columnApi,context:this.gridOptionsService.context};s();(n=this.cache.getSsrmParams().datasource)===null||n===void 0?void 0:n.getRows(c)};t.prototype.getNextBlockToLoad=function(){var e=this.getBlockToLoad();if(e!=null&&e<0){this.getBlockToLoad()}if(e!=null){return[String(e),e+this.getBlockSize()]}return null};t.prototype.queueLoadCheck=function(){var e=this;if(this.checkForLoadQueued){return}this.checkForLoadQueued=true;window.queueMicrotask((function(){e.checkForLoadQueued=false;e.queueLoadAction()}))};t.prototype.queueLoadAction=function(){var e=this;var t;var r=this.getNextBlockToLoad();if(!r){window.clearTimeout(this.loaderTimeout);this.loaderTimeout=undefined;this.nextBlockToLoad=undefined;return}if(!this.nextBlockToLoad||this.nextBlockToLoad[0]!==r[0]&&this.nextBlockToLoad[1]!==r[1]){this.nextBlockToLoad=r;window.clearTimeout(this.loaderTimeout);var n=__read$7(this.nextBlockToLoad,2),i=n[0],o=n[1];var a=Number(i);this.loaderTimeout=window.setTimeout((function(){if(!e.cache.isAlive()){return}e.loaderTimeout=undefined;e.attemptLoad(a,o);e.nextBlockToLoad=undefined}),(t=this.gridOptionsService.getNum("blockLoadDebounceMillis"))!==null&&t!==void 0?t:0)}};t.prototype.attemptLoad=function(e,t){var r=this.rowNodeBlockLoader.getAvailableLoadingCount();if(r!=null&&r===0){return}this.rowNodeBlockLoader.registerLoads(1);this.executeLoad(e,t);this.queueLoadAction()};t.prototype.getBlockSize=function(){return this.storeParams.cacheBlockSize||t.DEFAULT_BLOCK_SIZE};t.prototype.getBlockStartIndexForIndex=function(e){var t=this.getBlockSize();return e-e%t};t.prototype.getBlockBoundsForIndex=function(e){var t=this.getBlockStartIndexForIndex(e);var r=this.getBlockSize();return[t,t+r]};t.DEFAULT_BLOCK_SIZE=100;__decorate$t([Autowired("gridApi")],t.prototype,"api",void 0);__decorate$t([Autowired("columnApi")],t.prototype,"columnApi",void 0);__decorate$t([Autowired("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0);__decorate$t([PostConstruct],t.prototype,"init",null);return t}(BeanStub);var MultiIndexMap=function(){function e(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(e.length<1){throw new Error("AG Grid: At least one index must be provided.")}this.indexes=e;this.maps=new Map(this.indexes.map((function(e){return[e,new Map]})))}e.prototype.getBy=function(e,t){var r=this.maps.get(e);if(!r){throw new Error("AG Grid: "+String(e)+" not found")}return r.get(t)};e.prototype.set=function(e){var t=this;this.indexes.forEach((function(r){var n=t.maps.get(r);if(!n){throw new Error("AG Grid: "+String(r)+" not found")}n.set(e[r],e)}))};e.prototype.delete=function(e){var t=this;this.indexes.forEach((function(r){var n=t.maps.get(r);if(!n){throw new Error("AG Grid: "+String(r)+" not found")}n.delete(e[r])}))};e.prototype.clear=function(){this.maps.forEach((function(e){return e.clear()}))};e.prototype.getIterator=function(e){var t=this.maps.get(e);if(!t){throw new Error("AG Grid: "+String(e)+" not found")}return t.values()};e.prototype.forEach=function(e){var t=this.getIterator(this.indexes[0]);var r;while(r=t.next()){if(r.done)break;e(r.value)}};e.prototype.find=function(e){var t=this.getIterator(this.indexes[0]);var r;while(r=t.next()){if(r.done)break;if(e(r.value)){return r.value}}};e.prototype.filter=function(e){var t=this.getIterator(this.indexes[0]);var r;var n=[];while(r=t.next()){if(r.done)break;if(e(r.value)){n.push(r.value)}}return n};return e}();var __extends$u=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$s=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$6=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$4=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$6(arguments[t]));return e};var LazyCache=function(e){__extends$u(t,e);function t(t,r,n){var i=e.call(this)||this;i.live=true;i.store=t;i.numberOfRows=r;i.isLastRowKnown=false;i.storeParams=n;return i}t.prototype.init=function(){this.nodeMap=new MultiIndexMap("index","id","node");this.nodeDisplayIndexMap=new Map;this.nodesToRefresh=new Set;this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode());this.rowLoader=this.createManagedBean(new LazyBlockLoader(this,this.store.getParentNode(),this.storeParams));this.getRowIdFunc=this.gridOptionsService.getRowIdFunc();this.isMasterDetail=this.gridOptionsService.isMasterDetail()};t.prototype.destroyRowNodes=function(){var e=this;this.numberOfRows=0;this.nodeMap.forEach((function(t){return e.blockUtils.destroyRowNode(t.node)}));this.nodeMap.clear();this.nodeDisplayIndexMap.clear();this.nodesToRefresh.clear();this.live=false};t.prototype.getRowByDisplayIndex=function(e){var t,r,n,i;if(!this.store.isDisplayIndexInStore(e)){return undefined}var o=this.nodeDisplayIndexMap.get(e);if(o){if(o.stub||o.__needsRefreshWhenVisible){this.rowLoader.queueLoadCheck()}return o}if(e===this.store.getDisplayIndexStart()){return this.createStubNode(0,e)}var a=this.nodeDisplayIndexMap.get(e-1);if(a){if(this.isMasterDetail&&a.master&&a.expanded){return a.detailNode}if(a.expanded&&((t=a.childStore)===null||t===void 0?void 0:t.isDisplayIndexInStore(e))){return(r=a.childStore)===null||r===void 0?void 0:r.getRowUsingDisplayIndex(e)}var s=this.nodeMap.getBy("node",a);return this.createStubNode(s.index+1,e)}var l=this.getSurroundingNodesByDisplayIndex(e);if(l==null){var u=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(u,e)}var c=l.previousNode,d=l.nextNode;if(c&&c.node.expanded&&((n=c.node.childStore)===null||n===void 0?void 0:n.isDisplayIndexInStore(e))){return(i=c.node.childStore)===null||i===void 0?void 0:i.getRowUsingDisplayIndex(e)}if(d){var p=d.node.rowIndex-e;var f=d.index-p;return this.createStubNode(f,e)}var h=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(h,e)};t.prototype.createStubNode=function(e,t){var r=this;var n=this.store.getRowBounds(t);var i=this.createRowAtIndex(e,null,(function(e){e.setRowIndex(t);e.setRowTop(n.rowTop);r.nodeDisplayIndexMap.set(t,e)}));this.rowLoader.queueLoadCheck();return i};t.prototype.getRowByStoreIndex=function(e){var t;return(t=this.nodeMap.getBy("index",e))===null||t===void 0?void 0:t.node};t.prototype.skipDisplayIndexes=function(e,t,r){if(e===0){return}var n=this.gridOptionsService.getRowHeightAsNumber();t.skip(e);r.value+=e*n};t.prototype.setDisplayIndexes=function(e,t){this.nodeDisplayIndexMap.clear();var r={};this.nodeMap.forEach((function(e){r[e.index]=e.node}));var n=-1;for(var i in r){var o=r[i];var a=Number(i);var s=a-1-n;this.skipDisplayIndexes(s,e,t);this.blockUtils.setDisplayIndex(o,e,t);this.nodeDisplayIndexMap.set(o.rowIndex,o);n=a}var l=this.numberOfRows-1-n;this.skipDisplayIndexes(l,e,t);this.purgeExcessRows()};t.prototype.getRowCount=function(){return this.numberOfRows};t.prototype.setRowCount=function(e,t){if(e<0){throw new Error("AG Grid: setRowCount can only accept a positive row count.")}this.numberOfRows=e;if(t!=null){this.isLastRowKnown=t;if(t===false){this.numberOfRows+=1}}this.fireStoreUpdatedEvent()};t.prototype.getNodes=function(){return this.nodeMap};t.prototype.getNodeCachedByDisplayIndex=function(e){var t;return(t=this.nodeDisplayIndexMap.get(e))!==null&&t!==void 0?t:null};t.prototype.getNodesToRefresh=function(){return this.nodesToRefresh};t.prototype.getSurroundingNodesByDisplayIndex=function(e){var t;var r;this.nodeMap.forEach((function(n){if(e>n.node.rowIndex){if(r==null||r.node.rowIndex<n.node.rowIndex){r=n}return}if(t==null||t.node.rowIndex>n.node.rowIndex){t=n;return}}));if(!r&&!t)return null;return{previousNode:r,nextNode:t}};t.prototype.getDisplayIndexFromStoreIndex=function(e){var t,r;var n=this.nodeMap.getBy("index",e);if(n){return n.node.rowIndex}var i;var o;this.nodeMap.forEach((function(t){if(e>t.index){if(o==null||o.index<t.index){o=t}return}if(i==null||i.index>t.index){i=t;return}}));if(!i){return this.store.getDisplayIndexEnd()-(this.numberOfRows-e)}if(!o){return this.store.getDisplayIndexStart()+e}var a=e-o.index;var s=(r=(t=o.node.childStore)===null||t===void 0?void 0:t.getDisplayIndexEnd())!==null&&r!==void 0?r:o.node.rowIndex;return s+a};t.prototype.createRowAtIndex=function(e,t,r){var n=this.nodeMap.getBy("index",e);if(n){var i=n.node;this.nodesToRefresh.delete(i);i.__needsRefreshWhenVisible=false;if(this.doesNodeMatch(t,i)){this.blockUtils.updateDataIntoRowNode(i,t);return i}if(this.getRowIdFunc==null&&i.group&&i.expanded){return i}this.destroyRowAtIndex(e)}if(t&&this.getRowIdFunc!=null){var o=this.getRowId(t);var a=this.nodeMap.getBy("id",o);if(a){this.nodeMap.delete(a);var i=a.node,s=a.index;this.blockUtils.updateDataIntoRowNode(i,t);this.nodeMap.set({id:i.id,node:i,index:e});this.markBlockForVerify(s);return i}}var l=this.blockUtils.createRowNode(this.store.getRowDetails());if(t!=null){var u=this.getPrefixedId(this.store.getIdSequence().next());this.blockUtils.setDataIntoRowNode(l,t,u,undefined);this.blockUtils.checkOpenByDefault(l);this.nodeManager.addRowNode(l)}this.nodeMap.set({id:l.id,node:l,index:e});if(r){r(l)}return l};t.prototype.getBlockStates=function(){var e=this;var t={};var r={};this.nodeMap.forEach((function(n){var i;var o=n.node,a=n.index;var s=e.rowLoader.getBlockStartIndexForIndex(a);if(!o.stub&&!o.failedLoad){t[s]=((i=t[s])!==null&&i!==void 0?i:0)+1}var l="loaded";if(o.failedLoad){l="failed"}else if(e.rowLoader.isRowLoading(s)){l="loading"}else if(e.nodesToRefresh.has(o)||o.stub){l="needsLoading"}if(!r[s]){r[s]=new Set}r[s].add(l)}));var n={loading:4,failed:3,needsLoading:2,loaded:1};var i=this.blockUtils.createNodeIdPrefix(this.store.getParentNode());var o={};Object.entries(r).forEach((function(r){var a;var s=__read$6(r,2),l=s[0],u=s[1];var c=__spread$4(u).sort((function(e,t){var r,i;return((r=n[e])!==null&&r!==void 0?r:0)-((i=n[t])!==null&&i!==void 0?i:0)}));var d=c[0];var p=Number(l)/e.rowLoader.getBlockSize();var f=i?i+"-"+p:String(p);o[f]={blockNumber:p,startRow:Number(l),endRow:Number(l)+e.rowLoader.getBlockSize(),pageStatus:d,loadedRowCount:(a=t[l])!==null&&a!==void 0?a:0}}));return o};t.prototype.destroyRowAtIndex=function(e){var t=this.nodeMap.getBy("index",e);if(!t){return}this.nodeMap.delete(t);this.nodeDisplayIndexMap.delete(t.node.rowIndex);this.nodesToRefresh.delete(t.node);this.blockUtils.destroyRowNode(t.node)};t.prototype.getSsrmParams=function(){return this.store.getSsrmParams()};t.prototype.getPrefixedId=function(e){if(this.defaultNodeIdPrefix){return this.defaultNodeIdPrefix+"-"+e}else{return e.toString()}};t.prototype.markBlockForVerify=function(e){var t=__read$6(this.rowLoader.getBlockBoundsForIndex(e),2),r=t[0],n=t[1];var i=this.nodeMap.filter((function(e){return e.index>=r&&e.index<n}));i.forEach((function(e){var t=e.node;t.__needsRefreshWhenVisible=true}))};t.prototype.doesNodeMatch=function(e,t){if(t.stub){return false}if(this.getRowIdFunc!=null){var r=this.getRowId(e);return t.id===r}return t.data===e};t.prototype.purgeStubsOutsideOfViewport=function(){var e=this;var t=this.api.getFirstDisplayedRow();var r=this.api.getLastDisplayedRow();var n=this.rowLoader.getBlockStartIndexForIndex(t);var i=__read$6(this.rowLoader.getBlockBoundsForIndex(r),2);i[0];var o=i[1];this.nodeMap.forEach((function(t){if(e.rowLoader.isRowLoading(t.index)){return}if(t.node.stub&&(t.index<n||t.index>o)){e.destroyRowAtIndex(t.index)}}))};t.prototype.getBlocksDistanceFromRow=function(e,t){var r=this;var n={};e.forEach((function(e){var i=e.node,o=e.index;var a=__read$6(r.rowLoader.getBlockBoundsForIndex(o),2),s=a[0],l=a[1];if(s in n){return}var u=Math.abs(i.rowIndex-t);var c;var d=r.nodeMap.getBy("index",[l-1]);if(d)c=Math.abs(d.node.rowIndex-t);var p=c==null||u<c?u:c;n[s]=p}));return Object.entries(n)};t.prototype.purgeExcessRows=function(){var e=this;var t;this.purgeStubsOutsideOfViewport();if(this.store.getDisplayIndexEnd()==null||this.storeParams.maxBlocksInCache==null){return}var r=this.api.getFirstDisplayedRow();var n=this.api.getLastDisplayedRow();var i=new Set;var o=new Set;this.nodeMap.forEach((function(t){var a=t.index,s=t.node;var l=e.rowLoader.getBlockStartIndexForIndex(a);i.add(l);var u=s.rowIndex>=r&&s.rowIndex<=n;if(u){o.add(l)}}));var a=Math.max(o.size,(t=this.storeParams.maxBlocksInCache)!==null&&t!==void 0?t:0);var s=i.size;var l=s-a;if(l<=0){return}var u=Number.MAX_SAFE_INTEGER;var c=Number.MIN_SAFE_INTEGER;o.forEach((function(e){if(u>e){u=e}if(c<e){c=e}}));var d=this.nodeMap.filter((function(t){var r=t.node,n=t.index;var i=e.rowLoader.getBlockStartIndexForIndex(n);var o=i>=u&&i<=c;return!o&&!e.isNodeCached(r)}));if(d.length===0){return}var p=r+(n-r)/2;var f=this.getBlocksDistanceFromRow(d,p);var h=this.rowLoader.getBlockSize();f.sort((function(e,t){return Math.sign(t[1]-e[1])}));for(var v=0;v<Math.min(l,f.length);v++){var g=Number(f[v][0]);for(var y=g;y<g+h;y++){var m=this.nodeMap.getBy("index",y);if(!m||this.isNodeCached(m.node)){continue}this.destroyRowAtIndex(y)}}};t.prototype.isNodeFocused=function(e){var t=this.focusService.getFocusCellToUseAfterRefresh();if(!t){return false}if(t.rowPinned!=null){return false}var r=t.rowIndex===e.rowIndex;return r};t.prototype.isNodeCached=function(e){return e.isExpandable()&&e.expanded||this.isNodeFocused(e)};t.prototype.extractDuplicateIds=function(e){var t=this;if(!this.getRowIdFunc==null){return[]}var r=new Set;var n=new Set;e.forEach((function(e){var i=t.getRowId(e);if(r.has(i)){n.add(i);return}r.add(i)}));return __spread$4(n)};t.prototype.onLoadSuccess=function(e,t,r){var n=this;var i;if(!this.live)return;var o=(i=r.groupLevelInfo)!==null&&i!==void 0?i:r.storeInfo;this.store.setStoreInfo(o);if(this.getRowIdFunc!=null){var a=this.extractDuplicateIds(r.rowData);if(a.length>0){var s=a.join(", ");console.warn("AG Grid: Unable to display rows as duplicate row ids ("+s+") were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.");this.onLoadFailed(e,t);return}}var l=this.nodesToRefresh.size>0;r.rowData.forEach((function(t,r){var i;var o=e+r;var a=n.nodeMap.getBy("index",o);if((i=a===null||a===void 0?void 0:a.node)===null||i===void 0?void 0:i.stub){n.createRowAtIndex(o,t);return}if(a&&n.doesNodeMatch(t,a.node)){n.blockUtils.updateDataIntoRowNode(a.node,t);n.nodesToRefresh.delete(a.node);a.node.__needsRefreshWhenVisible=false;return}n.createRowAtIndex(o,t)}));var u=this.nodesToRefresh.size===0;if(l&&u){this.fireRefreshFinishedEvent()}if(r.rowCount!=undefined&&r.rowCount!==-1){this.numberOfRows=r.rowCount;this.isLastRowKnown=true}else if(t>r.rowData.length){this.numberOfRows=e+r.rowData.length;this.isLastRowKnown=true}else if(!this.isLastRowKnown){var c=e+r.rowData.length+1;if(c>this.numberOfRows){this.numberOfRows=c}}if(this.isLastRowKnown){var d=this.nodeMap.filter((function(e){return e.index>=n.numberOfRows}));d.forEach((function(e){return n.destroyRowAtIndex(e.index)}))}this.fireStoreUpdatedEvent()};t.prototype.fireRefreshFinishedEvent=function(){var e=this.nodesToRefresh.size===0;if(!e){return}this.store.fireRefreshFinishedEvent()};t.prototype.isLastRowIndexKnown=function(){return this.isLastRowKnown};t.prototype.onLoadFailed=function(e,t){if(!this.live)return;var r=this.nodeMap.filter((function(r){return r.index>=e&&r.index<e+t}));r.forEach((function(e){return e.node.failedLoad=true}));this.fireStoreUpdatedEvent()};t.prototype.markNodesForRefresh=function(){var e=this;this.nodeMap.forEach((function(t){if(t.node.stub){return}e.nodesToRefresh.add(t.node)}));this.rowLoader.queueLoadCheck();if(this.isLastRowKnown&&this.numberOfRows===0){this.numberOfRows=1;this.isLastRowKnown=false;this.fireStoreUpdatedEvent()}};t.prototype.isNodeInCache=function(e){return!!this.nodeMap.getBy("id",e)};t.prototype.fireStoreUpdatedEvent=function(){if(!this.live){return}this.store.fireStoreUpdatedEvent()};t.prototype.getRowId=function(e){if(this.getRowIdFunc==null){return null}var t=this.store.getRowDetails().level;var r=this.store.getParentNode().getGroupKeys();var n=this.getRowIdFunc({data:e,parentKeys:r.length>0?r:undefined,level:t});return String(n)};t.prototype.updateRowNodes=function(e){var t=this;if(this.getRowIdFunc==null){throw new Error("AG Grid: Insert transactions can only be applied when row ids are supplied.")}var r=[];e.forEach((function(e){var n=t.getRowId(e);var i=t.nodeMap.getBy("id",n);if(i){t.blockUtils.updateDataIntoRowNode(i.node,e);r.push(i.node)}}));return r};t.prototype.insertRowNodes=function(e,t){var r=this;var n=t==null&&this.isLastRowKnown?this.store.getRowCount():t;if(n==null||this.store.getRowCount()<n){return[]}if(this.getRowIdFunc==null){throw new Error("AG Grid: Insert transactions can only be applied when row ids are supplied.")}var i={};e.forEach((function(e){var t=r.getRowId(e);if(t&&r.isNodeInCache(t)){return}i[t]=e}));var o=Object.values(i);var a=o.length;if(a===0){return[]}var s=this.nodeMap.filter((function(e){return e.index>=n}));s.forEach((function(e){return r.nodeMap.delete(e)}));s.forEach((function(e){r.nodeMap.set({node:e.node,index:e.index+a,id:e.id})}));this.numberOfRows+=a;return o.map((function(e,t){return r.createRowAtIndex(n+t,e)}))};t.prototype.getOrderedNodeMap=function(){var e={};this.nodeMap.forEach((function(t){return e[t.index]=t}));return e};t.prototype.clearDisplayIndexes=function(){this.nodeDisplayIndexMap.clear()};t.prototype.removeRowNodes=function(e){if(this.getRowIdFunc==null){throw new Error("AG Grid: Insert transactions can only be applied when row ids are supplied.")}var t=[];var r=[];var n=0;var i=__spread$4(e);var o=this.getOrderedNodeMap();var a=-1;var s=function(e){a+=1;var s=o[e];var u=i.findIndex((function(e){return e===s.id}));if(u!==-1){i.splice(u,1);l.destroyRowAtIndex(Number(e));t.push(s.node);n+=1;return"continue"}if(n===0){return"continue"}var c=Number(e);if(a!==c){r.push(s.node)}l.nodeMap.delete(o[e]);l.nodeMap.set({id:s.id,node:s.node,index:c-n})};var l=this;for(var u in o){s(u)}this.numberOfRows-=this.isLastRowIndexKnown()?e.length:n;if(i.length>0&&r.length>0){r.forEach((function(e){return e.__needsRefreshWhenVisible=true}));this.rowLoader.queueLoadCheck()}return t};__decorate$s([Autowired("gridApi")],t.prototype,"api",void 0);__decorate$s([Autowired("ssrmBlockUtils")],t.prototype,"blockUtils",void 0);__decorate$s([Autowired("focusService")],t.prototype,"focusService",void 0);__decorate$s([Autowired("ssrmNodeManager")],t.prototype,"nodeManager",void 0);__decorate$s([PostConstruct],t.prototype,"init",null);__decorate$s([PreDestroy],t.prototype,"destroyRowNodes",null);return t}(BeanStub);var __extends$t=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$r=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$5=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$3=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$5(arguments[t]));return e};var LazyStore=function(e){__extends$t(t,e);function t(t,r,n){var i=e.call(this)||this;i.idSequence=new NumberSequence;i.ssrmParams=t;i.parentRowNode=n;i.storeParams=r;i.level=n.level+1;i.group=t.rowGroupCols?i.level<t.rowGroupCols.length:false;i.leafGroup=t.rowGroupCols?i.level===t.rowGroupCols.length-1:false;i.info={};return i}t.prototype.init=function(){var e=1;if(this.level===0){e=this.storeUtils.getServerSideInitialRowCount()}this.cache=this.createManagedBean(new LazyCache(this,e,this.storeParams));var t=this.gridOptionsService.isTreeData();if(!t&&this.group){var r=this.ssrmParams.rowGroupCols[this.level];this.groupField=r.field;this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}};t.prototype.destroyRowNodes=function(){this.displayIndexStart=undefined;this.displayIndexEnd=undefined;this.destroyBean(this.cache)};t.prototype.applyTransaction=function(e){var t=this;var r,n,i;var o=this.gridOptionsService.getRowIdFunc();if(!o){console.warn("AG Grid: getRowId callback must be implemented for transactions to work. Transaction was ignored.");return{status:ServerSideTransactionResultStatus.Cancelled}}var a=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(a){var s={transaction:e,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info};var l=a(s);if(!l){return{status:ServerSideTransactionResultStatus.Cancelled}}}var u=undefined;if((r=e.update)===null||r===void 0?void 0:r.length){u=this.cache.updateRowNodes(e.update)}var c=undefined;if((n=e.add)===null||n===void 0?void 0:n.length){var d=e.addIndex;if(d!=null&&d<0){d=undefined}c=this.cache.insertRowNodes(e.add,d)}var p=undefined;if((i=e.remove)===null||i===void 0?void 0:i.length){var f=e.remove.map((function(e){return o({level:t.level,parentKeys:t.parentRowNode.getGroupKeys(),data:e})}));var h=__spread$3(new Set(f));p=this.cache.removeRowNodes(h)}this.updateSelectionAfterTransaction(u,p);return{status:ServerSideTransactionResultStatus.Applied,update:u,add:c,remove:p}};t.prototype.updateSelectionAfterTransaction=function(e,t){var r=false;e===null||e===void 0?void 0:e.forEach((function(e){if(e.isSelected()&&!e.selectable){e.setSelected(false,false,true,"rowDataChanged");r=true}}));t===null||t===void 0?void 0:t.forEach((function(e){if(e.isSelected()){e.setSelected(false,false,true,"rowDataChanged");r=true}}));if(r){var n={type:Events.EVENT_SELECTION_CHANGED,source:"rowDataChanged"};this.eventService.dispatchEvent(n)}};t.prototype.clearDisplayIndexes=function(){var e=this;this.displayIndexStart=undefined;this.displayIndexEnd=undefined;this.cache.getNodes().forEach((function(t){return e.blockUtils.clearDisplayIndex(t.node)}));this.cache.clearDisplayIndexes()};t.prototype.getDisplayIndexStart=function(){return this.displayIndexStart};t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd};t.prototype.getRowCount=function(){return this.cache.getRowCount()};t.prototype.setRowCount=function(e,t){this.cache.setRowCount(e,t)};t.prototype.isDisplayIndexInStore=function(e){if(this.cache.getRowCount()===0)return false;return this.displayIndexStart<=e&&e<this.getDisplayIndexEnd()};t.prototype.setDisplayIndexes=function(e,t){this.displayIndexStart=e.peek();this.topPx=t.value;this.cache.setDisplayIndexes(e,t);this.displayIndexEnd=e.peek();this.heightPx=t.value-this.topPx};t.prototype.forEachStoreDeep=function(e,t){if(t===void 0){t=new NumberSequence}e(this,t.next());this.cache.getNodes().forEach((function(r){var n=r.node.childStore;if(n){n.forEachStoreDeep(e,t)}}))};t.prototype.forEachNodeDeep=function(e,t){if(t===void 0){t=new NumberSequence}this.cache.getNodes().forEach((function(r){e(r.node,t.next());var n=r.node.childStore;if(n){n.forEachNodeDeep(e,t)}}))};t.prototype.forEachNodeDeepAfterFilterAndSort=function(e,t){if(t===void 0){t=new NumberSequence}var r=this.cache.getOrderedNodeMap();for(var n in r){var i=r[n];e(i.node,t.next());var o=i.node.childStore;if(o){o.forEachNodeDeepAfterFilterAndSort(e,t)}}};t.prototype.retryLoads=function(){this.cache.getNodes().forEach((function(e){var t=e.node;if(t.failedLoad){t.failedLoad=false;t.__needsRefreshWhenVisible=true;t.stub=true}}));this.forEachChildStoreShallow((function(e){return e.retryLoads()}));this.fireStoreUpdatedEvent()};t.prototype.getRowUsingDisplayIndex=function(e){return this.cache.getRowByDisplayIndex(e)};t.prototype.getRowBounds=function(e){var t;if(!this.isDisplayIndexInStore(e)){return null}var r=this.cache.getNodeCachedByDisplayIndex(e);if(r){var n=this.blockUtils.extractRowBounds(r,e);if(n){return n}}var i=(t=this.cache.getSurroundingNodesByDisplayIndex(e))!==null&&t!==void 0?t:{},o=i.previousNode,a=i.nextNode;if(o){var n=this.blockUtils.extractRowBounds(o.node,e);if(n!=null){return n}}var s=this.gridOptionsService.getRowHeightAsNumber();if(a){var l=Math.floor((a.node.rowIndex-e)*s);return{rowTop:a.node.rowTop-l,rowHeight:s}}var u=this.topPx+this.heightPx;var c=Math.floor((this.getDisplayIndexEnd()-e)*s);return{rowTop:u-c,rowHeight:s}};t.prototype.isPixelInRange=function(e){return e>=this.topPx&&e<this.topPx+this.heightPx};t.prototype.getRowIndexAtPixel=function(e){if(e<this.topPx){return this.getDisplayIndexStart()}if(e>=this.topPx+this.heightPx){return this.getDisplayIndexEnd()-1}var t=Number.MAX_SAFE_INTEGER;var r=null;var n=Number.MAX_SAFE_INTEGER;var i=null;this.cache.getNodes().forEach((function(o){var a=o.node;var s=Math.abs(e-a.rowTop);if(a.rowTop<e){if(s<t){t=s;r=a}return}if(s<n){n=s;i=a}}));r=r;i=i;if(r){var o=this.blockUtils.getIndexAtPixel(r,e);if(o!=null){return o}}var a=this.gridOptionsService.getRowHeightAsNumber();if(i){var s=i.rowTop;var l=Math.ceil((s-e)/a);return i.rowIndex-l}var u=this.topPx+this.heightPx;var c=Math.floor((u-e)/a);return this.getDisplayIndexEnd()-c};t.prototype.getChildStore=function(e){var t=this;return this.storeUtils.getChildStore(e,this,(function(e){var r=t.cache.getNodes().find((function(t){return t.node.key==e}));if(!r){return null}return r.node}))};t.prototype.forEachChildStoreShallow=function(e){this.cache.getNodes().forEach((function(t){var r=t.node;if(r.childStore){e(r.childStore)}}))};t.prototype.refreshAfterSort=function(e){var t=this.storeUtils.isServerSideSortAllLevels();if(t||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){var r=this.cache.getRowCount();this.destroyBean(this.cache);this.cache=this.createManagedBean(new LazyCache(this,r,this.storeParams));this.fireStoreUpdatedEvent();return}this.forEachChildStoreShallow((function(t){return t.refreshAfterSort(e)}))};t.prototype.refreshAfterFilter=function(e){var t=this.storeUtils.isServerSideFilterAllLevels();if(t||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){this.refreshStore(true);return}this.forEachChildStoreShallow((function(t){return t.refreshAfterFilter(e)}))};t.prototype.refreshStore=function(e){if(e){this.destroyBean(this.cache);this.cache=this.createManagedBean(new LazyCache(this,1,this.storeParams));this.fireStoreUpdatedEvent();return}this.cache.markNodesForRefresh()};t.prototype.getTopLevelRowDisplayedIndex=function(e){var t=this.cache.getDisplayIndexFromStoreIndex(e);return t!==null&&t!==void 0?t:e};t.prototype.isLastRowIndexKnown=function(){return this.cache.isLastRowIndexKnown()};t.prototype.getRowNodesInRange=function(e,t){if(_.missing(e));return this.cache.getNodes().filter((function(r){var n=r.node;return n.rowIndex>=e.rowIndex&&n.rowIndex<=t.rowIndex})).map((function(e){var t=e.node;return t}))};t.prototype.addStoreStates=function(e){e.push({suppressInfiniteScroll:false,route:this.parentRowNode.getGroupKeys(),rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize});this.forEachChildStoreShallow((function(t){return t.addStoreStates(e)}))};t.prototype.getIdSequence=function(){return this.idSequence};t.prototype.getParentNode=function(){return this.parentRowNode};t.prototype.getRowDetails=function(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}};t.prototype.getSsrmParams=function(){return this.ssrmParams};t.prototype.setStoreInfo=function(e){if(e){Object.assign(this.info,e)}};t.prototype.fireStoreUpdatedEvent=function(){var e={type:Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)};t.prototype.fireRefreshFinishedEvent=function(){var e={type:Events.EVENT_STORE_REFRESHED,route:this.parentRowNode.getRoute()};this.eventService.dispatchEvent(e)};t.prototype.getBlockStates=function(){return this.cache.getBlockStates()};t.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}};__decorate$r([Autowired("ssrmBlockUtils")],t.prototype,"blockUtils",void 0);__decorate$r([Autowired("ssrmStoreUtils")],t.prototype,"storeUtils",void 0);__decorate$r([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$r([PostConstruct],t.prototype,"init",null);__decorate$r([PreDestroy],t.prototype,"destroyRowNodes",null);return t}(BeanStub);var __extends$s=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$q=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$4=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var ServerSideRowModel=function(e){__extends$s(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.onRowHeightChanged_debounced=_.debounce(t.onRowHeightChanged.bind(t),100);t.pauseStoreUpdateListening=false;t.started=false;return t}t.prototype.ensureRowHeightsValid=function(){return false};t.prototype.start=function(){this.started=true;var e=this.gridOptionsService.get("serverSideDatasource");if(e){this.setDatasource(e)}};t.prototype.destroyDatasource=function(){if(!this.datasource){return}if(this.datasource.destroy){this.datasource.destroy()}this.rowRenderer.datasourceChanged();this.datasource=undefined};t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this));this.addManagedListener(this.eventService,Events.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));var e=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,e);this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,e);this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,e);this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,e);this.verifyProps()};t.prototype.verifyProps=function(){if(this.gridOptionsService.exists("initialGroupOrderComparator")||this.gridOptionsService.exists("defaultGroupOrderComparator")){var e="AG Grid: initialGroupOrderComparator cannot be used with Server Side Row Model. If using Full Store, then provide the rows to the grid in the desired sort order. If using Infinite Scroll, then sorting is done on the server side, nothing to do with the client.";_.doOnce((function(){return console.warn(e)}),"SSRM.InitialGroupOrderComparator")}if(this.gridOptionsService.isRowSelection()&&!this.gridOptionsService.exists("getRowId")){var t="AG Grid: getRowId callback must be provided for Server Side Row Model selection to work correctly.";_.doOnce((function(){return console.warn(t)}),"SSRM.SelectionNeedsRowNodeIdFunc")}};t.prototype.setDatasource=function(e){if(!this.started){return}this.destroyDatasource();this.datasource=e;this.resetRootStore()};t.prototype.isLastRowIndexKnown=function(){var e=this.getRootStore();if(!e){return false}return e.isLastRowIndexKnown()};t.prototype.onColumnEverything=function(){if(!this.storeParams){this.resetRootStore();return}var e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns());var t=this.columnsToValueObjects(this.columnModel.getValueColumns());var r=this.columnsToValueObjects(this.columnModel.getPivotColumns());var n=function(e){var t={};e.oldCols.forEach((function(e){return t[e.id]=e}));var r=e.newCols.every((function(e){var r=t[e.id];if(r){delete t[e.id]}return r&&r.field===e.field&&r.aggFunc===e.aggFunc}));var n=!e.allowRemovedColumns&&!!Object.values(t).length;return r&&!n};var i=!_.jsonEquals(this.storeParams.sortModel,this.sortListener.extractSortModel());var o=!n({oldCols:this.storeParams.rowGroupCols,newCols:e});var a=!n({oldCols:this.storeParams.pivotCols,newCols:r});var s=!!(e===null||e===void 0?void 0:e.length)&&!n({oldCols:this.storeParams.valueCols,newCols:t,allowRemovedColumns:true});var l=i||o||a||s;if(l){this.resetRootStore()}else{var u=this.createStoreParams();this.storeParams.rowGroupCols=u.rowGroupCols;this.storeParams.pivotCols=u.pivotCols;this.storeParams.valueCols=u.valueCols}};t.prototype.destroyRootStore=function(){if(!this.rootNode||!this.rootNode.childStore){return}this.rootNode.childStore=this.destroyBean(this.rootNode.childStore);this.nodeManager.clear()};t.prototype.refreshAfterSort=function(e,t){if(this.storeParams){this.storeParams.sortModel=e}var r=this.getRootStore();if(!r){return}r.refreshAfterSort(t);this.onStoreUpdated()};t.prototype.resetRootStore=function(){this.destroyRootStore();this.rootNode=new RowNode(this.beans);this.rootNode.group=true;this.rootNode.level=-1;if(this.datasource){this.storeParams=this.createStoreParams();this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode));this.updateRowIndexesAndBounds()}var e={type:Events.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(e);this.dispatchModelUpdated(true)};t.prototype.columnsToValueObjects=function(e){var t=this;return e.map((function(e){return{id:e.getId(),aggFunc:e.getAggFunc(),displayName:t.columnModel.getDisplayNameForColumn(e,"model"),field:e.getColDef().field}}))};t.prototype.createStoreParams=function(){var e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns());var t=this.columnsToValueObjects(this.columnModel.getValueColumns());var r=this.columnsToValueObjects(this.columnModel.getPivotColumns());var n=this.gridOptionsService.isGetRowHeightFunction();var i={valueCols:t,rowGroupCols:e,pivotCols:r,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.getFilterModel(),sortModel:this.sortListener.extractSortModel(),datasource:this.datasource,lastAccessedSequence:new NumberSequence,dynamicRowHeight:n};return i};t.prototype.getParams=function(){return this.storeParams};t.prototype.dispatchModelUpdated=function(e){if(e===void 0){e=false}var t={type:Events.EVENT_MODEL_UPDATED,animate:!e,keepRenderedRows:!e,newPage:false,newData:false};this.eventService.dispatchEvent(t)};t.prototype.onStoreUpdated=function(){if(this.pauseStoreUpdateListening){return}this.updateRowIndexesAndBounds();this.dispatchModelUpdated()};t.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()};t.prototype.onRowHeightChanged=function(){this.updateRowIndexesAndBounds();this.dispatchModelUpdated()};t.prototype.updateRowIndexesAndBounds=function(){var e=this.getRootStore();if(!e){return}e.setDisplayIndexes(new NumberSequence,{value:0})};t.prototype.retryLoads=function(){var e=this.getRootStore();if(!e){return}e.retryLoads();this.onStoreUpdated()};t.prototype.getRow=function(e){var t=this.getRootStore();if(!t){return undefined}return t.getRowUsingDisplayIndex(e)};t.prototype.expandAll=function(e){this.pauseStoreUpdateListening=true;this.forEachNode((function(t){if(t.stub){return}if(t.hasChildren()){t.setExpanded(e)}}));this.pauseStoreUpdateListening=false;this.onStoreUpdated()};t.prototype.refreshAfterFilter=function(e,t){if(this.storeParams){this.storeParams.filterModel=e}var r=this.getRootStore();if(!r){return}r.refreshAfterFilter(t);this.onStoreUpdated()};t.prototype.getRootStore=function(){if(this.rootNode&&this.rootNode.childStore){return this.rootNode.childStore}};t.prototype.getRowCount=function(){var e=this.getRootStore();if(!e){return 0}return e.getDisplayIndexEnd()};t.prototype.getTopLevelRowCount=function(){var e=this.getRootStore();if(!e){return 1}return e.getRowCount()};t.prototype.getTopLevelRowDisplayedIndex=function(e){var t=this.getRootStore();if(!t){return e}return t.getTopLevelRowDisplayedIndex(e)};t.prototype.getRowBounds=function(e){var t=this.getRootStore();if(!t){var r=this.gridOptionsService.getRowHeightAsNumber();return{rowTop:0,rowHeight:r}}return t.getRowBounds(e)};t.prototype.getBlockStates=function(){var e=this.getRootStore();if(!e){return undefined}var t={};e.forEachStoreDeep((function(e){if(e instanceof FullStore){var r=e.getBlockStateJson(),n=r.id,i=r.state;t[n]=i}else if(e instanceof LazyStore){Object.entries(e.getBlockStates()).forEach((function(e){var r=__read$4(e,2),n=r[0],i=r[1];t[n]=i}))}else{throw new Error("AG Grid: Unsupported store type")}}));return t};t.prototype.getRowIndexAtPixel=function(e){var t=this.getRootStore();if(e<=0||!t){return 0}return t.getRowIndexAtPixel(e)};t.prototype.isEmpty=function(){return false};t.prototype.isRowsToRender=function(){return this.getRootStore()!=null&&this.getRowCount()>0};t.prototype.getType=function(){return"serverSide"};t.prototype.forEachNode=function(e){var t=this.getRootStore();if(!t){return}t.forEachNodeDeep(e)};t.prototype.forEachNodeAfterFilterAndSort=function(e){var t=this.getRootStore();if(!t){return}t.forEachNodeDeepAfterFilterAndSort(e)};t.prototype.executeOnStore=function(e,t){var r=this.getRootStore();if(!r){return}var n=r.getChildStore(e);if(n){t(n)}};t.prototype.refreshStore=function(e){if(e===void 0){e={}}var t=e.route?e.route:[];this.executeOnStore(t,(function(t){return t.refreshStore(e.purge==true)}))};t.prototype.getStoreState=function(){var e=[];var t=this.getRootStore();if(t){t.addStoreStates(e)}return e};t.prototype.getNodesInRangeForSelection=function(e,t){if(!_.exists(e)){return[]}if(!t){return[e]}var r=e.rowIndex;var n=t.rowIndex;if(r===null||n===null){return[e]}var i=[];var o=__read$4([r,n].sort((function(e,t){return e-t})),2),a=o[0],s=o[1];this.forEachNode((function(e){var t=e.rowIndex;if(t==null||e.stub){return}if(t>=a&&t<=s){i.push(e)}}));var l=i.every((function(e,t,r){if(t===0){return e.rowIndex===a}return r[t-1].rowIndex===e.rowIndex-1}));if(!l||i.length!==s-a+1){return[e]}return i};t.prototype.getRowNode=function(e){var t;this.forEachNode((function(r){if(r.id===e){t=r}if(r.detailNode&&r.detailNode.id===e){t=r.detailNode}}));return t};t.prototype.isRowPresent=function(e){var t=this.getRowNode(e.id);return!!t};t.prototype.setRowCount=function(e,t){var r=this.getRootStore();if(r){if(r instanceof LazyStore){r.setRowCount(e,t);return}console.error("AG Grid: Infinite scrolling must be enabled in order to set the row count.")}};__decorate$q([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$q([Autowired("filterManager")],t.prototype,"filterManager",void 0);__decorate$q([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0);__decorate$q([Autowired("ssrmSortService")],t.prototype,"sortListener",void 0);__decorate$q([Autowired("ssrmNodeManager")],t.prototype,"nodeManager",void 0);__decorate$q([Autowired("ssrmStoreFactory")],t.prototype,"storeFactory",void 0);__decorate$q([Autowired("beans")],t.prototype,"beans",void 0);__decorate$q([PreDestroy],t.prototype,"destroyDatasource",null);__decorate$q([PostConstruct],t.prototype,"addEventListeners",null);__decorate$q([PreDestroy],t.prototype,"destroyRootStore",null);t=__decorate$q([Bean("rowModel")],t);return t}(BeanStub);var __extends$r=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$p=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var StoreUtils=function(e){__extends$r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.loadFromDatasource=function(e){var t=e.storeParams,r=e.parentBlock,n=e.parentNode;var i=n.getGroupKeys();if(!t.datasource){return}var o={startRow:e.startRow,endRow:e.endRow,rowGroupCols:t.rowGroupCols,valueCols:t.valueCols,pivotCols:t.pivotCols,pivotMode:t.pivotMode,groupKeys:i,filterModel:t.filterModel,sortModel:t.sortModel};var a={successCallback:e.successCallback,success:e.success,failCallback:e.failCallback,fail:e.fail,request:o,parentNode:e.parentNode,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};window.setTimeout((function(){if(!t.datasource||!r.isAlive()){e.failCallback();return}t.datasource.getRows(a)}),0)};t.prototype.getChildStore=function(e,t,r){if(_.missingOrEmpty(e)){return t}var n=e[0];var i=r(n);if(i){var o=e.slice(1,e.length);var a=i.childStore;return a?a.getChildStore(o):null}return null};t.prototype.isServerRefreshNeeded=function(e,t,r){if(r.valueColChanged||r.secondaryColChanged){return true}var n=e.level+1;var i=n<t.length;var o=!i;if(o){return true}var a=t[n].id;var s=r.changedColumns.indexOf(a)>-1;if(s){return true}var l=this.columnModel.getAllGridColumns();var u=l.filter((function(e){return e.getColDef().showRowGroup&&r.changedColumns.includes(e.getId())})).map((function(e){return e.getColDef().showRowGroup})).some((function(e){return e===true||e===a}));return u};t.prototype.getServerSideInitialRowCount=function(){var e=this.gridOptionsService.getNum("serverSideInitialRowCount");if(typeof e==="number"&&e>0){return e}return 1};t.prototype.assertRowModelIsServerSide=function(e){if(!this.gridOptionsService.isRowModelType("serverSide")){_.doOnce((function(){return console.warn("AG Grid: The '"+e+"' property can only be used with the Server Side Row Model.")}),e);return false}return true};t.prototype.assertNotTreeData=function(e){if(this.gridOptionsService.is("treeData")){_.doOnce((function(){return console.warn("AG Grid: The '"+e+"' property cannot be used while using tree data.")}),e+"_TreeData");return false}return true};t.prototype.isServerSideSortAllLevels=function(){return this.gridOptionsService.is("serverSideSortAllLevels")&&this.assertRowModelIsServerSide("serverSideSortAllLevels")};t.prototype.isServerSideFilterAllLevels=function(){return this.gridOptionsService.is("serverSideFilterAllLevels")&&this.assertRowModelIsServerSide("serverSideFilterAllLevels")};t.prototype.isServerSideSortOnServer=function(){return this.gridOptionsService.is("serverSideSortOnServer")&&this.assertRowModelIsServerSide("serverSideSortOnServer")&&this.assertNotTreeData("serverSideSortOnServer")};t.prototype.isServerSideFilterOnServer=function(){return this.gridOptionsService.is("serverSideFilterOnServer")&&this.assertRowModelIsServerSide("serverSideFilterOnServer")&&this.assertNotTreeData("serverSideFilterOnServer")};__decorate$p([Autowired("columnApi")],t.prototype,"columnApi",void 0);__decorate$p([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$p([Autowired("gridApi")],t.prototype,"gridApi",void 0);t=__decorate$p([Bean("ssrmStoreUtils")],t);return t}(BeanStub);var __extends$q=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$o=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var GROUP_MISSING_KEY_ID="ag-Grid-MissingKey";var BlockUtils=function(e){__extends$q(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.postConstruct=function(){this.rowHeight=this.gridOptionsService.getRowHeightAsNumber();this.usingTreeData=this.gridOptionsService.isTreeData();this.usingMasterDetail=this.gridOptionsService.isMasterDetail()};t.prototype.createRowNode=function(e){var t=new RowNode(this.beans);var r=e.rowHeight!=null?e.rowHeight:this.rowHeight;t.setRowHeight(r);t.group=e.group;t.leafGroup=e.leafGroup;t.level=e.level;t.uiLevel=e.level;t.parent=e.parent;t.stub=true;t.__needsRefreshWhenVisible=false;if(t.group){t.expanded=false;t.field=e.field;t.rowGroupColumn=e.rowGroupColumn}return t};t.prototype.destroyRowNodes=function(e){var t=this;if(e){e.forEach((function(e){return t.destroyRowNode(e)}))}};t.prototype.destroyRowNode=function(e,t){if(t===void 0){t=false}if(e.childStore&&!t){this.destroyBean(e.childStore);e.childStore=null}e.clearRowTopAndRowIndex();if(e.id!=null){this.nodeManager.removeNode(e)}};t.prototype.setTreeGroupInfo=function(e){e.updateHasChildren();var t=this.gridOptionsService.get("getServerSideGroupKey");if(e.hasChildren()&&t!=null){e.key=t(e.data)}if(!e.hasChildren()&&e.childStore!=null){this.destroyBean(e.childStore);e.childStore=null;e.expanded=false}};t.prototype.setRowGroupInfo=function(e){e.key=this.valueService.getValue(e.rowGroupColumn,e);if(e.key===null||e.key===undefined){_.doOnce((function(){console.warn("AG Grid: null and undefined values are not allowed for server side row model keys");if(e.rowGroupColumn){console.warn("column = "+e.rowGroupColumn.getId())}console.warn("data is ",e.data)}),"ServerSideBlock-CannotHaveNullOrUndefinedForKey")}};t.prototype.setMasterDetailInfo=function(e){var t=this.gridOptionsService.get("isRowMaster");if(t!=null){e.master=t(e.data)}else{e.master=true}};t.prototype.updateDataIntoRowNode=function(e,t){e.updateData(t);if(this.usingTreeData){this.setTreeGroupInfo(e);this.setChildCountIntoRowNode(e)}else if(e.group){this.setChildCountIntoRowNode(e)}else if(this.usingMasterDetail);};t.prototype.setDataIntoRowNode=function(e,t,r,n){e.stub=false;if(_.exists(t)){e.setDataAndId(t,r);if(this.usingTreeData){this.setTreeGroupInfo(e)}else if(e.group){this.setRowGroupInfo(e)}else if(this.usingMasterDetail){this.setMasterDetailInfo(e)}}else{e.setDataAndId(undefined,undefined);e.key=null}if(this.usingTreeData||e.group){this.setGroupDataIntoRowNode(e);this.setChildCountIntoRowNode(e)}if(_.exists(t)){e.setRowHeight(this.gridOptionsService.getRowHeightForNode(e,false,n).height)}};t.prototype.setChildCountIntoRowNode=function(e){var t=this.gridOptionsService.get("getChildCount");if(t){e.setAllChildrenCount(t(e.data))}};t.prototype.setGroupDataIntoRowNode=function(e){var t=this;var r=this.columnModel.getGroupDisplayColumns();var n=this.gridOptionsService.isTreeData();r.forEach((function(r){if(e.groupData==null){e.groupData={}}if(n){e.groupData[r.getColId()]=e.key}else if(r.isRowGroupDisplayed(e.rowGroupColumn.getId())){var i=t.valueService.getValue(e.rowGroupColumn,e);e.groupData[r.getColId()]=i}}))};t.prototype.clearDisplayIndex=function(e){e.clearRowTopAndRowIndex();var t=e.hasChildren()&&_.exists(e.childStore);if(t){var r=e.childStore;r.clearDisplayIndexes()}var n=e.master&&e.detailNode;if(n){e.detailNode.clearRowTopAndRowIndex()}};t.prototype.setDisplayIndex=function(e,t,r){e.setRowIndex(t.next());e.setRowTop(r.value);r.value+=e.rowHeight;var n=e.master;if(n){if(e.expanded&&e.detailNode){e.detailNode.setRowIndex(t.next());e.detailNode.setRowTop(r.value);r.value+=e.detailNode.rowHeight}else if(e.detailNode){e.detailNode.clearRowTopAndRowIndex()}}var i=e.hasChildren()&&_.exists(e.childStore);if(i){var o=e.childStore;if(e.expanded){o.setDisplayIndexes(t,r)}else{o.clearDisplayIndexes()}}};t.prototype.binarySearchForDisplayIndex=function(e,t){var r=0;var n=t.length-1;if(_.missing(n)||_.missing(r)){console.warn("AG Grid: error: topPointer = "+n+", bottomPointer = "+r);return undefined}while(true){var i=Math.floor((r+n)/2);var o=t[i];if(o.rowIndex===e){return o}var a=o.master&&o.expanded;var s=o.detailNode;if(a&&s&&s.rowIndex===e){return o.detailNode}var l=o.childStore;if(o.expanded&&l&&l.isDisplayIndexInStore(e)){return l.getRowUsingDisplayIndex(e)}if(o.rowIndex<e){r=i+1}else if(o.rowIndex>e){n=i-1}else{console.warn("AG Grid: error: unable to locate rowIndex = "+e+" in cache");return undefined}}};t.prototype.extractRowBounds=function(e,t){var r=function(e){return{rowHeight:e.rowHeight,rowTop:e.rowTop}};if(e.rowIndex===t){return r(e)}if(e.hasChildren()&&e.expanded&&_.exists(e.childStore)){var n=e.childStore;if(n.isDisplayIndexInStore(t)){return n.getRowBounds(t)}}else if(e.master&&e.expanded&&_.exists(e.detailNode)){if(e.detailNode.rowIndex===t){return r(e.detailNode)}}};t.prototype.getIndexAtPixel=function(e,t){if(e.isPixelInRange(t)){return e.rowIndex}var r=e.master&&e.expanded;var n=e.detailNode;if(r&&n&&n.isPixelInRange(t)){return e.detailNode.rowIndex}if(e.hasChildren()&&e.expanded&&_.exists(e.childStore)){var i=e.childStore;if(i.isPixelInRange(t)){return i.getRowIndexAtPixel(t)}}return null};t.prototype.createNodeIdPrefix=function(e){var t=[];var r=e;while(r&&r.level>=0){if(r.key===""){t.push(GROUP_MISSING_KEY_ID)}else{t.push(r.key)}r=r.parent}if(t.length>0){return t.reverse().join("-")}return undefined};t.prototype.checkOpenByDefault=function(e){if(!e.isExpandable()){return}var t=this.gridOptionsService.getCallback("isServerSideGroupOpenByDefault");if(!t){return}var r={data:e.data,rowNode:e};var n=t(r);if(n){window.setTimeout((function(){return e.setExpanded(true)}),0)}};__decorate$o([Autowired("valueService")],t.prototype,"valueService",void 0);__decorate$o([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$o([Autowired("ssrmNodeManager")],t.prototype,"nodeManager",void 0);__decorate$o([Autowired("beans")],t.prototype,"beans",void 0);__decorate$o([PostConstruct],t.prototype,"postConstruct",null);t=__decorate$o([Bean("ssrmBlockUtils")],t);return t}(BeanStub);var __decorate$n=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var NodeManager=function(){function e(){this.rowNodes={}}e.prototype.addRowNode=function(e){var t=e.id;if(this.rowNodes[t]){console.warn("AG Grid: Duplicate node id "+e.id+". Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.");console.warn("first instance",this.rowNodes[t].data);console.warn("second instance",e.data)}this.rowNodes[t]=e};e.prototype.removeNode=function(e){var t=e.id;if(this.rowNodes[t]){this.rowNodes[t]=undefined}};e.prototype.clear=function(){this.rowNodes={}};__decorate$n([PreDestroy],e.prototype,"clear",null);e=__decorate$n([Bean("ssrmNodeManager")],e);return e}();var __extends$p=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$m=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var TransactionManager=function(e){__extends$p(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.asyncTransactions=[];return t}t.prototype.postConstruct=function(){if(!this.gridOptionsService.isRowModelType("serverSide")){return}};t.prototype.applyTransactionAsync=function(e,t){if(this.asyncTransactionsTimeout==null){this.scheduleExecuteAsync()}this.asyncTransactions.push({transaction:e,callback:t})};t.prototype.scheduleExecuteAsync=function(){var e=this;var t=this.gridOptionsService.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout((function(){e.executeAsyncTransactions()}),t)};t.prototype.executeAsyncTransactions=function(){var e=this;if(!this.asyncTransactions){return}var t=[];var r=[];var n=[];var i=false;this.asyncTransactions.forEach((function(o){var a;e.serverSideRowModel.executeOnStore(o.transaction.route,(function(e){a=e.applyTransaction(o.transaction)}));if(a==undefined){a={status:ServerSideTransactionResultStatus.StoreNotFound}}r.push(a);var s=a.status==ServerSideTransactionResultStatus.StoreLoading;if(s){n.push(o);return}if(o.callback){t.push((function(){return o.callback(a)}))}if(a.status===ServerSideTransactionResultStatus.Applied){i=true}}));if(t.length>0){window.setTimeout((function(){t.forEach((function(e){return e()}))}),0)}this.asyncTransactionsTimeout=undefined;this.asyncTransactions=n;if(i){this.valueCache.onDataChanged();this.eventService.dispatchEvent({type:Events.EVENT_STORE_UPDATED})}if(r.length>0){var o={type:Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:r};this.eventService.dispatchEvent(o)}};t.prototype.flushAsyncTransactions=function(){if(this.asyncTransactionsTimeout!=null){clearTimeout(this.asyncTransactionsTimeout)}this.executeAsyncTransactions()};t.prototype.applyTransaction=function(e){var t;this.serverSideRowModel.executeOnStore(e.route,(function(r){t=r.applyTransaction(e)}));if(t){this.valueCache.onDataChanged();if(t.remove){var r=t.remove.map((function(e){return e.id}));this.selectionService.deleteSelectionStateFromParent(e.route||[],r)}this.eventService.dispatchEvent({type:Events.EVENT_STORE_UPDATED});return t}else{return{status:ServerSideTransactionResultStatus.StoreNotFound}}};__decorate$m([Autowired("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0);__decorate$m([Autowired("valueCache")],t.prototype,"valueCache",void 0);__decorate$m([Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0);__decorate$m([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0);__decorate$m([Autowired("selectionService")],t.prototype,"selectionService",void 0);__decorate$m([PostConstruct],t.prototype,"postConstruct",null);t=__decorate$m([Bean("ssrmTransactionManager")],t);return t}(BeanStub);var __extends$o=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$l=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ExpandListener=function(e){__extends$o(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.postConstruct=function(){if(!this.gridOptionsService.isRowModelType("serverSide")){return}this.addManagedListener(this.eventService,Events.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))};t.prototype.onRowGroupOpened=function(e){var t=e.node;if(t.expanded){if(t.master){this.createDetailNode(t)}else if(_.missing(t.childStore)){var r=this.serverSideRowModel.getParams();t.childStore=this.createBean(this.storeFactory.createStore(r,t))}}else if(this.gridOptionsService.is("purgeClosedRowNodes")&&_.exists(t.childStore)){t.childStore=this.destroyBean(t.childStore)}var n={type:Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(n)};t.prototype.createDetailNode=function(e){if(_.exists(e.detailNode)){return e.detailNode}var t=new RowNode(this.beans);t.detail=true;t.selectable=false;t.parent=e;if(_.exists(e.id)){t.id="detail_"+e.id}t.data=e.data;t.level=e.level+1;var r=200;var n=this.gridOptionsService.getRowHeightForNode(t).height;t.rowHeight=n?n:r;e.detailNode=t;return t};__decorate$l([Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0);__decorate$l([Autowired("ssrmStoreFactory")],t.prototype,"storeFactory",void 0);__decorate$l([Autowired("beans")],t.prototype,"beans",void 0);__decorate$l([PostConstruct],t.prototype,"postConstruct",null);t=__decorate$l([Bean("ssrmExpandListener")],t);return t}(BeanStub);var __extends$n=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$k=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var SortListener=function(e){__extends$n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.postConstruct=function(){if(!this.gridOptionsService.isRowModelType("serverSide")){return}this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))};t.prototype.extractSortModel=function(){var e=this.sortController.getSortModel();if(this.gridOptionsService.isTreeData()){return e}this.replaceAutoGroupColumnWithActualRowGroupColumns(e);this.removeMultiColumnPrefixOnColumnIds(e);return e};t.prototype.removeMultiColumnPrefixOnColumnIds=function(e){if(this.gridOptionsService.isGroupMultiAutoColumn()){var t=GROUP_AUTO_COLUMN_ID+"-";for(var r=0;r<e.length;++r){if(e[r].colId.indexOf(t)>-1){e[r].colId=e[r].colId.substr(t.length)}}}};t.prototype.replaceAutoGroupColumnWithActualRowGroupColumns=function(e){var t=e.find((function(e){return e.colId==GROUP_AUTO_COLUMN_ID}));if(t){var r=e.indexOf(t);_.removeFromArray(e,t);var n=function(t){return e.filter((function(e){return e.colId===t.getColId()})).length==0};var i=function(e){return{colId:e.getId(),sort:t.sort}};var o=this.columnModel.getRowGroupColumns().filter(n).map(i);_.insertArrayIntoArray(e,o,r)}};t.prototype.onSortChanged=function(){var e=this.serverSideRowModel.getParams();if(!e){return}var t=this.extractSortModel();var r=e.sortModel;var n=this.findChangedColumnsInSort(t,r);var i=this.listenerUtils.isSortingWithValueColumn(n);var o=this.listenerUtils.isSortingWithSecondaryColumn(n);var a={valueColChanged:i,secondaryColChanged:o,changedColumns:n};this.serverSideRowModel.refreshAfterSort(t,a)};t.prototype.findChangedColumnsInSort=function(e,t){var r=[];[e,t].forEach((function(e){if(e){var t=e.map((function(e){return e.colId}));r=r.concat(t)}}));var n=function(e,t){var r=e?e.sort:null;var n=t?t.sort:null;return r!==n};var i=function(r,n){var i=r?t.indexOf(r):-1;var o=n?e.indexOf(n):-1;return i!==o};return r.filter((function(r){var o=t.find((function(e){return e.colId===r}));var a=e.find((function(e){return e.colId===r}));return n(o,a)||i(o,a)}))};__decorate$k([Autowired("sortController")],t.prototype,"sortController",void 0);__decorate$k([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$k([Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0);__decorate$k([Autowired("ssrmListenerUtils")],t.prototype,"listenerUtils",void 0);__decorate$k([PostConstruct],t.prototype,"postConstruct",null);t=__decorate$k([Bean("ssrmSortService")],t);return t}(BeanStub);var __extends$m=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$j=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var FilterListener=function(e){__extends$m(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.postConstruct=function(){if(!this.gridOptionsService.isRowModelType("serverSide")){return}this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))};t.prototype.onFilterChanged=function(){var e=this.serverSideRowModel.getParams();if(!e){return}var t=this.filterManager.getFilterModel();var r=e?e.filterModel:{};var n=this.findChangedColumns(t,r);var i=this.listenerUtils.isSortingWithValueColumn(n);var o=this.listenerUtils.isSortingWithSecondaryColumn(n);var a={valueColChanged:i,secondaryColChanged:o,changedColumns:n};this.serverSideRowModel.refreshAfterFilter(t,a)};t.prototype.findChangedColumns=function(e,t){var r={};Object.keys(e).forEach((function(e){return r[e]=true}));Object.keys(t).forEach((function(e){return r[e]=true}));var n=[];Object.keys(r).forEach((function(r){var i=JSON.stringify(e[r]);var o=JSON.stringify(t[r]);var a=i!=o;if(a){n.push(r)}}));return n};__decorate$j([Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0);__decorate$j([Autowired("filterManager")],t.prototype,"filterManager",void 0);__decorate$j([Autowired("ssrmListenerUtils")],t.prototype,"listenerUtils",void 0);__decorate$j([PostConstruct],t.prototype,"postConstruct",null);t=__decorate$j([Bean("ssrmFilterListener")],t);return t}(BeanStub);var __decorate$i=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var StoreFactory=function(){function e(){}e.prototype.createStore=function(e,t){var r=this.getStoreParams(e,t);var n=r.suppressInfiniteScroll?FullStore:LazyStore;return new n(e,r,t)};e.prototype.getStoreParams=function(e,t){var r=this.getLevelSpecificParams(t);var n=this.isInfiniteScroll(r);var i=this.getBlockSize(n,r);var o=this.getMaxBlocksInCache(n,e,r);var a={suppressInfiniteScroll:!n,cacheBlockSize:i,maxBlocksInCache:o};return a};e.prototype.getMaxBlocksInCache=function(e,t,r){if(!e){return undefined}var n=r&&r.maxBlocksInCache!=null?r.maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache");var i=n!=null&&n>=0;if(!i){return undefined}if(t.dynamicRowHeight){var o="AG Grid: Server Side Row Model does not support Dynamic Row Height and Cache Purging. "+"Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.";_.doOnce((function(){return console.warn(o)}),"storeFactory.maxBlocksInCache.dynamicRowHeight");return undefined}if(this.columnModel.isAutoRowHeightActive()){var a="AG Grid: Server Side Row Model does not support Auto Row Height and Cache Purging. "+"Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.";_.doOnce((function(){return console.warn(a)}),"storeFactory.maxBlocksInCache.autoRowHeightActive");return undefined}return n};e.prototype.getBlockSize=function(e,t){if(!e){return undefined}var r=t&&t.cacheBlockSize!=null?t.cacheBlockSize:this.gridOptionsService.getNum("cacheBlockSize");if(r!=null&&r>0){return r}else{return 100}};e.prototype.getLevelSpecificParams=function(e){var t=this.gridOptionsService.getCallback("getServerSideGroupLevelParams");if(!t){return undefined}var r={level:e.level+1,parentRowNode:e.level>=0?e:undefined,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()};var n=t(r);if(n.storeType!=null){n.suppressInfiniteScroll=n.storeType!=="partial"}return n};e.prototype.isInfiniteScroll=function(e){var t=e&&e.suppressInfiniteScroll!=null?e.suppressInfiniteScroll:this.isSuppressServerSideInfiniteScroll();return!t};e.prototype.isSuppressServerSideInfiniteScroll=function(){return this.gridOptionsService.is("suppressServerSideInfiniteScroll")};__decorate$i([Autowired("gridOptionsService")],e.prototype,"gridOptionsService",void 0);__decorate$i([Autowired("columnModel")],e.prototype,"columnModel",void 0);e=__decorate$i([Bean("ssrmStoreFactory")],e);return e}();var __decorate$h=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ListenerUtils=function(){function e(){}e.prototype.isSortingWithValueColumn=function(e){var t=this.columnModel.getValueColumns().map((function(e){return e.getColId()}));for(var r=0;r<e.length;r++){if(t.indexOf(e[r])>-1){return true}}return false};e.prototype.isSortingWithSecondaryColumn=function(e){if(!this.columnModel.getSecondaryColumns()){return false}var t=this.columnModel.getSecondaryColumns().map((function(e){return e.getColId()}));for(var r=0;r<e.length;r++){if(t.indexOf(e[r])>-1){return true}}return false};__decorate$h([Autowired("columnModel")],e.prototype,"columnModel",void 0);e=__decorate$h([Bean("ssrmListenerUtils")],e);return e}();var __extends$l=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$g=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$3=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$2=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$3(arguments[t]));return e};var DefaultStrategy=function(e){__extends$l(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.selectedState={selectAll:false,toggledNodes:new Set};t.lastSelected=null;t.selectAllUsed=false;t.selectedNodes={};return t}t.prototype.init=function(){var e=this;this.rowSelection=this.gridOptionsService.get("rowSelection");this.addManagedPropertyListener("rowSelection",(function(t){e.rowSelection=t.currentValue}))};t.prototype.getSelectedState=function(){return{selectAll:this.selectedState.selectAll,toggledNodes:__spread$2(this.selectedState.toggledNodes)}};t.prototype.setSelectedState=function(e){var t={selectAll:false,toggledNodes:new Set};if(typeof e!=="object"){console.error("AG Grid: The provided selection state should be an object.");return}if("selectAll"in e&&typeof e.selectAll==="boolean"){t.selectAll=e.selectAll}else{console.error("AG Grid: Select all status should be of boolean type.");return}if("toggledNodes"in e&&Array.isArray(e.toggledNodes)){e.toggledNodes.forEach((function(e){if(typeof e==="string"){t.toggledNodes.add(e)}else{console.warn("AG Grid: Provided ids must be of string type. Invalid id provided: "+e)}}))}else{console.error("AG Grid: `toggledNodes` must be an array of string ids.");return}this.selectedState=t};t.prototype.deleteSelectionStateFromParent=function(e,t){var r=this;if(this.selectedState.toggledNodes.size===0){return false}var n=false;t.forEach((function(e){if(r.selectedState.toggledNodes.delete(e)){n=true}}));return n};t.prototype.setNodeSelected=function(e){var t;var r=this;var n=e.clearSelection&&e.newValue&&!e.rangeSelect;if(this.rowSelection!=="multiple"||n){if(e.newValue){this.selectedNodes=(t={},t[e.node.id]=e.node,t);this.selectedState={selectAll:false,toggledNodes:new Set([e.node.id])}}else{this.selectedNodes={};this.selectedState={selectAll:false,toggledNodes:new Set}}this.lastSelected=e.node.id;return 1}var i=function(t){if(e.newValue){r.selectedNodes[t.id]=t}else{delete r.selectedNodes[t.id]}var n=e.newValue===r.selectedState.selectAll;if(n){r.selectedState.toggledNodes.delete(t.id);return}r.selectedState.toggledNodes.add(t.id)};if(e.rangeSelect&&this.lastSelected){var o=this.rowModel.getRowNode(this.lastSelected);this.rowModel.getNodesInRangeForSelection(e.node,o!==null&&o!==void 0?o:null).forEach(i);this.lastSelected=e.node.id;return 1}i(e.node);this.lastSelected=e.node.id;return 1};t.prototype.processNewRow=function(e){if(this.selectedNodes[e.id]){this.selectedNodes[e.id]=e}};t.prototype.isNodeSelected=function(e){var t=this.selectedState.toggledNodes.has(e.id);return this.selectedState.selectAll?!t:t};t.prototype.getSelectedNodes=function(){if(this.selectAllUsed){console.warn("AG Grid: getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model.\n                Use `api.getServerSideSelectionState()` instead.")}return Object.values(this.selectedNodes)};t.prototype.getSelectedRows=function(){return this.getSelectedNodes().map((function(e){return e.data}))};t.prototype.getSelectionCount=function(){if(this.selectedState.selectAll){return-1}return this.selectedState.toggledNodes.size};t.prototype.clearOtherNodes=function(e,t){var r=this.selectedState.selectAll?1:this.selectedState.toggledNodes.size-1;this.selectedState={selectAll:false,toggledNodes:new Set([e.id])};this.rowModel.forEachNode((function(r){if(r!==e){r.selectThisNode(false,undefined,t)}}));var n={type:Events.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(n);return r};t.prototype.isEmpty=function(){var e;return!this.selectedState.selectAll&&!((e=this.selectedState.toggledNodes)===null||e===void 0?void 0:e.size)};t.prototype.selectAllRowNodes=function(e){this.selectedState={selectAll:true,toggledNodes:new Set};this.selectedNodes={};this.selectAllUsed=true};t.prototype.deselectAllRowNodes=function(e){this.selectedState={selectAll:false,toggledNodes:new Set};this.selectedNodes={}};t.prototype.getSelectAllState=function(e,t){if(this.selectedState.selectAll){if(this.selectedState.toggledNodes.size>0){return null}return true}if(this.selectedState.toggledNodes.size>0){return null}return false};__decorate$g([Autowired("rowModel")],t.prototype,"rowModel",void 0);__decorate$g([PostConstruct],t.prototype,"init",null);return t}(BeanStub);var __extends$k=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$f=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var __read$2=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread$1=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$2(arguments[t]));return e};var GroupSelectsChildrenStrategy=function(e){__extends$k(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.selectedState={selectAllChildren:false,toggledNodes:new Map};t.lastSelected=null;return t}t.prototype.init=function(){var e=this;this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,(function(){return e.removeRedundantState()}));this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return e.selectionService.reset()}))};t.prototype.getSelectedState=function(){var e=this;var t=function(r,n,i){var o={nodeId:i};if(n<=e.columnModel.getRowGroupColumns().length){o.selectAllChildren=r.selectAllChildren}if(r.toggledNodes.size){var a=[];r.toggledNodes.forEach((function(e,r){var i=t(e,n+1,r);a.push(i)}));o.toggledNodes=a}return o};return t(this.selectedState,0)};t.prototype.setSelectedState=function(e){var t=function(e,r){var n,i;if(typeof e!=="object"){throw new Error("AG Grid: Each provided state object must be an object.")}if("selectAllChildren"in e&&typeof e.selectAllChildren!=="boolean"){throw new Error("AG Grid: `selectAllChildren` must be a boolean value or undefined.")}if("toggledNodes"in e){if(!Array.isArray(e.toggledNodes)){throw new Error("AG Grid: `toggledNodes` must be an array.")}var o=e.toggledNodes.every((function(e){return typeof e==="object"&&"nodeId"in e&&typeof e.nodeId==="string"}));if(!o){throw new Error("AG Grid: Every `toggledNode` requires an associated string id.")}}var a=(n=e.selectAllChildren)!==null&&n!==void 0?n:!r;var s=(i=e.toggledNodes)===null||i===void 0?void 0:i.map((function(e){return[e.nodeId,t(e,a)]}));var l=s===null||s===void 0?void 0:s.some((function(e){var t=__read$2(e,2);t[0];var r=t[1];return a===r.selectAllChildren&&r.toggledNodes.size===0}));if(l){throw new Error("\n                    AG Grid: AG Grid: Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule.\n                    Please rebuild the selection state and reapply it.\n                ")}return{selectAllChildren:a,toggledNodes:new Map(s)}};try{this.selectedState=t(e,!!e.selectAllChildren)}catch(e){console.error(e.message)}};t.prototype.deleteSelectionStateFromParent=function(e,t){var r=this.selectedState;var n=__spread$1(e);while(r&&n.length){r=r.toggledNodes.get(n.pop())}if(!r){return false}var i=false;t.forEach((function(e){if(r===null||r===void 0?void 0:r.toggledNodes.delete(e)){i=true}}));if(i){this.removeRedundantState()}return i};t.prototype.setNodeSelected=function(e){var t=this;if(e.rangeSelect){var r=this.rowModel.getNodesInRangeForSelection(e.node,this.lastSelected);var n=r.map(this.getRouteToNode).sort((function(e,t){return t.length-e.length}));var i=new Set;n.forEach((function(r){if(i.has(r[r.length-1])){return}r.forEach((function(e){return i.add(e)}));t.recursivelySelectNode(r,t.selectedState,e)}));this.removeRedundantState();this.lastSelected=e.node;return 1}var o=this.getRouteToNode(e.node);this.recursivelySelectNode(o,this.selectedState,e);this.removeRedundantState();this.lastSelected=e.node;return 1};t.prototype.isNodeSelected=function(e){var t=this.getRouteToNode(e);return this.isNodePathSelected(t,this.selectedState)};t.prototype.isNodePathSelected=function(e,t){var r=__read$2(e),n=r[0],i=r.slice(1);if(i.length===0){var o=t.toggledNodes.has(n.id);if(n.hasChildren()){var a=t.toggledNodes.get(n.id);if(a&&a.toggledNodes.size){return undefined}}return t.selectAllChildren?!o:o}if(t.toggledNodes.has(n.id)){var s=t.toggledNodes.get(n.id);if(s){return this.isNodePathSelected(i,s)}}return!!t.selectAllChildren};t.prototype.getRouteToNode=function(e){var t=[];var r=e;while(r.parent){t.push(r);r=r.parent}return t.reverse()};t.prototype.removeRedundantState=function(){var e=this;if(this.filterManager.isAnyFilterPresent()){return}var t=function(r,n,i){if(r===void 0){r=e.selectedState}if(n===void 0){n=e.serverSideRowModel.getRootStore()}var o=true;var a=true;r.toggledNodes.forEach((function(n,i){var s=e.rowModel.getRowNode(i);if(!s){o=false}var l=s===null||s===void 0?void 0:s.childStore;if(!l){if(n.toggledNodes.size>0){a=false}return}if(t(n,l,s)){if(r.selectAllChildren===n.selectAllChildren){r.toggledNodes.delete(i)}}if(n.toggledNodes.size>0){a=false}}));if(!n||!n.isLastRowIndexKnown()||n.getRowCount()!==r.toggledNodes.size){return false}if(a&&o){r.toggledNodes.clear();r.selectAllChildren=!r.selectAllChildren;if(i&&(i===null||i===void 0?void 0:i.isSelected())!==r.selectAllChildren){i.selectThisNode(r.selectAllChildren,undefined,"api")}return true}return false};t()};t.prototype.recursivelySelectNode=function(e,t,r){var n=__read$2(e),i=n[0],o=n.slice(1);if(!i){return}var a=!o.length;if(a){var s=t.selectAllChildren===r.newValue;if(s){t.toggledNodes.delete(i.id);return}var l={selectAllChildren:r.newValue,toggledNodes:new Map};t.toggledNodes.set(i.id,l);return}var u=t.toggledNodes.has(i.id);var c=u?t.toggledNodes.get(i.id):{selectAllChildren:t.selectAllChildren,toggledNodes:new Map};if(!u){t.toggledNodes.set(i.id,c)}this.recursivelySelectNode(o,c,r);if(t.selectAllChildren===c.selectAllChildren&&c.toggledNodes.size===0){t.toggledNodes.delete(i.id)}};t.prototype.getSelectedNodes=function(){console.warn("AG Grid: `getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model.\n            Use `api.getServerSideSelectionState()` instead.");var e=[];this.rowModel.forEachNode((function(t){if(t.isSelected()){e.push(t)}}));return e};t.prototype.processNewRow=function(e){};t.prototype.getSelectedRows=function(){return this.getSelectedNodes().map((function(e){return e.data}))};t.prototype.getSelectionCount=function(){return-1};t.prototype.isEmpty=function(){var e;return!this.selectedState.selectAllChildren&&!((e=this.selectedState.toggledNodes)===null||e===void 0?void 0:e.size)};t.prototype.selectAllRowNodes=function(e){this.selectedState={selectAllChildren:true,toggledNodes:new Map}};t.prototype.deselectAllRowNodes=function(e){this.selectedState={selectAllChildren:false,toggledNodes:new Map}};t.prototype.getSelectAllState=function(e,t){if(this.selectedState.selectAllChildren){if(this.selectedState.toggledNodes.size>0){return null}return true}if(this.selectedState.toggledNodes.size>0){return null}return false};__decorate$f([Autowired("rowModel")],t.prototype,"rowModel",void 0);__decorate$f([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$f([Autowired("filterManager")],t.prototype,"filterManager",void 0);__decorate$f([Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0);__decorate$f([Autowired("selectionService")],t.prototype,"selectionService",void 0);__decorate$f([PostConstruct],t.prototype,"init",null);return t}(BeanStub);var __extends$j=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$e=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ServerSideSelectionService=function(e){__extends$j(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.init=function(){var e=this;var t=this.gridOptionsService.is("groupSelectsChildren");this.addManagedPropertyListener("groupSelectsChildren",(function(t){e.destroyBean(e.selectionStrategy);var r=!t.currentValue?DefaultStrategy:GroupSelectsChildrenStrategy;e.selectionStrategy=e.createManagedBean(new r);e.shotgunResetNodeSelectionState();var n={type:Events.EVENT_SELECTION_CHANGED,source:"api"};e.eventService.dispatchEvent(n)}));var r=!t?DefaultStrategy:GroupSelectsChildrenStrategy;this.selectionStrategy=this.createManagedBean(new r)};t.prototype.getServerSideSelectionState=function(){return this.selectionStrategy.getSelectedState()};t.prototype.setServerSideSelectionState=function(e){this.selectionStrategy.setSelectedState(e);this.shotgunResetNodeSelectionState();var t={type:Events.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(t)};t.prototype.setNodeSelected=function(e){var t=this.selectionStrategy.setNodeSelected(e);this.shotgunResetNodeSelectionState(e.source);var r={type:Events.EVENT_SELECTION_CHANGED,source:e.source};this.eventService.dispatchEvent(r);return t};t.prototype.deleteSelectionStateFromParent=function(e,t){var r=this.selectionStrategy.deleteSelectionStateFromParent(e,t);if(!r){return}this.shotgunResetNodeSelectionState();var n={type:Events.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(n)};t.prototype.shotgunResetNodeSelectionState=function(e){var t=this;this.rowModel.forEachNode((function(r){if(r.stub){return}var n=t.selectionStrategy.isNodeSelected(r);if(n!==r.isSelected()){r.selectThisNode(n,undefined,e)}}))};t.prototype.getSelectedNodes=function(){return this.selectionStrategy.getSelectedNodes()};t.prototype.getSelectedRows=function(){return this.selectionStrategy.getSelectedRows()};t.prototype.getSelectionCount=function(){return this.selectionStrategy.getSelectionCount()};t.prototype.syncInRowNode=function(e,t){this.selectionStrategy.processNewRow(e);var r=this.selectionStrategy.isNodeSelected(e);e.setSelectedInitialValue(r)};t.prototype.reset=function(){this.selectionStrategy.deselectAllRowNodes({source:"api"})};t.prototype.isEmpty=function(){return this.selectionStrategy.isEmpty()};t.prototype.selectAllRowNodes=function(e){if(e.justCurrentPage||e.justFiltered){console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'")}this.selectionStrategy.selectAllRowNodes(e);this.rowModel.forEachNode((function(t){if(t.stub){return}t.selectThisNode(true,undefined,e.source)}));var t={type:Events.EVENT_SELECTION_CHANGED,source:e.source};this.eventService.dispatchEvent(t)};t.prototype.deselectAllRowNodes=function(e){if(e.justCurrentPage||e.justFiltered){console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'")}this.selectionStrategy.deselectAllRowNodes(e);this.rowModel.forEachNode((function(t){if(t.stub){return}t.selectThisNode(false,undefined,e.source)}));var t={type:Events.EVENT_SELECTION_CHANGED,source:e.source};this.eventService.dispatchEvent(t)};t.prototype.getSelectAllState=function(e,t){return this.selectionStrategy.getSelectAllState(e,t)};t.prototype.updateGroupsFromChildrenSelections=function(e,t){return false};t.prototype.getBestCostNodeSelection=function(){console.warn("AG Grid: calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.");return undefined};t.prototype.filterFromSelection=function(){return};__decorate$e([Autowired("rowModel")],t.prototype,"rowModel",void 0);__decorate$e([PostConstruct],t.prototype,"init",null);t=__decorate$e([Bean("selectionService")],t);return t}(BeanStub);var VERSION$4="29.3.5";var ServerSideRowModelModule={version:VERSION$4,moduleName:ModuleNames.ServerSideRowModelModule,rowModel:"serverSide",beans:[ServerSideRowModel,ExpandListener,SortListener,StoreUtils,BlockUtils,NodeManager,TransactionManager,FilterListener,StoreFactory,ListenerUtils,ServerSideSelectionService],dependantModules:[EnterpriseCoreModule]};var ClientSideValuesExtractor=function(){function e(e,t,r,n,i,o,a,s,l){this.rowModel=e;this.filterParams=t;this.createKey=r;this.caseFormat=n;this.columnModel=i;this.valueService=o;this.treeDataOrGrouping=a;this.treeData=s;this.getDataPath=l}e.prototype.extractUniqueValues=function(e,t){var r=this;var n=new Map;var i=this.extractExistingFormattedKeys(t);var o=new Set;var a=this.treeData&&!!this.getDataPath;var s=this.columnModel.getRowGroupColumns();var l=function(e,a){var s=r.caseFormat(e);if(!o.has(s)){o.add(s);var l=e;var u=_.makeNull(a);var c=i===null||i===void 0?void 0:i.get(s);if(c!=null){l=c;u=t.get(c)}n.set(l,u)}};this.rowModel.forEachLeafNode((function(t){if(!t.data||!e(t)){return}if(r.treeDataOrGrouping){r.addValueForTreeDataOrGrouping(t,a,s,l);return}var n=r.getValue(t);if(r.filterParams.convertValuesToStrings){r.addValueForConvertValuesToString(t,n,l);return}if(n!=null&&Array.isArray(n)){n.forEach((function(e){l(r.createKey(e,t),e)}));if(n.length===0){l(null,null)}}else{l(r.createKey(n,t),n)}}));return n};e.prototype.addValueForConvertValuesToString=function(e,t,r){var n=this.createKey(t,e);if(n!=null&&Array.isArray(n)){n.forEach((function(e){var t=_.toStringOrNull(_.makeNull(e));r(t,t)}));if(n.length===0){r(null,null)}}else{r(n,n)}};e.prototype.addValueForTreeDataOrGrouping=function(e,t,r,n){var i=this;var o;var a;if(t){if((o=e.childrenAfterGroup)===null||o===void 0?void 0:o.length){return}a=this.getDataPath(e.data)}else{a=r.map((function(t){return i.valueService.getKeyForNode(t,e)}));a.push(this.getValue(e))}if(a){a=a.map((function(e){return _.toStringOrNull(_.makeNull(e))}))}if(a===null||a===void 0?void 0:a.some((function(e){return e==null}))){a=null}n(this.createKey(a),a)};e.prototype.getValue=function(e){var t=this.filterParams,r=t.api,n=t.colDef,i=t.column,o=t.columnApi,a=t.context;return this.filterParams.valueGetter({api:r,colDef:n,column:i,columnApi:o,context:a,data:e.data,getValue:function(t){return e.data[t]},node:e})};e.prototype.extractExistingFormattedKeys=function(e){var t=this;if(!e){return null}var r=new Map;e.forEach((function(e,n){r.set(t.caseFormat(n),n)}));return r};return e}();var SetFilterDisplayValue=function(){function e(){}e.SELECT_ALL="__AG_SELECT_ALL__";return e}();var __values$2=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var FlatSetDisplayValueModel=function(){function e(e,t,r,n){this.valueFormatterService=e;this.valueFormatter=t;this.formatter=r;this.column=n;this.displayedKeys=[]}e.prototype.updateDisplayedValuesToAllAvailable=function(e,t,r){this.displayedKeys=Array.from(r)};e.prototype.updateDisplayedValuesToMatchMiniFilter=function(e,t,r,n,i){var o,a;this.displayedKeys=[];try{for(var s=__values$2(r),l=s.next();!l.done;l=s.next()){var u=l.value;if(u==null){if(i){this.displayedKeys.push(u)}}else{var c=e(u);var d=this.valueFormatterService.formatValue(this.column,null,c,this.valueFormatter,false);var p=this.formatter(d);if(n(p)){this.displayedKeys.push(u)}}}}catch(e){o={error:e}}finally{try{if(l&&!l.done&&(a=s.return))a.call(s)}finally{if(o)throw o.error}}};e.prototype.getDisplayedValueCount=function(){return this.displayedKeys.length};e.prototype.getDisplayedItem=function(e){return this.displayedKeys[e]};e.prototype.getSelectAllItem=function(){return SetFilterDisplayValue.SELECT_ALL};e.prototype.getDisplayedKeys=function(){return this.displayedKeys};e.prototype.forEachDisplayedKey=function(e){this.displayedKeys.forEach(e)};e.prototype.someDisplayedKey=function(e){return this.displayedKeys.some(e)};e.prototype.hasGroups=function(){return false};e.prototype.refresh=function(){};return e}();var __read$1=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var __spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$1(arguments[t]));return e};var __values$1=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var TreeSetDisplayValueModel=function(){function e(e,t,r,n){this.formatter=e;this.treeListPathGetter=t;this.treeListFormatter=r;this.treeDataOrGrouping=n;this.allDisplayedItemsTree=[];this.activeDisplayedItemsFlat=[];this.selectAllItem={depth:0,filterPasses:true,available:true,treeKey:SetFilterDisplayValue.SELECT_ALL,children:this.allDisplayedItemsTree,expanded:true,key:SetFilterDisplayValue.SELECT_ALL,parentTreeKeys:[]}}e.prototype.updateDisplayedValuesToAllAvailable=function(e,t,r,n){if(n==="reload"){this.generateItemTree(e,t,r)}else if(n==="otherFilter"){this.updateAvailable(r);this.updateExpandAll()}else if(n==="miniFilter"){this.resetFilter();this.updateExpandAll()}this.flattenItems()};e.prototype.updateDisplayedValuesToMatchMiniFilter=function(e,t,r,n,i,o){if(o==="reload"){this.generateItemTree(e,t,r)}else if(o==="otherFilter"){this.updateAvailable(r)}this.updateFilter(n,i);this.updateExpandAll();this.flattenItems()};e.prototype.generateItemTree=function(e,t,r){var n,i;var o;this.allDisplayedItemsTree=[];this.groupsExist=false;var a=this.getTreeListPathGetter(e,r);var s=function(t){var n=e(t);var i=(o=a(n))!==null&&o!==void 0?o:[null];if(i.length>1){l.groupsExist=true}var s=r.has(t);var u=l.allDisplayedItemsTree;var c;var d=[];i.forEach((function(e,r){if(!u){u=[];c.children=u}c=u.find((function(t){var r;return((r=t.treeKey)===null||r===void 0?void 0:r.toUpperCase())===(e===null||e===void 0?void 0:e.toUpperCase())}));if(!c){c={treeKey:e,depth:r,filterPasses:true,expanded:false,available:s,parentTreeKeys:d};if(r===i.length-1){c.key=t}u.push(c)}u=c.children;d=__spread(d,[e])}))};var l=this;try{for(var u=__values$1(t),c=u.next();!c.done;c=u.next()){var d=c.value;s(d)}}catch(e){n={error:e}}finally{try{if(c&&!c.done&&(i=u.return))i.call(u)}finally{if(n)throw n.error}}this.updateAvailable(r);this.selectAllItem.children=this.allDisplayedItemsTree;this.selectAllItem.expanded=false};e.prototype.getTreeListPathGetter=function(t,r){var n,i;if(this.treeListPathGetter){return this.treeListPathGetter}if(this.treeDataOrGrouping){return function(e){return e}}var o=false;try{for(var a=__values$1(r),s=a.next();!s.done;s=a.next()){var l=s.value;var u=t(l);if(u instanceof Date){o=true;break}else if(u!=null){break}}}catch(e){n={error:e}}finally{try{if(s&&!s.done&&(i=a.return))i.call(a)}finally{if(n)throw n.error}}if(o){return e.DATE_TREE_LIST_PATH_GETTER}_.doOnce((function(){return console.warn("AG Grid: property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.")}),"getTreeListPathGetter");return function(e){return[String(e)]}};e.prototype.flattenItems=function(){var e=this;this.activeDisplayedItemsFlat=[];var t=function(r){r.forEach((function(r){if(!r.filterPasses||!r.available){return}e.activeDisplayedItemsFlat.push(r);if(r.children&&r.expanded){t(r.children)}}))};t(this.allDisplayedItemsTree)};e.prototype.resetFilter=function(){var e=function(t){if(t.children){t.children.forEach((function(t){e(t)}))}t.filterPasses=true};this.allDisplayedItemsTree.forEach((function(t){return e(t)}))};e.prototype.updateFilter=function(e,t){var r=this;var n=function(n){if(!n.available){return false}if(n.treeKey==null){return t}return e(r.formatter(r.treeListFormatter?r.treeListFormatter(n.treeKey,n.depth,n.parentTreeKeys):n.treeKey))};this.allDisplayedItemsTree.forEach((function(e){return r.recursiveItemCheck(e,false,n,"filterPasses")}))};e.prototype.getDisplayedValueCount=function(){return this.activeDisplayedItemsFlat.length};e.prototype.getDisplayedItem=function(e){return this.activeDisplayedItemsFlat[e]};e.prototype.getSelectAllItem=function(){return this.selectAllItem};e.prototype.getDisplayedKeys=function(){var e=[];this.forEachDisplayedKey((function(t){return e.push(t)}));return e};e.prototype.forEachDisplayedKey=function(e){var t=function(r,n){if(r.children){if(!r.expanded||!n){r.children.forEach((function(e){if(e.filterPasses){t(e,false)}}))}}else{e(r.key)}};this.activeDisplayedItemsFlat.forEach((function(e){return t(e,true)}))};e.prototype.someDisplayedKey=function(e){var t=function(r,n){if(r.children){if(!r.expanded||!n){return r.children.some((function(e){if(e.filterPasses){return t(e,false)}return false}))}}else{return e(r.key)}return false};return this.activeDisplayedItemsFlat.some((function(e){return t(e,true)}))};e.prototype.hasGroups=function(){return this.groupsExist};e.prototype.refresh=function(){this.updateExpandAll();this.flattenItems()};e.prototype.updateExpandAll=function(){var e=function(t,r,n){var i,o;try{for(var a=__values$1(t),s=a.next();!s.done;s=a.next()){var l=s.value;if(!l.filterPasses||!l.available||!l.children){continue}r=r||!!l.expanded;n=n||!l.expanded;if(r&&n){return undefined}var u=e(l.children,r,n);if(u===undefined){return undefined}else if(u){r=true}else{n=true}}}catch(e){i={error:e}}finally{try{if(s&&!s.done&&(o=a.return))o.call(a)}finally{if(i)throw i.error}}return r&&n?undefined:r};var t=this.getSelectAllItem();t.expanded=e(t.children,false,false)};e.prototype.recursiveItemCheck=function(e,t,r,n){var i=this;var o=false;if(e.children){e.children.forEach((function(a){var s=i.recursiveItemCheck(a,t||r(e),r,n);o=o||s}))}var a=t||o||r(e);e[n]=a;return a};e.prototype.updateAvailable=function(e){var t=this;var r=function(t){return e.has(t.key)};this.allDisplayedItemsTree.forEach((function(e){return t.recursiveItemCheck(e,false,r,"available")}))};e.DATE_TREE_LIST_PATH_GETTER=function(e){return e?[String(e.getFullYear()),String(e.getMonth()+1),String(e.getDate())]:null};return e}();var __read=function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return o};var SetFilterModelValuesType;(function(e){e[e["PROVIDED_LIST"]=0]="PROVIDED_LIST";e[e["PROVIDED_CALLBACK"]=1]="PROVIDED_CALLBACK";e[e["TAKEN_FROM_GRID_VALUES"]=2]="TAKEN_FROM_GRID_VALUES"})(SetFilterModelValuesType||(SetFilterModelValuesType={}));var SetValueModel=function(){function e(e){var t=this;var r;this.localEventService=new EventService;this.miniFilterText=null;this.providedValues=null;this.allValues=new Map;this.availableKeys=new Set;this.selectedKeys=new Set;this.initialised=false;var n=e.usingComplexObjects,i=e.columnModel,o=e.valueService,a=e.treeDataTreeList,s=e.groupingTreeList,l=e.filterParams,u=e.gridOptionsService,c=e.valueFormatterService,d=e.valueFormatter;var p=l.column,f=l.colDef,h=l.textFormatter,v=l.doesRowPassOtherFilter,g=l.suppressSorting,y=l.comparator,m=l.rowModel,S=l.values,b=l.caseSensitive,C=l.convertValuesToStrings,x=l.treeList,w=l.treeListPathGetter,O=l.treeListFormatter;this.filterParams=l;this.setIsLoading=e.setIsLoading;this.translate=e.translate;this.caseFormat=e.caseFormat;this.createKey=e.createKey;this.usingComplexObjects=!!e.usingComplexObjects;this.formatter=h||TextFilter.DEFAULT_FORMATTER;this.doesRowPassOtherFilters=v;this.suppressSorting=g||false;this.convertValuesToStrings=!!C;var T=y!==null&&y!==void 0?y:f.comparator;var E=!!a||!!s;this.compareByValue=!!(n&&T||E||x&&!w);if(E&&!T){this.entryComparator=this.createTreeDataOrGroupingComparator()}else if(x&&!w&&!T){this.entryComparator=function(e,t){var r=__read(e,2);r[0];var n=r[1];var i=__read(t,2);i[0];var o=i[1];return _.defaultComparator(n,o)}}else{this.entryComparator=function(e,t){var r=__read(e,2);r[0];var n=r[1];var i=__read(t,2);i[0];var o=i[1];return T(n,o)}}this.keyComparator=(r=T)!==null&&r!==void 0?r:_.defaultComparator;this.caseSensitive=!!b;var P=u.get("getDataPath");if(m.getType()==="clientSide"){this.clientSideValuesExtractor=new ClientSideValuesExtractor(m,this.filterParams,this.createKey,this.caseFormat,i,o,E,!!a,P)}if(S==null){this.valuesType=SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES}else{this.valuesType=Array.isArray(S)?SetFilterModelValuesType.PROVIDED_LIST:SetFilterModelValuesType.PROVIDED_CALLBACK;this.providedValues=S}this.displayValueModel=x?new TreeSetDisplayValueModel(this.formatter,w,O,a||s):new FlatSetDisplayValueModel(c,d,this.formatter,p);this.updateAllValues().then((function(e){return t.resetSelectionState(e||[])}))}e.prototype.addEventListener=function(e,t,r){this.localEventService.addEventListener(e,t,r)};e.prototype.removeEventListener=function(e,t,r){this.localEventService.removeEventListener(e,t,r)};e.prototype.refreshValues=function(){var e=this.getModel();this.updateAllValues();return this.setModel(e)};e.prototype.overrideValues=function(e){var t=this;return new AgPromise((function(r){t.allValuesPromise.then((function(){t.valuesType=SetFilterModelValuesType.PROVIDED_LIST;t.providedValues=e;t.refreshValues().then((function(){return r()}))}))}))};e.prototype.refreshAfterAnyFilterChanged=function(){var e=this;if(this.showAvailableOnly()){return this.allValuesPromise.then((function(t){e.updateAvailableKeys(t!==null&&t!==void 0?t:[],"otherFilter");return true}))}return AgPromise.resolve(false)};e.prototype.isInitialised=function(){return this.initialised};e.prototype.updateAllValues=function(){var e=this;this.allValuesPromise=new AgPromise((function(t){switch(e.valuesType){case SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES:case SetFilterModelValuesType.PROVIDED_LIST:{t(e.processAllKeys(e.valuesType===SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES,e.providedValues));break}case SetFilterModelValuesType.PROVIDED_CALLBACK:{e.setIsLoading(true);var r=e.providedValues;var n=e.filterParams,i=n.columnApi,o=n.api,a=n.context,s=n.column,l=n.colDef;var u={success:function(r){e.setIsLoading(false);t(e.processAllKeys(false,r))},colDef:l,column:s,columnApi:i,api:o,context:a};window.setTimeout((function(){return r(u)}),0);break}default:throw new Error("Unrecognised valuesType")}}));this.allValuesPromise.then((function(t){return e.updateAvailableKeys(t||[],"reload")})).then((function(){return e.initialised=true}));return this.allValuesPromise};e.prototype.processAllKeys=function(e,t){var r=e?this.getValuesFromRows(false):this.uniqueValues(this.validateProvidedValues(t));var n=this.sortKeys(r);this.allValues=r!==null&&r!==void 0?r:new Map;return n};e.prototype.validateProvidedValues=function(e){if(this.usingComplexObjects&&(e===null||e===void 0?void 0:e.length)){var t=e[0];if(t&&typeof t!=="object"&&typeof t!=="function"){var r=this.createKey(t);if(r==null){_.doOnce((function(){return console.warn("Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types")}),"setFilterComplexObjectsProvidedNull")}else{_.doOnce((function(){return console.warn("AG Grid: Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects or enable convertValuesToStrings?")}),"setFilterComplexObjectsProvidedPrimitive")}}}return e};e.prototype.setValuesType=function(e){this.valuesType=e};e.prototype.getValuesType=function(){return this.valuesType};e.prototype.isKeyAvailable=function(e){return this.availableKeys.has(e)};e.prototype.showAvailableOnly=function(){return this.valuesType===SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES};e.prototype.updateAvailableKeys=function(t,r){var n=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(true)):t;this.availableKeys=new Set(n);this.localEventService.dispatchEvent({type:e.EVENT_AVAILABLE_VALUES_CHANGED});this.updateDisplayedValues(r,t)};e.prototype.sortKeys=function(e){var t=e!==null&&e!==void 0?e:new Map;if(this.suppressSorting){return Array.from(t.keys())}var r;if(this.compareByValue){r=Array.from(t.entries()).sort(this.entryComparator).map((function(e){var t=__read(e,1),r=t[0];return r}))}else{r=Array.from(t.keys()).sort(this.keyComparator)}if(this.filterParams.excelMode&&t.has(null)){r=r.filter((function(e){return e!=null}));r.push(null)}return r};e.prototype.getValuesFromRows=function(e){var t=this;if(e===void 0){e=false}if(!this.clientSideValuesExtractor){console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values");return null}var r=function(r){return!e||t.doesRowPassOtherFilters(r)};return this.clientSideValuesExtractor.extractUniqueValues(r,e&&!this.caseSensitive?this.allValues:undefined)};e.prototype.setMiniFilter=function(e){e=_.makeNull(e);if(this.miniFilterText===e){return false}this.miniFilterText=e;this.updateDisplayedValues("miniFilter");return true};e.prototype.getMiniFilter=function(){return this.miniFilterText};e.prototype.updateDisplayedValues=function(e,t){var r=this;if(e==="expansion"){this.displayValueModel.refresh();return}if(this.miniFilterText==null){this.displayValueModel.updateDisplayedValuesToAllAvailable((function(e){return r.getValue(e)}),t,this.availableKeys,e);return}var n=this.caseFormat(this.formatter(this.miniFilterText)||"");var i=function(e){return e!=null&&r.caseFormat(e).indexOf(n)>=0};var o=!!this.filterParams.excelMode&&i(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter((function(e){return r.getValue(e)}),t,this.availableKeys,i,o,e)};e.prototype.getDisplayedValueCount=function(){return this.displayValueModel.getDisplayedValueCount()};e.prototype.getDisplayedItem=function(e){return this.displayValueModel.getDisplayedItem(e)};e.prototype.getSelectAllItem=function(){return this.displayValueModel.getSelectAllItem()};e.prototype.hasSelections=function(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size};e.prototype.getKeys=function(){return Array.from(this.allValues.keys())};e.prototype.getValues=function(){return Array.from(this.allValues.values())};e.prototype.getValue=function(e){return this.allValues.get(e)};e.prototype.selectAllMatchingMiniFilter=function(e){var t=this;if(e===void 0){e=false}if(this.miniFilterText==null){this.selectedKeys=new Set(this.allValues.keys())}else{if(e){this.selectedKeys.clear()}this.displayValueModel.forEachDisplayedKey((function(e){return t.selectedKeys.add(e)}))}};e.prototype.deselectAllMatchingMiniFilter=function(){var e=this;if(this.miniFilterText==null){this.selectedKeys.clear()}else{this.displayValueModel.forEachDisplayedKey((function(t){return e.selectedKeys.delete(t)}))}};e.prototype.selectKey=function(e){this.selectedKeys.add(e)};e.prototype.deselectKey=function(e){if(this.filterParams.excelMode&&this.isEverythingVisibleSelected()){this.resetSelectionState(this.displayValueModel.getDisplayedKeys())}this.selectedKeys.delete(e)};e.prototype.isKeySelected=function(e){return this.selectedKeys.has(e)};e.prototype.isEverythingVisibleSelected=function(){var e=this;return!this.displayValueModel.someDisplayedKey((function(t){return!e.isKeySelected(t)}))};e.prototype.isNothingVisibleSelected=function(){var e=this;return!this.displayValueModel.someDisplayedKey((function(t){return e.isKeySelected(t)}))};e.prototype.getModel=function(){return this.hasSelections()?Array.from(this.selectedKeys):null};e.prototype.setModel=function(e){var t=this;return this.allValuesPromise.then((function(r){if(e==null){t.resetSelectionState(r!==null&&r!==void 0?r:[])}else{t.selectedKeys.clear();var n=new Map;t.allValues.forEach((function(e,r){n.set(t.caseFormat(r),r)}));e.forEach((function(e){var r=t.caseFormat(e);var i=n.get(r);if(i!==undefined){t.selectKey(i)}}))}}))};e.prototype.uniqueValues=function(e){var t=this;var r=new Map;var n=new Set;(e!==null&&e!==void 0?e:[]).forEach((function(e){var i=_.makeNull(e);var o=t.convertAndGetKey(i);var a=t.caseFormat(o);if(!n.has(a)){n.add(a);r.set(o,i)}}));return r};e.prototype.convertAndGetKey=function(e){return this.convertValuesToStrings?e:this.createKey(e)};e.prototype.resetSelectionState=function(e){if(this.filterParams.defaultToNothingSelected){this.selectedKeys.clear()}else{this.selectedKeys=new Set(e)}};e.prototype.hasGroups=function(){return this.displayValueModel.hasGroups()};e.prototype.createTreeDataOrGroupingComparator=function(){return function(e,t){var r=__read(e,2);r[0];var n=r[1];var i=__read(t,2);i[0];var o=i[1];if(n==null){return o==null?0:-1}else if(o==null){return 1}for(var a=0;a<n.length;a++){if(a>=o.length){return 1}var s=_.defaultComparator(n[a],o[a]);if(s!==0){return s}}return 0}};e.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged";return e}();var __extends$i=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$d=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var SetFilterListItem=function(e){__extends$i(t,e);function t(r){var n;var i=e.call(this,r.isGroup?t.GROUP_TEMPLATE:t.TEMPLATE)||this;i.focusWrapper=r.focusWrapper;i.value=r.value;i.params=r.params;i.translate=r.translate;i.valueFormatter=r.valueFormatter;i.item=r.item;i.isSelected=r.isSelected;i.isTree=r.isTree;i.depth=(n=r.depth)!==null&&n!==void 0?n:0;i.isGroup=r.isGroup;i.groupsExist=r.groupsExist;i.isExpanded=r.isExpanded;i.hasIndeterminateExpandState=r.hasIndeterminateExpandState;return i}t.prototype.init=function(){var e=this;this.render();this.eCheckbox.setLabelEllipsis(true);this.eCheckbox.setValue(this.isSelected,true);this.eCheckbox.setDisabled(!!this.params.readOnly);this.eCheckbox.getInputElement().setAttribute("tabindex","-1");this.refreshVariableAriaLabels();if(this.isTree){if(this.depth>0){this.addCssClass("ag-set-filter-indent-"+this.depth)}if(this.isGroup){this.setupExpansion()}else{if(this.groupsExist){this.addCssClass("ag-set-filter-add-group-indent")}}_.setAriaLevel(this.focusWrapper,this.depth+1)}if(!!this.params.readOnly){return}this.eCheckbox.onValueChange((function(t){return e.onCheckboxChanged(!!t)}))};t.prototype.setupExpansion=function(){this.eGroupClosedIcon.appendChild(_.createIcon("setFilterGroupClosed",this.gridOptionsService,null));this.eGroupOpenedIcon.appendChild(_.createIcon("setFilterGroupOpen",this.gridOptionsService,null));this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this));this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));if(this.hasIndeterminateExpandState){this.eGroupIndeterminateIcon.appendChild(_.createIcon("setFilterGroupIndeterminate",this.gridOptionsService,null));this.addManagedListener(this.eGroupIndeterminateIcon,"click",this.onExpandOrContractClicked.bind(this))}this.setExpandedIcons();this.refreshAriaExpanded()};t.prototype.onExpandOrContractClicked=function(){this.setExpanded(!this.isExpanded)};t.prototype.setExpanded=function(e,r){if(this.isGroup&&e!==this.isExpanded){this.isExpanded=e;var n={type:t.EVENT_EXPANDED_CHANGED,isExpanded:!!e,item:this.item};if(!r){this.dispatchEvent(n)}this.setExpandedIcons();this.refreshAriaExpanded()}};t.prototype.refreshAriaExpanded=function(){_.setAriaExpanded(this.focusWrapper,!!this.isExpanded)};t.prototype.setExpandedIcons=function(){_.setDisplayed(this.eGroupClosedIcon,this.hasIndeterminateExpandState?this.isExpanded===false:!this.isExpanded);_.setDisplayed(this.eGroupOpenedIcon,this.isExpanded===true);if(this.hasIndeterminateExpandState){_.setDisplayed(this.eGroupIndeterminateIcon,this.isExpanded===undefined)}};t.prototype.onCheckboxChanged=function(e){this.isSelected=e;var r={type:t.EVENT_SELECTION_CHANGED,isSelected:e,item:this.item};this.dispatchEvent(r);this.refreshVariableAriaLabels()};t.prototype.toggleSelected=function(){if(!!this.params.readOnly){return}this.setSelected(!this.isSelected)};t.prototype.setSelected=function(e,t){this.isSelected=e;this.eCheckbox.setValue(this.isSelected,t)};t.prototype.refreshVariableAriaLabels=function(){if(!this.isTree){return}var e=this.localeService.getLocaleTextFunc();var t=this.eCheckbox.getValue();var r=t===undefined?e("ariaIndeterminate","indeterminate"):t?e("ariaVisible","visible"):e("ariaHidden","hidden");var n=e("ariaToggleVisibility","Press SPACE to toggle visibility");_.setAriaLabelledBy(this.eCheckbox.getInputElement(),undefined);this.eCheckbox.setInputAriaLabel(n+" ("+r+")")};t.prototype.setupFixedAriaLabels=function(e){if(!this.isTree){return}var t=this.localeService.getLocaleTextFunc();var r=t("ariaFilterValue","Filter Value");_.setAriaLabel(this.focusWrapper,e+" "+r);_.setAriaDescribedBy(this.focusWrapper,this.eCheckbox.getInputElement().id)};t.prototype.refresh=function(e,t,r){var n,i;this.item=e;if(t!==this.isSelected){this.setSelected(t,true)}this.setExpanded(r,true);if(this.valueFunction){var o=this.valueFunction();this.setTooltipAndCellRendererParams(o,o);if(!this.cellRendererComponent){this.renderCellWithoutCellRenderer()}}(i=(n=this.cellRendererComponent)===null||n===void 0?void 0:n.refresh)===null||i===void 0?void 0:i.call(n,this.cellRendererParams)};t.prototype.render=function(){var e=this.params.column;var t=this.value;var r=null;if(typeof t==="function"){this.valueFunction=t;r=this.valueFunction();t=r}else if(this.isTree){r=_.toStringOrNull(t)}else{r=this.getFormattedValue(e,t)}this.setTooltipAndCellRendererParams(t,r);this.renderCell()};t.prototype.setTooltipAndCellRendererParams=function(e,t){if(this.params.showTooltips){var r=t!=null?t:_.toStringOrNull(e);this.setTooltip(r)}this.cellRendererParams={value:e,valueFormatted:t,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,colDef:this.params.colDef,column:this.params.column}};t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);t.location="setFilterValue";t.colDef=this.getComponentHolder();if(this.isTree){t.level=this.depth}return t};t.prototype.getFormattedValue=function(e,t){return this.valueFormatterService.formatValue(e,null,t,this.valueFormatter,false)};t.prototype.renderCell=function(){var e=this;var t=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,this.cellRendererParams);var r=t?t.newAgStackInstance():undefined;if(r==null){this.renderCellWithoutCellRenderer();return}r.then((function(t){if(t){e.cellRendererComponent=t;e.eCheckbox.setLabel(t.getGui());e.addDestroyFunc((function(){return e.destroyBean(t)}))}}))};t.prototype.renderCellWithoutCellRenderer=function(){var e;var t=(e=this.cellRendererParams.valueFormatted==null?this.cellRendererParams.value:this.cellRendererParams.valueFormatted)!==null&&e!==void 0?e:this.translate("blanks");if(typeof t!=="string"){_.doOnce((function(){return console.warn("AG Grid: Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects, or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types")}),"setFilterComplexObjectsValueFormatter");t=""}this.eCheckbox.setLabel(t);this.setupFixedAriaLabels(t)};t.prototype.getComponentHolder=function(){return this.params.column.getColDef()};t.EVENT_SELECTION_CHANGED="selectionChanged";t.EVENT_EXPANDED_CHANGED="expandedChanged";t.GROUP_TEMPLATE='\n        <div class="ag-set-filter-item" aria-hidden="true">\n            <span class="ag-set-filter-group-icons">\n                <span class="ag-set-filter-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-set-filter-group-opened-icon" ref="eGroupOpenedIcon"></span>\n                <span class="ag-set-filter-group-indeterminate-icon" ref="eGroupIndeterminateIcon"></span>\n            </span>\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>';t.TEMPLATE='\n        <div class="ag-set-filter-item">\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>';__decorate$d([Autowired("valueFormatterService")],t.prototype,"valueFormatterService",void 0);__decorate$d([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0);__decorate$d([RefSelector("eCheckbox")],t.prototype,"eCheckbox",void 0);__decorate$d([RefSelector("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0);__decorate$d([RefSelector("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0);__decorate$d([RefSelector("eGroupIndeterminateIcon")],t.prototype,"eGroupIndeterminateIcon",void 0);__decorate$d([PostConstruct],t.prototype,"init",null);return t}(Component);var DEFAULT_LOCALE_TEXT={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",noMatches:"No matches."};var SetFilterModelFormatter=function(){function e(){}e.prototype.getModelAsString=function(e,t){var r=(e||t.getModel()||{}).values;var n=t.getValueModel();if(r==null||n==null){return""}var i=r.filter((function(e){return n.isKeyAvailable(e)}));var o=i.length;var a=i.slice(0,10).map((function(e){return t.getFormattedValue(e)}));return"("+o+") "+a.join(",")+(o>10?",...":"")};return e}();var __extends$h=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$c=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var SetFilter=function(e){__extends$h(t,e);function t(){var t=e.call(this,"setFilter")||this;t.valueModel=null;t.setFilterParams=null;t.virtualList=null;t.caseSensitive=false;t.convertValuesToStrings=false;t.treeDataTreeList=false;t.groupingTreeList=false;t.hardRefreshVirtualList=false;t.noValueFormatterSupplied=false;t.appliedModelKeys=null;t.noAppliedModelKeys=false;t.filterModelFormatter=new SetFilterModelFormatter;return t}t.prototype.postConstruct=function(){e.prototype.postConstruct.call(this)};t.prototype.updateUiVisibility=function(){};t.prototype.createBodyTemplate=function(){return'\n            <div class="ag-set-filter">\n                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">'+this.translateForSetFilter("loadingOoo")+'</div>\n                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>\n                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">'+this.translateForSetFilter("noMatches")+'</div>\n                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>\n            </div>'};t.prototype.handleKeyDown=function(t){e.prototype.handleKeyDown.call(this,t);if(t.defaultPrevented){return}switch(t.key){case KeyCode.SPACE:this.handleKeySpace(t);break;case KeyCode.ENTER:this.handleKeyEnter(t);break;case KeyCode.LEFT:this.handleKeyLeft(t);break;case KeyCode.RIGHT:this.handleKeyRight(t);break}};t.prototype.handleKeySpace=function(e){var t;(t=this.getComponentForKeyEvent(e))===null||t===void 0?void 0:t.toggleSelected()};t.prototype.handleKeyEnter=function(e){if(!this.setFilterParams){return}var t=this.setFilterParams||{},r=t.excelMode,n=t.readOnly;if(!r||!!n){return}e.preventDefault();this.onBtApply(false,false,e);if(this.setFilterParams.excelMode==="mac"){this.eMiniFilter.getInputElement().select()}};t.prototype.handleKeyLeft=function(e){var t;(t=this.getComponentForKeyEvent(e))===null||t===void 0?void 0:t.setExpanded(false)};t.prototype.handleKeyRight=function(e){var t;(t=this.getComponentForKeyEvent(e))===null||t===void 0?void 0:t.setExpanded(true)};t.prototype.getComponentForKeyEvent=function(e){var t;var r=this.gridOptionsService.getDocument();if(!this.eSetFilterList.contains(r.activeElement)||!this.virtualList){return}var n=this.virtualList.getLastFocusedRow();if(n==null){return}var i=this.virtualList.getComponentAt(n);if(i==null){return}e.preventDefault();var o=((t=this.setFilterParams)!==null&&t!==void 0?t:{}).readOnly;if(!!o){return}return i};t.prototype.getCssIdentifier=function(){return"set-filter"};t.prototype.setModel=function(t){var r;if(t==null&&((r=this.valueModel)===null||r===void 0?void 0:r.getModel())==null){this.setMiniFilter(null);return AgPromise.resolve()}return e.prototype.setModel.call(this,t)};t.prototype.setModelAndRefresh=function(e){var t=this;return this.valueModel?this.valueModel.setModel(e).then((function(){return t.refresh()})):AgPromise.resolve()};t.prototype.resetUiToDefaults=function(){this.setMiniFilter(null);return this.setModelAndRefresh(null)};t.prototype.setModelIntoUi=function(e){this.setMiniFilter(null);var t=e==null?null:e.values;return this.setModelAndRefresh(t)};t.prototype.getModelFromUi=function(){if(!this.valueModel){throw new Error("Value model has not been created.")}var e=this.valueModel.getModel();if(!e){return null}return{values:e,filterType:this.getFilterType()}};t.prototype.getFilterType=function(){return"set"};t.prototype.getValueModel=function(){return this.valueModel};t.prototype.areModelsEqual=function(e,t){if(e==null&&t==null){return true}return e!=null&&t!=null&&_.areEqual(e.values,t.values)};t.prototype.setParams=function(t){var r=this;var n;this.applyExcelModeOptions(t);e.prototype.setParams.call(this,t);this.setFilterParams=t;this.convertValuesToStrings=!!t.convertValuesToStrings;this.caseSensitive=!!t.caseSensitive;var i=(n=t.keyCreator)!==null&&n!==void 0?n:t.colDef.keyCreator;this.setValueFormatter(t.valueFormatter,i,this.convertValuesToStrings,!!t.treeList,!!t.colDef.refData);var o=t.column.getId().startsWith(GROUP_AUTO_COLUMN_ID);this.treeDataTreeList=this.gridOptionsService.is("treeData")&&!!t.treeList&&o;this.getDataPath=this.gridOptionsService.get("getDataPath");this.groupingTreeList=!!this.columnModel.getRowGroupColumns().length&&!!t.treeList&&o;this.createKey=this.generateCreateKey(i,this.convertValuesToStrings,this.treeDataTreeList||this.groupingTreeList);this.valueModel=new SetValueModel({filterParams:t,setIsLoading:function(e){return r.setIsLoading(e)},valueFormatterService:this.valueFormatterService,translate:function(e){return r.translateForSetFilter(e)},caseFormat:function(e){return r.caseFormat(e)},createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!i,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel,valueService:this.valueService,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList});this.initialiseFilterBodyUi();this.addEventListenersForDataChanges()};t.prototype.setValueFormatter=function(e,t,r,n,i){var o=e;if(!o){if(t&&!r&&!n){throw new Error("AG Grid: Must supply a Value Formatter in Set Filter params when using a Key Creator unless convertValuesToStrings is enabled")}this.noValueFormatterSupplied=true;if(!i){o=function(e){return _.toStringOrNull(e.value)}}}this.valueFormatter=o};t.prototype.generateCreateKey=function(e,t,r){var n=this;if(r&&!e){throw new Error("AG Grid: Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.")}if(e){return function(t,r){if(r===void 0){r=null}var i=n.getKeyCreatorParams(t,r);return _.makeNull(e(i))}}if(t){return function(e){return Array.isArray(e)?e:_.makeNull(_.toStringOrNull(e))}}else{return function(e){return _.makeNull(_.toStringOrNull(e))}}};t.prototype.getFormattedValue=function(e){var t;var r=this.valueModel.getValue(e);if(this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(r)){r=_.last(r)}var n=this.valueFormatterService.formatValue(this.setFilterParams.column,null,r,this.valueFormatter,false);return(t=n==null?_.toStringOrNull(r):n)!==null&&t!==void 0?t:this.translateForSetFilter("blanks")};t.prototype.applyExcelModeOptions=function(e){if(e.excelMode==="windows"){if(!e.buttons){e.buttons=["apply","cancel"]}if(e.closeOnApply==null){e.closeOnApply=true}}else if(e.excelMode==="mac"){if(!e.buttons){e.buttons=["reset"]}if(e.applyMiniFilterWhileTyping==null){e.applyMiniFilterWhileTyping=true}if(e.debounceMs==null){e.debounceMs=500}}if(e.excelMode&&e.defaultToNothingSelected){_.doOnce((function(){return console.warn('AG Grid: The Set Filter Parameter "defaultToNothingSelected" does not work with "excelMode".')}),"setFilterExcelModeDefaultToNothingSelect")}};t.prototype.addEventListenersForDataChanges=function(){var e=this;if(!this.isValuesTakenFromGrid()){return}this.addManagedListener(this.eventService,Events.EVENT_CELL_VALUE_CHANGED,(function(t){if(e.setFilterParams&&t.column===e.setFilterParams.column){e.syncAfterDataChange()}}))};t.prototype.syncAfterDataChange=function(){var e=this;if(!this.valueModel){throw new Error("Value model has not been created.")}var t=this.valueModel.refreshValues();return t.then((function(){e.refresh();e.onBtApply(false,true)}))};t.prototype.setIsLoading=function(e){_.setDisplayed(this.eFilterLoading,e);if(!e){this.hardRefreshVirtualList=true}};t.prototype.initialiseFilterBodyUi=function(){this.initVirtualList();this.initMiniFilter()};t.prototype.initVirtualList=function(){var e=this;if(!this.setFilterParams){throw new Error("Set filter params have not been provided.")}if(!this.valueModel){throw new Error("Value model has not been created.")}var t=this.localeService.getLocaleTextFunc();var r=t("ariaFilterList","Filter List");var n=!!this.setFilterParams.treeList;var i=this.virtualList=this.createBean(new VirtualList("filter",n?"tree":"listbox",r));var o=this.getRefElement("eSetFilterList");if(n){o.classList.add("ag-set-filter-tree-list")}if(o){o.appendChild(i.getGui())}var a=this.setFilterParams.cellHeight;if(a!=null){i.setRowHeight(a)}var s=function(t,r){return e.createSetListItem(t,n,r)};i.setComponentCreator(s);var l=function(t,r){return e.updateSetListItem(t,r)};i.setComponentUpdater(l);var u;if(this.setFilterParams.suppressSelectAll){u=new ModelWrapper(this.valueModel)}else{u=new ModelWrapperWithSelectAll(this.valueModel,(function(){return e.isSelectAllSelected()}))}if(n){u=new TreeModelWrapper(u)}i.setModel(u)};t.prototype.getSelectAllLabel=function(){if(!this.setFilterParams){throw new Error("Set filter params have not been provided.")}if(!this.valueModel){throw new Error("Value model has not been created.")}var e=this.valueModel.getMiniFilter()==null||!this.setFilterParams.excelMode?"selectAll":"selectAllSearchResults";return this.translateForSetFilter(e)};t.prototype.createSetListItem=function(e,t,r){var n=this;var i,o,a,s,l,u;if(!this.setFilterParams){throw new Error("Set filter params have not been provided.")}if(!this.valueModel){throw new Error("Value model has not been created.")}var c=this.valueModel.hasGroups();var d;var p;var f;var h;var v;var g;if(this.isSetFilterModelTreeItem(e)){p=e.depth;if(e.key===SetFilterDisplayValue.SELECT_ALL){d=function(){return n.getSelectAllLabel()};f=c;h=true;v=function(e){return n.onSelectAll(e.isSelected)};g=function(e){return n.onExpandAll(e.item,e.isExpanded)}}else if(e.children){d=(a=(o=(i=this.setFilterParams).treeListFormatter)===null||o===void 0?void 0:o.call(i,e.treeKey,e.depth,e.parentTreeKeys))!==null&&a!==void 0?a:e.treeKey;f=true;v=function(e){return n.onGroupItemSelected(e.item,e.isSelected)};g=function(e){return n.onExpandedChanged(e.item,e.isExpanded)}}else{d=(u=(l=(s=this.setFilterParams).treeListFormatter)===null||l===void 0?void 0:l.call(s,e.treeKey,e.depth,e.parentTreeKeys))!==null&&u!==void 0?u:e.treeKey;v=function(e){return n.onItemSelected(e.item.key,e.isSelected)}}}else{if(e===SetFilterDisplayValue.SELECT_ALL){d=function(){return n.getSelectAllLabel()};v=function(e){return n.onSelectAll(e.isSelected)}}else{d=this.valueModel.getValue(e);v=function(e){return n.onItemSelected(e.item,e.isSelected)}}}var y=this.isSelectedExpanded(e),m=y.isSelected,_=y.isExpanded;var S={focusWrapper:r,value:d,params:this.setFilterParams,translate:function(e){return n.translateForSetFilter(e)},valueFormatter:this.valueFormatter,item:e,isSelected:m,isTree:t,depth:p,groupsExist:c,isGroup:f,isExpanded:_,hasIndeterminateExpandState:h};var b=this.createBean(new SetFilterListItem(S));b.addEventListener(SetFilterListItem.EVENT_SELECTION_CHANGED,v);if(g){b.addEventListener(SetFilterListItem.EVENT_EXPANDED_CHANGED,g)}return b};t.prototype.updateSetListItem=function(e,t){var r=this.isSelectedExpanded(e),n=r.isSelected,i=r.isExpanded;t.refresh(e,n,i)};t.prototype.isSelectedExpanded=function(e){var t;var r;if(this.isSetFilterModelTreeItem(e)){r=e.expanded;if(e.key===SetFilterDisplayValue.SELECT_ALL){t=this.isSelectAllSelected()}else if(e.children){t=this.areAllChildrenSelected(e)}else{t=this.valueModel.isKeySelected(e.key)}}else{if(e===SetFilterDisplayValue.SELECT_ALL){t=this.isSelectAllSelected()}else{t=this.valueModel.isKeySelected(e)}}return{isSelected:t,isExpanded:r}};t.prototype.isSetFilterModelTreeItem=function(e){return(e===null||e===void 0?void 0:e.treeKey)!==undefined};t.prototype.initMiniFilter=function(){var e=this;if(!this.setFilterParams){throw new Error("Set filter params have not been provided.")}if(!this.valueModel){throw new Error("Value model has not been created.")}var t=this,r=t.eMiniFilter,n=t.localeService;var i=n.getLocaleTextFunc();r.setDisplayed(!this.setFilterParams.suppressMiniFilter);r.setValue(this.valueModel.getMiniFilter());r.onValueChange((function(){return e.onMiniFilterInput()}));r.setInputAriaLabel(i("ariaSearchFilterValues","Search filter values"));this.addManagedListener(r.getInputElement(),"keypress",(function(t){return e.onMiniFilterKeyPress(t)}))};t.prototype.afterGuiAttached=function(t){if(!this.setFilterParams){throw new Error("Set filter params have not been provided.")}e.prototype.afterGuiAttached.call(this,t);this.resetExpansion();this.refreshVirtualList();var r=this.eMiniFilter;r.setInputPlaceholder(this.translateForSetFilter("searchOoo"));if(!t||!t.suppressFocus){r.getFocusableElement().focus()}};t.prototype.afterGuiDetached=function(){var t,r;e.prototype.afterGuiDetached.call(this);if((t=this.setFilterParams)===null||t===void 0?void 0:t.excelMode){this.resetMiniFilter()}var n=this.getModel();if(((r=this.setFilterParams)===null||r===void 0?void 0:r.excelMode)||!this.areModelsEqual(n,this.getModelFromUi())){this.resetUiToActiveModel(n);this.showOrHideResults()}};t.prototype.applyModel=function(t){var r=this;if(t===void 0){t="api"}if(!this.setFilterParams){throw new Error("Set filter params have not been provided.")}if(!this.valueModel){throw new Error("Value model has not been created.")}if(this.setFilterParams.excelMode&&t!=="rowDataUpdated"&&this.valueModel.isEverythingVisibleSelected()){this.valueModel.selectAllMatchingMiniFilter()}var n=e.prototype.applyModel.call(this,t);var i=this.getModel();if(i){this.appliedModelKeys=new Set;i.values.forEach((function(e){r.appliedModelKeys.add(r.caseFormat(e))}))}else{this.appliedModelKeys=null}this.noAppliedModelKeys=(i===null||i===void 0?void 0:i.values.length)===0;return n};t.prototype.isModelValid=function(e){return this.setFilterParams&&this.setFilterParams.excelMode?e==null||e.values.length>0:true};t.prototype.doesFilterPass=function(e){var t=this;if(!this.setFilterParams||!this.valueModel||!this.appliedModelKeys){return true}if(this.noAppliedModelKeys){return false}var r=e.node,n=e.data;if(this.treeDataTreeList){return this.doesFilterPassForTreeData(r,n)}if(this.groupingTreeList){return this.doesFilterPassForGrouping(r,n)}var i=this.getValueFromNode(r,n);if(this.convertValuesToStrings){return this.doesFilterPassForConvertValuesToString(r,i)}if(i!=null&&Array.isArray(i)){if(i.length===0){return this.appliedModelKeys.has(null)}return i.some((function(e){return t.isInAppliedModel(t.createKey(e,r))}))}return this.isInAppliedModel(this.createKey(i,r))};t.prototype.doesFilterPassForConvertValuesToString=function(e,t){var r=this;var n=this.createKey(t,e);if(n!=null&&Array.isArray(n)){if(n.length===0){return this.appliedModelKeys.has(null)}return n.some((function(e){return r.isInAppliedModel(e)}))}return this.isInAppliedModel(n)};t.prototype.doesFilterPassForTreeData=function(e,t){var r;if((r=e.childrenAfterGroup)===null||r===void 0?void 0:r.length){return false}return this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(this.getDataPath(t))))};t.prototype.doesFilterPassForGrouping=function(e,t){var r=this;var n=this.columnModel.getRowGroupColumns().map((function(t){return r.valueService.getKeyForNode(t,e)}));n.push(this.getValueFromNode(e,t));return this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(n)))};t.prototype.checkMakeNullDataPath=function(e){if(e){e=e.map((function(e){return _.toStringOrNull(_.makeNull(e))}))}if(e===null||e===void 0?void 0:e.some((function(e){return e==null}))){return null}return e};t.prototype.isInAppliedModel=function(e){return this.appliedModelKeys.has(this.caseFormat(e))};t.prototype.getValueFromNode=function(e,t){var r=this.setFilterParams,n=r.valueGetter,i=r.api,o=r.colDef,a=r.column,s=r.columnApi,l=r.context;return n({api:i,colDef:o,column:a,columnApi:s,context:l,data:t,getValue:function(e){return t[e]},node:e})};t.prototype.getKeyCreatorParams=function(e,t){if(t===void 0){t=null}return{value:e,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:t,data:t===null||t===void 0?void 0:t.data,api:this.setFilterParams.api,columnApi:this.setFilterParams.columnApi,context:this.setFilterParams.context}};t.prototype.onNewRowsLoaded=function(){if(!this.isValuesTakenFromGrid()){return}this.syncAfterDataChange()};t.prototype.isValuesTakenFromGrid=function(){if(!this.valueModel){return false}var e=this.valueModel.getValuesType();return e===SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES};t.prototype.setFilterValues=function(e){var t=this;if(!this.valueModel){throw new Error("Value model has not been created.")}this.valueModel.overrideValues(e).then((function(){t.refresh();t.onUiChanged()}))};t.prototype.resetFilterValues=function(){if(!this.valueModel){throw new Error("Value model has not been created.")}this.valueModel.setValuesType(SetFilterModelValuesType.TAKEN_FROM_GRID_VALUES);this.syncAfterDataChange()};t.prototype.refreshFilterValues=function(){var e=this;if(!this.valueModel){throw new Error("Value model has not been created.")}if(!this.valueModel.isInitialised()){return}this.valueModel.refreshValues().then((function(){e.refresh();e.onUiChanged()}))};t.prototype.onAnyFilterChanged=function(){var e=this;setTimeout((function(){if(!e.isAlive()){return}if(!e.valueModel){throw new Error("Value model has not been created.")}e.valueModel.refreshAfterAnyFilterChanged().then((function(t){if(t){e.refresh();e.showOrHideResults()}}))}),0)};t.prototype.onMiniFilterInput=function(){if(!this.setFilterParams){throw new Error("Set filter params have not been provided.")}if(!this.valueModel){throw new Error("Value model has not been created.")}if(!this.valueModel.setMiniFilter(this.eMiniFilter.getValue())){return}var e=this.setFilterParams||{},t=e.applyMiniFilterWhileTyping,r=e.readOnly;if(!r&&t){this.filterOnAllVisibleValues(false)}else{this.updateUiAfterMiniFilterChange()}};t.prototype.updateUiAfterMiniFilterChange=function(){if(!this.setFilterParams){throw new Error("Set filter params have not been provided.")}if(!this.valueModel){throw new Error("Value model has not been created.")}var e=this.setFilterParams||{},t=e.excelMode,r=e.readOnly;if(t==null||!!r){this.refresh()}else if(this.valueModel.getMiniFilter()==null){this.resetUiToActiveModel(this.getModel())}else{this.valueModel.selectAllMatchingMiniFilter(true);this.refresh();this.onUiChanged()}this.showOrHideResults()};t.prototype.showOrHideResults=function(){if(!this.valueModel){throw new Error("Value model has not been created.")}var e=this.valueModel.getMiniFilter()!=null&&this.valueModel.getDisplayedValueCount()<1;_.setDisplayed(this.eNoMatches,e);_.setDisplayed(this.eSetFilterList,!e)};t.prototype.resetMiniFilter=function(){var e;this.eMiniFilter.setValue(null,true);(e=this.valueModel)===null||e===void 0?void 0:e.setMiniFilter(null)};t.prototype.resetUiToActiveModel=function(e,t){var r=this;this.setModelAndRefresh(e==null?null:e.values).then((function(){r.onUiChanged(false,"prevent");t===null||t===void 0?void 0:t()}))};t.prototype.handleCancelEnd=function(t){this.setMiniFilter(null);e.prototype.handleCancelEnd.call(this,t)};t.prototype.onMiniFilterKeyPress=function(e){var t=this.setFilterParams||{},r=t.excelMode,n=t.readOnly;if(e.key===KeyCode.ENTER&&!r&&!n){this.filterOnAllVisibleValues()}};t.prototype.filterOnAllVisibleValues=function(e){if(e===void 0){e=true}var t=(this.setFilterParams||{}).readOnly;if(!this.valueModel){throw new Error("Value model has not been created.")}if(!!t){throw new Error("Unable to filter in readOnly mode.")}this.valueModel.selectAllMatchingMiniFilter(true);this.refresh();this.onUiChanged(false,e?"immediately":"debounce");this.showOrHideResults()};t.prototype.focusRowIfAlive=function(e){var t=this;if(e==null){return}window.setTimeout((function(){if(!t.virtualList){throw new Error("Virtual list has not been created.")}if(t.isAlive()){t.virtualList.focusRow(e)}}),0)};t.prototype.onSelectAll=function(e){if(!this.valueModel){throw new Error("Value model has not been created.")}if(!this.virtualList){throw new Error("Virtual list has not been created.")}if(e){this.valueModel.selectAllMatchingMiniFilter()}else{this.valueModel.deselectAllMatchingMiniFilter()}this.refreshAfterSelection()};t.prototype.onGroupItemSelected=function(e,t){var r=this;var n=function(e){if(e.children){e.children.forEach((function(e){return n(e)}))}else{r.selectItem(e.key,t)}};n(e);this.refreshAfterSelection()};t.prototype.onItemSelected=function(e,t){if(!this.valueModel){throw new Error("Value model has not been created.")}if(!this.virtualList){throw new Error("Virtual list has not been created.")}this.selectItem(e,t);this.refreshAfterSelection()};t.prototype.selectItem=function(e,t){if(t){this.valueModel.selectKey(e)}else{this.valueModel.deselectKey(e)}};t.prototype.onExpandAll=function(e,t){var r=function(e){if(e.filterPasses&&e.available&&e.children){e.children.forEach((function(e){return r(e)}));e.expanded=t}};r(e);this.refreshAfterExpansion()};t.prototype.onExpandedChanged=function(e,t){e.expanded=t;this.refreshAfterExpansion()};t.prototype.refreshAfterExpansion=function(){var e=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion");this.refresh();this.focusRowIfAlive(e)};t.prototype.refreshAfterSelection=function(){var e=this.virtualList.getLastFocusedRow();this.refresh();this.onUiChanged();this.focusRowIfAlive(e)};t.prototype.setMiniFilter=function(e){this.eMiniFilter.setValue(e);this.onMiniFilterInput()};t.prototype.getMiniFilter=function(){return this.valueModel?this.valueModel.getMiniFilter():null};t.prototype.refresh=function(){if(!this.virtualList){throw new Error("Virtual list has not been created.")}this.virtualList.refresh(!this.hardRefreshVirtualList);if(this.hardRefreshVirtualList){this.hardRefreshVirtualList=false}};t.prototype.getFilterKeys=function(){return this.valueModel?this.valueModel.getKeys():[]};t.prototype.getFilterValues=function(){return this.valueModel?this.valueModel.getValues():[]};t.prototype.getValues=function(){return this.getFilterKeys()};t.prototype.refreshVirtualList=function(){if(this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen){this.refreshFilterValues()}else{this.refresh()}};t.prototype.translateForSetFilter=function(e){var t=this.localeService.getLocaleTextFunc();return t(e,DEFAULT_LOCALE_TEXT[e])};t.prototype.isSelectAllSelected=function(){if(!this.setFilterParams||!this.valueModel){return false}if(!this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected()){return false}if(this.valueModel.isEverythingVisibleSelected()){return true}}else{if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected()){return true}if(this.valueModel.isNothingVisibleSelected()){return false}}return undefined};t.prototype.areAllChildrenSelected=function(e){var t=this;var r=function(e){if(e.children){var n=false;var i=false;var o=e.children.some((function(e){if(!e.filterPasses||!e.available){return false}var t=r(e);if(t===undefined){return true}if(t){n=true}else{i=true}return n&&i}));return o?undefined:n}else{return t.valueModel.isKeySelected(e.key)}};if(!this.setFilterParams.defaultToNothingSelected){return r(e)}else{return this.valueModel.hasSelections()&&r(e)}};t.prototype.destroy=function(){if(this.virtualList!=null){this.virtualList.destroy();this.virtualList=null}e.prototype.destroy.call(this)};t.prototype.caseFormat=function(e){if(e==null||typeof e!=="string"){return e}return this.caseSensitive?e:e.toUpperCase()};t.prototype.resetExpansion=function(){var e,t;if(!((e=this.setFilterParams)===null||e===void 0?void 0:e.treeList)){return}var r=(t=this.valueModel)===null||t===void 0?void 0:t.getSelectAllItem();if(this.isSetFilterModelTreeItem(r)){var n=function(e){if(e.children){e.children.forEach((function(e){return n(e)}));e.expanded=false}};n(r);this.valueModel.updateDisplayedValues("expansion")}};t.prototype.getModelAsString=function(e){return this.filterModelFormatter.getModelAsString(e,this)};t.prototype.getPositionableElement=function(){return this.eSetFilterList};__decorate$c([RefSelector("eMiniFilter")],t.prototype,"eMiniFilter",void 0);__decorate$c([RefSelector("eFilterLoading")],t.prototype,"eFilterLoading",void 0);__decorate$c([RefSelector("eSetFilterList")],t.prototype,"eSetFilterList",void 0);__decorate$c([RefSelector("eFilterNoMatches")],t.prototype,"eNoMatches",void 0);__decorate$c([Autowired("valueFormatterService")],t.prototype,"valueFormatterService",void 0);__decorate$c([Autowired("columnModel")],t.prototype,"columnModel",void 0);__decorate$c([Autowired("valueService")],t.prototype,"valueService",void 0);return t}(ProvidedFilter);var ModelWrapper=function(){function e(e){this.model=e}e.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()};e.prototype.getRow=function(e){return this.model.getDisplayedItem(e)};e.prototype.isRowSelected=function(e){return this.model.isKeySelected(this.getRow(e))};e.prototype.areRowsEqual=function(e,t){return e===t};return e}();var ModelWrapperWithSelectAll=function(){function e(e,t){this.model=e;this.isSelectAllSelected=t}e.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()+1};e.prototype.getRow=function(e){return e===0?this.model.getSelectAllItem():this.model.getDisplayedItem(e-1)};e.prototype.isRowSelected=function(e){return e===0?this.isSelectAllSelected():this.model.isKeySelected(this.getRow(e))};e.prototype.areRowsEqual=function(e,t){return e===t};return e}();var TreeModelWrapper=function(){function e(e){this.model=e}e.prototype.getRowCount=function(){return this.model.getRowCount()};e.prototype.getRow=function(e){return this.model.getRow(e)};e.prototype.areRowsEqual=function(e,t){if(e==null&&t==null){return true}return e!=null&&t!=null&&e.treeKey===t.treeKey&&e.depth===t.depth};return e}();var __extends$g=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$b=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var SetFloatingFilterComp=function(e){__extends$g(t,e);function t(){var t=e.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this;t.availableValuesListenerAdded=false;t.filterModelFormatter=new SetFilterModelFormatter;return t}t.prototype.destroy=function(){e.prototype.destroy.call(this)};t.prototype.init=function(e){var t=this.columnModel.getDisplayNameForColumn(e.column,"header",true);var r=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(true).setInputAriaLabel(t+" "+r("ariaFilterInput","Filter Input")).addGuiEventListener("click",(function(){return e.showParentFilter()}));this.params=e};t.prototype.onParentModelChanged=function(e){this.updateFloatingFilterText(e)};t.prototype.parentSetFilterInstance=function(e){this.params.parentFilterInstance((function(t){if(!(t instanceof SetFilter)){throw new Error("AG Grid - SetFloatingFilter expects SetFilter as its parent")}e(t)}))};t.prototype.addAvailableValuesListener=function(){var e=this;this.parentSetFilterInstance((function(t){var r=t.getValueModel();if(!r){return}e.addManagedListener(r,SetValueModel.EVENT_AVAILABLE_VALUES_CHANGED,(function(){return e.updateFloatingFilterText()}))}));this.availableValuesListenerAdded=true};t.prototype.updateFloatingFilterText=function(e){var t=this;if(!this.availableValuesListenerAdded){this.addAvailableValuesListener()}this.parentSetFilterInstance((function(r){t.eFloatingFilterText.setValue(t.filterModelFormatter.getModelAsString(e,r))}))};__decorate$b([RefSelector("eFloatingFilterText")],t.prototype,"eFloatingFilterText",void 0);__decorate$b([Autowired("columnModel")],t.prototype,"columnModel",void 0);return t}(Component);var VERSION$3="29.3.5";var SetFilterModule={version:VERSION$3,moduleName:ModuleNames.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:SetFilter},{componentName:"agSetColumnFloatingFilter",componentClass:SetFloatingFilterComp}],dependantModules:[EnterpriseCoreModule]};var __extends$f=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$a=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var StatusBarService=function(e){__extends$f(t,e);function t(){var t=e.call(this)||this;t.allComponents={};return t}t.prototype.registerStatusPanel=function(e,t){this.allComponents[e]=t};t.prototype.getStatusPanel=function(e){return this.allComponents[e]};t=__decorate$a([Bean("statusBarService")],t);return t}(BeanStub);var __extends$e=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$9=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var StatusBar=function(e){__extends$e(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.postConstruct=function(){var e;var t=(e=this.gridOptionsService.get("statusBar"))===null||e===void 0?void 0:e.statusPanels;if(t){var r=t.filter((function(e){return e.align==="left"}));this.createAndRenderComponents(r,this.eStatusBarLeft);var n=t.filter((function(e){return e.align==="center"}));this.createAndRenderComponents(n,this.eStatusBarCenter);var i=t.filter((function(e){return!e.align||e.align==="right"}));this.createAndRenderComponents(i,this.eStatusBarRight)}else{this.setDisplayed(false)}};t.prototype.createAndRenderComponents=function(e,t){var r=this;var n=[];e.forEach((function(e){var t={};var i=r.userComponentFactory.getStatusPanelCompDetails(e,t);var o=i.newAgStackInstance();if(!o){return}n.push({key:e.key||e.statusPanel,promise:o})}));AgPromise.all(n.map((function(e){return e.promise}))).then((function(){n.forEach((function(e){e.promise.then((function(n){var i=function(){r.getContext().destroyBean(n)};if(r.isAlive()){r.statusBarService.registerStatusPanel(e.key,n);t.appendChild(n.getGui());r.addDestroyFunc(i)}else{i()}}))}))}))};t.TEMPLATE='<div class="ag-status-bar">\n            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>\n            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>\n            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>\n        </div>';__decorate$9([Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0);__decorate$9([Autowired("statusBarService")],t.prototype,"statusBarService",void 0);__decorate$9([RefSelector("eStatusBarLeft")],t.prototype,"eStatusBarLeft",void 0);__decorate$9([RefSelector("eStatusBarCenter")],t.prototype,"eStatusBarCenter",void 0);__decorate$9([RefSelector("eStatusBarRight")],t.prototype,"eStatusBarRight",void 0);__decorate$9([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var __extends$d=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$8=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var NameValueComp=function(e){__extends$d(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.setLabel=function(e,t){this.setDisplayed(false);var r=this.localeService.getLocaleTextFunc();this.eLabel.innerHTML=r(e,t)};t.prototype.setValue=function(e){this.eValue.innerHTML=e};t.TEMPLATE='<div class="ag-status-name-value">\n            <span ref="eLabel"></span>:&nbsp;\n            <span ref="eValue" class="ag-status-name-value-value"></span>\n        </div>';__decorate$8([RefSelector("eLabel")],t.prototype,"eLabel",void 0);__decorate$8([RefSelector("eValue")],t.prototype,"eValue",void 0);return t}(Component);var __extends$c=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$7=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var TotalAndFilteredRowsComp=function(e){__extends$c(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.postConstruct=function(){if(this.gridApi.getModel().getType()!=="clientSide"){console.warn("AG Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.");return}this.setLabel("totalAndFilteredRows","Rows");this.addCssClass("ag-status-panel");this.addCssClass("ag-status-panel-total-and-filtered-row-count");this.setDisplayed(true);this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this));this.onDataChanged()};t.prototype.onDataChanged=function(){var e=this.localeService.getLocaleTextFunc();var t=e("thousandSeparator",",");var r=e("decimalSeparator",".");var n=_.formatNumberCommas(this.getFilteredRowCountValue(),t,r);var i=_.formatNumberCommas(this.getTotalRowCount(),t,r);if(n===i){this.setValue(n)}else{var o=this.localeService.getLocaleTextFunc();this.setValue(n+" "+o("of","of")+" "+i)}};t.prototype.getFilteredRowCountValue=function(){var e=0;this.gridApi.forEachNodeAfterFilter((function(t){if(!t.group){e++}}));return e};t.prototype.getTotalRowCount=function(){var e=0;this.gridApi.forEachNode((function(t){if(!t.group){e++}}));return e};t.prototype.init=function(){};t.prototype.destroy=function(){e.prototype.destroy.call(this)};__decorate$7([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$7([PostConstruct],t.prototype,"postConstruct",null);return t}(NameValueComp);var __extends$b=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$6=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var FilteredRowsComp=function(e){__extends$b(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.postConstruct=function(){this.setLabel("filteredRows","Filtered");if(this.gridApi.getModel().getType()!=="clientSide"){console.warn("AG Grid: agFilteredRowCountComponent should only be used with the client side row model.");return}this.addCssClass("ag-status-panel");this.addCssClass("ag-status-panel-filtered-row-count");this.setDisplayed(true);var e=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,e);e()};t.prototype.onDataChanged=function(){var e=this.getTotalRowCountValue();var t=this.getFilteredRowCountValue();var r=this.localeService.getLocaleTextFunc();var n=r("thousandSeparator",",");var i=r("decimalSeparator",".");this.setValue(_.formatNumberCommas(t,n,i));this.setDisplayed(e!==t)};t.prototype.getTotalRowCountValue=function(){var e=0;this.gridApi.forEachNode((function(t){return e+=1}));return e};t.prototype.getFilteredRowCountValue=function(){var e=0;this.gridApi.forEachNodeAfterFilter((function(t){if(!t.group){e+=1}}));return e};t.prototype.init=function(){};t.prototype.destroy=function(){e.prototype.destroy.call(this)};__decorate$6([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$6([PostConstruct],t.prototype,"postConstruct",null);return t}(NameValueComp);var __extends$a=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$5=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var TotalRowsComp=function(e){__extends$a(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.postConstruct=function(){this.setLabel("totalRows","Total Rows");if(this.gridApi.getModel().getType()!=="clientSide"){console.warn("AG Grid: agTotalRowCountComponent should only be used with the client side row model.");return}this.addCssClass("ag-status-panel");this.addCssClass("ag-status-panel-total-row-count");this.setDisplayed(true);this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this));this.onDataChanged()};t.prototype.onDataChanged=function(){var e=this.localeService.getLocaleTextFunc();var t=e("thousandSeparator",",");var r=e("decimalSeparator",".");this.setValue(_.formatNumberCommas(this.getRowCountValue(),t,r))};t.prototype.getRowCountValue=function(){var e=0;this.gridApi.forEachLeafNode((function(t){return e+=1}));return e};t.prototype.init=function(){};t.prototype.destroy=function(){e.prototype.destroy.call(this)};__decorate$5([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$5([PostConstruct],t.prototype,"postConstruct",null);return t}(NameValueComp);var __extends$9=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$4=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var SelectedRowsComp=function(e){__extends$9(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.postConstruct=function(){if(!this.isValidRowModel()){console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.");return}this.setLabel("selectedRows","Selected");this.addCssClass("ag-status-panel");this.addCssClass("ag-status-panel-selected-row-count");this.onRowSelectionChanged();var e=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,e);this.addManagedListener(this.eventService,Events.EVENT_SELECTION_CHANGED,e)};t.prototype.isValidRowModel=function(){var e=this.gridApi.getModel().getType();return e==="clientSide"||e==="serverSide"};t.prototype.onRowSelectionChanged=function(){var e=this.selectionService.getSelectionCount();if(e<0){this.setValue("?");this.setDisplayed(true);return}var t=this.localeService.getLocaleTextFunc();var r=t("thousandSeparator",",");var n=t("decimalSeparator",".");this.setValue(_.formatNumberCommas(e,r,n));this.setDisplayed(e>0)};t.prototype.init=function(){};t.prototype.destroy=function(){e.prototype.destroy.call(this)};__decorate$4([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$4([Autowired("selectionService")],t.prototype,"selectionService",void 0);__decorate$4([PostConstruct],t.prototype,"postConstruct",null);return t}(NameValueComp);var __extends$8=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$3=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var AggregationComp=function(e){__extends$8(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.destroy=function(){e.prototype.destroy.call(this)};t.prototype.postConstruct=function(){if(!this.isValidRowModel()){console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.");return}this.avgAggregationComp.setLabel("avg","Average");this.countAggregationComp.setLabel("count","Count");this.minAggregationComp.setLabel("min","Min");this.maxAggregationComp.setLabel("max","Max");this.sumAggregationComp.setLabel("sum","Sum");this.addManagedListener(this.eventService,Events.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this));this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))};t.prototype.isValidRowModel=function(){var e=this.gridApi.getModel().getType();return e==="clientSide"||e==="serverSide"};t.prototype.init=function(){};t.prototype.setAggregationComponentValue=function(e,t,r){var n=this.getAggregationValueComponent(e);if(_.exists(n)&&n){var i=this.localeService.getLocaleTextFunc();var o=i("thousandSeparator",",");var a=i("decimalSeparator",".");n.setValue(_.formatNumberTwoDecimalPlacesAndCommas(t,o,a));n.setDisplayed(r)}};t.prototype.getAggregationValueComponent=function(e){var t=e+"AggregationComp";var r=null;var n=this.gridOptionsService.get("statusBar");var i=_.exists(n)&&n?n.statusPanels.find((function(e){return e.statusPanel==="agAggregationComponent"})):null;if(_.exists(i)&&i){if(!_.exists(i.statusPanelParams)||_.exists(i.statusPanelParams)&&_.exists(i.statusPanelParams.aggFuncs)&&_.exists(i.statusPanelParams.aggFuncs.find((function(t){return t===e})))){r=this[t]}}else{r=this[t]}return r};t.prototype.onRangeSelectionChanged=function(){var e=this;var t=this.rangeService?this.rangeService.getCellRanges():undefined;var r=0;var n=0;var i=0;var o=null;var a=null;var s={};if(t&&!_.missingOrEmpty(t)){t.forEach((function(t){var l=e.rangeService.getRangeStartRow(t);var u=e.rangeService.getRangeEndRow(t);while(true){var c=_.missing(l)||!l||e.rowPositionUtils.before(u,l);if(c||!l||!t.columns){break}t.columns.forEach((function(t){if(l===null){return}var u=e.cellPositionUtils.createId({rowPinned:l.rowPinned,column:t,rowIndex:l.rowIndex});if(s[u]){return}s[u]=true;var c=e.rowRenderer.getRowNode(l);if(_.missing(c)){return}var d=e.valueService.getValue(t,c);if(_.missing(d)||d===""){return}if(typeof d==="object"&&"value"in d){d=d.value}if(typeof d==="string"){d=Number(d)}if(typeof d==="number"&&!isNaN(d)){r+=d;if(a===null||d>a){a=d}if(o===null||d<o){o=d}i++}n++}));l=e.cellNavigationService.getRowBelow(l)}}))}var l=n>1;var u=i>1;this.setAggregationComponentValue("count",n,l);this.setAggregationComponentValue("sum",r,u);this.setAggregationComponentValue("min",o,u);this.setAggregationComponentValue("max",a,u);this.setAggregationComponentValue("avg",r/i,u)};t.TEMPLATE='<div class="ag-status-panel ag-status-panel-aggregations">\n            <ag-name-value ref="avgAggregationComp"></ag-name-value>\n            <ag-name-value ref="countAggregationComp"></ag-name-value>\n            <ag-name-value ref="minAggregationComp"></ag-name-value>\n            <ag-name-value ref="maxAggregationComp"></ag-name-value>\n            <ag-name-value ref="sumAggregationComp"></ag-name-value>\n        </div>';__decorate$3([Optional("rangeService")],t.prototype,"rangeService",void 0);__decorate$3([Autowired("valueService")],t.prototype,"valueService",void 0);__decorate$3([Autowired("cellNavigationService")],t.prototype,"cellNavigationService",void 0);__decorate$3([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0);__decorate$3([Autowired("gridApi")],t.prototype,"gridApi",void 0);__decorate$3([Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0);__decorate$3([Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0);__decorate$3([RefSelector("sumAggregationComp")],t.prototype,"sumAggregationComp",void 0);__decorate$3([RefSelector("countAggregationComp")],t.prototype,"countAggregationComp",void 0);__decorate$3([RefSelector("minAggregationComp")],t.prototype,"minAggregationComp",void 0);__decorate$3([RefSelector("maxAggregationComp")],t.prototype,"maxAggregationComp",void 0);__decorate$3([RefSelector("avgAggregationComp")],t.prototype,"avgAggregationComp",void 0);__decorate$3([PostConstruct],t.prototype,"postConstruct",null);return t}(Component);var VERSION$2="29.3.5";var StatusBarModule={version:VERSION$2,moduleName:ModuleNames.StatusBarModule,beans:[StatusBarService],agStackComponents:[{componentName:"AgStatusBar",componentClass:StatusBar},{componentName:"AgNameValue",componentClass:NameValueComp}],userComponents:[{componentName:"agAggregationComponent",componentClass:AggregationComp},{componentName:"agSelectedRowCountComponent",componentClass:SelectedRowsComp},{componentName:"agTotalRowCountComponent",componentClass:TotalRowsComp},{componentName:"agFilteredRowCountComponent",componentClass:FilteredRowsComp},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:TotalAndFilteredRowsComp}],dependantModules:[EnterpriseCoreModule]};var VERSION$1="29.3.5";var __extends$7=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate$2=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var DEFAULT_VIEWPORT_ROW_MODEL_PAGE_SIZE=5;var DEFAULT_VIEWPORT_ROW_MODEL_BUFFER_SIZE=5;var ViewportRowModel=function(e){__extends$7(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.firstRow=-1;t.lastRow=-1;t.rowCount=-1;t.rowNodesByIndex={};return t}t.prototype.ensureRowHeightsValid=function(e,t,r,n){return false};t.prototype.init=function(){this.rowHeight=this.gridOptionsService.getRowHeightAsNumber();this.addManagedListener(this.eventService,Events.EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this))};t.prototype.start=function(){if(this.gridOptionsService.get("viewportDatasource")){this.setViewportDatasource(this.gridOptionsService.get("viewportDatasource"))}};t.prototype.isLastRowIndexKnown=function(){return true};t.prototype.destroyDatasource=function(){if(!this.viewportDatasource){return}if(this.viewportDatasource.destroy){this.viewportDatasource.destroy()}this.rowRenderer.datasourceChanged();this.firstRow=-1;this.lastRow=-1};t.prototype.getViewportRowModelPageSize=function(){return _.oneOrGreater(this.gridOptionsService.getNum("viewportRowModelPageSize"),DEFAULT_VIEWPORT_ROW_MODEL_PAGE_SIZE)};t.prototype.getViewportRowModelBufferSize=function(){return _.zeroOrGreater(this.gridOptionsService.getNum("viewportRowModelBufferSize"),DEFAULT_VIEWPORT_ROW_MODEL_BUFFER_SIZE)};t.prototype.calculateFirstRow=function(e){var t=this.getViewportRowModelBufferSize();var r=this.getViewportRowModelPageSize();var n=e-t;if(n<0){return 0}return Math.floor(n/r)*r};t.prototype.calculateLastRow=function(e){if(e===-1){return e}var t=this.getViewportRowModelBufferSize();var r=this.getViewportRowModelPageSize();var n=e+t;var i=Math.ceil(n/r)*r;var o=this.rowCount-1;return Math.min(i,o)};t.prototype.onViewportChanged=function(e){var t=this.calculateFirstRow(e.firstRow);var r=this.calculateLastRow(e.lastRow);if(this.firstRow!==t||this.lastRow!==r){this.firstRow=t;this.lastRow=r;this.purgeRowsNotInViewport();if(this.viewportDatasource){this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow)}}};t.prototype.purgeRowsNotInViewport=function(){var e=this;Object.keys(this.rowNodesByIndex).forEach((function(t){var r=parseInt(t,10);if(r<e.firstRow||r>e.lastRow){if(e.isRowFocused(r)){return}delete e.rowNodesByIndex[r]}}))};t.prototype.isRowFocused=function(e){var t=this.focusService.getFocusCellToUseAfterRefresh();if(!t){return false}if(t.rowPinned!=null){return false}var r=t.rowIndex===e;return r};t.prototype.setViewportDatasource=function(e){this.destroyDatasource();this.viewportDatasource=e;this.rowCount=-1;if(!e.init){console.warn("AG Grid: viewport is missing init method.")}else{e.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)})}};t.prototype.getType=function(){return"viewport"};t.prototype.getRow=function(e){if(!this.rowNodesByIndex[e]){this.rowNodesByIndex[e]=this.createBlankRowNode(e)}return this.rowNodesByIndex[e]};t.prototype.getRowNode=function(e){var t;this.forEachNode((function(r){if(r.id===e){t=r}}));return t};t.prototype.getRowCount=function(){return this.rowCount===-1?0:this.rowCount};t.prototype.getRowIndexAtPixel=function(e){if(this.rowHeight!==0){return Math.floor(e/this.rowHeight)}return 0};t.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}};t.prototype.getTopLevelRowCount=function(){return this.getRowCount()};t.prototype.getTopLevelRowDisplayedIndex=function(e){return e};t.prototype.isEmpty=function(){return this.rowCount>0};t.prototype.isRowsToRender=function(){return this.rowCount>0};t.prototype.getNodesInRangeForSelection=function(e,t){var r=_.missing(e)?0:e.rowIndex;var n=t.rowIndex;var i=r<this.firstRow||r>this.lastRow;var o=n<this.firstRow||n>this.lastRow;if(i||o){return[]}var a=[];var s=r<=n?r:n;var l=r<=n?n:r;for(var u=s;u<=l;u++){a.push(this.rowNodesByIndex[u])}return a};t.prototype.forEachNode=function(e){var t=this;var r=0;Object.keys(this.rowNodesByIndex).forEach((function(n){var i=parseInt(n,10);var o=t.rowNodesByIndex[i];e(o,r);r++}))};t.prototype.setRowData=function(e){var t=this;_.iterateObject(e,(function(e,r){var n=parseInt(e,10);if(n>=t.firstRow&&n<=t.lastRow){var i=t.rowNodesByIndex[n];if(_.missing(i)){i=t.createBlankRowNode(n);t.rowNodesByIndex[n]=i}i.setDataAndId(r,n.toString())}}))};t.prototype.createBlankRowNode=function(e){var t=new RowNode(this.beans);t.setRowHeight(this.rowHeight);t.setRowTop(this.rowHeight*e);t.setRowIndex(e);return t};t.prototype.setRowCount=function(e,t){if(t===void 0){t=false}if(e===this.rowCount){return}this.rowCount=e;var r={type:Events.EVENT_MODEL_UPDATED,newData:false,newPage:false,keepRenderedRows:t,animate:false};this.eventService.dispatchEvent(r)};t.prototype.isRowPresent=function(e){var t=this.getRowNode(e.id);return!!t};__decorate$2([Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0);__decorate$2([Autowired("focusService")],t.prototype,"focusService",void 0);__decorate$2([Autowired("beans")],t.prototype,"beans",void 0);__decorate$2([PostConstruct],t.prototype,"init",null);__decorate$2([PreDestroy],t.prototype,"destroyDatasource",null);t=__decorate$2([Bean("rowModel")],t);return t}(BeanStub);var ViewportRowModelModule={version:VERSION$1,moduleName:ModuleNames.ViewportRowModelModule,rowModel:"viewport",beans:[ViewportRowModel],dependantModules:[EnterpriseCoreModule]};var defaultTooltipCss="\n.ag-sparkline-tooltip-wrapper {\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n}\n\n.ag-sparkline-tooltip {\n    position: relative;\n    font: 12px arial,sans-serif;\n    border-radius: 2px;\n    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);\n    line-height: 1.7em;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    background-color: rgb(255, 255, 255);\n    color: rgba(0,0,0, 0.67);\n}\n\n.ag-sparkline-tooltip-content {\n    padding: 0 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-title {\n    padding-left: 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-wrapper-hidden {\n    top: -10000px !important;\n}\n\n.ag-sparkline-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n";var __values=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var extent$3=extent$4,isNumber$3=isNumber$4,isString=isString$1,isStringObject=isStringObject$1,isDate=isDate$1,createId=createId$1,Padding=Padding$1;var LinearScale=LinearScale$1,BandScale$4=BandScale$5,TimeScale=TimeScale$1;var ZINDICIES;(function(e){e[e["SERIES_FILL_ZINDEX"]=50]="SERIES_FILL_ZINDEX";e[e["AXIS_LINE_ZINDEX"]=500]="AXIS_LINE_ZINDEX";e[e["SERIES_STROKE_ZINDEX"]=1e3]="SERIES_STROKE_ZINDEX";e[e["SERIES_LABEL_ZINDEX"]=1500]="SERIES_LABEL_ZINDEX";e[e["CROSSHAIR_ZINDEX"]=2e3]="CROSSHAIR_ZINDEX";e[e["SERIES_MARKERS_ZINDEX"]=2500]="SERIES_MARKERS_ZINDEX"})(ZINDICIES||(ZINDICIES={}));var SparklineAxis=function(){function e(){this.type="category";this.stroke="rgb(204, 214, 235)";this.strokeWidth=1}return e}();var Sparkline=function(){function e(){this.id=createId(this);this.seriesRect={x:0,y:0,width:0,height:0};this._context=undefined;this._container=undefined;this._data=undefined;this.padding=new Padding(3);this.xKey="x";this.yKey="y";this.dataType=undefined;this.xData=[];this.yData=[];this.min=undefined;this.max=undefined;this.yScale=new LinearScale;this.axis=new SparklineAxis;this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1};this._width=100;this._height=100;this.smallestInterval=undefined;this.layoutId=0;this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});this._onMouseMove=this.onMouseMove.bind(this);this._onMouseOut=this.onMouseOut.bind(this);var t=new Group;this.rootGroup=t;var r=document.createElement("div");r.setAttribute("class","ag-sparkline-wrapper");var n=new Scene({document:document});this.scene=n;this.canvasElement=n.canvas.element;n.root=t;n.container=r;n.resize(this.width,this.height);this.seriesRect.width=this.width;this.seriesRect.height=this.height;if(e.tooltipDocuments.indexOf(document)===-1){var i=document.createElement("style");i.innerHTML=defaultTooltipCss;document.head.insertBefore(i,document.head.querySelector("style"));e.tooltipDocuments.push(document)}this.setupDomEventListeners(this.scene.canvas.element)}Object.defineProperty(e.prototype,"context",{get:function(){return this._context},set:function(e){if(this._context!==e){this._context=e}},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"container",{get:function(){return this._container},set:function(e){if(this._container!==e){var t=this.canvasElement.parentNode;if(t!=null){t.removeChild(this.canvasElement)}if(e){e.appendChild(this.canvasElement)}this._container=e}},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){if(this._data!==e){this._data=e;this.processData();if(this.mouseMoveEvent&&this.highlightedDatum){this.updateHitPoint(this.mouseMoveEvent)}}},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){if(this._width!==e){this._width=e;this.scene.resize(e,this.height);this.scheduleLayout()}},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){if(this._height!==e){this._height=e;this.scene.resize(this.width,e);this.scheduleLayout()}},enumerable:false,configurable:true});e.prototype.update=function(){};e.prototype.updateYScale=function(){this.updateYScaleRange();this.updateYScaleDomain()};e.prototype.updateYScaleDomain=function(){};e.prototype.updateYScaleRange=function(){var e=this,t=e.yScale,r=e.seriesRect;t.range=[r.height,0]};e.prototype.updateXScale=function(){var e=this.axis.type;this.xScale=this.getXScale(e);this.updateXScaleRange();this.updateXScaleDomain()};e.prototype.updateXScaleRange=function(){this.xScale.range=[0,this.seriesRect.width]};e.prototype.updateXScaleDomain=function(){var e=this,t=e.xData,r=e.xScale;var n;if(r instanceof LinearScale||r instanceof TimeScale){n=extent$3(t)}this.xScale.domain=n?n.slice():t};e.prototype.getXScale=function(e){if(e===void 0){e="category"}switch(e){case"number":return new LinearScale;case"time":return new TimeScale;case"category":default:return new BandScale$4}};e.prototype.updateAxisLine=function(){};e.prototype.updateAxes=function(){this.updateYScale();this.updateXScale();this.updateAxisLine()};e.prototype.updateCrosshairs=function(){this.updateXCrosshairLine();this.updateYCrosshairLine()};e.prototype.generateNodeData=function(){return[]};e.prototype.getNodeData=function(){return[]};e.prototype.updateNodes=function(){};e.prototype.updateXCrosshairLine=function(){};e.prototype.updateYCrosshairLine=function(){};e.prototype.highlightDatum=function(e){this.updateNodes()};e.prototype.dehighlightDatum=function(){this.highlightedDatum=undefined;this.updateNodes();this.updateCrosshairs()};e.prototype.onMouseMove=function(e){this.mouseMoveEvent=e;this.updateHitPoint(e)};e.prototype.updateHitPoint=function(e){var t,r,n;var i=this.pickClosestSeriesNodeDatum(e.offsetX,e.offsetY);if(!i){return}var o=this.highlightedDatum;this.highlightedDatum=i;if(this.highlightedDatum&&!o||this.highlightedDatum&&o&&this.highlightedDatum!==o){this.highlightDatum(i);this.updateCrosshairs();this.scene.render()}var a=(n=(r=(t=this.processedOptions)===null||t===void 0?void 0:t.tooltip)===null||r===void 0?void 0:r.enabled)!==null&&n!==void 0?n:true;if(a){this.handleTooltip(e,i)}};e.prototype.onMouseOut=function(e){this.dehighlightDatum();this.tooltip.toggle(false);this.scene.render()};e.prototype.processData=function(){var e=this;var t=this,r=t.data,n=t.yData,i=t.xData;if(!r||this.invalidData(this.data)){return}n.length=0;i.length=0;var o=r.length;var a=this.getDataType(r);this.dataType=a;var s=this.axis.type;var l=s!=="number"&&s!=="time"?"category":s;var u=l==="number"||l==="time";var c=function(t,r){if(e.smallestInterval==undefined){e.smallestInterval={x:Infinity,y:Infinity}}var n=e.smallestInterval.x;var i=Math.abs(t-r);if(i>0&&i<n){e.smallestInterval.x=i}};var d;if(a==="number"){for(var p=0;p<o;p++){var f=p;var h=r[p];var v=this.getDatum(f,l);var g=this.getDatum(h,"number");if(u){c(v,d)}i.push(v);n.push(g);d=v}}else if(a==="array"){for(var p=0;p<o;p++){var y=r[p];if(Array.isArray(y)){var f=y[0];var h=y[1];var v=this.getDatum(f,l);var g=this.getDatum(h,"number");if(v==undefined){continue}if(u){c(v,d)}i.push(v);n.push(g);d=v}}}else if(a==="object"){var m=this,_=m.yKey,S=m.xKey;for(var p=0;p<o;p++){var y=r[p];if(typeof y==="object"&&!Array.isArray(y)){var f=y[S];var h=y[_];var v=this.getDatum(f,l);var g=this.getDatum(h,"number");if(v==undefined){continue}if(u){c(v,d)}i.push(v);n.push(g);d=v}}}this.updateAxes();this.update();this.scene.render()};e.prototype.getDataType=function(e){var t,r;try{for(var n=__values(e),i=n.next();!i.done;i=n.next()){var o=i.value;if(o!=undefined){if(isNumber$3(o)){return"number"}else if(Array.isArray(o)){return"array"}else if(typeof o==="object"){return"object"}}}}catch(e){t={error:e}}finally{try{if(i&&!i.done&&(r=n.return))r.call(n)}finally{if(t)throw t.error}}};e.prototype.getDatum=function(e,t){if(t==="number"&&isNumber$3(e)||t==="time"&&(isNumber$3(e)||isDate(e))){return e}else if(t==="category"){if(isString(e)||isDate(e)||isNumber$3(e)){return{toString:function(){return String(e)}}}else if(isStringObject(e)){return e}}};Object.defineProperty(e.prototype,"layoutScheduled",{get:function(){return!!this.layoutId},enumerable:false,configurable:true});e.prototype.scheduleLayout=function(){var e=this;if(this.layoutId){cancelAnimationFrame(this.layoutId)}this.layoutId=requestAnimationFrame((function(){e.setSparklineDimensions();if(e.invalidData(e.data)){return}e.updateXScaleRange();e.updateYScaleRange();e.updateAxisLine();e.update();e.scene.render();e.layoutId=0}))};e.prototype.setSparklineDimensions=function(){var e=this,t=e.width,r=e.height,n=e.padding,i=e.seriesRect,o=e.rootGroup;var a=t-n.left-n.right;var s=r-n.top-n.bottom;i.width=a;i.height=s;i.x=n.left;i.y=n.top;o.translationX=i.x;o.translationY=i.y};e.prototype.pickClosestSeriesNodeDatum=function(e,t){var r=Infinity;var n;var i=this.rootGroup.transformPoint(e,t);var o=this.getNodeData();for(var a=0;a<o.length;a++){var s=o[a];if(!s.point){return}var l=this.getDistance(i,s.point);if(l<=r){r=l;n=s}}return n};e.prototype.getDistance=function(e,t){return Math.abs(e.x-t.x)};e.prototype.handleTooltip=function(e,t){var r,n;var i=t.seriesDatum;var o=this.canvasElement;var a=e.clientX,s=e.clientY;var l=(r=this.processedOptions)===null||r===void 0?void 0:r.tooltip;var u={pageX:a,pageY:s,position:{xOffset:l===null||l===void 0?void 0:l.xOffset,yOffset:l===null||l===void 0?void 0:l.yOffset},container:l===null||l===void 0?void 0:l.container};if(u.container==undefined){u.container=o}var c=i.y;var d=i.x;var p=(n=l===null||l===void 0?void 0:l.enabled)!==null&&n!==void 0?n:true;var f=l===null||l===void 0?void 0:l.renderer;if(f){var h=f({context:this.context,datum:i,yValue:c,xValue:d});p=typeof h!=="string"&&h.enabled!==undefined?h.enabled:p}var v=p&&i.y!==undefined&&this.getTooltipHtml(t);if(v){this.tooltip.show(u,v)}};e.prototype.formatNumericDatum=function(e){return String(Math.round(e*10)/10)};e.prototype.formatDatum=function(e){var t=this.axis.type||"category";if(t==="number"&&typeof e==="number"){return this.formatNumericDatum(e)}else if(t==="time"&&(e instanceof Date||isNumber$3(e))){return this.defaultDateFormatter.format(e)}else{return String(e)}};e.prototype.setupDomEventListeners=function(e){e.addEventListener("mousemove",this._onMouseMove);e.addEventListener("mouseout",this._onMouseOut)};e.prototype.cleanupDomEventListeners=function(e){e.removeEventListener("mousemove",this._onMouseMove);e.removeEventListener("mouseout",this._onMouseOut)};e.prototype.invalidData=function(e){return!e||!Array.isArray(e)||e.length===0};e.prototype.destroy=function(){this.scene.container=undefined;this.container=undefined;this.cleanupDomEventListeners(this.scene.canvas.element)};e.tooltipDocuments=[];return e}();function toTooltipHtml(e,t){if(typeof e==="string"){return e}t=t||{};var r=e.content,n=r===void 0?t.content||"":r,i=e.title,o=i===void 0?t.title||undefined:i,a=e.color,s=a===void 0?t.color:a,l=e.backgroundColor,u=l===void 0?t.backgroundColor:l,c=e.opacity,d=c===void 0?t.opacity||1:c;var p;var f;if(s){p=o?'<span class="'+SparklineTooltip.class+'-title"; style="color: '+s+'">'+o+"</span>":"";f='<span class="'+SparklineTooltip.class+'-content" style="color: '+s+'">'+n+"</span>"}else{p=o?'<span class="'+SparklineTooltip.class+'-title">'+o+"</span>":"";f='<span class="'+SparklineTooltip.class+'-content">'+n+"</span>"}var h="opacity: "+d;if(u){h+="; background-color: "+u.toLowerCase()}return'<div class="'+SparklineTooltip.class+'" style="'+h+'">\n                '+p+"\n                "+f+"\n            </div>"}var SparklineTooltip=function(){function e(){this.element=document.createElement("div");var e=document.body;e.appendChild(this.element)}e.prototype.isVisible=function(){var t=this.element;if(t.classList){return!t.classList.contains(e.class+"-wrapper-hidden")}var r=t.getAttribute("class");if(r){return r.split(" ").indexOf(e.class+"-wrapper-hidden")<0}return false};e.prototype.updateClass=function(t){var r=[e.class+"-wrapper"];if(t!==true){r.push(e.class+"-wrapper-hidden")}this.element.setAttribute("class",r.join(" "))};e.prototype.show=function(e,t){var r,n,i,o;this.toggle(false);var a=this.element;if(t!==undefined){a.innerHTML=t}else if(!a.innerHTML){return}var s=(n=(r=e.position)===null||r===void 0?void 0:r.xOffset)!==null&&n!==void 0?n:10;var l=(o=(i=e.position)===null||i===void 0?void 0:i.yOffset)!==null&&o!==void 0?o:0;var u=e.pageX+s;var c=e.pageY+l;var d=a.getBoundingClientRect();var p=window.innerWidth-d.width;if(e.container){var f=e.container.getBoundingClientRect();p=f.left+(f.width-d.width)}if(u>p){u=e.pageX-a.clientWidth-s}if(typeof scrollX!=="undefined"){u+=scrollX}if(typeof scrollY!=="undefined"){c+=scrollY}a.style.left=Math.round(u)+"px";a.style.top=Math.round(c)+"px";this.toggle(true)};e.prototype.toggle=function(e){this.updateClass(e)};e.prototype.destroy=function(){var e=this.element.parentNode;if(e){e.removeChild(this.element)}};e.class="ag-sparkline-tooltip";return e}();function getMarker(e){switch(e){case"circle":return Circle;case"square":return Square;case"diamond":return Diamond;default:return Circle}}function getLineDash(e,t){if(t===void 0){t="solid"}var r={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]};var n={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};if(e==="round"||e==="square"){if(n[t]==undefined){console.warn("'"+t+"' is not a valid 'lineDash' option.");return n.solid}return n[t]}if(r[t]==undefined){console.warn("'"+t+"' is not a valid 'lineDash' option.");return r.solid}return r[t]}var __extends$6=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var extent$2=extent$4;var BandScale$3=BandScale$5;var SparklineMarker$1=function(){function e(){this.enabled=true;this.shape="circle";this.size=0;this.fill="rgb(124, 181, 236)";this.stroke="rgb(124, 181, 236)";this.strokeWidth=1;this.formatter=undefined}return e}();var SparklineLine$1=function(){function e(){this.stroke="rgb(124, 181, 236)";this.strokeWidth=1}return e}();var SparklineCrosshairs$1=function(){function e(){this.xLine={enabled:true,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:undefined};this.yLine={enabled:false,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:undefined}}return e}();var AreaSparkline=function(e){__extends$6(t,e);function t(){var t=e.call(this)||this;t.fill="rgba(124, 181, 236, 0.25)";t.strokePath=new Path;t.fillPath=new Path;t.xCrosshairLine=new Line;t.yCrosshairLine=new Line;t.areaSparklineGroup=new Group;t.xAxisLine=new Line;t.markers=new Group;t.markerSelection=Selection.select(t.markers,(function(){return t.markerFactory()}));t.markerSelectionData=[];t.marker=new SparklineMarker$1;t.line=new SparklineLine$1;t.crosshairs=new SparklineCrosshairs$1;t.rootGroup.append(t.areaSparklineGroup);t.xAxisLine.zIndex=ZINDICIES.AXIS_LINE_ZINDEX;t.fillPath.zIndex=ZINDICIES.SERIES_FILL_ZINDEX;t.strokePath.zIndex=ZINDICIES.SERIES_STROKE_ZINDEX;t.xCrosshairLine.zIndex=ZINDICIES.CROSSHAIR_ZINDEX;t.yCrosshairLine.zIndex=ZINDICIES.CROSSHAIR_ZINDEX;t.markers.zIndex=ZINDICIES.SERIES_MARKERS_ZINDEX;t.areaSparklineGroup.append([t.fillPath,t.xAxisLine,t.strokePath,t.xCrosshairLine,t.yCrosshairLine,t.markers]);return t}t.prototype.markerFactory=function(){var e=this.marker.shape;var t=getMarker(e);return new t};t.prototype.getNodeData=function(){return this.markerSelectionData};t.prototype.update=function(){var e=this.generateNodeData();if(!e){return}var t=e.nodeData,r=e.fillData,n=e.strokeData;this.markerSelectionData=t;this.updateSelection(t);this.updateNodes();this.updateStroke(n);this.updateFill(r)};t.prototype.updateYScaleDomain=function(){var e=this,t=e.yData,r=e.yScale;var n=extent$2(t);var i=0;var o=1;if(n!==undefined){i=this.min=n[0];o=this.max=n[1]}i=i<0?i:0;o=o<0?0:o;r.domain=[i,o]};t.prototype.generateNodeData=function(){var e=this,t=e.data,r=e.yData,n=e.xData,i=e.xScale,o=e.yScale;if(!t){return}var a=!(i instanceof BandScale$3);var s=!a?i.bandwidth/2:0;var l=r.length;var u=[];var c=[];var d=[];var p;var f;var h;var v;var g=o.convert(0);for(var y=0;y<l;y++){var m=r[y];var _=n[y];var S=i.convert(a?i.toDomain(_):_)+s;var b=m===undefined?NaN:o.convert(m);if(y+1<l){v=i.convert(a?i.toDomain(n[y+1]):n[y+1])+s}d.push({seriesDatum:{x:_,y:m},point:{x:S,y:b}});if(m===undefined&&h!==undefined){c.push({seriesDatum:undefined,point:{x:h,y:g}});if(v!==undefined){c.push({seriesDatum:undefined,point:{x:v,y:g}})}}else if(m!==undefined){c.push({seriesDatum:{x:_,y:m},point:{x:S,y:b}});u.push({seriesDatum:{x:_,y:m},point:{x:S,y:b}});p=p!==undefined?p:S;f=S}h=S}c.push({seriesDatum:undefined,point:{x:f,y:g}},{seriesDatum:undefined,point:{x:p,y:g}});return{nodeData:u,fillData:c,strokeData:d}};t.prototype.updateAxisLine=function(){var e=this,t=e.xScale,r=e.yScale,n=e.axis,i=e.xAxisLine;i.x1=t.range[0];i.x2=t.range[1];i.y1=i.y2=0;i.stroke=n.stroke;i.strokeWidth=n.strokeWidth;var o=r.convert(0);i.translationY=o};t.prototype.updateSelection=function(e){this.markerSelection.update(e)};t.prototype.updateNodes=function(){var e=this;var t=this,r=t.highlightedDatum,n=t.highlightStyle,i=t.marker;var o=n.size,a=n.fill,s=n.stroke,l=n.strokeWidth;var u=i.formatter;this.markerSelection.each((function(t,n,c){var d=n.point,p=n.seriesDatum;if(!d){return}var f=n===r;var h=f&&a!==undefined?a:i.fill;var v=f&&s!==undefined?s:i.stroke;var g=f&&l!==undefined?l:i.strokeWidth;var y=f&&o!==undefined?o:i.size;var m;if(u){var _=c===0;var S=c===e.markerSelectionData.length-1;var b=p.y===e.min;var C=p.y===e.max;m=u({datum:n,xValue:p.x,yValue:p.y,min:b,max:C,first:_,last:S,fill:h,stroke:v,strokeWidth:g,size:y,highlighted:f})}t.size=m&&m.size!=undefined?m.size:y;t.fill=m&&m.fill!=undefined?m.fill:h;t.stroke=m&&m.stroke!=undefined?m.stroke:v;t.strokeWidth=m&&m.strokeWidth!=undefined?m.strokeWidth:g;t.translationX=d.x;t.translationY=d.y;t.visible=m&&m.enabled!=undefined?m.enabled:i.enabled&&t.size>0}))};t.prototype.updateStroke=function(e){var t=this,r=t.strokePath,n=t.yData,i=t.line;if(n.length<2){return}var o=r.path;var a=e.length;var s=true;o.clear();for(var l=0;l<a;l++){var u=e[l],c=u.point,d=u.seriesDatum;var p=c.x;var f=c.y;if(d.y==undefined){s=true}else{if(s){o.moveTo(p,f);s=false}else{o.lineTo(p,f)}}}r.lineJoin=r.lineCap="round";r.fill=undefined;r.stroke=i.stroke;r.strokeWidth=i.strokeWidth};t.prototype.updateFill=function(e){var t=this,r=t.fillPath,n=t.yData,i=t.fill;var o=r.path;var a=e.length;o.clear();if(n.length<2){return}for(var s=0;s<a;s++){var l=e[s].point;var u=l.x;var c=l.y;if(s>0){o.lineTo(u,c)}else{o.moveTo(u,c)}}o.closePath();r.lineJoin="round";r.stroke=undefined;r.fill=i};t.prototype.updateXCrosshairLine=function(){var e=this,t=e.yScale,r=e.xCrosshairLine,n=e.highlightedDatum,i=e.crosshairs.xLine;if(!i.enabled||n==undefined){r.strokeWidth=0;return}r.y1=t.range[0];r.y2=t.range[1];r.x1=r.x2=0;r.stroke=i.stroke;r.strokeWidth=i.strokeWidth||1;r.lineCap=i.lineCap==="round"||i.lineCap==="square"?i.lineCap:undefined;var o=i.lineDash;r.lineDash=Array.isArray(o)?o:getLineDash(r.lineCap,i.lineDash);r.translationX=n.point.x};t.prototype.updateYCrosshairLine=function(){var e=this,t=e.xScale,r=e.yCrosshairLine,n=e.highlightedDatum,i=e.crosshairs.yLine;if(!i.enabled||n==undefined){r.strokeWidth=0;return}r.x1=t.range[0];r.x2=t.range[1];r.y1=r.y2=0;r.stroke=i.stroke;r.strokeWidth=i.strokeWidth||1;r.lineCap=i.lineCap==="round"||i.lineCap==="square"?i.lineCap:undefined;var o=i.lineDash;r.lineDash=Array.isArray(o)?o:getLineDash(r.lineCap,i.lineDash);r.translationY=n.point.y};t.prototype.getTooltipHtml=function(e){var t,r;var n=this.dataType;var i=e.seriesDatum;var o=i.y;var a=i.x;var s=this.formatNumericDatum(o);var l=n==="array"||n==="object"?this.formatDatum(a):undefined;var u={content:s,title:l};var c=(r=(t=this.processedOptions)===null||t===void 0?void 0:t.tooltip)===null||r===void 0?void 0:r.renderer;if(c){return toTooltipHtml(c({context:this.context,datum:i,yValue:o,xValue:a}),u)}return toTooltipHtml(u)};t.className="AreaSparkline";return t}(Sparkline);var __extends$5=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var extent$1=extent$4;var BandScale$2=BandScale$5;var SparklineMarker=function(){function e(){this.enabled=true;this.shape="circle";this.size=0;this.fill="rgb(124, 181, 236)";this.stroke="rgb(124, 181, 236)";this.strokeWidth=1;this.formatter=undefined}return e}();var SparklineLine=function(){function e(){this.stroke="rgb(124, 181, 236)";this.strokeWidth=1}return e}();var SparklineCrosshairs=function(){function e(){this.xLine={enabled:true,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:undefined};this.yLine={enabled:false,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:undefined}}return e}();var LineSparkline=function(e){__extends$5(t,e);function t(){var t=e.call(this)||this;t.linePath=new Path;t.xCrosshairLine=new Line;t.yCrosshairLine=new Line;t.lineSparklineGroup=new Group;t.markers=new Group;t.markerSelection=Selection.select(t.markers,(function(){return t.markerFactory()}));t.markerSelectionData=[];t.marker=new SparklineMarker;t.line=new SparklineLine;t.crosshairs=new SparklineCrosshairs;t.rootGroup.append(t.lineSparklineGroup);t.linePath.zIndex=ZINDICIES.SERIES_STROKE_ZINDEX;t.xCrosshairLine.zIndex=ZINDICIES.CROSSHAIR_ZINDEX;t.yCrosshairLine.zIndex=ZINDICIES.CROSSHAIR_ZINDEX;t.markers.zIndex=ZINDICIES.SERIES_MARKERS_ZINDEX;t.lineSparklineGroup.append([t.linePath,t.xCrosshairLine,t.yCrosshairLine,t.markers]);return t}t.prototype.getNodeData=function(){return this.markerSelectionData};t.prototype.markerFactory=function(){var e=this.marker.shape;var t=getMarker(e);return new t};t.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.clear();this.scheduleLayout()};t.prototype.update=function(){var e=this.generateNodeData();if(!e){return}this.markerSelectionData=e;this.updateSelection(e);this.updateNodes();this.updateLine()};t.prototype.updateYScaleDomain=function(){var e=this,t=e.yData,r=e.yScale;var n=extent$1(t);var i=0;var o=1;if(n!==undefined){i=this.min=n[0];o=this.max=n[1]}if(i===o){var a=Math.abs(i*.01);i-=a;o+=a}r.domain=[i,o]};t.prototype.generateNodeData=function(){var e=this,t=e.data,r=e.yData,n=e.xData,i=e.xScale,o=e.yScale;if(!t){return}var a=!(i instanceof BandScale$2);var s=!a?i.bandwidth/2:0;var l=[];for(var u=0;u<r.length;u++){var c=r[u];var d=n[u];if(c==undefined){continue}var p=i.convert(a?i.toDomain(d):d)+s;var f=c===undefined?NaN:o.convert(c);l.push({seriesDatum:{x:d,y:c},point:{x:p,y:f}})}return l};t.prototype.updateSelection=function(e){this.markerSelection.update(e)};t.prototype.updateNodes=function(){var e=this;var t=this,r=t.highlightedDatum,n=t.highlightStyle,i=t.marker;var o=n.size,a=n.fill,s=n.stroke,l=n.strokeWidth;var u=i.formatter;this.markerSelection.each((function(t,n,c){var d=n===r;var p=d&&a!==undefined?a:i.fill;var f=d&&s!==undefined?s:i.stroke;var h=d&&l!==undefined?l:i.strokeWidth;var v=d&&o!==undefined?o:i.size;var g;var y=n.seriesDatum,m=n.point;if(u){var _=c===0;var S=c===e.markerSelectionData.length-1;var b=y.y===e.min;var C=y.y===e.max;g=u({datum:n,xValue:y.x,yValue:y.y,min:b,max:C,first:_,last:S,fill:p,stroke:f,strokeWidth:h,size:v,highlighted:d})}t.size=g&&g.size!=undefined?g.size:v;t.fill=g&&g.fill!=undefined?g.fill:p;t.stroke=g&&g.stroke!=undefined?g.stroke:f;t.strokeWidth=g&&g.strokeWidth!=undefined?g.strokeWidth:h;t.translationX=m.x;t.translationY=m.y;t.visible=g&&g.enabled!=undefined?g.enabled:i.enabled&&t.size>0}))};t.prototype.updateLine=function(){var e=this,t=e.linePath,r=e.yData,n=e.xData,i=e.xScale,o=e.yScale,a=e.line;if(r.length<2){return}var s=!(i instanceof BandScale$2);var l=t.path;var u=r.length;var c=!s?i.bandwidth/2:0;var d=true;l.clear();for(var p=0;p<u;p++){var f=n[p];var h=r[p];var v=i.convert(s?i.toDomain(f):f)+c;var g=h===undefined?NaN:o.convert(h);if(h==undefined){d=true}else{if(d){l.moveTo(v,g);d=false}else{l.lineTo(v,g)}}}t.fill=undefined;t.stroke=a.stroke;t.strokeWidth=a.strokeWidth};t.prototype.updateXCrosshairLine=function(){var e=this,t=e.yScale,r=e.xCrosshairLine,n=e.highlightedDatum,i=e.crosshairs.xLine;if(!i.enabled||n==undefined){r.strokeWidth=0;return}r.y1=t.range[0];r.y2=t.range[1];r.x1=r.x2=0;r.stroke=i.stroke;r.strokeWidth=i.strokeWidth||1;r.lineCap=i.lineCap==="round"||i.lineCap==="square"?i.lineCap:undefined;var o=i.lineDash;r.lineDash=Array.isArray(o)?o:getLineDash(r.lineCap,i.lineDash);r.translationX=n.point.x};t.prototype.updateYCrosshairLine=function(){var e=this,t=e.xScale,r=e.yCrosshairLine,n=e.highlightedDatum,i=e.crosshairs.yLine;if(!i.enabled||n==undefined){r.strokeWidth=0;return}r.x1=t.range[0];r.x2=t.range[1];r.y1=r.y2=0;r.stroke=i.stroke;r.strokeWidth=i.strokeWidth||1;r.lineCap=i.lineCap==="round"||i.lineCap==="square"?i.lineCap:undefined;var o=i.lineDash;r.lineDash=Array.isArray(o)?o:getLineDash(r.lineCap,i.lineDash);r.translationY=n.point.y};t.prototype.getTooltipHtml=function(e){var t,r;var n=this.dataType;var i=e.seriesDatum;var o=i.y;var a=i.x;var s=this.formatNumericDatum(o);var l=n==="array"||n==="object"?this.formatDatum(a):undefined;var u={content:s,title:l};var c=(r=(t=this.processedOptions)===null||t===void 0?void 0:t.tooltip)===null||r===void 0?void 0:r.renderer;if(c){return toTooltipHtml(c({context:this.context,datum:i,yValue:o,xValue:a}),u)}return toTooltipHtml(u)};t.className="LineSparkline";return t}(Sparkline);var Label=function(){function e(){this.enabled=true;this.fontSize=8;this.fontFamily="Verdana, sans-serif";this.fontStyle=undefined;this.fontWeight=undefined;this.color="rgba(70, 70, 70, 1)"}return e}();var __extends$4=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var extent=extent$4;var BarColumnNodeTag;(function(e){e[e["Rect"]=0]="Rect";e[e["Label"]=1]="Label"})(BarColumnNodeTag||(BarColumnNodeTag={}));var BarColumnLabelPlacement;(function(e){e["InsideBase"]="insideBase";e["InsideEnd"]="insideEnd";e["Center"]="center";e["OutsideEnd"]="outsideEnd"})(BarColumnLabelPlacement||(BarColumnLabelPlacement={}));var BarColumnLabel=function(e){__extends$4(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.formatter=undefined;t.placement=BarColumnLabelPlacement.InsideEnd;return t}return t}(Label);var BarColumnSparkline=function(e){__extends$4(t,e);function t(){var t=e.call(this)||this;t.fill="rgb(124, 181, 236)";t.stroke="silver";t.strokeWidth=0;t.paddingInner=.1;t.paddingOuter=.2;t.valueAxisDomain=undefined;t.formatter=undefined;t.axisLine=new Line;t.bandWidth=0;t.sparklineGroup=new Group;t.rectGroup=new Group;t.labelGroup=new Group;t.rectSelection=Selection.select(t.rectGroup,Rect);t.labelSelection=Selection.select(t.labelGroup,Text);t.nodeSelectionData=[];t.label=new BarColumnLabel;t.rootGroup.append(t.sparklineGroup);t.rectGroup.zIndex=ZINDICIES.SERIES_FILL_ZINDEX;t.axisLine.zIndex=ZINDICIES.AXIS_LINE_ZINDEX;t.labelGroup.zIndex=ZINDICIES.SERIES_LABEL_ZINDEX;t.sparklineGroup.append([t.rectGroup,t.axisLine,t.labelGroup]);t.axisLine.lineCap="round";t.label.enabled=false;return t}t.prototype.getNodeData=function(){return this.nodeSelectionData};t.prototype.update=function(){this.updateSelections();this.updateNodes()};t.prototype.updateSelections=function(){var e=this.generateNodeData();if(!e){return}this.nodeSelectionData=e;this.updateRectSelection(e);this.updateLabelSelection(e)};t.prototype.updateNodes=function(){this.updateRectNodes();this.updateLabelNodes()};t.prototype.calculateStep=function(e){var t;var r=this,n=r.xScale,i=r.paddingInner,o=r.paddingOuter,a=r.smallestInterval;var s=n.domain[1]-n.domain[0];var l=s/((t=a===null||a===void 0?void 0:a.x)!==null&&t!==void 0?t:1)+1;var u=50;var c=Math.min(l,u);var d=c-1;var p=e/Math.max(1,2*o+d*i+c);return p};t.prototype.updateYScaleDomain=function(){var e=this,t=e.yScale,r=e.yData,n=e.valueAxisDomain;var i=extent(r);var o=0;var a=1;if(i!==undefined){o=this.min=i[0];a=this.max=i[1]}o=o<0?o:0;a=a<0?0:a;if(n){if(n[1]<a){n[1]=a}if(n[0]>o){n[0]=o}}t.domain=n?n:[o,a]};t.prototype.updateRectSelection=function(e){this.rectSelection.update(e)};t.prototype.updateRectNodes=function(){var e=this;var t=this,r=t.highlightedDatum,n=t.formatter,i=t.fill,o=t.stroke,a=t.strokeWidth;var s=this.highlightStyle,l=s.fill,u=s.stroke,c=s.strokeWidth;this.rectSelection.each((function(t,s,d){var p=s===r;var f=p&&l!==undefined?l:i;var h=p&&u!==undefined?u:o;var v=p&&c!==undefined?c:a;var g;var y=s.x,m=s.y,_=s.width,S=s.height,b=s.seriesDatum;if(n){var C=d===0;var x=d===e.nodeSelectionData.length-1;var w=b.y===e.min;var O=b.y===e.max;g=n({datum:s,xValue:b.x,yValue:b.y,width:_,height:S,min:w,max:O,first:C,last:x,fill:f,stroke:h,strokeWidth:v,highlighted:p})}t.fill=g&&g.fill||f;t.stroke=g&&g.stroke||h;t.strokeWidth=g&&g.strokeWidth||v;t.x=t.y=0;t.width=_;t.height=S;t.visible=t.height>0;t.translationX=y;t.translationY=m}))};t.prototype.updateLabelSelection=function(e){this.labelSelection.update(e,(function(e){e.tag=BarColumnNodeTag.Label;e.pointerEvents=PointerEvents.None}))};t.prototype.updateLabelNodes=function(){var e=this.label,t=e.enabled,r=e.fontStyle,n=e.fontWeight,i=e.fontSize,o=e.fontFamily,a=e.color;this.labelSelection.each((function(e,s){var l=s.label;if(l&&t){e.fontStyle=r;e.fontWeight=n;e.fontSize=i;e.fontFamily=o;e.textAlign=l.textAlign;e.textBaseline=l.textBaseline;e.text=l.text;e.x=l.x;e.y=l.y;e.fill=a;e.visible=true}else{e.visible=false}}))};t.prototype.getTooltipHtml=function(e){var t,r;var n=this.dataType;var i=e.seriesDatum;var o=i.y;var a=i.x;var s=this.formatNumericDatum(o);var l=n==="array"||n==="object"?this.formatDatum(a):undefined;var u={content:s,title:l};var c=(r=(t=this.processedOptions)===null||t===void 0?void 0:t.tooltip)===null||r===void 0?void 0:r.renderer;if(c){return toTooltipHtml(c({context:this.context,datum:i,yValue:o,xValue:a}),u)}return toTooltipHtml(u)};t.prototype.formatLabelValue=function(e){return e%1!==0?e.toFixed(1):e.toFixed(0)};return t}(Sparkline);var __extends$3=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var isNumber$2=isNumber$4;var BandScale$1=BandScale$5;var BarSparkline=function(e){__extends$3(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.updateYScaleRange=function(){var e=this,t=e.seriesRect,r=e.yScale;r.range=[0,t.width]};t.prototype.updateXScaleRange=function(){var e=this,t=e.xScale,r=e.seriesRect,n=e.paddingOuter,i=e.paddingInner;if(t instanceof BandScale$1){t.range=[0,r.height];t.paddingInner=i;t.paddingOuter=n}else{var o=this.calculateStep(r.height);var a=o*n;this.bandWidth=o*(1-i);t.range=[a,r.height-a-this.bandWidth]}};t.prototype.updateAxisLine=function(){var e=this,t=e.yScale,r=e.axis,n=e.axisLine,i=e.seriesRect;var o=r.strokeWidth;n.x1=0;n.x2=0;n.y1=0;n.y2=i.height;n.stroke=r.stroke;n.strokeWidth=o+(o%2===1?1:0);var a=t.convert(0);n.translationX=a};t.prototype.generateNodeData=function(){var e=this,t=e.data,r=e.yData,n=e.xData,i=e.xScale,o=e.yScale,a=e.fill,s=e.stroke,l=e.strokeWidth,u=e.label;if(!t){return}var c=u.fontStyle,d=u.fontWeight,p=u.fontSize,f=u.fontFamily,h=u.color,v=u.formatter,g=u.placement;var y=[];var m=o.convert(0);var _=!(i instanceof BandScale$1);for(var S=0,b=r.length;S<b;S++){var C=r[S];var x=n[S];var w=C===undefined;if(w){C=0}var O=i.convert(_?i.toDomain(x):x);var T=Math.min(C===undefined?NaN:o.convert(C),m);var E=Math.max(C===undefined?NaN:o.convert(C),m);var P=!_?i.bandwidth:this.bandWidth;var A=E-T;var R={x:m,y:O};var D=void 0;if(v){D=v({value:C})}else{D=C!==undefined&&isNumber$2(C)?this.formatLabelValue(C):""}var M=O+P/2;var N=void 0;var I="middle";var L=void 0;var k=C!==undefined&&C>=0;var F=4;if(g===BarColumnLabelPlacement.Center){N=T+A/2;L="center"}else if(g===BarColumnLabelPlacement.OutsideEnd){N=T+(k?A+F:-F);L=k?"start":"end"}else if(g===BarColumnLabelPlacement.InsideEnd){N=T+(k?A-F:F);L=k?"end":"start";var $=HdpiCanvas.getTextSize(D,f);var G=$.width||20;var B=m+G;var V=m-G;var j=k&&N<B||!k&&N>V;if(j){N=m+F*(k?1:-1);L=k?"start":"end"}}else{N=m+F*(k?1:-1);L=k?"start":"end"}y.push({x:T,y:O,width:A,height:P,fill:a,stroke:s,strokeWidth:l,seriesDatum:{x:x,y:w?undefined:C},point:R,label:{x:N,y:M,text:D,fontStyle:c,fontWeight:d,fontSize:p,fontFamily:f,textAlign:L,textBaseline:I,fill:h}})}return y};t.prototype.getDistance=function(e,t){return Math.abs(e.y-t.y)};t.className="BarSparkline";return t}(BarColumnSparkline);var __extends$2=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var isNumber$1=isNumber$4;var BandScale=BandScale$5;var ColumnSparkline=function(e){__extends$2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.updateYScaleRange=function(){var e=this,t=e.seriesRect,r=e.yScale;r.range=[t.height,0]};t.prototype.updateXScaleRange=function(){var e=this,t=e.xScale,r=e.seriesRect,n=e.paddingOuter,i=e.paddingInner;if(t instanceof BandScale){t.range=[0,r.width];t.paddingInner=i;t.paddingOuter=n}else{var o=this.calculateStep(r.width);var a=o*n;this.bandWidth=o*(1-i);t.range=[a,r.width-a-this.bandWidth]}};t.prototype.updateAxisLine=function(){var e=this,t=e.yScale,r=e.axis,n=e.axisLine,i=e.seriesRect;var o=r.strokeWidth;n.x1=0;n.x2=i.width;n.y1=0;n.y2=0;n.stroke=r.stroke;n.strokeWidth=o+(o%2===1?1:0);var a=t.convert(0);n.translationY=a};t.prototype.generateNodeData=function(){var e=this,t=e.data,r=e.yData,n=e.xData,i=e.xScale,o=e.yScale,a=e.fill,s=e.stroke,l=e.strokeWidth,u=e.label;if(!t){return}var c=u.fontStyle,d=u.fontWeight,p=u.fontSize,f=u.fontFamily,h=u.color,v=u.formatter,g=u.placement;var y=[];var m=o.convert(0);var _=!(i instanceof BandScale);for(var S=0,b=r.length;S<b;S++){var C=r[S];var x=n[S];var w=C===undefined;if(w){C=0}var O=Math.min(C===undefined?NaN:o.convert(C),m);var T=i.convert(_?i.toDomain(x):x);var E=Math.max(C===undefined?NaN:o.convert(C),m);var P=!_?i.bandwidth:this.bandWidth;var A=E-O;var R={x:T+P/2,y:m};var D=void 0;if(v){D=v({value:C})}else{D=C!==undefined&&isNumber$1(C)?this.formatLabelValue(C):""}var M=T+P/2;var N=void 0;var I="center";var L=void 0;var k=C!==undefined&&C>=0;var F=2;if(g===BarColumnLabelPlacement.Center){N=O+A/2;L="middle"}else if(g===BarColumnLabelPlacement.OutsideEnd){N=O+(k?-F:A+F);L=k?"bottom":"top"}else if(g===BarColumnLabelPlacement.InsideEnd){N=O+(k?F:A-F);L=k?"top":"bottom";var $=HdpiCanvas.getTextSize(D,f);var G=$.height||10;var B=m-G;var V=m+G;var j=k&&N>B||!k&&N<V;if(j){N=m+F*(k?-1:1);L=k?"bottom":"top"}}else{N=m+F*(k?-1:1);L=k?"bottom":"top"}y.push({x:T,y:O,width:P,height:A,fill:a,stroke:s,strokeWidth:l,seriesDatum:{x:x,y:w?undefined:C},point:R,label:{x:M,y:N,text:D,fontStyle:c,fontWeight:d,fontSize:p,fontFamily:f,textAlign:I,textBaseline:L,fill:h}})}return y};t.className="ColumnSparkline";return t}(BarColumnSparkline);var isNumber=isNumber$4;var AgSparkline=function(){function e(){}e.create=function(e,t){e=jsonMerge([e]);var r=getSparklineInstance(e.type);if(t){r.tooltip=t}initSparkline(r,e);initSparklineByType(r,e);if(e.data){r.data=e.data}r.processedOptions=e;return r};return e}();function getSparklineInstance(e){if(e===void 0){e="line"}switch(e){case"column":return new ColumnSparkline;case"bar":return new BarSparkline;case"area":return new AreaSparkline;case"line":default:return new LineSparkline}}function initSparklineByType(e,t){switch(t.type){case"bar":initBarColumnSparkline(e,t);break;case"column":initBarColumnSparkline(e,t);break;case"area":initAreaSparkline(e,t);break;case"line":default:initLineSparkline(e,t);break}}function initSparkline(e,t){setValueIfPropertyExists(e,"context",t.context,t);setValueIfPropertyExists(e,"width",t.width,t);setValueIfPropertyExists(e,"height",t.height,t);setValueIfPropertyExists(e,"container",t.container,t);setValueIfPropertyExists(e,"xKey",t.xKey,t);setValueIfPropertyExists(e,"yKey",t.yKey,t);if(t.padding){initPaddingOptions(e.padding,t.padding)}if(t.axis){initAxisOptions(e.axis,t.axis)}if(t.highlightStyle){initHighlightStyleOptions(e.highlightStyle,t.highlightStyle)}}function initLineSparkline(e,t){if(t.marker){initMarkerOptions(e.marker,t.marker)}if(t.line){initLineOptions(e.line,t.line)}if(t.crosshairs){initCrosshairsOptions(e.crosshairs,t.crosshairs)}}function initAreaSparkline(e,t){setValueIfPropertyExists(e,"fill",t.fill,t);if(t.marker){initMarkerOptions(e.marker,t.marker)}if(t.line){initLineOptions(e.line,t.line)}if(t.crosshairs){initCrosshairsOptions(e.crosshairs,t.crosshairs)}}function initBarColumnSparkline(e,t){setValueIfPropertyExists(e,"valueAxisDomain",t.valueAxisDomain,t);setValueIfPropertyExists(e,"fill",t.fill,t);setValueIfPropertyExists(e,"stroke",t.stroke,t);setValueIfPropertyExists(e,"strokeWidth",t.strokeWidth,t);setValueIfPropertyExists(e,"paddingInner",t.paddingInner,t);setValueIfPropertyExists(e,"paddingOuter",t.paddingOuter,t);setValueIfPropertyExists(e,"formatter",t.formatter,t);if(t.label){initLabelOptions(e.label,t.label)}}function initPaddingOptions(e,t){setValueIfPropertyExists(e,"top",t.top,t);setValueIfPropertyExists(e,"right",t.right,t);setValueIfPropertyExists(e,"bottom",t.bottom,t);setValueIfPropertyExists(e,"left",t.left,t)}function initMarkerOptions(e,t){setValueIfPropertyExists(e,"enabled",t.enabled,t);setValueIfPropertyExists(e,"size",t.size,t);setValueIfPropertyExists(e,"shape",t.shape,t);setValueIfPropertyExists(e,"fill",t.fill,t);setValueIfPropertyExists(e,"stroke",t.stroke,t);setValueIfPropertyExists(e,"strokeWidth",t.strokeWidth,t);setValueIfPropertyExists(e,"formatter",t.formatter,t)}function initLabelOptions(e,t){setValueIfPropertyExists(e,"enabled",t.enabled,t);setValueIfPropertyExists(e,"fontStyle",t.fontStyle,t);setValueIfPropertyExists(e,"fontWeight",t.fontWeight,t);setValueIfPropertyExists(e,"fontSize",t.fontSize,t);setValueIfPropertyExists(e,"fontFamily",t.fontFamily,t);setValueIfPropertyExists(e,"textAlign",t.textAlign,t);setValueIfPropertyExists(e,"textBaseline",t.textBaseline,t);setValueIfPropertyExists(e,"color",t.color,t);setValueIfPropertyExists(e,"formatter",t.formatter,t);setValueIfPropertyExists(e,"placement",t.placement,t)}function initLineOptions(e,t){setValueIfPropertyExists(e,"stroke",t.stroke,t);setValueIfPropertyExists(e,"strokeWidth",t.strokeWidth,t)}function initAxisOptions(e,t){setValueIfPropertyExists(e,"type",t.type,t);setValueIfPropertyExists(e,"stroke",t.stroke,t);setValueIfPropertyExists(e,"strokeWidth",t.strokeWidth,t)}function initHighlightStyleOptions(e,t){setValueIfPropertyExists(e,"fill",t.fill,t);setValueIfPropertyExists(e,"size",t.size,t);setValueIfPropertyExists(e,"stroke",t.stroke,t);setValueIfPropertyExists(e,"strokeWidth",t.strokeWidth,t)}function initCrosshairsOptions(e,t){if(e.xLine&&t.xLine){initCrosshairLineOptions(e.xLine,t.xLine)}if(e.yLine&&t.yLine){initCrosshairLineOptions(e.yLine,t.yLine)}}function initCrosshairLineOptions(e,t){setValueIfPropertyExists(e,"enabled",t.enabled,t);setValueIfPropertyExists(e,"stroke",t.stroke,t);setValueIfPropertyExists(e,"strokeWidth",t.strokeWidth,t);setValueIfPropertyExists(e,"lineDash",t.lineDash,t);setValueIfPropertyExists(e,"lineCap",t.lineCap,t)}var doOnceFlags={};function doOnce(e,t){if(doOnceFlags[t]){return}e();doOnceFlags[t]=true}var offsetValidator=function(e,t,r){if(isNumber(t)){return true}var n="AG Charts: "+e+" must be a number, the value you provided is not a valid number. Using the default of "+r+"px.";doOnce((function(){return console.warn(n)}),e+" not a number");return false};var validators={xOffset:offsetValidator,yOffset:offsetValidator};function setValueIfPropertyExists(e,t,r,n){if(t in n){if(t in e){var i=validators[t];var o=i?i(t,r,e[t]):true;if(o&&e[t]!==r){e[t]=r}}else{console.warn("Property "+t+" does not exist on the target object.")}}}var __extends$1=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __assign=function(){__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return __assign.apply(this,arguments)};var __decorate$1=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var SparklineCellRenderer=function(e){__extends$1(t,e);function t(){return e.call(this,t.TEMPLATE)||this}t.prototype.init=function(e){var t=this;var r=true;var n=function(){var n=t.getGui(),i=n.clientWidth,o=n.clientHeight;if(i===0||o===0){return}if(r){var a=__assign({data:e.value,width:i,height:o,context:{data:e.data}},e.sparklineOptions);t.sparkline=AgSparkline.create(a,t.sparklineTooltipSingleton.getSparklineTooltip());t.eSparkline.appendChild(t.sparkline.canvasElement);r=false}else{t.sparkline.width=i;t.sparkline.height=o}};var i=this.resizeObserverService.observeResize(this.getGui(),n);this.addDestroyFunc((function(){return i()}))};t.prototype.refresh=function(e){if(this.sparkline){this.sparkline.data=e.value;return true}return false};t.prototype.destroy=function(){if(this.sparkline){this.sparkline.destroy()}e.prototype.destroy.call(this)};t.TEMPLATE='<div class="ag-sparkline-wrapper">\n            <span ref="eSparkline"></span>\n        </div>';__decorate$1([RefSelector("eSparkline")],t.prototype,"eSparkline",void 0);__decorate$1([Autowired("resizeObserverService")],t.prototype,"resizeObserverService",void 0);__decorate$1([Autowired("sparklineTooltipSingleton")],t.prototype,"sparklineTooltipSingleton",void 0);return t}(Component);var __extends=function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __decorate=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var SparklineTooltipSingleton=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.postConstruct=function(){this.tooltip=new SparklineTooltip};t.prototype.getSparklineTooltip=function(){return this.tooltip};t.prototype.destroyTooltip=function(){if(this.tooltip){this.tooltip.destroy()}};__decorate([PostConstruct],t.prototype,"postConstruct",null);__decorate([PreDestroy],t.prototype,"destroyTooltip",null);t=__decorate([Bean("sparklineTooltipSingleton")],t);return t}(BeanStub);var VERSION="29.3.5";var SparklinesModule={version:VERSION,moduleName:ModuleNames.SparklinesModule,beans:[SparklineTooltipSingleton],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:SparklineCellRenderer}],dependantModules:[EnterpriseCoreModule]};var AllEnterpriseModules=[ClipboardModule,ColumnsToolPanelModule,ExcelExportModule,FiltersToolPanelModule,GridChartsModule,MasterDetailModule,MenuModule,MultiFilterModule,RangeSelectionModule,RichSelectModule,RowGroupingModule,ServerSideRowModelModule,SetFilterModule,SideBarModule,StatusBarModule,ViewportRowModelModule,SparklinesModule];var AllModules=AllCommunityModules.concat(AllEnterpriseModules);ModuleRegistry.registerModules(AllEnterpriseModules);export{AllEnterpriseModules,AllModules,ClipboardModule,ColumnsToolPanelModule,EnterpriseCoreModule,ExcelExportModule,FiltersToolPanelModule,GridChartsModule,GridLicenseManager as LicenseManager,MasterDetailModule,MenuModule,MultiFilter,MultiFilterModule,PivotDropZonePanel,PrimaryColsPanel,RangeSelectionModule,RichSelectModule,RowGroupDropZonePanel,RowGroupingModule,ServerSideRowModelModule,SetFilter,SetFilterModule,SideBarModule,SparklinesModule,StatusBarModule,ToolPanelColDefService,ValuesDropZonePanel,ViewportRowModelModule,__FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT,agCharts,exportMultipleSheetsAsExcel,getMultipleSheetsAsExcel};export default null;
//# sourceMappingURL=/sm/9f7ef74f9c2f7e4c3bd3abc69a7bca00c9f9cd39e157bfa3df2fc54c37f285cf.map